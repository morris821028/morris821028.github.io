<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Morris&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Morris&#39; Blog">
<meta property="og:url" content="http://morris821028.github.io/page/82/index.html">
<meta property="og:site_name" content="Morris&#39; Blog">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Morris&#39; Blog">
<link rel="publisher" href="108158678174364350000">
  
    <link rel="alternative" href="/atom.xml" title="Morris&#39; Blog" type="application/atom+xml">
  
  
    <meta name="google-site-verification" content="5mRgj8NanEMpGZuNfHNJNmH90RgNlrnJXsFlTaKD6Gs" />
  
  
    <link rel="shortcut icon" href="/img/f.ico">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <script src="/js/jquery-2.1.0.min.js"></script>
  <link rel="stylesheet" href="/css/style.css">
  
  <link rel="stylesheet" href="http://cdn.oesmith.co.uk/morris-0.5.1.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="http://cdn.oesmith.co.uk/morris-0.5.1.min.js"></script>
  <!-- <link rel="import" href="/bower_components/app-layout/app-layout.html"> --><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"><div id="banner-right"></div></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Morris&#39; Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          
            <a class="main-nav-link" href="/"><i class=icon-home title='Home'></i></a>
          
        
          
            <a class="main-nav-link" href="/about"><i class=icon-user title='About'></i></a>
          
        
          
            <a class="main-nav-link" href="/archives"><i class=icon-archive title='Archives'></i></a>
          
        
          
            <a class="main-nav-link" href="/tags"><i class=icon-tags title='Tags'></i></a>
          
        
          
            <a class="main-nav-link" href="/picture"><i class=icon-camera title='Pictures'></i></a>
          
        
          
            <a class="main-nav-link" href="/works"><i class=icon-trophy title='Works'></i></a>
          
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://morris821028.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        
          
          <section id="main">
  
    <article id="post-oj/uva/uva-1417" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/01/oj/uva/uva-1417/" class="article-date">
  <time datetime="2014-05-01T11:24:09.000Z" itemprop="datePublished">2014-05-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/01/oj/uva/uva-1417/">UVa 1417 - Traffic Jam</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/01/oj/uva/uva-1417/" data-id="ckq8nvy1x03c6tkvn6q8bfxma" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/01/oj/uva/uva-1417/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/線段樹/">線段樹</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>The kingdom of Tripbansai has an unusual traffic system. The city locations in the kingdom can be described as a grid and all the roads connect neighboring cities. This rectangular grid has 2 rows and C columns where every point represents a city. So there are 2 <em> C cities and 3 </em> C - 2 roads in this system.</p>
<p>Sometimes two adjacent cities become disconnected because of traffic jam, and sometimes the traffic problem has been solved so that a road can be usedd again. We can assume that every road is closed at first.</p>
<p>Ministry of Communications will give some instructions to you. Your task is to implement a program as a traffic response information system.</p>
<p>Each instruction appears as a single line in one ofthe formats below:</p>
<p><code>Close r1 c1 r2 c2</code>     Close the road connecting the adjacent cities located on (r1, c1) and (r2, c2) .<br><code>Open r1 c1 r2 c2</code>     Open the road connecting the adjacent cities located on (r1, c1) and (r2, c2) .<br><code>Ask r1 c1 r2 c2</code>     Reply with Y if there exists a way from the city on (r1, c1) to the city on (r2, c2) ;<br>    reply with N if there doesn’t.<br><code>Exit</code>     No more requests are forthcoming. The problem should exit.</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The first line ofthe input contains a single integer T (1<span>$\le$</span><!-- Has MathJax -->T<span>$\le$</span><!-- Has MathJax -->11) , representing the number of test cases that follow.</p>
<p>The first line of each test case consists of a single integer C (1<span>$\le$</span><!-- Has MathJax -->C<span>$\le$</span><!-- Has MathJax -->100000) , which is the number of columns.</p>
<p>There are some lines following, each for an instruction. Each test case ends with an instruction ``Exit”. There are no more than 100000 instructions in each test case. All the roads are closed initially, and each case is an independent problem.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For each instruction <code>Ask r1 c1 r2 c2</code>, display a line containing <code>Y</code> or <code>N</code>.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">3</div><div class="line">2</div><div class="line">Open 1 1 1 2</div><div class="line">Open 1 2 2 2</div><div class="line">Ask 1 1 2 2</div><div class="line">Ask 2 1 2 2</div><div class="line">Exit</div><div class="line">3</div><div class="line">Open 1 1 1 2</div><div class="line">Ask 1 1 1 2</div><div class="line">Close 1 1 1 2</div><div class="line">Ask 1 1 1 2</div><div class="line">Exit</div><div class="line">2</div><div class="line">Open 1 1 1 2</div><div class="line">Open 1 2 2 2</div><div class="line">Open 2 1 2 2</div><div class="line">Ask 1 1 2 1</div><div class="line">Exit</div></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Y</div><div class="line">N</div><div class="line">Y</div><div class="line">N</div><div class="line">Y</div></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p><strong> 題目描述： </strong></p>
<p>對於一個 2 x C 的方格點來說，將會有 <code>3 * C - 2</code> 條邊。</p>
<p><strong> 題目解法： </strong></p>
<p>維護一個區間角落四個點之間的連接資訊，也就是總共六種。</p>
<ul>
<li>c[0] 左上右上</li>
<li>c[1] 左上右下</li>
<li>c[2] 左下右上</li>
<li>c[3] 左下右下</li>
<li>c[4] 左上左下</li>
<li>c[5] 右上右下</li>
</ul>
<p>上方 <code>r = 1</code> 下方 <code>r = 2</code> 左方 <code>c = left</code> 右方 <code>c = right</code></p>
<p>對於區間 <code>[l, r]</code> 我們只維護這個區間的資訊，不考慮繞此外的結果。<br>而對於區間的編號，由左而右，構成 0, 1, 2, 3, …, C，每一個可以看作是一個方格。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt; </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></div><div class="line">    <span class="keyword">int</span> c[<span class="number">6</span>];</div><div class="line">&#125;; <span class="comment">// - \ / _ | |</span></div><div class="line">Node ST[<span class="number">262144</span> + <span class="number">10</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(l &gt; r)	<span class="keyword">return</span>;</div><div class="line">    <span class="keyword">if</span>(l == r) &#123;</div><div class="line">        <span class="built_in">memset</span>(&amp;ST[k], <span class="number">0</span>, <span class="keyword">sizeof</span>(ST[k]));</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> mid = (l + r)/<span class="number">2</span>;</div><div class="line">    build(k&lt;&lt;<span class="number">1</span>, l, mid);</div><div class="line">    build(k&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, mid+<span class="number">1</span>, r);</div><div class="line">&#125;</div><div class="line"><span class="function">Node <span class="title">combine</span><span class="params">(Node s1, Node s2)</span> </span>&#123;</div><div class="line">    Node s;</div><div class="line">    s.c[<span class="number">0</span>] = (s1.c[<span class="number">0</span>] &amp;&amp; s2.c[<span class="number">0</span>]) || (s1.c[<span class="number">1</span>] &amp;&amp; s2.c[<span class="number">2</span>]);</div><div class="line">    s.c[<span class="number">1</span>] = (s1.c[<span class="number">0</span>] &amp;&amp; s2.c[<span class="number">1</span>]) || (s1.c[<span class="number">1</span>] &amp;&amp; s2.c[<span class="number">3</span>]);</div><div class="line">    s.c[<span class="number">2</span>] = (s1.c[<span class="number">2</span>] &amp;&amp; s2.c[<span class="number">0</span>]) || (s1.c[<span class="number">3</span>] &amp;&amp; s2.c[<span class="number">2</span>]);</div><div class="line">    s.c[<span class="number">3</span>] = (s1.c[<span class="number">2</span>] &amp;&amp; s2.c[<span class="number">1</span>]) || (s1.c[<span class="number">3</span>] &amp;&amp; s2.c[<span class="number">3</span>]);</div><div class="line">    s.c[<span class="number">4</span>] = (s1.c[<span class="number">4</span>]) || (s1.c[<span class="number">0</span>] &amp;&amp; s2.c[<span class="number">4</span>] &amp;&amp; s1.c[<span class="number">3</span>]);</div><div class="line">    s.c[<span class="number">5</span>] = (s2.c[<span class="number">5</span>]) || (s2.c[<span class="number">0</span>] &amp;&amp; s1.c[<span class="number">5</span>] &amp;&amp; s2.c[<span class="number">3</span>]);</div><div class="line">    <span class="keyword">return</span> s;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> qidx, <span class="keyword">int</span> qfield, <span class="keyword">int</span> qval)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(l &gt; r)	<span class="keyword">return</span>;</div><div class="line">    <span class="keyword">if</span>(l == r) &#123;</div><div class="line">        ST[k].c[qfield] = qval;</div><div class="line">        ST[k].c[<span class="number">1</span>] = (ST[k].c[<span class="number">0</span>] &amp;&amp; ST[k].c[<span class="number">5</span>]) || (ST[k].c[<span class="number">3</span>] &amp;&amp; ST[k].c[<span class="number">4</span>]);</div><div class="line">        ST[k].c[<span class="number">2</span>] = (ST[k].c[<span class="number">0</span>] &amp;&amp; ST[k].c[<span class="number">4</span>]) || (ST[k].c[<span class="number">3</span>] &amp;&amp; ST[k].c[<span class="number">5</span>]);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> mid = (l + r)/<span class="number">2</span>;</div><div class="line">    <span class="keyword">if</span>(qidx &gt; mid)</div><div class="line">        modify(k&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, mid+<span class="number">1</span>, r, qidx, qfield, qval);</div><div class="line">    <span class="keyword">else</span></div><div class="line">        modify(k&lt;&lt;<span class="number">1</span>, l, mid, qidx, qfield, qval);</div><div class="line">    ST[k] = combine(ST[k&lt;&lt;<span class="number">1</span>], ST[k&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</div><div class="line">&#125;</div><div class="line"><span class="function">Node <span class="title">query</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> ql, <span class="keyword">int</span> qr)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(ql &lt;= l &amp;&amp; r &lt;= qr)</div><div class="line">        <span class="keyword">return</span> ST[k];</div><div class="line">    <span class="keyword">int</span> mid = (l + r)/<span class="number">2</span>;</div><div class="line">    <span class="keyword">if</span>(ql &gt; mid)</div><div class="line">        <span class="keyword">return</span> query(k&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, mid+<span class="number">1</span>, r, ql, qr);</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(qr &lt;= mid)</div><div class="line">        <span class="keyword">return</span> query(k&lt;&lt;<span class="number">1</span>, l, mid, ql, qr);</div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="keyword">return</span> combine(query(k&lt;&lt;<span class="number">1</span>, l, mid, ql, qr), </div><div class="line">                        query(k&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, mid+<span class="number">1</span>, r, ql, qr));</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> testcase, C;</div><div class="line">    <span class="keyword">int</span> r1, r2, c1, c2;</div><div class="line">    <span class="keyword">int</span> lines = <span class="number">0</span>;</div><div class="line">    <span class="keyword">char</span> cmd[<span class="number">10</span>];</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;testcase);</div><div class="line">    <span class="keyword">while</span>(testcase--) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;C);</div><div class="line">        <span class="built_in">memset</span>(ST, <span class="number">0</span>, <span class="keyword">sizeof</span>(ST));</div><div class="line">        build(<span class="number">1</span>, <span class="number">0</span>, C);</div><div class="line">        <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%s"</span>, cmd) == <span class="number">1</span> &amp;&amp; cmd[<span class="number">0</span>] != <span class="string">'E'</span>) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d %d %d %d"</span>, &amp;r1, &amp;c1, &amp;r2, &amp;c2);</div><div class="line">            <span class="keyword">if</span>(cmd[<span class="number">0</span>] == <span class="string">'O'</span> || cmd[<span class="number">0</span>] == <span class="string">'C'</span>) &#123; <span class="comment">// open</span></div><div class="line">                <span class="keyword">int</span> qval = cmd[<span class="number">0</span>] == <span class="string">'O'</span> ? <span class="number">1</span> : <span class="number">0</span>;</div><div class="line">                <span class="keyword">if</span>(c1 != c2) &#123;</div><div class="line">                    modify(<span class="number">1</span>, <span class="number">0</span>, C, min(c1, c2), r1 == <span class="number">1</span> ? <span class="number">0</span> : <span class="number">3</span>, qval);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    modify(<span class="number">1</span>, <span class="number">0</span>, C, min(c1, c2) - <span class="number">1</span>, <span class="number">5</span>, qval);</div><div class="line">                    modify(<span class="number">1</span>, <span class="number">0</span>, C, min(c1, c2), <span class="number">4</span>, qval);</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">if</span>(c1 &gt; c2) &#123;</div><div class="line">                    swap(c1, c2);</div><div class="line">                    swap(r1, r2);</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="keyword">if</span>(r1 == r2 &amp;&amp; c1 == c2) &#123;</div><div class="line">                    <span class="built_in">puts</span>(<span class="string">"Y"</span>);</div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span>(r1 != r2 &amp;&amp; c1 == c2) &#123;</div><div class="line">                    Node l = query(<span class="number">1</span>, <span class="number">0</span>, C, <span class="number">0</span>, c1 - <span class="number">1</span>);</div><div class="line">                    Node r = query(<span class="number">1</span>, <span class="number">0</span>, C, c1, C);</div><div class="line">                    <span class="keyword">if</span>(l.c[<span class="number">5</span>] || r.c[<span class="number">4</span>])</div><div class="line">                        <span class="built_in">puts</span>(<span class="string">"Y"</span>);</div><div class="line">                    <span class="keyword">else</span></div><div class="line">                        <span class="built_in">puts</span>(<span class="string">"N"</span>);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    Node l = query(<span class="number">1</span>, <span class="number">0</span>, C, <span class="number">0</span>, c1 - <span class="number">1</span>);</div><div class="line">                    Node r = query(<span class="number">1</span>, <span class="number">0</span>, C, c2, C);</div><div class="line">                    Node m = query(<span class="number">1</span>, <span class="number">0</span>, C, c1, c2 - <span class="number">1</span>);</div><div class="line">                    <span class="keyword">int</span> kc[<span class="number">2</span>][<span class="number">2</span>] = &#123; &#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">2</span>, <span class="number">3</span>&#125; &#125;;</div><div class="line">                    <span class="keyword">if</span>(m.c[kc[r1 - <span class="number">1</span>][r2 - <span class="number">1</span>]] || </div><div class="line">                        (l.c[<span class="number">5</span>] &amp;&amp; m.c[kc[(<span class="number">3</span> - r1) - <span class="number">1</span>][r2 - <span class="number">1</span>]]) ||</div><div class="line">                        (r.c[<span class="number">4</span>] &amp;&amp; m.c[kc[r1 - <span class="number">1</span>][(<span class="number">3</span> - r2) - <span class="number">1</span>]]) ||</div><div class="line">                        (l.c[<span class="number">5</span>] &amp;&amp; r.c[<span class="number">4</span>] &amp;&amp; m.c[kc[(<span class="number">3</span> - r1) - <span class="number">1</span>][(<span class="number">3</span> - r2) - <span class="number">1</span>]]))</div><div class="line">                        <span class="built_in">puts</span>(<span class="string">"Y"</span>);</div><div class="line">                    <span class="keyword">else</span></div><div class="line">                        <span class="built_in">puts</span>(<span class="string">"N"</span>);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-1608" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/01/oj/uva/uva-1608/" class="article-date">
  <time datetime="2014-05-01T11:04:03.000Z" itemprop="datePublished">2014-05-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/01/oj/uva/uva-1608/">UVa 1608 - Non-boring sequences</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/01/oj/uva/uva-1608/" data-id="ckq8nvy3903dftkvn14ncw76q" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/01/oj/uva/uva-1608/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/遞歸/">遞歸</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>We were afraid of making this problem statement too boring, so we decided to keep it short. A sequence is called non-boring if its every connected subsequence contains a unique element, i.e. an element such that no other element of that subsequence has the same value.<br>Given a sequence of integers, decide whether it is non-boring.</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The first line of the input contains the number of test cases T. The descriptions of the test cases follow:<br>Each test case starts with an integer n (1 &lt;= n &lt;= 200000) denoting the length of the sequence. In the next line the n elements of the sequence follow, separated with single spaces. The elements are non-negative integers less than 10^9.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>Print the answers to the test cases in the order in which they appear in the input. For each test case print a single line containing the word <code>non-boring</code> or <code>boring</code>.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">4</div><div class="line">5</div><div class="line">1 2 3 4 5</div><div class="line">5</div><div class="line">1 1 1 1 1</div><div class="line">5</div><div class="line">1 2 3 2 1</div><div class="line">5</div><div class="line">1 1 2 1 1</div></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">non-boring</div><div class="line">boring</div><div class="line">non-boring</div><div class="line">boring</div></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p><strong> 題目描述： </strong></p>
<p>對於所有連續區間，都符合至少有一個獨特的數字。即每個區間中都會有一個數字不重複。</p>
<p><strong> 題目解法： </strong></p>
<p>對於一個區間 <code>[l, r]</code> 來說，符合條件時，會存在一個獨特的數字位於 <code>m</code>，則對於 <code>i in [l, m-1] and j in [m+1, r]</code>，所有 <code>[i, j]</code> 產生的區間必然會符合，則遞歸下去查找 <code>[l, m-1]</code> 和 <code>[m+1, r]</code> 有沒有符合。</p>
<p>這題有趣的地方在於－如何快速得到這個獨特數字，不過也不難想地，建出數字的前一個相同和下一個相同。判斷該數字在區間是獨特時，則前一個和下一個皆不會在區間中。</p>
<p>這樣仍不會通過測資，如果是想要接近中間的方式去切割，則會接受 TLE 的殘酷事實，當初在想是不是遞迴太深還怎麼的，這裡留下困惑，根據快速排序的經驗，如果切割點在中間是比較好的，複雜度為 <code>O(n log n)</code>。</p>
<figure class="highlight plain"><figcaption><span>lang: cpp</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt; </div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">using namespace std;</div><div class="line">int A[262144];</div><div class="line">int NEXT[262144], PREV[262144];</div><div class="line">map&lt;int, int&gt; R;</div><div class="line">int dfs(int l, int r) &#123;</div><div class="line">    if(l &gt;= r)	return 1;</div><div class="line">    for(int i = 0; i &lt;= (r-l+1)/2; i++) &#123;</div><div class="line">        if(NEXT[l+i] &gt; r &amp;&amp; PREV[l+i] &lt; l)</div><div class="line">            return dfs(l, l+i-1) &amp;&amp; dfs(l+i+1, r);</div><div class="line">        if(NEXT[r-i] &gt; r &amp;&amp; PREV[r-i] &lt; l)</div><div class="line">            return dfs(l, r-i-1) &amp;&amp; dfs(r-i+1, r);</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div><div class="line">int main() &#123;</div><div class="line">    int testcase, n;</div><div class="line">    scanf(&quot;%d&quot;, &amp;testcase);</div><div class="line">    while(testcase--) &#123;</div><div class="line">        scanf(&quot;%d&quot;, &amp;n);</div><div class="line">        for(int i = 1; i &lt;= n; i++) &#123;</div><div class="line">            scanf(&quot;%d&quot;, &amp;A[i]);</div><div class="line">            NEXT[i] = n+1;</div><div class="line">            PREV[i] = 0;</div><div class="line">        &#125;</div><div class="line">        R.clear();</div><div class="line">        for(int i = 1; i &lt;= n; i++) &#123;</div><div class="line">            PREV[i] = R[A[i]], NEXT[PREV[i]] = i;</div><div class="line">            R[A[i]] = i;</div><div class="line">        &#125;</div><div class="line">        puts(dfs(1, n) ? &quot;non-boring&quot; : &quot;boring&quot;);</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div><div class="line">/*</div><div class="line">20</div><div class="line">6</div><div class="line">1 2 3 1 2 3</div><div class="line">5</div><div class="line">1 2 3 4 5</div><div class="line">5</div><div class="line">1 1 1 1 1</div><div class="line">5</div><div class="line">1 2 3 2 1</div><div class="line">5</div><div class="line">1 1 2 1 1</div><div class="line">*/</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-12345" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/01/oj/uva/uva-12345/" class="article-date">
  <time datetime="2014-05-01T08:54:48.000Z" itemprop="datePublished">2014-05-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/01/oj/uva/uva-12345/">UVa 12345 - Dynamic len(set(a[L:R]))</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/01/oj/uva/uva-12345/" data-id="ckq8nvxtw034itkvnphp98n5d" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/01/oj/uva/uva-12345/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/塊狀表/">塊狀表</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>In python, we can use len(start(a[L:R])) to calculate the number of distinct values of elements a[L], a[L+1], …, a[R-1]. </p>
<p>Here are some interactive examples that may help you understand how it is done. Remember that the indices of python lists start from 0. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; a=[1,2,1,3,2,1,4]</div><div class="line">&gt;&gt;&gt; print a[1:6]</div><div class="line">[2, 1, 3, 2, 1]</div><div class="line">&gt;&gt;&gt; print set(a[1:6])</div><div class="line">set([1, 2, 3])</div><div class="line">&gt;&gt;&gt; print len(set(a[1:6]))</div><div class="line">3</div><div class="line">&gt;&gt;&gt; a[3]=2</div><div class="line">&gt;&gt;&gt; print len(set(a[1:6]))</div><div class="line">2</div><div class="line">&gt;&gt;&gt; print len(set(a[3:5]))</div><div class="line">1</div></pre></td></tr></table></figure>
<p>Your task is to simulate this process.</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>There will be only one test case. The first line contains two integers n and m (1 ≤ n,m ≤ 50,000). The next line contains the original list.</p>
<p>All the integers are between 1 and 1,000,000 (inclusive). The next m lines contain the statements that you need to execute.</p>
<p>A line formatted as “M x y” (1 ≤ y ≤ 1,000,000) means “a[x] = y”, and a line formatted as “Q x y” means “print len(set(a[x:y]))”.</p>
<p>It is guaranteed that the statements will not cause “index out of range” error.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>Print the simulated result, one line for each query.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">7 4</div><div class="line">1 2 1 3 2 1 4</div><div class="line">Q 1 6</div><div class="line">M 3 2</div><div class="line">Q 1 6</div><div class="line">Q 3 5</div></pre></td></tr></table></figure>
<h2 id="Output-for-Sample-Input"><a href="#Output-for-Sample-Input" class="headerlink" title="Output for Sample Input"></a>Output for Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">3</div><div class="line">2</div><div class="line">1</div></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p><strong> 題目描述：</strong></p>
<ol>
<li>支持查找區間內有多少不同數字。</li>
<li>支持單點值修改</li>
</ol>
<p><strong> 題目解法：</strong></p>
<p>維護每一個數字的前面相同數字的位置，如果前面沒有一樣的就是 <code>-1</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">  i   0  1  2  3  4  5  6</div><div class="line">A[]   1  2  1  3  2  1  4</div><div class="line">P[]  -1 -1  0 -1  1  2 -1</div></pre></td></tr></table></figure>
<p>對於詢問 [l, r]，返回 P[l, r] 內小於 l 的個數。</p>
<p>這裡使用塊狀表維護資訊，也可以使用 線段樹 + 平衡樹。</p>
<ul>
<li><p>塊狀表 作法</p>
<ul>
<li>對於詢問<br>  對於完整的塊進行二分搜尋。如果所在是不完整的塊，則窮舉搜尋。</li>
<li><p>對於修改</p>
<ul>
<li>向後搜索舊值<br>  將指向自己的修改成原本指向的。</li>
<li>向前搜索新值<br>  將指向連到前方的相同數字。</li>
<li>向後搜索新值<br>  將後面最靠近的相同數字連向自己。</li>
</ul>
</li>
<li><p>維護資訊</p>
<ul>
<li>堆的 prev 排序後的資訊<br>  用在詢問 query 區間內小於 l 的二分搜</li>
<li>堆的 value 排序後的資訊<br>  維護 prev 時，查找前一個和後一個的時候使用。</li>
</ul>
</li>
<li>堆更新時，最簡單是直接排序，複雜度 <code>O(sqrt(n) * log(sqrt(n)))</code> 看起來是不會很多，如果不使用這種方式，則必須對 prev 和 value 數組增加映射來找到相對應的原位置，然後用插入排序的方式，達到 <code>O(sqrt(n))</code>。但是在 UVa 運行前者在 1.200 s 左右，基本上可以不用再優化，紀錄的資訊增加一倍 又或者 代碼要長一點。</li>
</ul>
</li>
</ul>
<p>每一個操作約在 <code>O(sqrt(n))</code> 時間內完整，塊狀表不用做合併操作。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> pSIZE, pCOUNT;</div><div class="line"><span class="keyword">int</span> Pval[<span class="number">256</span>][<span class="number">256</span>], Ppre[<span class="number">256</span>][<span class="number">256</span>], Plen[<span class="number">256</span>];</div><div class="line"><span class="keyword">int</span> A[<span class="number">65536</span>], P[<span class="number">65536</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> pxIdx = <span class="number">-1</span>, pyIdx = pSIZE;</div><div class="line">    <span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; PREV;</div><div class="line">    <span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;::iterator it;</div><div class="line">    </div><div class="line">    <span class="built_in">memset</span>(Plen, <span class="number">0</span>, <span class="keyword">sizeof</span>(Plen));</div><div class="line">    </div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">        <span class="keyword">if</span>(pyIdx == pSIZE)</div><div class="line">            pxIdx++, pyIdx = <span class="number">0</span>;</div><div class="line">        Pval[pxIdx][pyIdx] = A[i];</div><div class="line">        it = PREV.find(A[i]);</div><div class="line">        <span class="keyword">if</span>(it == PREV.end()) &#123;</div><div class="line">            Ppre[pxIdx][pyIdx] = <span class="number">-1</span>;</div><div class="line">            PREV[A[i]] = i;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            Ppre[pxIdx][pyIdx] = it-&gt;second;</div><div class="line">            it-&gt;second = i;</div><div class="line">        &#125;</div><div class="line">        P[i] = Ppre[pxIdx][pyIdx];</div><div class="line">        pyIdx++;</div><div class="line">        Plen[pxIdx] = pyIdx;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    pCOUNT = pxIdx + <span class="number">1</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pCOUNT; i++) &#123;</div><div class="line">        sort(Pval[i], Pval[i] + Plen[i]);</div><div class="line">        sort(Ppre[i], Ppre[i] + Plen[i]);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> B = L;</div><div class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(L%pSIZE &amp;&amp; L &lt;= R) &#123;</div><div class="line">        <span class="keyword">if</span>(P[L] &lt; B)	ret++;</div><div class="line">        L++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">while</span>((R+<span class="number">1</span>)%pSIZE &amp;&amp; L &lt;= R) &#123;</div><div class="line">        <span class="keyword">if</span>(P[R] &lt; B)	ret++;</div><div class="line">        R--;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(L &gt; R)	<span class="keyword">return</span> ret;</div><div class="line">    L /= pSIZE, R /= pSIZE;</div><div class="line">    <span class="keyword">while</span>(L &lt;= R) &#123;</div><div class="line">        <span class="keyword">int</span> cnt = upper_bound(Ppre[L], Ppre[L] + pSIZE, B - <span class="number">1</span>) - Ppre[L];</div><div class="line">        ret += cnt;</div><div class="line">        L++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">updatePrev</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = x * pSIZE, j = <span class="number">0</span>; j &lt; Plen[x]; i++, j++)</div><div class="line">        Ppre[x][j] = P[i];</div><div class="line">    sort(Ppre[x], Ppre[x] + Plen[x]);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = x * pSIZE, j = <span class="number">0</span>; j &lt; Plen[x]; i++, j++)</div><div class="line">        Pval[x][j] = A[i], Ppre[x][j] = P[i];</div><div class="line">    sort(Pval[x], Pval[x] + Plen[x]);</div><div class="line">    sort(Ppre[x], Ppre[x] + Plen[x]);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">getNext</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> val, <span class="keyword">int</span> &amp;NEXT, <span class="keyword">int</span> &amp;nx)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> y = x/pSIZE * pSIZE + Plen[x / pSIZE] - <span class="number">1</span>;</div><div class="line">    NEXT = <span class="number">0x3f3f3f3f</span>, nx = <span class="number">-1</span>;</div><div class="line">    <span class="keyword">while</span>(x%pSIZE &amp;&amp; x &lt;= y) &#123;</div><div class="line">        <span class="keyword">if</span>(A[x] == val) &#123;</div><div class="line">            NEXT = x, nx = x / pSIZE;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        x++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> L = x / pSIZE, R = pCOUNT - <span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span>(L * pSIZE &lt; x)	<span class="keyword">return</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = L; i &lt;= R; i++) &#123;</div><div class="line">        <span class="keyword">int</span> pos = binary_search(Pval[i], Pval[i] + Plen[i], val);</div><div class="line">        <span class="keyword">if</span>(pos == <span class="literal">true</span>) &#123;</div><div class="line">            NEXT = i * pSIZE;</div><div class="line">            <span class="keyword">while</span>(A[NEXT] != val)	NEXT++;</div><div class="line">            nx = i;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">getPrev</span><span class="params">(<span class="keyword">int</span> y, <span class="keyword">int</span> val, <span class="keyword">int</span> &amp;PREV, <span class="keyword">int</span> &amp;px)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> x = <span class="number">0</span>;</div><div class="line">    PREV = <span class="number">-1</span>, px = <span class="number">-1</span>;</div><div class="line">    <span class="keyword">while</span>((y+<span class="number">1</span>)%pSIZE &amp;&amp; x &lt;= y) &#123;</div><div class="line">        <span class="keyword">if</span>(A[y] == val) &#123;</div><div class="line">            PREV = y, px = y / pSIZE;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        y--;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> L = <span class="number">0</span>, R = y / pSIZE;</div><div class="line">    <span class="keyword">if</span>(R * pSIZE &gt; y)	<span class="keyword">return</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = R; i &gt;= L; i--) &#123;</div><div class="line">        <span class="keyword">int</span> pos = binary_search(Pval[i], Pval[i] + Plen[i], val);</div><div class="line">        <span class="keyword">if</span>(pos == <span class="literal">true</span>) &#123;</div><div class="line">            PREV = i * pSIZE + Plen[i] - <span class="number">1</span>;</div><div class="line">            <span class="keyword">while</span>(A[PREV] != val)	PREV--;</div><div class="line">            px = i;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> X, <span class="keyword">int</span> nval)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(A[X] == nval)	<span class="keyword">return</span> ;</div><div class="line">    <span class="keyword">int</span> oval = A[X];</div><div class="line">    <span class="keyword">int</span> NEXT, PREV, nx, px;</div><div class="line">    PREV = P[X], px = <span class="number">-1</span>;</div><div class="line">    <span class="keyword">if</span>(PREV &gt;= <span class="number">0</span>)	px = PREV / pSIZE;</div><div class="line">    </div><div class="line">    getNext(X + <span class="number">1</span>, oval, NEXT, nx);</div><div class="line">    <span class="keyword">if</span>(nx != <span class="number">-1</span>) &#123;</div><div class="line">        P[NEXT] = PREV;</div><div class="line">        updatePrev(nx);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    getNext(X + <span class="number">1</span>, nval, NEXT, nx);</div><div class="line">    <span class="keyword">if</span>(nx != <span class="number">-1</span>) &#123;</div><div class="line">        P[NEXT] = X;</div><div class="line">        updatePrev(nx);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    getPrev(X - <span class="number">1</span>, nval, PREV, px);</div><div class="line">    A[X] = nval, P[X] = PREV;</div><div class="line">    update(X / pSIZE);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="comment">//	freopen("in.txt", "r+t", stdin);</span></div><div class="line">    <span class="comment">//	freopen("out2.txt", "w+t", stdout);</span></div><div class="line">    <span class="keyword">int</span> n, m, L, R;</div><div class="line">    <span class="keyword">char</span> cmd[<span class="number">4</span>];</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;n, &amp;m) == <span class="number">2</span>) &#123;</div><div class="line">        <span class="keyword">for</span>(pSIZE = <span class="number">1</span>; pSIZE * pSIZE &lt; n; pSIZE++);</div><div class="line">        </div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</div><div class="line">        build(n);</div><div class="line">        </div><div class="line">        <span class="keyword">while</span>(m--) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s %d %d"</span>, cmd, &amp;L, &amp;R);</div><div class="line">            <span class="keyword">if</span>(cmd[<span class="number">0</span>] == <span class="string">'Q'</span>) &#123;</div><div class="line">                R--;</div><div class="line">                <span class="keyword">int</span> r = query(L, R);</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, r);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                modify(L, R);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> 30 50</span></div><div class="line"><span class="comment"> 4 19 18 17 16 7 16 9 18 14 4 11 4 2 8 8 1 3 1 5 5 8 3 8 11 17 10 0 2 16</span></div><div class="line"><span class="comment"> M 20 12 </span></div><div class="line"><span class="comment"> Q 2 29</span></div><div class="line"><span class="comment"> M 8 9</span></div><div class="line"><span class="comment"> Q 7 7</span></div><div class="line"><span class="comment"> M 25 12</span></div><div class="line"><span class="comment"> M 19 13</span></div><div class="line"><span class="comment"> Q 12 22</span></div><div class="line"><span class="comment"> Q 8 11</span></div><div class="line"><span class="comment"> M 5 5</span></div><div class="line"><span class="comment"> M 15 8</span></div><div class="line"><span class="comment"> Q 9 26</span></div><div class="line"><span class="comment"> */</span></div></pre></td></tr></table></figure>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-note/ccpc-2014" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/28/note/ccpc-2014/" class="article-date">
  <time datetime="2014-04-28T11:18:14.000Z" itemprop="datePublished">2014-04-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/雜言筆記/">雜言筆記</a>
  </div>

  </div>
  <div class="article-inner ">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/img/MG_7452.jpg" rel="gallery_ckq8nvx8002fitkvnbe3awmvr">
        <img src="/img/MG_7452.jpg" itemprop="image">
      </a>
    
      <a class="article-gallery-img fancybox" href="/img/DSCF6339.jpg" rel="gallery_ckq8nvx8002fitkvnbe3awmvr">
        <img src="/img/DSCF6339.jpg" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/28/note/ccpc-2014/">CCPC 2014 中程杯紀錄</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/04/28/note/ccpc-2014/" data-id="ckq8nvx8002fitkvnbe3awmvr" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/04/28/note/ccpc-2014/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CCPC/">CCPC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/中程杯/">中程杯</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h1 id="序"><a href="#序" class="headerlink" title="序"></a>序</h1><p>在此先感謝 inker 帶我出門！當然也感謝 <strong> 彰師大 </strong> 這次辦的程式競賽。這是一場久違的比賽，同時也是這學期最後一場，原因是因為太久沒參賽，導致往後的桂冠賽也無法參加。</p>
<p>至於討厭比賽的問題，這一篇就不多說了。記得下次繼續支持彰師大資工辦的活動，免得像靜宜大學被玩壞了。 <a href="http://ccpc.csie.ncue.edu.tw/#rule-pn" target="_blank" rel="external">CCPC 官網</a></p>
<h1 id="賽前"><a href="#賽前" class="headerlink" title="賽前"></a>賽前</h1><p>比賽前日進發 inker 豪宅，中間歷經坐錯區間車，到比賽會場前，徒步走了三十分鐘到火車站搭車 … 各種經歷深感出門是件難事。跟我肯定是不幸的，應該多少有點關聯。</p>
<p>上次比賽是很久之前的事情，想到這次還會遭遇國手，還有清華交大的選手，深感害怕。在這情況下，要出門見人什麼的，讓我窩回宿舍吧！</p>
<h1 id="題目"><a href="#題目" class="headerlink" title="題目"></a>題目</h1><h2 id="Problem-A-Non-boring-sequences"><a href="#Problem-A-Non-boring-sequences" class="headerlink" title="Problem A Non-boring sequences"></a>Problem A Non-boring sequences</h2><p><a href="http://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;category=24&amp;page=show_problem&amp;problem=4483" target="_blank" rel="external">UVa 1608 - Non-boring sequences</a></p>
<p>結果題目還是讀錯了，對於任意連續區間，都存在一個獨特的數字。</p>
<p>很容易誤解 <code>connected subsequence</code> 簡單的說就是相鄰兩個元素。<br>這題由於讀題錯誤，在全場第一個送出的同時拿下的 <code>Wrong Answer</code>。<br>在假解的情況下，居然通過了測試。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> t, n, h1,h2;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;t);</div><div class="line">    <span class="keyword">while</span>(t --)&#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</div><div class="line">        <span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="keyword">bool</span>&gt; mp;</div><div class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">bool</span> yes = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">int</span> pre = <span class="number">-1</span>;</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">0</span> ; i &lt; n ; i ++)</div><div class="line">        &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;h2);</div><div class="line">            <span class="keyword">if</span>(pre == h2)&#123;</div><div class="line">            </div><div class="line">                yes = <span class="literal">false</span>;</div><div class="line">            &#125;</div><div class="line">            pre = h2;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(yes?<span class="string">"non-boring\n"</span>:<span class="string">"boring\n"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Problem-B-Traffic-Jam"><a href="#Problem-B-Traffic-Jam" class="headerlink" title="Problem B Traffic Jam"></a>Problem B Traffic Jam</h2><p><a href="http://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;category=24&amp;page=show_problem&amp;problem=4163" target="_blank" rel="external">UVa 1417 - Traffic Jam</a></p>
<p>這題是全場最噁心的題目，但是沒想到有人用 BFS 還是 DFS 在每個詢問就過了。</p>
<p>賽完看到記分板表示非常火。</p>
<p>猜測解法如下，採用線段樹的方式。</p>
<h3 id="觀察"><a href="#觀察" class="headerlink" title="觀察"></a>觀察</h3><p><img src="/img/CCPC201402.PNG" alt="2014 CCPC B01"><br><img src="/img/CCPC201403.PNG" alt="2014 CCPC B02"></p>
<p>對於任兩點詢問假設這個區間是 <code>[l, r]</code>，不管同側還是異測，當然你也可以假設兩旁還有可以連的。發現對於區間 <code>[l, r]</code> 的點來說，會有左上無法到右下的情況或者左下無法到右上，兩者只有符合一個條件就可以說出 <code>NO</code>。</p>
<h3 id="推倒"><a href="#推倒" class="headerlink" title="推倒"></a>推倒</h3><p><img src="/img/CCPC201401.PNG" alt="2014 CCPC B03"></p>
<p>因此我們維護區間 <code>[l, r]</code> 的左上到右下、左下到右上的連通性。</p>
<p>對於區間 S 來說，可以切成 S1 和 S2，維護四條資訊，連通性有無 0/1。</p>
<ul>
<li>A(左上, 右下) = <ul>
<li>S1.A &amp; S2.A &amp; (wx || yz)</li>
<li>S1.A &amp; S2.D &amp; (z || wxy)</li>
<li>S1.C &amp; S2.A &amp; (x || wyz)</li>
<li>S1.C &amp; S2.D &amp; (wz || xy)</li>
</ul>
</li>
<li>B(左下, 右上)</li>
<li>C(左上, 右上)</li>
<li>D(左下, 右下)</li>
</ul>
<p>剩餘 BCD 三條類推，有空的時候再來填滿它，也就是說，之後的開邊跟閉邊都屬於單點更新，因此可以在 <code>O(log n)</code> 時間內完成。對於詢問兩點時，找到 <code>[l, r]</code> 查找 <code>A || B</code> 的結果，由於線段樹會切成數個區間，這個時候要由左而右依序組合即可。</p>
<h2 id="Problem-C-Finding-the-Prime-Implicants-of-a-Boolean-Function"><a href="#Problem-C-Finding-the-Prime-Implicants-of-a-Boolean-Function" class="headerlink" title="Problem C Finding the Prime Implicants of a Boolean Function"></a>Problem C Finding the Prime Implicants of a Boolean Function</h2><p>這題就是單純複雜，但是輸入卻不明確。主辦單位有說會忽略空白比對，但是對於 <code>Invaild input format</code> 來說，題目也沒有說清楚輸入格式。</p>
<p>好吧，硬著頭皮做，至少把範例輸入輸出弄了一樣，但是卻砸了。</p>
<p>對了，關於 subset 有個快速地找法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">for(int j = (i-1)&amp;i; j &gt; 0; j--, j &amp;= i) &#123;</div><div class="line">    // j 是 i 的 subset</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>這個寫法會在幾題的 UVa 中見到，速度快了 X 倍，不過這題測資沒有強成這樣，也許只是我寫太瘋狂了，想不到更好的解法來完成。最後掛了 <code>Wrong Answer</code>，直接默哀數分鐘。在我心中－她過了。</p>
<p>這題就是窮舉，將每一種組合拆成兩個去合併，而每一種組合(16 bits)如果能合併成一個 <code>product item</code> 則用一個 <code>exist(4 bits)</code> 和 <code>mark(4 bits)</code> 表示，</p>
<p>因此，對於每一個組合拆成 a, b，其中 a.exist == b.exist，同時變數差異只會有一個。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;string.h&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;sstream&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">using namespace std;</div><div class="line">//int A[105] = &#123;0, 2, 3, 5,7 ,8, 9, 10, 11, 13, 15&#125;, n = 11;</div><div class="line">//int A[105] = &#123;0, 1, 2, 5, 6, 7, 8, 9, 10, 14&#125;, n = 10;</div><div class="line">int A[1024], n;</div><div class="line">unsigned int result[1&lt;&lt;16] = &#123;&#125;;</div><div class="line">unsigned int mergeV[1&lt;&lt;16] = &#123;&#125;;</div><div class="line">struct cmp &#123;</div><div class="line">    bool operator()(const int a, const int b) const &#123;</div><div class="line">        for(int i = 0; i &lt; 16; i++) &#123;</div><div class="line">            int ia, ib;</div><div class="line">            ia = (a&gt;&gt;i)&amp;1;</div><div class="line">            ib = (b&gt;&gt;i)&amp;1;</div><div class="line">            if(ia != ib)</div><div class="line">                return ia &gt; ib;</div><div class="line">        &#125;</div><div class="line">        return a &lt; b;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">void solv() &#123;</div><div class="line">    map&lt;unsigned int, int&gt; combine;</div><div class="line">    map&lt;unsigned int, int&gt; combineN;</div><div class="line">    for(int i = 0; i &lt; (1&lt;&lt;16); i++) &#123;</div><div class="line">        result[i] = mergeV[i] = 0;</div><div class="line">    &#125;</div><div class="line">    for(int i = 0; i &lt; n; i++) &#123;</div><div class="line">        unsigned int mark = 15; // exits</div><div class="line">        unsigned int ssss = A[i];</div><div class="line">        combine[(ssss&lt;&lt;16)|mark]++;</div><div class="line">        combineN[(ssss&lt;&lt;16)|mark] = 1&lt;&lt;A[i];</div><div class="line">        result[1&lt;&lt;A[i]] = (ssss&lt;&lt;16)|mark;</div><div class="line">        mergeV[1&lt;&lt;A[i]] = 1;</div><div class="line">    &#125;</div><div class="line">    for(int i = 1; i &lt; (1&lt;&lt;16); i++) &#123;</div><div class="line">        if((i&amp;(-i)) == i)</div><div class="line">            continue;</div><div class="line">        int ok = 0;</div><div class="line">        unsigned int V;</div><div class="line">        for(int j = 1; j &lt; i; j++) &#123;</div><div class="line">            if((i&amp;j) == j) &#123;</div><div class="line">                int a, b;</div><div class="line">                a = j, b = i^j;</div><div class="line">                if(mergeV[a] &amp;&amp; mergeV[b]) &#123;</div><div class="line">                    unsigned int markA, markB;</div><div class="line">                    unsigned int ssssA, ssssB;</div><div class="line">                    markA = result[a]&amp;((1&lt;&lt;16)-1);</div><div class="line">                    markB = result[b]&amp;((1&lt;&lt;16)-1);</div><div class="line">                    ssssA = result[a]&gt;&gt;16;</div><div class="line">                    ssssB = result[b]&gt;&gt;16;</div><div class="line">                    if(markA == markB) &#123;</div><div class="line">                        unsigned int diff = ssssA ^ ssssB;</div><div class="line">                        if((diff&amp;(-diff)) == diff) &#123;</div><div class="line">                            unsigned int markC = (markA) ^ diff;</div><div class="line">                            unsigned int ssssC = min(ssssA, ssssB);</div><div class="line">                            ok = 1;</div><div class="line">                            combine[result[a]]++;</div><div class="line">                            combine[result[b]]++;</div><div class="line">                            V = (ssssC&lt;&lt;16)|markC;</div><div class="line">                            combineN[(ssssC&lt;&lt;16)|markC] = i;</div><div class="line">                            result[i] = (ssssC&lt;&lt;16)|markC;</div><div class="line">                            mergeV[i] = 1;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        if(ok)</div><div class="line">            combine[V]++;</div><div class="line">    &#125;</div><div class="line">    set&lt; int, cmp &gt; output[20];</div><div class="line">    for(map&lt;unsigned int, int&gt;::iterator it = combine.begin();</div><div class="line">        it != combine.end(); it++) &#123;</div><div class="line">        if(it-&gt;second &gt; 1)</div><div class="line">            continue;</div><div class="line">        /*printf(&quot;merge %d: count %d \n&quot;, it-&gt;first, it-&gt;second);*/</div><div class="line">        </div><div class="line">        unsigned int markA;</div><div class="line">        unsigned int ssssA;</div><div class="line">        markA = it-&gt;first&amp;((1&lt;&lt;16)-1);</div><div class="line">        ssssA = it-&gt;first&gt;&gt;16;</div><div class="line">        int cc = combineN[it-&gt;first];</div><div class="line">        /*for(int i = 0; i &lt; 4; i++) &#123;</div><div class="line">            printf(&quot;%d &quot;, (markA&gt;&gt;i)&amp;1);</div><div class="line">        &#125;</div><div class="line">        puts(&quot;  e &quot;);</div><div class="line">        for(int i = 0; i &lt; 4; i++) &#123;</div><div class="line">            printf(&quot;%d &quot;, (ssssA&gt;&gt;i)&amp;1);</div><div class="line">        &#125;</div><div class="line">        puts(&quot;&quot;);</div><div class="line">        for(int i = 0; i &lt; 16; i++) &#123;</div><div class="line">            if((cc&gt;&gt;i)&amp;1)</div><div class="line">                printf(&quot;%d &quot;, i);</div><div class="line">        &#125;</div><div class="line">        puts(&quot;&quot;);*/</div><div class="line">        int osize = 0;</div><div class="line">        for(int i = 0; i &lt; 16; i++) &#123;</div><div class="line">            if((cc&gt;&gt;i)&amp;1)</div><div class="line">                osize++;</div><div class="line">        &#125;</div><div class="line">        output[osize].insert(cc);</div><div class="line">    &#125;</div><div class="line">    int f = 0;</div><div class="line">    for(int k = 16; k &gt;= 0; k--)</div><div class="line">        for(set&lt; int &gt;::iterator it = output[k].begin();</div><div class="line">            it != output[k].end(); it++) &#123;</div><div class="line">            int cc = (*it);</div><div class="line">            if(f)	printf(&quot;,&quot;);</div><div class="line">            f = 1;</div><div class="line">            putchar(&apos;(&apos;);</div><div class="line">            int f2 = 0;</div><div class="line">            for(int i = 0; i &lt; 16; i++) &#123;</div><div class="line">                if((cc&gt;&gt;i)&amp;1) &#123;</div><div class="line">                    if(f2)	printf(&quot;, &quot;);</div><div class="line">                    f2 = 1;</div><div class="line">                    printf(&quot;%d&quot;, i);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            putchar(&apos;)&apos;);</div><div class="line">        &#125;</div><div class="line">    puts(&quot;&quot;);</div><div class="line">&#125;</div><div class="line">int main() &#123;</div><div class="line">    char in[1024];</div><div class="line">    while(gets(in)) &#123;</div><div class="line">        int error = 0;</div><div class="line">        for(int i = 0; in[i]; i++) &#123;</div><div class="line">            if(in[i] == &apos;)&apos;)</div><div class="line">                in[i] = &apos; &apos;;</div><div class="line">            else if(in[i] == &apos;(&apos;)</div><div class="line">                in[i] = &apos; &apos;;</div><div class="line">            else if(in[i] == &apos;,&apos;)</div><div class="line">                in[i] = &apos; &apos;;</div><div class="line">            else if(in[i] &lt;= &apos;9&apos; &amp;&amp; in[i] &gt;= &apos;0&apos;)</div><div class="line">                continue;</div><div class="line">            else</div><div class="line">                error = 1;</div><div class="line">        &#125;</div><div class="line">        stringstream sin(in);</div><div class="line">        int number;</div><div class="line">        n = 0;</div><div class="line">        while(sin &gt;&gt; number) &#123;</div><div class="line">            A[n++] = number;</div><div class="line">        &#125;</div><div class="line">        if(n &gt;= 1024)</div><div class="line">            while(1);</div><div class="line">        sort(A, A+n);</div><div class="line">        int ok = 1;</div><div class="line">        for(int i = 0; i &lt; n; i++)</div><div class="line">            if(A[i] &lt; 0 || A[i] &gt; 15)</div><div class="line">                ok = 0;</div><div class="line">        if(ok == 0 || error) &#123;</div><div class="line">            printf(&quot;Invalid input format&quot;);</div><div class="line">            continue;</div><div class="line">        &#125;/*</div><div class="line">        printf(&quot;%d\n&quot;, n);</div><div class="line">        for(int i = 0; i &lt; n; i++)</div><div class="line">            printf(&quot;%d\n&quot;, A[i]);*/</div><div class="line">        solv();</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div><div class="line">/*</div><div class="line">(0,2,5,8,10)</div><div class="line">(0,2,3,5,7,8,9,10,11,13,15)</div><div class="line">(0,1,2,5,6,7,8,9,10,14)</div><div class="line">(0,1,2,4,5,6,8,9,12,13,14)</div><div class="line">(0,1,2,5,6,7,8,9,10,16)</div><div class="line">*/</div></pre></td></tr></table></figure>
<h2 id="Problem-D-Binary-String"><a href="#Problem-D-Binary-String" class="headerlink" title="Problem D Binary String"></a>Problem D Binary String</h2><p>雖然詢問每個參數最大上限後，發現在 m = 100 的情況下，窮舉有點刺激，但是題目卻是要求輸出每一種組合，所以想必組合也不會太多，所以直接亂來吧！</p>
<p>至於以下代碼的正確性就交給神吧，反正都是亂做過的。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> n, m, s_ones;</div><div class="line"></div><div class="line"><span class="keyword">char</span> s[<span class="number">105</span>], ret[<span class="number">105</span>];</div><div class="line"><span class="keyword">int</span> slen = <span class="number">0</span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> idx, <span class="keyword">int</span> ones, <span class="keyword">int</span> has)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(ones &gt; m)</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">if</span>(has == <span class="number">0</span> &amp;&amp; idx - slen &gt;= <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">int</span> ok = <span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = idx - slen, j = <span class="number">0</span>; j &lt; slen; j++, i++) &#123;</div><div class="line">            ok &amp;= ret[i] == s[j];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(ok)</div><div class="line">            has = <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(idx == n) &#123;</div><div class="line">        <span class="keyword">if</span>(ones != m || !has)</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        ret[n] = <span class="string">'\0'</span>;</div><div class="line">        <span class="built_in">puts</span>(ret);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    ret[idx] = <span class="string">'0'</span>;</div><div class="line">    dfs(idx+<span class="number">1</span>, ones, has);</div><div class="line">    ret[idx] = <span class="string">'1'</span>;</div><div class="line">    dfs(idx+<span class="number">1</span>, ones+<span class="number">1</span>, has);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d %d %s"</span>, &amp;n, &amp;m, s) == <span class="number">3</span>) &#123;</div><div class="line">        s_ones = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; s[i]; i++)</div><div class="line">            s_ones += s[i] == <span class="string">'1'</span>;</div><div class="line">        slen = <span class="built_in">strlen</span>(s);</div><div class="line">        dfs(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Problem-E-Digits-Count"><a href="#Problem-E-Digits-Count" class="headerlink" title="Problem E Digits Count"></a>Problem E Digits Count</h2><p>這題在 UVa 見過，但是要在比賽中打出來，卻卡死兩個很久沒用腦的人，直到鎖版 (最後一個小時) 才湊出來。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">mpow</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> m)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> ret = <span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</div><div class="line">        ret *= n;</div><div class="line">    <span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> cnt[])</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(n &lt;= <span class="number">0</span>)</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    <span class="comment">//printf("%d\n", n);</span></div><div class="line">    <span class="keyword">char</span> buf[<span class="number">105</span>];</div><div class="line">    <span class="built_in">sprintf</span>(buf, <span class="string">"%d"</span>, n);</div><div class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(buf);</div><div class="line">    <span class="keyword">int</span> prev = <span class="number">0</span>, suffix;</div><div class="line">    calc(mpow(<span class="number">10</span>, len<span class="number">-1</span>)<span class="number">-1</span>, cnt);</div><div class="line">    <span class="comment">//for(int i = 0; i &lt; 10; i++)</span></div><div class="line">    <span class="comment">//	cnt[i] = 0;</span></div><div class="line">    <span class="keyword">int</span> prev10 = <span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</div><div class="line">        <span class="keyword">int</span> d = buf[i] - <span class="string">'0'</span>;</div><div class="line">        <span class="built_in">sscanf</span>(buf+i+<span class="number">1</span>, <span class="string">"%d"</span>, &amp;suffix);</div><div class="line">        </div><div class="line">        <span class="keyword">if</span>(i != len<span class="number">-1</span>)</div><div class="line">            cnt[d] += suffix + <span class="number">1</span>;</div><div class="line">        <span class="keyword">else</span></div><div class="line">            cnt[d]++;</div><div class="line">        <span class="keyword">if</span>(i != <span class="number">0</span>)</div><div class="line">            cnt[d] += (prev - prev10/<span class="number">10</span>) * mpow(<span class="number">10</span>, len-i<span class="number">-1</span>);</div><div class="line">    <span class="comment">//	pritnf("%d \n", );</span></div><div class="line">    <span class="comment">//	puts("");</span></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i == <span class="number">0</span>; j &lt; <span class="number">10</span>; j++) &#123;</div><div class="line">            <span class="keyword">if</span>(j == d)	<span class="keyword">continue</span>;</div><div class="line">            <span class="keyword">if</span>(j &lt; d) &#123;</div><div class="line">                <span class="keyword">if</span>(prev &gt; <span class="number">0</span>) &#123;</div><div class="line">                    cnt[j] += (prev - prev10/<span class="number">10</span> + <span class="number">1</span>) * mpow(<span class="number">10</span>, len-i<span class="number">-1</span>);</div><div class="line">                    <span class="comment">//printf("%d %d\n", j, (prev - prev10/10 + 1) * mpow(10, len-i-2));</span></div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    cnt[j] += mpow(<span class="number">10</span>, len-i<span class="number">-1</span>);</div><div class="line">                    <span class="comment">//printf("%d %d\n", j, mpow(10, len-i-1));</span></div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">if</span>(prev &gt; <span class="number">0</span> &amp;&amp; prev - prev10/<span class="number">10</span> &gt; <span class="number">0</span>) &#123;</div><div class="line">                    cnt[j] += (prev - prev10/<span class="number">10</span>) * mpow(<span class="number">10</span>, len-i<span class="number">-1</span>);</div><div class="line">                    <span class="comment">//printf("%d %d\n", j, (prev - prev10/10 + 1) * mpow(10, len-i-2));</span></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        prev10 *= <span class="number">10</span>;</div><div class="line">        prev = prev * <span class="number">10</span> + d;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/*for(int i = 0; i &lt; 10; i++)</span></div><div class="line"><span class="comment">		printf("%d ", cnt[i]);</span></div><div class="line"><span class="comment">	puts("");*/</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">brute</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> cnt[<span class="number">10</span>] = &#123;&#125;;</div><div class="line">    <span class="keyword">char</span> buf[<span class="number">105</span>];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</div><div class="line">        <span class="built_in">sprintf</span>(buf, <span class="string">"%d"</span>, i);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; buf[j]; j++)</div><div class="line">            cnt[buf[j]-<span class="string">'0'</span>]++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, cnt[i]);</div><div class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="keyword">int</span> l, r;</div><div class="line">    <span class="comment">/*while(scanf("%d", &amp;l) == 1) &#123;</span></div><div class="line"><span class="comment">		brute(l);</span></div><div class="line"><span class="comment">		int cnt[10] = &#123;&#125;;</span></div><div class="line"><span class="comment">		calc(l, cnt);</span></div><div class="line"><span class="comment">		for(int i = 0; i &lt; 10; i++)</span></div><div class="line"><span class="comment">			printf("%d ", cnt[i]);</span></div><div class="line"><span class="comment">		puts("");</span></div><div class="line"><span class="comment">	&#125;*/</span></div><div class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;l, &amp;r) == <span class="number">2</span>) &#123;</div><div class="line">        <span class="keyword">if</span>(l == <span class="number">0</span> &amp;&amp; r == <span class="number">0</span>)</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">int</span> A[<span class="number">10</span>] = &#123;&#125;, B[<span class="number">10</span>] = &#123;&#125;;</div><div class="line">        calc(l<span class="number">-1</span>, A);</div><div class="line">        calc(r, B);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d%c"</span>, B[i] - A[i], i ==  <span class="number">9</span> ? <span class="string">'\n'</span> : <span class="string">' '</span>);</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Problem-F-Math-Problem"><a href="#Problem-F-Math-Problem" class="headerlink" title="Problem F Math Problem"></a>Problem F Math Problem</h2><p>大數二分開 n 方，根據別組的討論，才發現數字其實還挺小的，用 <code>double</code> 型態做 log 運算即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.InputStreamReader;</div><div class="line"><span class="keyword">import</span> java.math.BigInteger;</div><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> Exception </span>&#123; <span class="comment">// µ&#123;¦¡¶i¤JÂI</span></div><div class="line">        Scanner cin = <span class="keyword">new</span> Scanner(System.in);</div><div class="line">        <span class="keyword">while</span>(cin.hasNext()) &#123;</div><div class="line">            <span class="keyword">int</span> n = cin.nextInt();</div><div class="line">            String p = cin.next();</div><div class="line">            <span class="keyword">if</span>(n == <span class="number">1</span>) &#123;</div><div class="line">                System.out.println(p);</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line">            BigInteger bigp = <span class="keyword">new</span> BigInteger(p);</div><div class="line">            BigInteger l = BigInteger.ZERO;</div><div class="line">            BigInteger r = <span class="keyword">new</span> BigInteger(p);</div><div class="line">            BigInteger m = l, mid, mmid;</div><div class="line">            <span class="keyword">while</span>(l.compareTo(r) &lt;= <span class="number">0</span>) &#123;</div><div class="line">                mid = l.add(r).shiftRight(<span class="number">1</span>);</div><div class="line">                mmid = mid.pow(n);</div><div class="line">                <span class="keyword">if</span>(mmid.compareTo(bigp) &lt;= <span class="number">0</span>) &#123;</div><div class="line">                    l = mid.add(BigInteger.ONE);</div><div class="line">                    m = mid;</div><div class="line">                &#125; <span class="keyword">else</span></div><div class="line">                    r = mid.subtract(BigInteger.ONE);</div><div class="line">            &#125;</div><div class="line">            System.out.println(m);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Problem-G-Better-Method"><a href="#Problem-G-Better-Method" class="headerlink" title="Problem G Better Method"></a>Problem G Better Method</h2><p>聽說是曾經的萬年測試題，這次難得變成主角，肯定是想要每組至少都能帶一題回去。跟 ICPC 一樣的設計方式呢。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> ret = n;</div><div class="line">    <span class="keyword">while</span>(n &gt;= <span class="number">3</span>) &#123;</div><div class="line">        ret += n/<span class="number">3</span>;</div><div class="line">        n = n%<span class="number">3</span> + n/<span class="number">3</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> n;</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) == <span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">int</span> v = max(f(n), f(n+<span class="number">1</span>)<span class="number">-1</span>);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, v);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Problem-H-K-Anonymous-Sequence"><a href="#Problem-H-K-Anonymous-Sequence" class="headerlink" title="Problem H K-Anonymous Sequence"></a>Problem H K-Anonymous Sequence</h2><p>本次第二難的題目，但比賽時也是用假解過的，實質為單調對列，可以在 <code>O(n)</code> 時間內完成。至於假解的方式就不方便提供。</p>
<h1 id="賽後"><a href="#賽後" class="headerlink" title="賽後"></a>賽後</h1><p>UVa 2000+ 才到這了，腦部硬體的差距就是如此地遙遠，即使捨去其他應用軟體，仍然趕不上嗎？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Rank	Name	Solved	Time	    A    	    B    	    C    	    D    	    E    	    F    	    G    	    H    	Total att/solv</div><div class="line">1	team22	6	608	1/11	2/58	0/--	3/141	1/221	1/50	1/67	5/--	14/6</div><div class="line">2	team2	6	844	2/32	7/--	14/--	1/108	1/244	1/19	1/11	8/270	35/6</div><div class="line">3	team4	5	530	1/7	1/281	26/--	1/217	1/--	1/9	1/16	0/--	32/5</div><div class="line">4	team17	5	698	2/13	1/105	1/--	4/296	0/--	1/167	1/37	3/--	13/5</div><div class="line">5	team1	5	958	3/286	0/--	4/240	4/--	1/178	1/69	1/85	0/--	14/5</div><div class="line">6	team12	4	177	1/11	0/--	3/--	0/--	1/138	1/17	1/11	0/--	7/4</div><div class="line">7	team3	4	359	1/108	0/--	5/--	0/--	1/188	1/35	1/28	0/--	9/4</div><div class="line">8	team23	4	776	1/12	7/278	0/--	0/--	0/--	1/57	5/229	0/--	14/4</div><div class="line">9	team20	4	815	8/131	4/159	0/--	0/--	0/--	1/164	1/161	0/--	14/4</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">名次	學校學系	隊名</div><div class="line">第一名	國立成功大學資訊工程學系	ItsNotCode</div><div class="line">第二名	國立中央大學資訊工程學系	Morri$</div><div class="line">第三名	國立清華大學資訊工程學系	ISeaTeL</div><div class="line">佳作	國立成功大學資訊工程學系	Insert</div><div class="line">佳作	國立臺北大學資訊工程學系	Forward Thinking</div><div class="line">佳作	國立清華大學資訊工程學系	JustInTime</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-web/html5-music-and-drag-file" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/26/web/html5-music-and-drag-file/" class="article-date">
  <time datetime="2014-04-26T02:22:05.000Z" itemprop="datePublished">2014-04-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/網頁設計/">網頁設計</a>/<a class="article-category-link" href="/categories/網頁設計/HTML5/">HTML5</a>
  </div>

  </div>
  <div class="article-inner ">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/img/1398260159107.jpg" rel="gallery_ckq8nvx9902hatkvniocpg7zv">
        <img src="/img/1398260159107.jpg" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/26/web/html5-music-and-drag-file/">HTML5 Music Player (本地拖曳撥放)</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/04/26/web/html5-music-and-drag-file/" data-id="ckq8nvx9902hatkvniocpg7zv" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/04/26/web/html5-music-and-drag-file/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTML5/">HTML5</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jquery/">jquery</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h1 id="代碼起源"><a href="#代碼起源" class="headerlink" title="代碼起源"></a>代碼起源</h1><p><a href="http://zespia.tw/blog/2012/02/04/lab-html5-audio/" target="_blank" rel="external">tommy351</a> 提供的。基於 HTML5 和 JQuery 運行的撥放器，HTML5 支持 .mp3, .wav, .ogg 這三個種音樂格式的撥放。</p>
<p>HTML5 <code>&lt;audio&gt;</code> 支持音樂撥放，撥放種類有限，而且 HTML5 不知道穩定了沒。</p>
<ul>
<li>本次挑戰的項目<ul>
<li>增加 <strong> 拖曳檔案 </strong> 的撥放</li>
<li>拖曳檔案 和 拖曳資料夾 的摸索</li>
<li>HTML5 圍觀</li>
</ul>
</li>
</ul>
<h1 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h1><p><img src="/img/html5-drag-and-music.PNG" alt="demo"><br>如上圖，最後一個檔案 <code>mo - 45. not yet.mp3</code> 是拖曳上傳的內容。</p>
<h2 id="歷程"><a href="#歷程" class="headerlink" title="歷程"></a>歷程</h2><ul>
<li>增加本地拖曳撥放，操作方式為將本地 mp3 檔案上傳</li>
</ul>
<p>檔案能知道的資訊有限</p>
<ul>
<li><code>name</code> 取得檔案名稱，如果需要做副檔名檢查，可利用它。</li>
<li><code>size</code> 取得檔案大小 (bytes)。</li>
<li><code>type</code> 取得檔案的 MIME 型別 (若無法對應會傳回空白)。</li>
</ul>
<p>因為安全性，所以得不到路徑資訊，也就是不能隨便去掃描別人的本地資料。因此要完成資料夾下的所有檔案獲取會有困難。</p>
<p>其實瀏覽器本上就會支持檔案拖曳，並且在新分頁上顯示資訊，如果要避免瀏覽器自己開啟檔案，則使用 <code>evt.stopPropagation()</code> 將 drag 相關事件關閉，也就是說在當前頁面的 drag 事件都不會被瀏覽器知曉。</p>
<h2 id="後記"><a href="#後記" class="headerlink" title="後記"></a>後記</h2><ul>
<li><p>對於 <code>.mp3</code> 檔案要自動獲得專輯封面可能嗎？<br>  請參考 <a href="http://stackoverflow.com/questions/1645803/how-to-read-mp3-file-tags" target="_blank" rel="external">這裡</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Field      Length    Offsets</div><div class="line">Tag        3           0-2</div><div class="line">Songname   30          3-32</div><div class="line">Artist     30         33-62</div><div class="line">Album      30         63-92</div><div class="line">Year       4          93-96</div><div class="line">Comment    30         97-126</div><div class="line">Genre      1           127</div></pre></td></tr></table></figure>
<p>  要自己擠去 parsing 這些資訊還是算了吧。WRYYYYY</p>
</li>
<li><p>對於資料夾整包拖曳操作？HTML5 drag upload folder<br>  在寫這篇的時候，網路上有 <a href="http://html5-demos.appspot.com/static/dnd/all_types_of_import.html" target="_blank" rel="external">demo</a>，但是只有在 chrome 21 下才有支持，看起來是從瀏覽器 ( 本地軟件 ) 來協助遍歷資料夾下的內容。不然是沒有權限去運行的。</p>
</li>
<li><p>讀取的異步操作 ?<br>  是的，最近在編寫時常會遇到異步操作，也就是必須全用 <code>callback</code> 來完成，因為讀檔的資訊完成的 <code>callback function</code> 中並沒有 <code>file.name</code> 之類的資訊，如果適用 <code>for(var i in files)</code> 運行，會發生變數找不到的情況，因此用 <code>$.each()</code> 和 <code>reader.onload()</code> 來完成這個操作。</p>
<ul>
<li>onloadstart、onprogress、onload、onabort、onerror 和 onloadend 這幾個可以協助監控上傳資訊，也就是能知曉現在上傳進度 … 等。</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> dropbox = <span class="built_in">document</span>.getElementById(<span class="string">"dropbox"</span>)</div><div class="line"></div><div class="line"><span class="comment">// init event handlers</span></div><div class="line">dropbox.addEventListener(<span class="string">"dragenter"</span>, dragEnter, <span class="literal">false</span>);</div><div class="line">dropbox.addEventListener(<span class="string">"dragexit"</span>, dragExit, <span class="literal">false</span>);</div><div class="line">dropbox.addEventListener(<span class="string">"dragover"</span>, dragOver, <span class="literal">false</span>);</div><div class="line">dropbox.addEventListener(<span class="string">"drop"</span>, drop, <span class="literal">false</span>);</div><div class="line"></div><div class="line"><span class="comment">// init the widgets</span></div><div class="line">$(<span class="string">"#progressbar"</span>).progressbar();</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragEnter</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">    evt.stopPropagation();</div><div class="line">    evt.preventDefault();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragExit</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">    evt.stopPropagation();</div><div class="line">    evt.preventDefault();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragOver</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">    evt.stopPropagation();</div><div class="line">    evt.preventDefault();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drop</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">    evt.stopPropagation();</div><div class="line">    evt.preventDefault();</div><div class="line"></div><div class="line">    <span class="keyword">var</span> files = evt.dataTransfer.files;</div><div class="line">    <span class="keyword">var</span> count = files.length;</div><div class="line"></div><div class="line">    <span class="comment">// Only call the handler if 1 or more files was dropped.</span></div><div class="line">    <span class="keyword">if</span> (count &gt; <span class="number">0</span>)</div><div class="line">        handleFiles(files);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleFiles</span>(<span class="params">files</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> mp3Files = $.map(files, <span class="function"><span class="keyword">function</span>(<span class="params">f, i</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> f.type.indexOf(<span class="string">"audio/mp3"</span>) == <span class="number">0</span> ? f : <span class="literal">null</span>;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    $.each(mp3Files, <span class="function"><span class="keyword">function</span>(<span class="params">i, file</span>) </span>&#123;</div><div class="line">        <span class="built_in">document</span>.getElementById(<span class="string">"droplabel"</span>).innerHTML = <span class="string">"Processing "</span> + file.name;</div><div class="line">        </div><div class="line">        <span class="keyword">var</span> reader = <span class="keyword">new</span> FileReader();</div><div class="line"></div><div class="line">        reader.onload = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">            $(<span class="string">'#playlist'</span>).append(<span class="string">'&lt;li&gt;'</span> + <span class="string">'mo'</span> + <span class="string">' - '</span> + file.name + <span class="string">'&lt;/li&gt;'</span>);</div><div class="line">            playlist.push(&#123;</div><div class="line">                title: file.name,</div><div class="line">                mp3: evt.target.result</div><div class="line">            &#125;);</div><div class="line">            </div><div class="line">            $(<span class="string">'#playlist li'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</div><div class="line">                <span class="keyword">var</span> _i = i;</div><div class="line">                $(<span class="keyword">this</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                    switchTrack(_i);</div><div class="line">                &#125;);</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// init the reader event handlers</span></div><div class="line">        reader.onprogress = handleReaderProgress;</div><div class="line">            reader.onloadend = handleReaderLoadEnd;</div><div class="line"></div><div class="line">            reader.readAsDataURL(file);</div><div class="line"></div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handleReaderProgress</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (evt.lengthComputable) &#123;</div><div class="line">            <span class="keyword">var</span> loaded = (evt.loaded / evt.total);</div><div class="line"></div><div class="line">            $(<span class="string">"#progressbar"</span>).progressbar(&#123;</div><div class="line">                value: loaded * <span class="number">100</span></div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handleReaderLoadEnd</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">        $(<span class="string">"#progressbar"</span>).progressbar(&#123;</div><div class="line">            value: <span class="number">100</span></div><div class="line">        &#125;);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h1 id="最後"><a href="#最後" class="headerlink" title="最後"></a>最後</h1><h2 id="html"><a href="#html" class="headerlink" title="html"></a>html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Cover Art<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/stylesheets/style.css"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://code.jquery.com/ui/1.10.4/jquery-ui.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"playblock"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"player"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"cover"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"ctrl"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tag"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"artist"</span>&gt;</span>Artist<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"album"</span>&gt;</span>Album<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"control"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"rewind icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"playback icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"fastforward icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"volume right"</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mute icon left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"slider left"</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pace"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"progress"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"slider"</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loaded"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pace"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"timer left"</span>&gt;</span>0:00<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"repeat icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"shuffle icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dropbox"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dropctrl"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"droplabel"</span>&gt;</span>Drop mp3 file here...<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"progressbar"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"playlist"</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">footer</span>&gt;</span></div><div class="line">        Copyright &amp;copy; 2012 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://zespia.tw"</span>&gt;</span>SkyArrow<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/script.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="js"><a href="#js" class="headerlink" title="js"></a>js</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>) </span>&#123;</div><div class="line">    <span class="comment">// Settings</span></div><div class="line">    <span class="keyword">var</span> repeat = localStorage.repeat || <span class="number">0</span>,</div><div class="line">        shuffle = localStorage.shuffle || <span class="string">'false'</span>,</div><div class="line">        continous = <span class="literal">true</span>,</div><div class="line">        autoplay = <span class="literal">false</span>,</div><div class="line">        playlist = [&#123;</div><div class="line">            title: <span class="string">'ふわふわ時間'</span>,</div><div class="line">            artist: <span class="string">'桜高軽音部（平沢唯、秋山澪、田井中律、琴吹紬）'</span>,</div><div class="line">            album: <span class="string">'TVアニメ「けいおん!」劇中歌 - ふわふわ時間'</span>,</div><div class="line">            cover: <span class="string">'http://dl.dropbox.com/u/5480889/coverart/cover/ふわふわ時間.jpg'</span>,</div><div class="line">            mp3: <span class="string">'http://dl.dropbox.com/u/5480889/coverart/music/ふわふわ時間.mp3'</span>,</div><div class="line">            ogg: <span class="string">'http://dl.dropbox.com/u/5480889/coverart/music/ふわふわ時間.ogg'</span></div><div class="line">        &#125;, &#123;</div><div class="line">            title: <span class="string">'リップシンク'</span>,</div><div class="line">            artist: <span class="string">'nano.RIPE'</span>,</div><div class="line">            album: <span class="string">'細胞キオク'</span>,</div><div class="line">            cover: <span class="string">'http://dl.dropbox.com/u/5480889/coverart/cover/リップシンク.jpg'</span>,</div><div class="line">            mp3: <span class="string">'http://dl.dropbox.com/u/5480889/coverart/music/リップシンク.mp3'</span>,</div><div class="line">            ogg: <span class="string">'http://dl.dropbox.com/u/5480889/coverart/music/リップシンク.ogg'</span></div><div class="line">        &#125;];</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; playlist.length; i++) &#123;</div><div class="line">        <span class="keyword">var</span> item = playlist[i];</div><div class="line">        $(<span class="string">'#playlist'</span>).append(<span class="string">'&lt;li&gt;'</span> + item.artist + <span class="string">' - '</span> + item.title + <span class="string">'&lt;/li&gt;'</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// Load playlist</span></div><div class="line"></div><div class="line">    <span class="keyword">var</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        currentTrack = shuffle === <span class="string">'true'</span> ? time.getTime() % playlist.length : <span class="number">0</span>,</div><div class="line">        trigger = <span class="literal">false</span>,</div><div class="line">        audio, timeout, isPlaying, playCounts;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> play = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        audio.play();</div><div class="line">        $(<span class="string">'.playback'</span>).addClass(<span class="string">'playing'</span>);</div><div class="line">        timeout = setInterval(updateProgress, <span class="number">500</span>);</div><div class="line">        isPlaying = <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> pause = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        audio.pause();</div><div class="line">        $(<span class="string">'.playback'</span>).removeClass(<span class="string">'playing'</span>);</div><div class="line">        clearInterval(updateProgress);</div><div class="line">        isPlaying = <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// Update progress</span></div><div class="line">    <span class="keyword">var</span> setProgress = <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> currentSec = <span class="built_in">parseInt</span>(value % <span class="number">60</span>) &lt; <span class="number">10</span> ? <span class="string">'0'</span> + <span class="built_in">parseInt</span>(value % <span class="number">60</span>) : <span class="built_in">parseInt</span>(value % <span class="number">60</span>),</div><div class="line">            ratio = value / audio.duration * <span class="number">100</span>;</div><div class="line"></div><div class="line">        $(<span class="string">'.timer'</span>).html(<span class="built_in">parseInt</span>(value / <span class="number">60</span>) + <span class="string">':'</span> + currentSec);</div><div class="line">        $(<span class="string">'.progress .pace'</span>).css(<span class="string">'width'</span>, ratio + <span class="string">'%'</span>);</div><div class="line">        $(<span class="string">'.progress .slider a'</span>).css(<span class="string">'left'</span>, ratio + <span class="string">'%'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> updateProgress = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        setProgress(audio.currentTime);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// Progress slider</span></div><div class="line">    $(<span class="string">'.progress .slider'</span>).slider(&#123;</div><div class="line">        step: <span class="number">0.1</span>,</div><div class="line">        slide: <span class="function"><span class="keyword">function</span>(<span class="params">event, ui</span>) </span>&#123;</div><div class="line">            $(<span class="keyword">this</span>).addClass(<span class="string">'enable'</span>);</div><div class="line">            setProgress(audio.duration * ui.value / <span class="number">100</span>);</div><div class="line">            clearInterval(timeout);</div><div class="line">        &#125;,</div><div class="line">        stop: <span class="function"><span class="keyword">function</span>(<span class="params">event, ui</span>) </span>&#123;</div><div class="line">            audio.currentTime = audio.duration * ui.value / <span class="number">100</span>;</div><div class="line">            $(<span class="keyword">this</span>).removeClass(<span class="string">'enable'</span>);</div><div class="line">            timeout = setInterval(updateProgress, <span class="number">500</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">// Volume slider</span></div><div class="line">    <span class="keyword">var</span> setVolume = <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">        audio.volume = localStorage.volume = value;</div><div class="line">        $(<span class="string">'.volume .pace'</span>).css(<span class="string">'width'</span>, value * <span class="number">100</span> + <span class="string">'%'</span>);</div><div class="line">        $(<span class="string">'.volume .slider a'</span>).css(<span class="string">'left'</span>, value * <span class="number">100</span> + <span class="string">'%'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> volume = localStorage.volume || <span class="number">0.5</span>;</div><div class="line">    $(<span class="string">'.volume .slider'</span>).slider(&#123;</div><div class="line">        max: <span class="number">1</span>,</div><div class="line">        min: <span class="number">0</span>,</div><div class="line">        step: <span class="number">0.01</span>,</div><div class="line">        value: volume,</div><div class="line">        slide: <span class="function"><span class="keyword">function</span>(<span class="params">event, ui</span>) </span>&#123;</div><div class="line">            setVolume(ui.value);</div><div class="line">            $(<span class="keyword">this</span>).addClass(<span class="string">'enable'</span>);</div><div class="line">            $(<span class="string">'.mute'</span>).removeClass(<span class="string">'enable'</span>);</div><div class="line">        &#125;,</div><div class="line">        stop: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            $(<span class="keyword">this</span>).removeClass(<span class="string">'enable'</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;).children(<span class="string">'.pace'</span>).css(<span class="string">'width'</span>, volume * <span class="number">100</span> + <span class="string">'%'</span>);</div><div class="line"></div><div class="line">    $(<span class="string">'.mute'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> ($(<span class="keyword">this</span>).hasClass(<span class="string">'enable'</span>)) &#123;</div><div class="line">            setVolume($(<span class="keyword">this</span>).data(<span class="string">'volume'</span>));</div><div class="line">            $(<span class="keyword">this</span>).removeClass(<span class="string">'enable'</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            $(<span class="keyword">this</span>).data(<span class="string">'volume'</span>, audio.volume).addClass(<span class="string">'enable'</span>);</div><div class="line">            setVolume(<span class="number">0</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">// Switch track</span></div><div class="line">    <span class="keyword">var</span> switchTrack = <span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span>) &#123;</div><div class="line">            track = currentTrack = playlist.length - <span class="number">1</span>;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i &gt;= playlist.length) &#123;</div><div class="line">            track = currentTrack = <span class="number">0</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            track = i;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        $(<span class="string">'audio'</span>).remove();</div><div class="line">        loadMusic(track);</div><div class="line">        <span class="keyword">if</span> (isPlaying == <span class="literal">true</span>) play();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// Shuffle</span></div><div class="line">    <span class="keyword">var</span> shufflePlay = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">            lastTrack = currentTrack;</div><div class="line">        currentTrack = time.getTime() % playlist.length;</div><div class="line">        <span class="keyword">if</span> (lastTrack == currentTrack)++currentTrack;</div><div class="line">        switchTrack(currentTrack);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// Fire when track ended</span></div><div class="line">    <span class="keyword">var</span> ended = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        pause();</div><div class="line">        audio.currentTime = <span class="number">0</span>;</div><div class="line">        playCounts++;</div><div class="line">        <span class="keyword">if</span> (continous == <span class="literal">true</span>) isPlaying = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">if</span> (repeat == <span class="number">1</span>) &#123;</div><div class="line">            play();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">if</span> (shuffle === <span class="string">'true'</span>) &#123;</div><div class="line">                shufflePlay();</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">if</span> (repeat == <span class="number">2</span>) &#123;</div><div class="line">                    switchTrack(++currentTrack);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="keyword">if</span> (currentTrack &lt; playlist.length) switchTrack(++currentTrack);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> beforeLoad = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> endVal = <span class="keyword">this</span>.seekable &amp;&amp; <span class="keyword">this</span>.seekable.length ? <span class="keyword">this</span>.seekable.end(<span class="number">0</span>) : <span class="number">0</span>;</div><div class="line">        $(<span class="string">'.progress .loaded'</span>).css(<span class="string">'width'</span>, (<span class="number">100</span> / (<span class="keyword">this</span>.duration || <span class="number">1</span>) * endVal) + <span class="string">'%'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// Fire when track loaded completely</span></div><div class="line">    <span class="keyword">var</span> afterLoad = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (autoplay == <span class="literal">true</span>) play();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// Load track</span></div><div class="line">    <span class="keyword">var</span> loadMusic = <span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> item = playlist[i],</div><div class="line">            newaudio = $(<span class="string">'&lt;audio&gt;'</span>).html(<span class="string">'&lt;source src="'</span> + item.mp3 + <span class="string">'"&gt;&lt;source src="'</span> + item.ogg + <span class="string">'"&gt;'</span>).appendTo(<span class="string">'#player'</span>);</div><div class="line"></div><div class="line">        $(<span class="string">'.cover'</span>).html(<span class="string">'&lt;img src="'</span> + item.cover + <span class="string">'" alt="'</span> + item.album + <span class="string">'"&gt;'</span>);</div><div class="line">        $(<span class="string">'.tag'</span>).html(<span class="string">'&lt;strong&gt;'</span> + item.title + <span class="string">'&lt;/strong&gt;&lt;span class="artist"&gt;'</span> + item.artist + <span class="string">'&lt;/span&gt;&lt;span class="album"&gt;'</span> + item.album + <span class="string">'&lt;/span&gt;'</span>);</div><div class="line">        $(<span class="string">'#playlist li'</span>).removeClass(<span class="string">'playing'</span>).eq(i).addClass(<span class="string">'playing'</span>);</div><div class="line">        audio = newaudio[<span class="number">0</span>];</div><div class="line">        audio.volume = $(<span class="string">'.mute'</span>).hasClass(<span class="string">'enable'</span>) ? <span class="number">0</span> : volume;</div><div class="line">        audio.addEventListener(<span class="string">'progress'</span>, beforeLoad, <span class="literal">false</span>);</div><div class="line">        audio.addEventListener(<span class="string">'durationchange'</span>, beforeLoad, <span class="literal">false</span>);</div><div class="line">        audio.addEventListener(<span class="string">'canplay'</span>, afterLoad, <span class="literal">false</span>);</div><div class="line">        audio.addEventListener(<span class="string">'ended'</span>, ended, <span class="literal">false</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    loadMusic(currentTrack);</div><div class="line">    $(<span class="string">'.playback'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> ($(<span class="keyword">this</span>).hasClass(<span class="string">'playing'</span>)) &#123;</div><div class="line">            pause();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            play();</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    $(<span class="string">'.rewind'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (shuffle === <span class="string">'true'</span>) &#123;</div><div class="line">            shufflePlay();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            switchTrack(--currentTrack);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    $(<span class="string">'.fastforward'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (shuffle === <span class="string">'true'</span>) &#123;</div><div class="line">            shufflePlay();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            switchTrack(++currentTrack);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    $(<span class="string">'#playlist li'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> _i = i;</div><div class="line">        $(<span class="keyword">this</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            switchTrack(_i);</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (shuffle === <span class="string">'true'</span>) $(<span class="string">'.shuffle'</span>).addClass(<span class="string">'enable'</span>);</div><div class="line">    <span class="keyword">if</span> (repeat == <span class="number">1</span>) &#123;</div><div class="line">        $(<span class="string">'.repeat'</span>).addClass(<span class="string">'once'</span>);</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (repeat == <span class="number">2</span>) &#123;</div><div class="line">        $(<span class="string">'.repeat'</span>).addClass(<span class="string">'all'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    $(<span class="string">'.repeat'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> ($(<span class="keyword">this</span>).hasClass(<span class="string">'once'</span>)) &#123;</div><div class="line">            repeat = localStorage.repeat = <span class="number">2</span>;</div><div class="line">            $(<span class="keyword">this</span>).removeClass(<span class="string">'once'</span>).addClass(<span class="string">'all'</span>);</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> ($(<span class="keyword">this</span>).hasClass(<span class="string">'all'</span>)) &#123;</div><div class="line">            repeat = localStorage.repeat = <span class="number">0</span>;</div><div class="line">            $(<span class="keyword">this</span>).removeClass(<span class="string">'all'</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            repeat = localStorage.repeat = <span class="number">1</span>;</div><div class="line">            $(<span class="keyword">this</span>).addClass(<span class="string">'once'</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    $(<span class="string">'.shuffle'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> ($(<span class="keyword">this</span>).hasClass(<span class="string">'enable'</span>)) &#123;</div><div class="line">            shuffle = localStorage.shuffle = <span class="string">'false'</span>;</div><div class="line">            $(<span class="keyword">this</span>).removeClass(<span class="string">'enable'</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            shuffle = localStorage.shuffle = <span class="string">'true'</span>;</div><div class="line">            $(<span class="keyword">this</span>).addClass(<span class="string">'enable'</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="keyword">var</span> dropbox = <span class="built_in">document</span>.getElementById(<span class="string">"dropbox"</span>)</div><div class="line"></div><div class="line">    <span class="comment">// init event handlers</span></div><div class="line">    dropbox.addEventListener(<span class="string">"dragenter"</span>, dragEnter, <span class="literal">false</span>);</div><div class="line">    dropbox.addEventListener(<span class="string">"dragexit"</span>, dragExit, <span class="literal">false</span>);</div><div class="line">    dropbox.addEventListener(<span class="string">"dragover"</span>, dragOver, <span class="literal">false</span>);</div><div class="line">    dropbox.addEventListener(<span class="string">"drop"</span>, drop, <span class="literal">false</span>);</div><div class="line"></div><div class="line">    <span class="comment">// init the widgets</span></div><div class="line">    $(<span class="string">"#progressbar"</span>).progressbar();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dragEnter</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">        evt.stopPropagation();</div><div class="line">        evt.preventDefault();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dragExit</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">        evt.stopPropagation();</div><div class="line">        evt.preventDefault();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dragOver</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">        evt.stopPropagation();</div><div class="line">        evt.preventDefault();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">drop</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">        evt.stopPropagation();</div><div class="line">        evt.preventDefault();</div><div class="line"></div><div class="line">        <span class="keyword">var</span> files = evt.dataTransfer.files;</div><div class="line">        <span class="keyword">var</span> count = files.length;</div><div class="line"></div><div class="line">        <span class="comment">// Only call the handler if 1 or more files was dropped.</span></div><div class="line">        <span class="keyword">if</span> (count &gt; <span class="number">0</span>)</div><div class="line">            handleFiles(files);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handleFiles</span>(<span class="params">files</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> mp3Files = $.map(files, <span class="function"><span class="keyword">function</span>(<span class="params">f, i</span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> f.type.indexOf(<span class="string">"audio/mp3"</span>) == <span class="number">0</span> ? f : <span class="literal">null</span>;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        $.each(mp3Files, <span class="function"><span class="keyword">function</span>(<span class="params">i, file</span>) </span>&#123;</div><div class="line">            <span class="built_in">document</span>.getElementById(<span class="string">"droplabel"</span>).innerHTML = <span class="string">"Processing "</span> + file.name;</div><div class="line">            </div><div class="line">            <span class="keyword">var</span> reader = <span class="keyword">new</span> FileReader();</div><div class="line"></div><div class="line">            reader.onload = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">                $(<span class="string">'#playlist'</span>).append(<span class="string">'&lt;li&gt;'</span> + <span class="string">'mo'</span> + <span class="string">' - '</span> + file.name + <span class="string">'&lt;/li&gt;'</span>);</div><div class="line">                playlist.push(&#123;</div><div class="line">                    title: file.name,</div><div class="line">                    mp3: evt.target.result</div><div class="line">                &#125;);</div><div class="line">                </div><div class="line">                $(<span class="string">'#playlist li'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</div><div class="line">                    <span class="keyword">var</span> _i = i;</div><div class="line">                    $(<span class="keyword">this</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                        switchTrack(_i);</div><div class="line">                    &#125;);</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// init the reader event handlers</span></div><div class="line">            reader.onprogress = handleReaderProgress;</div><div class="line">            reader.onloadend = handleReaderLoadEnd;</div><div class="line"></div><div class="line">            reader.readAsDataURL(file);</div><div class="line"></div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handleReaderProgress</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (evt.lengthComputable) &#123;</div><div class="line">            <span class="keyword">var</span> loaded = (evt.loaded / evt.total);</div><div class="line"></div><div class="line">            $(<span class="string">"#progressbar"</span>).progressbar(&#123;</div><div class="line">                value: loaded * <span class="number">100</span></div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handleReaderLoadEnd</span>(<span class="params">evt</span>) </span>&#123;</div><div class="line">        $(<span class="string">"#progressbar"</span>).progressbar(&#123;</div><div class="line">            value: <span class="number">100</span></div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;)(jQuery);</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/other/mooc-week6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/23/oj/other/mooc-week6/" class="article-date">
  <time datetime="2014-04-23T04:15:14.000Z" itemprop="datePublished">2014-04-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-未解題目/">解題區 - 未解題目</a>
  </div>

  </div>
  <div class="article-inner ">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/img/1398181133698.png" rel="gallery_ckq8nvxep02oxtkvnp1of0ppn">
        <img src="/img/1398181133698.png" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/23/oj/other/mooc-week6/">程序设计实习 MOOC Week 6(待補)</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/04/23/oj/other/mooc-week6/" data-id="ckq8nvxep02oxtkvnp1of0ppn" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/04/23/oj/other/mooc-week6/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/模擬/">模擬</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/物件導向/">物件導向</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h1 id="前提概要"><a href="#前提概要" class="headerlink" title="前提概要"></a>前提概要</h1><p>這一道題目，照理來講是一版一版慢慢加強，但是突然接收到巨噁模擬題。在很有耐心看完後，看起來是不得度使用物件導向的多形來模擬，不然程式代碼會寫得非常難看，難看也倒還好，只是怕寫不出來。</p>
<p>不過礙於時間關係，寫到一半還是放棄了，於是附加的代碼是 <strong> 失敗 </strong> 的。</p>
<p>卡在 RE 狀態，明明本地端測試不會有噴出 RE 資訊，上傳卻發生了 RE，暫時沒有辦法去解決。<br><a href="http://cxsjsxmooc.openjudge.cn/hw6/" target="_blank" rel="external">題目來源</a></p>
<h1 id="A-魔兽世界终极版"><a href="#A-魔兽世界终极版" class="headerlink" title="A - 魔兽世界终极版"></a>A - 魔兽世界终极版</h1><h2 id="題目"><a href="#題目" class="headerlink" title="題目"></a>題目</h2><p>总时间限制: 2000ms    内存限制: 65536kB</p>
<p>描述<br><blockquote><p>魔兽世界的西面是红魔军的司令部，东面是蓝魔军的司令部。两个司令部之间是依次排列的若干城市，城市从西向东依次编号为1,2,3 …. N ( N &lt;= 20 )。红魔军的司令部算作编号为0的城市，蓝魔军的司令部算作编号为N+1的城市。司令部有生命元，用于制造武士。</p>
<p>两军的司令部都会制造武士。武士一共有 dragon 、ninja、iceman、lion、wolf 五种。每种武士都有编号、生命值、攻击力这三种属性。</p>
<p>双方的武士编号都是从1开始计算。红方制造出来的第 n 个武士，编号就是n。同样，蓝方制造出来的第 n 个武士，编号也是n。</p>
<p>武士在刚降生的时候有一个初始的生命值，生命值在战斗中会发生变化，如果生命值减少到0（生命值变为负数时应当做变为0处理），则武士死亡（消失）。</p>
<p>有的武士可以拥有武器。武器有三种，sword, bomb,和arrow，编号分别为0,1,2。</p>
<p>武士降生后就朝对方司令部走，在经过的城市如果遇到敌人（同一时刻每个城市最多只可能有1个蓝武士和一个红武士），就会发生战斗。每次战斗只有一方发起主动进攻一次。被攻击者生命值会减去进攻者的攻击力值和进攻者手中sword的攻击力值。被进攻者若没死，就会发起反击，被反击者的生命值要减去反击者攻击力值的一半(去尾取整)和反击者手中sword的攻击力值。反击可能致敌人于死地。</p>
<p>如果武士在战斗中杀死敌人（不论是主动进攻杀死还是反击杀死），则其司令部会立即向其发送8个生命元作为奖励，使其生命值增加8。当然前提是司令部得有8个生命元。如果司令部的生命元不足以奖励所有的武士，则优先奖励距离敌方司令部近的武士。</p>
<p>如果某武士在某城市的战斗中杀死了敌人，则该武士的司令部立即取得该城市中所有的生命元。注意，司令部总是先完成全部奖励工作，然后才开始从各个打了胜仗的城市回收生命元。对于因司令部生命元不足而领不到奖励的武士，司令部也不会在取得战利品生命元后为其补发奖励。</p>
<p>如果一次战斗的结果是双方都幸存(平局)，则双方都不能拿走发生战斗的城市的生命元。</p>
<p>城市可以插旗子，一开始所有城市都没有旗子。在插红旗的城市，以及编号为奇数的无旗城市，由红武士主动发起进攻。在插蓝旗的城市，以及编号为偶数的无旗城市，由蓝武士主动发起进攻。</p>
<p>当某个城市有连续两场战斗都是同一方的武士杀死敌人(两场战斗之间如果有若干个战斗时刻并没有发生战斗，则这两场战斗仍然算是连续的；但如果中间有平局的战斗，就不算连续了) ，那么该城市就会插上胜方的旗帜，若原来插着败方的旗帜，则败方旗帜落下。旗帜一旦插上，就一直插着，直到被敌人更换。一个城市最多只能插一面旗帜，旗帜没被敌人更换前，也不会再次插同颜色的旗。</p>
<p>各种武器有其特点：</p>
<p>sword武器的初始攻击力为拥有它的武士的攻击力的20%（去尾取整）。但是sword每经过一次战斗(不论是主动攻击还是反击)，就会变钝，攻击力变为本次战斗前的80% (去尾取整)。sword攻击力变为0时，视为武士失去了sword。如果武士降生时得到了一个初始攻击力为0的sword，则视为武士没有sword.</p>
<p>arrow有一个攻击力值R。如果下一步要走到的城市有敌人，那么拥有arrow的武士就会放箭攻击下一个城市的敌人（不能攻击对方司令部里的敌人）而不被还击。arrow使敌人的生命值减少R，若减至小于等于0，则敌人被杀死。arrow使用3次后即被耗尽，武士失去arrow。两个相邻的武士可能同时放箭把对方射死。</p>
<p>拥有bomb的武士，在战斗开始前如果判断自己将被杀死（不论主动攻击敌人，或者被敌人主动攻击都可能导致自己被杀死，而且假设武士可以知道敌人的攻击力和生命值），那么就会使用bomb和敌人同归于尽。武士不预测对方是否会使用bomb。</p>
<p>武士使用bomb和敌人同归于尽的情况下，不算是一场战斗，双方都不能拿走城市的生命元，也不影响城市的旗帜。</p>
<p>不同的武士有不同的特点。</p>
<p>dragon可以拥有一件武器。编号为n的dragon降生时即获得编号为 n%3 的武器。dragon还有“士气”这个属性，是个浮点数，其值为它降生后其司令部剩余生命元的数量除以造dragon所需的生命元数量。dragon 在一次在它主动进攻的战斗结束后，如果还没有战死，而且士气值大于0.8，就会欢呼。dragon每取得一次战斗的胜利(敌人被杀死)，士气就会增加0.2，每经历一次未能获胜的战斗，士气值就会减少0.2。士气增减发生在欢呼之前。</p>
<p>ninjia可以拥有两件武器。编号为n的ninjia降生时即获得编号为 n%3 和 (n+1)%3的武器。ninja 挨打了也从不反击敌人。</p>
<p>iceman有一件武器。编号为n的iceman降生时即获得编号为 n%3 的武器。iceman 每前进两步，在第2步完成的时候，生命值会减少9，攻击力会增加20。但是若生命值减9后会小于等于0，则生命值不减9,而是变为1。即iceman不会因走多了而死。</p>
<p>lion 有“忠诚度”这个属性，其初始值等于它降生之后其司令部剩余生命元的数目。每经过一场未能杀死敌人的战斗，忠诚度就降低K。忠诚度降至0或0以下，则该lion逃离战场,永远消失。但是已经到达敌人司令部的lion不会逃跑。Lion在己方司令部可能逃跑。lion 若是战死，则其战斗前的生命值就会转移到对手身上。所谓“战斗前”，就是每个小时的40分前的一瞬间。</p>
<p>wolf降生时没有武器，但是在战斗中如果获胜（杀死敌人），就会缴获敌人的武器，但自己已有的武器就不缴获了。被缴获的武器当然不能算新的，已经被用到什么样了，就是什么样的。</p>
<p>以下是不同时间会发生的不同事件：</p>
<p>在每个整点，即每个小时的第0分， 双方的司令部中各有一个武士降生。</p>
<p>红方司令部按照 iceman、lion、wolf、ninja、dragon 的顺序制造武士。</p>
<p>蓝方司令部按照 lion、dragon、ninja、iceman、wolf 的顺序制造武士。</p>
<p>制造武士需要生命元。</p>
<p>制造一个初始生命值为 m 的武士，司令部中的生命元就要减少 m 个。</p>
<p>如果司令部中的生命元不足以制造某武士，那么司令部就等待，直到获得足够生命元后的第一个整点，才制造该武士。例如，在2:00，红方司令部本该制造一个 wolf ，如果此时生命元不足，那么就会等待，直到生命元足够后的下一个整点，才制造一个 wolf。</p>
<p>在每个小时的第5分，该逃跑的lion就在这一时刻逃跑了。</p>
<p>在每个小时的第10分：所有的武士朝敌人司令部方向前进一步。即从己方司令部走到相邻城市，或从一个城市走到下一个城市。或从和敌军司令部相邻的城市到达敌军司令部。</p>
<p>在每个小时的第20分：每个城市产出10个生命元。生命元留在城市，直到被武士取走。</p>
<p>在每个小时的第30分：如果某个城市中只有一个武士，那么该武士取走该城市中的所有生命元，并立即将这些生命元传送到其所属的司令部。</p>
<p>在每个小时的第35分，拥有arrow的武士放箭，对敌人造成伤害。放箭事件应算发生在箭发出的城市。注意，放箭不算是战斗，因此放箭的武士不会得到任何好处。武士在没有敌人的城市被箭射死也不影响其所在城市的旗帜更换情况。</p>
<p>在每个小时的第38分，拥有bomb的武士评估是否应该使用bomb。如果是，就用bomb和敌人同归于尽。</p>
<p>在每个小时的第40分：在有两个武士的城市，会发生战斗。 如果敌人在5分钟前已经被飞来的arrow射死，那么仍然视为发生了一场战斗，而且存活者视为获得了战斗的胜利。此情况下不会有“武士主动攻击”，“武士反击”，“武士战死”的事件发生，但战斗胜利后应该发生的事情都会发生。如Wolf一样能缴获武器，旗帜也可能更换，等等。在此情况下,Dragon同样会通过判断是否应该轮到自己主动攻击来决定是否欢呼。</p>
<p>在每个小时的第50分，司令部报告它拥有的生命元数量。</p>
<p>在每个小时的第55分，每个武士报告其拥有的武器情况。</p>
<p>武士到达对方司令部后就算完成任务了，从此就呆在那里无所事事。</p>
<p>任何一方的司令部里若是出现了2个敌人，则认为该司令部已被敌人占领。</p>
<p>任何一方的司令部被敌人占领，则战争结束。战争结束之后就不会发生任何事情了。</p>
<p>给定一个时间，要求你将从0点0分开始到此时间为止的所有事件按顺序输出。事件及其对应的输出样例如下：</p>
<p>1) 武士降生</p>
<pre><code>输出样例： 000:00 blue lion 1 born

表示在 0点0分，编号为1的蓝魔lion武士降生
如果造出的是dragon，那么还要多输出一行，例：

000:00 blue dragon 1 born
Its morale is 23.34

表示该该dragon降生时士气是23. 34(四舍五入到小数点后两位)

如果造出的是lion，那么还要多输出一行，例:
000:00 blue lion 1 born
Its loyalty is 24

表示该lion降生时的忠诚度是24
</code></pre><p>2) lion逃跑</p>
<pre><code>输出样例： 000:05 blue lion 1 ran away
表示在 0点5分，编号为1的蓝魔lion武士逃走
</code></pre><p>3) 武士前进到某一城市</p>
<pre><code>输出样例： 000:10 red iceman 1 marched to city 1 with 20 elements and force 30
表示在 0点10分，红魔1号武士iceman前进到1号城市，此时他生命值为20,攻击力为30
对于iceman,输出的生命值和攻击力应该是变化后的数值
</code></pre><p>4)武士放箭</p>
<pre><code>输出样例： 000:35 blue dragon 1 shot
表示在 0点35分，编号为1的蓝魔dragon武士射出一支箭。如果射出的箭杀死了敌人，则应如下输出：
000:35 blue dragon 1 shot and killed red lion 4
表示在 0点35分，编号为1的蓝魔dragon武士射出一支箭，杀死了编号为4的红魔lion。
</code></pre><p>5)武士使用bomb</p>
<pre><code>输出样例： 000:38 blue dragon 1 used a bomb and killed red lion 7
表示在 0点38分，编号为1的蓝魔dragon武士用炸弹和编号为7的红魔lion同归于尽。
</code></pre><p>6) 武士主动进攻</p>
<pre><code>输出样例：000:40 red iceman 1 attacked blue lion 1 in city 1 with 20 elements and force 30
表示在0点40分，1号城市中，红魔1号武士iceman 进攻蓝魔1号武士lion,在发起进攻前，红魔1号武士iceman生命值为20，攻击力为 30
</code></pre><p>7) 武士反击</p>
<pre><code>输出样例：001:40 blue dragon 2 fought back against red lion 2 in city 1
表示在1点40分，1号城市中，蓝魔2号武士dragon反击红魔2号武士lion
</code></pre><p>8) 武士战死</p>
<pre><code>输出样例：001:40 red lion 2 was killed in city 1
被箭射死的武士就不会有这一条输出。
</code></pre><p>9) 武士欢呼</p>
<pre><code>输出样例：003:40 blue dragon 2 yelled in city 4
</code></pre><p>10) 武士获取生命元( elements )</p>
<pre><code>输出样例：001:40 blue dragon 2 earned 10 elements for his headquarter
</code></pre><p>11) 旗帜升起</p>
<pre><code>输出样例：004:40 blue flag raised in city 4
</code></pre><p>12) 武士抵达敌军司令部</p>
<pre><code>输出样例：001:10 red iceman 1 reached blue headquarter with 20 elements and force 30
(此时他生命值为20,攻击力为30）对于iceman,输出的生命值和攻击力应该是变化后的数值
</code></pre><p>13) 司令部被占领</p>
<pre><code>输出样例：003:10 blue headquarter was taken
</code></pre><p>14)司令部报告生命元数量</p>
<pre><code>000:50 100 elements in red headquarter
000:50 120 elements in blue headquarter
表示在0点50分，红方司令部有100个生命元，蓝方有120个
</code></pre><p>15)武士报告武器情况</p>
<pre><code>000:55 blue wolf 2 has arrow(2),bomb,sword(23)
000:55 blue wolf 4 has no weapon
000:55 blue wolf 5 has sword(20)
表示在0点55分，蓝魔2号武士wolf有一支arrow（这支arrow还可以用2次），一个bomb，还有一支攻击力为23的sword。
蓝魔4号武士wolf没武器。
蓝魔5号武士wolf有一支攻击力为20的sword。
交代武器情况时，次序依次是：arrow,bomb,sword。如果没有某种武器，某种武器就不用提。报告时，先按从西向东的顺序所有的红武士报告，然后再从西向东所有的蓝武士报告。
</code></pre><p>输出事件时：</p>
<p>首先按时间顺序输出；</p>
<p>同一时间发生的事件，按发生地点从西向东依次输出. 武士前进的事件, 算是发生在目的地。</p>
<p>在一次战斗中有可能发生上面的 6 至 11 号事件。这些事件都算同时发生，其时间就是战斗开始时间。一次战斗中的这些事件，序号小的应该先输出。</p>
<p>两个武士同时抵达同一城市，则先输出红武士的前进事件，后输出蓝武士的。</p>
<p>显然，13号事件发生之前的一瞬间一定发生了12号事件。输出时，这两件事算同一时间发生，但是应先输出12号事件</p>
<p>虽然任何一方的司令部被占领之后，就不会有任何事情发生了。但和司令部被占领同时发生的事件，全都要输出。</p>
</blockquote></p>
<p>输入</p>
<pre><code>第一行是t,代表测试数据组数
每组样例共三行。
第一行，五个整数 M,N,R,K, T。其含义为：

每个司令部一开始都有M个生命元( 1 &lt;= M &lt;= 10000)
两个司令部之间一共有N个城市( 1 &lt;= N &lt;= 20 )
arrow的攻击力是R
lion每经过一场未能杀死敌人的战斗，忠诚度就降低K。
要求输出从0时0分开始，到时间T为止(包括T) 的所有事件。T以分钟为单位，0 &lt;= T &lt;= 5000

第二行：五个整数，依次是 dragon 、ninja、iceman、lion、wolf 的初始生命值。它们都大于0小于等于10000

第三行：五个整数，依次是 dragon 、ninja、iceman、lion、wolf 的攻击力。它们都大于0小于等于10000
</code></pre><p>输出</p>
<pre><code>对每组数据，先输出一行：
Case n:
如对第一组数据就输出 Case1:
然后按恰当的顺序和格式输出到时间T为止发生的所有事件。每个事件都以事件发生的时间开头，时间格式是“时: 分”，“时”有三位，“分”有两位。
</code></pre><p>样例输入</p>
<pre><code>1
20 1 10 10 1000
20 20 30 10 20
5 5 5 5 5
</code></pre><p>样例输出</p>
<pre><code>Case 1:
000:00 blue lion 1 born
Its loyalty is 10
000:10 blue lion 1 marched to city 1 with 10 elements and force 5
000:30 blue lion 1 earned 10 elements for his headquarter
000:50 20 elements in red headquarter
000:50 20 elements in blue headquarter
000:55 blue lion 1 has no weapon
001:00 blue dragon 2 born
Its morale is 0.00
001:10 blue lion 1 reached red headquarter with 10 elements and force 5
001:10 blue dragon 2 marched to city 1 with 20 elements and force 5
001:30 blue dragon 2 earned 10 elements for his headquarter
001:50 20 elements in red headquarter
001:50 10 elements in blue headquarter
001:55 blue lion 1 has no weapon
001:55 blue dragon 2 has arrow(3)
002:10 blue dragon 2 reached red headquarter with 20 elements and force 5
002:10 red headquarter was taken
</code></pre><h2 id="失敗代碼"><a href="#失敗代碼" class="headerlink" title="失敗代碼"></a>失敗代碼</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div><div class="line">642</div><div class="line">643</div><div class="line">644</div><div class="line">645</div><div class="line">646</div><div class="line">647</div><div class="line">648</div><div class="line">649</div><div class="line">650</div><div class="line">651</div><div class="line">652</div><div class="line">653</div><div class="line">654</div><div class="line">655</div><div class="line">656</div><div class="line">657</div><div class="line">658</div><div class="line">659</div><div class="line">660</div><div class="line">661</div><div class="line">662</div><div class="line">663</div><div class="line">664</div><div class="line">665</div><div class="line">666</div><div class="line">667</div><div class="line">668</div><div class="line">669</div><div class="line">670</div><div class="line">671</div><div class="line">672</div><div class="line">673</div><div class="line">674</div><div class="line">675</div><div class="line">676</div><div class="line">677</div><div class="line">678</div><div class="line">679</div><div class="line">680</div><div class="line">681</div><div class="line">682</div><div class="line">683</div><div class="line">684</div><div class="line">685</div><div class="line">686</div><div class="line">687</div><div class="line">688</div><div class="line">689</div><div class="line">690</div><div class="line">691</div><div class="line">692</div><div class="line">693</div><div class="line">694</div><div class="line">695</div><div class="line">696</div><div class="line">697</div><div class="line">698</div><div class="line">699</div><div class="line">700</div><div class="line">701</div><div class="line">702</div><div class="line">703</div><div class="line">704</div><div class="line">705</div><div class="line">706</div><div class="line">707</div><div class="line">708</div><div class="line">709</div><div class="line">710</div><div class="line">711</div><div class="line">712</div><div class="line">713</div><div class="line">714</div><div class="line">715</div><div class="line">716</div><div class="line">717</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt; </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Info</span> &#123;</span></div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="keyword">static</span> <span class="keyword">int</span> M, N, R, K, T;</div><div class="line">        <span class="keyword">static</span> <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; HP, ATK;</div><div class="line">        <span class="keyword">static</span> <span class="built_in">string</span> Mkind[];</div><div class="line">        <span class="keyword">static</span> <span class="built_in">string</span> Rkind[];</div><div class="line">        <span class="keyword">static</span> <span class="built_in">string</span> Bkind[];</div><div class="line">&#125;;</div><div class="line"><span class="keyword">int</span> Info::M = <span class="number">0</span>, Info::N = <span class="number">0</span>, Info::R = <span class="number">0</span>, Info::K = <span class="number">0</span>, Info::T = <span class="number">0</span>;</div><div class="line"><span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; Info::HP, Info::ATK;</div><div class="line"><span class="built_in">string</span> Info::Mkind[] = &#123;<span class="string">"dragon"</span>, <span class="string">"ninja"</span>, <span class="string">"iceman"</span>, <span class="string">"lion"</span>, <span class="string">"wolf"</span>&#125;;</div><div class="line"><span class="built_in">string</span> Info::Rkind[] = &#123;<span class="string">"dragon"</span>, <span class="string">"iceman"</span>, <span class="string">"lion"</span>, <span class="string">"wolf"</span>, <span class="string">"ninja"</span>&#125;;</div><div class="line"><span class="built_in">string</span> Info::Bkind[] = &#123;<span class="string">"wolf"</span>, <span class="string">"lion"</span>, <span class="string">"dragon"</span>, <span class="string">"ninja"</span>, <span class="string">"iceman"</span>&#125;;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Weapon</span> &#123;</span></div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;&#125;;</div><div class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getMeleeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;;</div><div class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">actMeleeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;; </div><div class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getRangeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">actRangeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getBombAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">actBombAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">&#125;;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sword</span>:</span> <span class="keyword">public</span> Weapon &#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="keyword">int</span> attack;</div><div class="line">        Sword(<span class="keyword">int</span> _attack): attack(_attack) &#123;</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">int</span> <span class="title">getMeleeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> attack;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">int</span> <span class="title">actMeleeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">            attack = attack * <span class="number">8</span> / <span class="number">10</span>;</div><div class="line">            <span class="keyword">return</span> attack &gt; <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"sword(%d)"</span>, attack);</div><div class="line">        &#125;</div><div class="line">&#125;;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Arrow</span>:</span> <span class="keyword">public</span> Weapon &#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="keyword">int</span> R, usedTime;</div><div class="line">        Arrow(<span class="keyword">int</span> _R): R(_R) &#123;</div><div class="line">            usedTime = <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">int</span> <span class="title">getRangeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> usedTime &lt; <span class="number">3</span> ? R : <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">int</span> <span class="title">actRangeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">            usedTime++;</div><div class="line">            <span class="keyword">return</span> usedTime &gt;= <span class="number">3</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"arrow(%d)"</span>, <span class="number">3</span> - usedTime);</div><div class="line">        &#125;</div><div class="line">&#125;;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bomb</span>:</span> <span class="keyword">public</span> Weapon &#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        Bomb() &#123;</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">int</span> <span class="title">getBombAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"bomb"</span>);</div><div class="line">        &#125;</div><div class="line">&#125;;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeaponFactory</span> &#123;</span></div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="function"><span class="keyword">static</span> Weapon* <span class="title">build</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> attack)</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span>(n == <span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">if</span>(attack / <span class="number">5</span> &lt;= <span class="number">0</span>)</div><div class="line">                    <span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Sword(attack/<span class="number">5</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(n == <span class="number">2</span>)</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Arrow(Info::R);</div><div class="line">            <span class="keyword">else</span></div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Bomb();</div><div class="line">        &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Warrior</span> &#123;</span></div><div class="line">    <span class="keyword">public</span>:</div><div class="line">  		<span class="keyword">int</span> n;  </div><div class="line">  		<span class="keyword">int</span> life;  </div><div class="line">  		Warrior(<span class="keyword">int</span> _n, <span class="keyword">int</span> _life): n(_n), life(_life) &#123;</div><div class="line">  			</div><div class="line">  		&#125;  </div><div class="line">  		<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;&#125;;  </div><div class="line">  		<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">showName</span><span class="params">()</span> </span>&#123;&#125;;  </div><div class="line">  		<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">showWeapon</span><span class="params">()</span> </span>&#123;&#125;;  </div><div class="line">  		<span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getAttack</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> <span class="number">0</span>;&#125;</div><div class="line">  		<span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getFled</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> <span class="number">0</span>;&#125;</div><div class="line">  		<span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getMeleeAttack</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> <span class="number">0</span>;&#125;</div><div class="line">  		<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">actMeleeAttack</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">  		<span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getBackAttack</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> <span class="number">0</span>;&#125;</div><div class="line">  		<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">actBackAttack</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">  		<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">()</span> </span>&#123;&#125;;</div><div class="line">  		<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">actRangeAttack</span><span class="params">(Warrior* o)</span> </span>&#123;&#125;;</div><div class="line">&#125;;  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dragon</span>:</span> <span class="keyword">public</span> Warrior &#123;  </div><div class="line">    <span class="keyword">public</span>:  </div><div class="line">  		Weapon *weapon;</div><div class="line">  		<span class="keyword">float</span> morale;  </div><div class="line">  		Dragon(<span class="keyword">int</span> _n, <span class="keyword">int</span> _life, <span class="keyword">float</span> _morale): Warrior(_n, _life), morale(_morale) &#123;</div><div class="line">    		weapon = WeaponFactory::build(n%<span class="number">3</span>, Info::ATK[<span class="string">"dragon"</span>]);</div><div class="line">  		&#125;  </div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="built_in">printf</span>(<span class="string">"dragon %d born\n"</span>, n);</div><div class="line">  			<span class="built_in">printf</span>(<span class="string">"Its morale is %.2f\n"</span>, morale);</div><div class="line">  		&#125;  </div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">showName</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="built_in">printf</span>(<span class="string">"dragon %d"</span>, n);</div><div class="line">  		&#125;  		</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">showWeapon</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span>(weapon != <span class="literal">NULL</span>)</div><div class="line">                weapon-&gt;show();</div><div class="line">            <span class="keyword">else</span></div><div class="line">                <span class="built_in">printf</span>(<span class="string">"no weapon"</span>);</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">int</span> <span class="title">getAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">return</span> Info::ATK[<span class="string">"dragon"</span>];</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">int</span> <span class="title">getMeleeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">int</span> m = <span class="number">0</span>;</div><div class="line">  			<span class="keyword">if</span>(weapon != <span class="literal">NULL</span>)</div><div class="line">  				m = weapon-&gt;getMeleeAttack();</div><div class="line">  			<span class="keyword">return</span> getAttack() + m;</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">int</span> <span class="title">getBackAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">int</span> m = <span class="number">0</span>;</div><div class="line">  			<span class="keyword">if</span>(weapon != <span class="literal">NULL</span>)</div><div class="line">  				m = weapon-&gt;getMeleeAttack();</div><div class="line">  			<span class="keyword">return</span> getAttack()/<span class="number">2</span> + m;</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">actMeleeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">if</span>(weapon != <span class="literal">NULL</span>) &#123;</div><div class="line">  				<span class="keyword">int</span> f = weapon-&gt;actMeleeAttack();</div><div class="line">  				<span class="keyword">if</span>(f == <span class="number">0</span>) &#123;</div><div class="line">  					<span class="keyword">delete</span> weapon;</div><div class="line">  					weapon = <span class="literal">NULL</span>;</div><div class="line">  				&#125;</div><div class="line">  			&#125;</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">actBackAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			actMeleeAttack();</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">actRangeAttack</span><span class="params">(Warrior* o)</span> </span>&#123;</div><div class="line">  			<span class="keyword">if</span>(weapon != <span class="literal">NULL</span>) &#123;</div><div class="line">  				o-&gt;life -= weapon-&gt;getRangeAttack();</div><div class="line">  				<span class="keyword">int</span> f = weapon-&gt;actRangeAttack();</div><div class="line">  				<span class="keyword">if</span>(f == <span class="number">1</span>) &#123;</div><div class="line">  					<span class="keyword">delete</span> weapon;</div><div class="line">  					weapon = <span class="literal">NULL</span>;</div><div class="line">  				&#125;</div><div class="line">  			&#125;</div><div class="line">        &#125;</div><div class="line">&#125;;  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ninja</span>:</span> <span class="keyword">public</span> Warrior &#123;  </div><div class="line">    <span class="keyword">public</span>:  </div><div class="line">        Weapon *weapon[<span class="number">2</span>];  </div><div class="line">        Ninja(<span class="keyword">int</span> _n, <span class="keyword">int</span> _life): Warrior(_n, _life) &#123;</div><div class="line">    		weapon[<span class="number">0</span>] = WeaponFactory::build(n%<span class="number">3</span>, Info::ATK[<span class="string">"ninja"</span>]);</div><div class="line">    		weapon[<span class="number">1</span>] = WeaponFactory::build((n+<span class="number">1</span>)%<span class="number">3</span>, Info::ATK[<span class="string">"ninja"</span>]);</div><div class="line">      	&#125;  </div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;  </div><div class="line">    		<span class="built_in">printf</span>(<span class="string">"ninja %d born\n"</span>, n);</div><div class="line">  		&#125;  </div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">showName</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="built_in">printf</span>(<span class="string">"ninja %d"</span>, n);</div><div class="line">  		&#125;		</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">showWeapon</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">int</span> f1 = n%<span class="number">3</span>, f2 = (n+<span class="number">1</span>)%<span class="number">3</span>, f = <span class="number">0</span>;</div><div class="line">            <span class="keyword">if</span>(f1 &lt; f2) &#123;</div><div class="line">                <span class="keyword">if</span>(weapon[<span class="number">0</span>] != <span class="literal">NULL</span>)</div><div class="line">                    weapon[<span class="number">0</span>]-&gt;show(), f++;</div><div class="line">                <span class="keyword">if</span>(f)	<span class="built_in">putchar</span>(<span class="string">','</span>);</div><div class="line">                <span class="keyword">if</span>(weapon[<span class="number">1</span>] != <span class="literal">NULL</span>)</div><div class="line">                    weapon[<span class="number">1</span>]-&gt;show(), f++;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">if</span>(weapon[<span class="number">1</span>] != <span class="literal">NULL</span>)</div><div class="line">                    weapon[<span class="number">1</span>]-&gt;show(), f++;</div><div class="line">                <span class="keyword">if</span>(f)	<span class="built_in">putchar</span>(<span class="string">','</span>);</div><div class="line">                <span class="keyword">if</span>(weapon[<span class="number">0</span>] != <span class="literal">NULL</span>)</div><div class="line">                    weapon[<span class="number">0</span>]-&gt;show(), f++;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(f == <span class="number">0</span>)</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"no weapon"</span>);</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">int</span> <span class="title">getAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">return</span> Info::ATK[<span class="string">"ninja"</span>];</div><div class="line">  		&#125;  		</div><div class="line">        <span class="function"><span class="keyword">int</span> <span class="title">getMeleeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">int</span> m = <span class="number">0</span>;</div><div class="line">  			<span class="keyword">if</span>(weapon[<span class="number">0</span>] != <span class="literal">NULL</span>)</div><div class="line">  				m += weapon[<span class="number">0</span>]-&gt;getMeleeAttack();</div><div class="line">  			<span class="keyword">if</span>(weapon[<span class="number">1</span>] != <span class="literal">NULL</span>)</div><div class="line">  				m += weapon[<span class="number">1</span>]-&gt;getMeleeAttack();</div><div class="line">  			<span class="keyword">return</span> getAttack() + m;</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">int</span> <span class="title">getBackAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">int</span> m = <span class="number">0</span>;</div><div class="line">  			<span class="keyword">if</span>(weapon[<span class="number">0</span>] != <span class="literal">NULL</span>)</div><div class="line">  				m += weapon[<span class="number">0</span>]-&gt;getMeleeAttack();</div><div class="line">  			<span class="keyword">if</span>(weapon[<span class="number">1</span>] != <span class="literal">NULL</span>)</div><div class="line">  				m += weapon[<span class="number">1</span>]-&gt;getMeleeAttack();</div><div class="line">  			<span class="keyword">return</span> getAttack()/<span class="number">2</span> + m;</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">actMeleeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span>(weapon[<span class="number">0</span>] != <span class="literal">NULL</span>) &#123;</div><div class="line">  				<span class="keyword">int</span> f = weapon[<span class="number">0</span>]-&gt;actMeleeAttack();</div><div class="line">  				<span class="keyword">if</span>(f == <span class="number">0</span>) &#123;</div><div class="line">  					<span class="keyword">delete</span> weapon[<span class="number">0</span>];</div><div class="line">  					weapon[<span class="number">0</span>] = <span class="literal">NULL</span>;</div><div class="line">  				&#125;</div><div class="line">  			&#125;</div><div class="line">  			<span class="keyword">if</span>(weapon[<span class="number">1</span>] != <span class="literal">NULL</span>) &#123;</div><div class="line">  				<span class="keyword">int</span> f = weapon[<span class="number">1</span>]-&gt;actMeleeAttack();</div><div class="line">  				<span class="keyword">if</span>(f == <span class="number">0</span>) &#123;</div><div class="line">  					<span class="keyword">delete</span> weapon[<span class="number">1</span>];</div><div class="line">  					weapon[<span class="number">1</span>] = <span class="literal">NULL</span>;</div><div class="line">  				&#125;</div><div class="line">  			&#125;</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">actBackAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			actMeleeAttack();</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">actRangeAttack</span><span class="params">(Warrior* o)</span> </span>&#123;</div><div class="line">  			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</div><div class="line">  				<span class="keyword">if</span>(weapon[i] != <span class="literal">NULL</span>) &#123;</div><div class="line">  					o-&gt;life -= weapon[i]-&gt;getRangeAttack();</div><div class="line">  					<span class="keyword">int</span> f = weapon[i]-&gt;actRangeAttack();</div><div class="line">  					<span class="keyword">if</span>(f == <span class="number">1</span>)</div><div class="line">  						weapon[i] = <span class="literal">NULL</span>;</div><div class="line">  				&#125;</div><div class="line">  			&#125;</div><div class="line">        &#125;</div><div class="line">&#125;;  </div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Iceman</span>:</span> <span class="keyword">public</span> Warrior &#123;  </div><div class="line">    <span class="keyword">public</span>:  </div><div class="line">  		Weapon *weapon;</div><div class="line">  		<span class="keyword">int</span> move_count;</div><div class="line">  		<span class="keyword">int</span> attack;</div><div class="line">  		Iceman(<span class="keyword">int</span> _n, <span class="keyword">int</span> _life): Warrior(_n, _life) &#123;</div><div class="line">    		weapon = WeaponFactory::build(n%<span class="number">3</span>, Info::ATK[<span class="string">"iceman"</span>]);</div><div class="line">    		move_count = <span class="number">0</span>;</div><div class="line">    		attack = Info::ATK[<span class="string">"iceman"</span>];</div><div class="line">  		&#125;  </div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;  </div><div class="line">    		<span class="built_in">printf</span>(<span class="string">"iceman %d born\n"</span>, n);</div><div class="line">  		&#125;  		</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">showName</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="built_in">printf</span>(<span class="string">"iceman %d"</span>, n);</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">showWeapon</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span>(weapon != <span class="literal">NULL</span>)</div><div class="line">                weapon-&gt;show();</div><div class="line">            <span class="keyword">else</span></div><div class="line">                <span class="built_in">printf</span>(<span class="string">"no weapon"</span>);</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">int</span> <span class="title">getAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">return</span> attack;</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">int</span> <span class="title">getMeleeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">int</span> m = <span class="number">0</span>;</div><div class="line">  			<span class="keyword">if</span>(weapon != <span class="literal">NULL</span>)</div><div class="line">  				m = weapon-&gt;getMeleeAttack();</div><div class="line">  			<span class="keyword">return</span> getAttack() + m;</div><div class="line">  		&#125;  		</div><div class="line">        <span class="function"><span class="keyword">int</span> <span class="title">getBackAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">int</span> m = <span class="number">0</span>;</div><div class="line">  			<span class="keyword">if</span>(weapon != <span class="literal">NULL</span>)</div><div class="line">  				m = weapon-&gt;getMeleeAttack();</div><div class="line">  			<span class="keyword">return</span> getAttack()/<span class="number">2</span> + m;</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">actMeleeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">if</span>(weapon != <span class="literal">NULL</span>) &#123;</div><div class="line">  				<span class="keyword">int</span> f = weapon-&gt;actMeleeAttack();</div><div class="line">  				<span class="keyword">if</span>(f == <span class="number">0</span>) &#123;</div><div class="line">  					<span class="keyword">delete</span> weapon;</div><div class="line">  					weapon = <span class="literal">NULL</span>;</div><div class="line">  				&#125;</div><div class="line">  			&#125;</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">actBackAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			actMeleeAttack();</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">actRangeAttack</span><span class="params">(Warrior* o)</span> </span>&#123;</div><div class="line">  			<span class="keyword">if</span>(weapon != <span class="literal">NULL</span>) &#123;</div><div class="line">  				o-&gt;life -= weapon-&gt;getRangeAttack();</div><div class="line">  				<span class="keyword">int</span> f = weapon-&gt;actRangeAttack();</div><div class="line">  				<span class="keyword">if</span>(f == <span class="number">1</span>) &#123;</div><div class="line">  					<span class="keyword">delete</span> weapon;</div><div class="line">  					weapon = <span class="literal">NULL</span>;</div><div class="line">  				&#125;</div><div class="line">  			&#125;</div><div class="line">        &#125;</div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">move</span><span class="params">()</span> </span>&#123;</div><div class="line">  			move_count++;</div><div class="line">  			<span class="keyword">if</span>(move_count == <span class="number">2</span>) &#123;</div><div class="line">  				attack += <span class="number">20</span>;</div><div class="line">  				life -= <span class="number">9</span>;</div><div class="line">  				<span class="keyword">if</span>(life &lt;= <span class="number">0</span>)</div><div class="line">  					life = <span class="number">1</span>;</div><div class="line">  				move_count = <span class="number">0</span>;</div><div class="line">  			&#125;</div><div class="line">  		&#125;</div><div class="line">&#125;;  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lion</span>:</span> <span class="keyword">public</span> Warrior &#123;  </div><div class="line">    <span class="keyword">public</span>:  </div><div class="line">  		<span class="keyword">int</span> loyalty;  </div><div class="line">  		Lion(<span class="keyword">int</span> _n, <span class="keyword">int</span> _life, <span class="keyword">int</span> _loyalty): Warrior(_n, _life), loyalty(_loyalty) &#123; </div><div class="line">  		&#125;  </div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="built_in">printf</span>(<span class="string">"lion %d born\n"</span>, n);</div><div class="line">  			<span class="built_in">printf</span>(<span class="string">"Its loyalty is %d\n"</span>, loyalty);</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">showName</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="built_in">printf</span>(<span class="string">"lion %d"</span>, n);</div><div class="line">  		&#125;	</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">showWeapon</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"no weapon"</span>);</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">int</span> <span class="title">getAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">return</span> Info::ATK[<span class="string">"lion"</span>];</div><div class="line">  		&#125;  		</div><div class="line">        <span class="function"><span class="keyword">int</span> <span class="title">getMeleeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">return</span> getAttack();</div><div class="line">  		&#125;		</div><div class="line">        <span class="function"><span class="keyword">int</span> <span class="title">getBackAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">return</span> getAttack()/<span class="number">2</span>;</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">int</span> <span class="title">getFled</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">return</span> loyalty &lt;= <span class="number">0</span>;</div><div class="line">  		&#125;</div><div class="line">&#125;;  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wolf</span>:</span> <span class="keyword">public</span> Warrior &#123;  </div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        Weapon *weapon[<span class="number">3</span>];</div><div class="line">  		Wolf(<span class="keyword">int</span> _n, <span class="keyword">int</span> _life): Warrior(_n, _life) &#123;</div><div class="line">  			weapon[<span class="number">0</span>] = weapon[<span class="number">1</span>] = weapon[<span class="number">2</span>] = <span class="literal">NULL</span>;</div><div class="line">        &#125; </div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="built_in">printf</span>(<span class="string">"wolf %d born\n"</span>, n);</div><div class="line">        &#125; </div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">showName</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="built_in">printf</span>(<span class="string">"wolf %d"</span>, n);</div><div class="line">  		&#125;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">showWeapon</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">int</span> f = <span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</div><div class="line">                <span class="keyword">if</span>(weapon[i] != <span class="literal">NULL</span>) &#123;</div><div class="line">                    <span class="keyword">if</span>(f)	<span class="built_in">putchar</span>(<span class="string">','</span>);</div><div class="line">                    weapon[i]-&gt;show(), f++;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(f == <span class="number">0</span>)</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"no weapon"</span>);</div><div class="line">  		&#125;  		</div><div class="line">        <span class="function"><span class="keyword">int</span> <span class="title">getAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">return</span> Info::ATK[<span class="string">"wolf"</span>];</div><div class="line">  		&#125;  		</div><div class="line">        <span class="function"><span class="keyword">int</span> <span class="title">getMeleeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">int</span> m = <span class="number">0</span>;</div><div class="line">  			<span class="keyword">if</span>(weapon[<span class="number">2</span>] != <span class="literal">NULL</span>)</div><div class="line">  				m = weapon[<span class="number">2</span>]-&gt;getMeleeAttack();</div><div class="line">  			<span class="keyword">return</span> getAttack() + m;</div><div class="line">  		&#125;</div><div class="line">        <span class="function"><span class="keyword">int</span> <span class="title">getBackAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			<span class="keyword">int</span> m = <span class="number">0</span>;</div><div class="line">  			<span class="keyword">if</span>(weapon[<span class="number">2</span>] != <span class="literal">NULL</span>)</div><div class="line">  				m = weapon[<span class="number">2</span>]-&gt;getMeleeAttack();</div><div class="line">  			<span class="keyword">return</span> getAttack()/<span class="number">2</span> + m;</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">actMeleeAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span>(weapon[<span class="number">2</span>] != <span class="literal">NULL</span>) &#123;</div><div class="line">  				<span class="keyword">int</span> f = weapon[<span class="number">2</span>]-&gt;actMeleeAttack();</div><div class="line">  				<span class="keyword">if</span>(f == <span class="number">0</span>) &#123;</div><div class="line">  					<span class="keyword">delete</span> weapon[<span class="number">2</span>];</div><div class="line">  					weapon[<span class="number">2</span>] = <span class="literal">NULL</span>;</div><div class="line">  				&#125;</div><div class="line">  			&#125;</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">actBackAttack</span><span class="params">()</span> </span>&#123;</div><div class="line">  			actMeleeAttack();</div><div class="line">  		&#125;</div><div class="line">  		<span class="function"><span class="keyword">void</span> <span class="title">actRangeAttack</span><span class="params">(Warrior* o)</span> </span>&#123;</div><div class="line">  			<span class="keyword">if</span>(weapon[<span class="number">2</span>] != <span class="literal">NULL</span>) &#123;</div><div class="line">  				o-&gt;life -= weapon[<span class="number">2</span>]-&gt;getRangeAttack();</div><div class="line">  				<span class="keyword">int</span> f = weapon[<span class="number">2</span>]-&gt;actRangeAttack();</div><div class="line">  				<span class="keyword">if</span>(f == <span class="number">1</span>)</div><div class="line">  					weapon[<span class="number">2</span>] = <span class="literal">NULL</span>;</div><div class="line">  			&#125;</div><div class="line">        &#125;</div><div class="line">&#125;;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">WarriorFactory</span> &#123;</span></div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="function"><span class="keyword">static</span> Warrior* <span class="title">build</span><span class="params">(<span class="built_in">string</span> kind, <span class="keyword">int</span> n, <span class="keyword">float</span> _morale, <span class="keyword">int</span> _loyalty)</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span>(!<span class="built_in">strcmp</span>(kind.c_str(), <span class="string">"dragon"</span>))</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Dragon(n, Info::HP[kind], _morale);</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(!<span class="built_in">strcmp</span>(kind.c_str(), <span class="string">"ninja"</span>))</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Ninja(n, Info::HP[kind]);</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(!<span class="built_in">strcmp</span>(kind.c_str(), <span class="string">"iceman"</span>))</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Iceman(n, Info::HP[kind]);</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(!<span class="built_in">strcmp</span>(kind.c_str(), <span class="string">"lion"</span>))</div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Lion(n, Info::HP[kind], _loyalty);</div><div class="line">            <span class="keyword">else</span></div><div class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Wolf(n, Info::HP[kind]);				</div><div class="line">        &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Headquarter</span> &#123;</span></div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="keyword">int</span> HP;</div><div class="line">        <span class="keyword">int</span> dir;</div><div class="line">        <span class="keyword">int</span> n;</div><div class="line">        Headquarter(<span class="keyword">int</span> _HP, <span class="keyword">int</span> _dir): HP(_HP), dir(_dir) &#123;</div><div class="line">            n = <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">produce</span><span class="params">(<span class="built_in">vector</span>&lt;Warrior*&gt; R[], <span class="built_in">vector</span>&lt;Warrior*&gt; B[], <span class="keyword">int</span> hh, <span class="keyword">int</span> mm)</span> </span>&#123;</div><div class="line">            <span class="built_in">string</span> kind;</div><div class="line">            <span class="keyword">int</span> born_cost;</div><div class="line">            <span class="keyword">if</span>(dir == <span class="number">1</span>) &#123; <span class="comment">// RED</span></div><div class="line">                kind = Info::Rkind[n % <span class="number">5</span>];</div><div class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// BLUE</span></div><div class="line">                kind = Info::Bkind[n % <span class="number">5</span>];</div><div class="line">            &#125;</div><div class="line">            born_cost = Info::HP[kind];</div><div class="line">            <span class="keyword">if</span>(born_cost &gt; HP)</div><div class="line">                <span class="keyword">return</span>;</div><div class="line">            HP -= born_cost;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%03d:%02d %s "</span>, hh, mm, dir == <span class="number">1</span> ? <span class="string">"red"</span> : <span class="string">"blue"</span>);</div><div class="line">            Warrior *w = WarriorFactory::build(kind, n, (<span class="keyword">double</span>) HP/ Info::HP[kind], HP);</div><div class="line">            w-&gt;show();</div><div class="line">            <span class="keyword">if</span>(dir == <span class="number">1</span>) &#123; <span class="comment">// RED</span></div><div class="line">                R[<span class="number">0</span>].push_back(w);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                B[Info::N + <span class="number">1</span>].push_back(w);</div><div class="line">            &#125;</div><div class="line">            n++;</div><div class="line">        &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">simulate</span><span class="params">()</span> </span>&#123;</div><div class="line">    Headquarter RED(Info::M, 1), BLUE(Info::M, -1);</div><div class="line">    <span class="keyword">int</span> timescale[] = &#123;<span class="number">0</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">35</span>, <span class="number">38</span>, <span class="number">40</span>, <span class="number">50</span>, <span class="number">55</span>&#125;;</div><div class="line">    <span class="built_in">vector</span>&lt;Warrior*&gt; R[Info::N + <span class="number">2</span>], B[Info::N + <span class="number">2</span>];</div><div class="line">    <span class="keyword">int</span> cityHP[Info::N+<span class="number">2</span>], cityFlag[Info::N+<span class="number">2</span>], cityBattle[Info::N+<span class="number">2</span>];</div><div class="line">    <span class="comment">// cityFlag[], cityBattle[], NONE: 0, RED: 1, BLUE: 2 </span></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= Info::N + <span class="number">1</span>; i++)</div><div class="line">        cityHP[i] = cityFlag[i] = cityBattle[i] = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> hour = <span class="number">0</span>; ; hour++) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">            <span class="keyword">if</span>(hour * <span class="number">60</span> + timescale[i] &gt; Info::T)</div><div class="line">                <span class="keyword">return</span>;</div><div class="line">            <span class="keyword">int</span> t = timescale[i];</div><div class="line">            <span class="keyword">if</span>(t == <span class="number">0</span>) &#123; <span class="comment">// fixed</span></div><div class="line">                RED.produce(R, B, hour, t);</div><div class="line">                BLUE.produce(R, B, hour, t);</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(t == <span class="number">5</span>) &#123; <span class="comment">// fixed</span></div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= Info::N; i++) &#123;</div><div class="line">                    <span class="keyword">if</span>(R[i].size() &gt; <span class="number">0</span>) &#123;</div><div class="line">                        <span class="keyword">if</span>(R[i][<span class="number">0</span>]-&gt;getFled()) &#123;</div><div class="line">                            <span class="built_in">printf</span>(<span class="string">"%03d:%02d red "</span>, hour, t);</div><div class="line">                            R[i][<span class="number">0</span>]-&gt;showName();</div><div class="line">                            <span class="built_in">printf</span>(<span class="string">" ran away\n"</span>);</div><div class="line">                            R[i].clear();</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Info::N+<span class="number">1</span>; i++) &#123;</div><div class="line">                    <span class="keyword">if</span>(B[i].size() &gt; <span class="number">0</span>) &#123;</div><div class="line">                        <span class="keyword">if</span>(B[i][<span class="number">0</span>]-&gt;getFled()) &#123;</div><div class="line">                            <span class="built_in">printf</span>(<span class="string">"%03d:%02d blue "</span>, hour, t);</div><div class="line">                            B[i][<span class="number">0</span>]-&gt;showName();</div><div class="line">                            <span class="built_in">printf</span>(<span class="string">" ran away\n"</span>);</div><div class="line">                            B[i].clear();</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(t == <span class="number">10</span>) &#123; <span class="comment">// fixed</span></div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= Info::N + <span class="number">1</span>; i++) &#123;</div><div class="line">                    <span class="keyword">if</span>(R[i].size() &gt; <span class="number">0</span> &amp;&amp; i &lt;= Info::N) &#123;</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"%03d:%02d red "</span>, hour, t);</div><div class="line">                        R[i][<span class="number">0</span>]-&gt;showName();</div><div class="line">                        R[i][<span class="number">0</span>]-&gt;move();</div><div class="line">                        <span class="keyword">if</span>(i + <span class="number">1</span> &lt; Info::N + <span class="number">1</span>)</div><div class="line">                            <span class="built_in">printf</span>(<span class="string">" marched to city %d with %d elements and force %d\n"</span>, i + <span class="number">1</span>, R[i][<span class="number">0</span>]-&gt;life, R[i][<span class="number">0</span>]-&gt;getAttack());</div><div class="line">                        <span class="keyword">else</span></div><div class="line">                            <span class="built_in">printf</span>(<span class="string">" reached blue headquarter with %d elements and force %d\n"</span>, R[i][<span class="number">0</span>]-&gt;life, R[i][<span class="number">0</span>]-&gt;getAttack());</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">if</span>(B[i].size() &gt; <span class="number">0</span> &amp;&amp; i &gt; <span class="number">0</span>) &#123;</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"%03d:%02d blue "</span>, hour, t);</div><div class="line">                        B[i][<span class="number">0</span>]-&gt;showName();</div><div class="line">                        B[i][<span class="number">0</span>]-&gt;move();</div><div class="line">                        <span class="keyword">if</span>(i - <span class="number">1</span> &gt; <span class="number">0</span>)</div><div class="line">                            <span class="built_in">printf</span>(<span class="string">" marched to city %d with %d elements and force %d\n"</span>, i - <span class="number">1</span>, B[i][<span class="number">0</span>]-&gt;life, B[i][<span class="number">0</span>]-&gt;getAttack());</div><div class="line">                        <span class="keyword">else</span></div><div class="line">                            <span class="built_in">printf</span>(<span class="string">" reached red headquarter with %d elements and force %d\n"</span>, B[i][<span class="number">0</span>]-&gt;life, B[i][<span class="number">0</span>]-&gt;getAttack());</div><div class="line">                </div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = Info::N; i &gt;= <span class="number">0</span>; i--) &#123;</div><div class="line">                    <span class="keyword">if</span>(R[i].size() &gt; <span class="number">0</span>) &#123;</div><div class="line">                        R[i+<span class="number">1</span>].push_back(R[i][<span class="number">0</span>]);</div><div class="line">                        R[i].clear();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Info::N + <span class="number">1</span>; i++) &#123;</div><div class="line">                    <span class="keyword">if</span>(B[i].size() &gt; <span class="number">0</span>)	 &#123;</div><div class="line">                        B[i<span class="number">-1</span>].push_back(B[i][<span class="number">0</span>]);</div><div class="line">                        B[i].clear();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span>(B[<span class="number">0</span>].size() &gt;= <span class="number">2</span>) &#123;</div><div class="line">                    <span class="built_in">printf</span>(<span class="string">"%03d:%02d red headquarter was taken\n"</span>, hour, t);</div><div class="line">                    <span class="keyword">return</span> ;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span>(R[Info::N+<span class="number">1</span>].size() &gt;= <span class="number">2</span>) &#123;</div><div class="line">                    <span class="built_in">printf</span>(<span class="string">"%03d:%02d blue headquarter was taken\n"</span>, hour, t);</div><div class="line">                    <span class="keyword">return</span> ;</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(t == <span class="number">20</span>) &#123; <span class="comment">// fixed</span></div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Info::N; i++)</div><div class="line">                    cityHP[i] += <span class="number">10</span>;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(t == <span class="number">30</span>) &#123; <span class="comment">// fixed</span></div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Info::N; i++) &#123;</div><div class="line">                    <span class="keyword">if</span>(R[i].size() == <span class="number">1</span> &amp;&amp; B[i].size() == <span class="number">0</span>) &#123;</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"%03d:%02d red "</span>, hour, t);</div><div class="line">                        R[i][<span class="number">0</span>]-&gt;showName();</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">" earned %d elements for his headquarter\n"</span>, cityHP[i]);</div><div class="line">                        RED.HP += cityHP[i], cityHP[i] = <span class="number">0</span>;</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">if</span>(R[i].size() == <span class="number">0</span> &amp;&amp; B[i].size() == <span class="number">1</span>) &#123;</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"%03d:%02d blue "</span>, hour, t);</div><div class="line">                        B[i][<span class="number">0</span>]-&gt;showName();</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">" earned %d elements for his headquarter\n"</span>, cityHP[i]);</div><div class="line">                        BLUE.HP += cityHP[i], cityHP[i] = <span class="number">0</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(t == <span class="number">35</span>) &#123; <span class="comment">// fixed</span></div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= Info::N; i++) &#123;</div><div class="line">                    <span class="keyword">if</span>(R[i].size() &gt; <span class="number">0</span> &amp;&amp; B[i+<span class="number">1</span>].size() &gt; <span class="number">0</span>) &#123;</div><div class="line">                        R[i][<span class="number">0</span>]-&gt;actRangeAttack(B[i+<span class="number">1</span>][<span class="number">0</span>]);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Info::N + <span class="number">1</span>; i++) &#123;</div><div class="line">                    <span class="keyword">if</span>(B[i].size() &gt; <span class="number">0</span> &amp;&amp; R[i<span class="number">-1</span>].size() &gt; <span class="number">0</span>) &#123;</div><div class="line">                        B[i][<span class="number">0</span>]-&gt;actRangeAttack(R[i<span class="number">-1</span>][<span class="number">0</span>]);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(t == <span class="number">38</span>) &#123; <span class="comment">// fixed</span></div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= Info::N + <span class="number">1</span>; i++) &#123;</div><div class="line">                    <span class="keyword">if</span>(R[i].size() &gt; <span class="number">0</span> &amp;&amp; B[i].size() &gt; <span class="number">0</span>) &#123;</div><div class="line">                        <span class="keyword">int</span> rATK = R[i][<span class="number">0</span>]-&gt;getMeleeAttack();</div><div class="line">                        <span class="keyword">int</span> bATK = B[i][<span class="number">0</span>]-&gt;getMeleeAttack();</div><div class="line">                        <span class="keyword">if</span>(bATK &gt;= R[i][<span class="number">0</span>]-&gt;life) &#123;</div><div class="line">                            <span class="built_in">printf</span>(<span class="string">"%03d:%02d red "</span>, hour, t);</div><div class="line">                            R[i][<span class="number">0</span>]-&gt;showName();</div><div class="line">                            <span class="built_in">printf</span>(<span class="string">" used a bomb and killed blue "</span>);;</div><div class="line">                            B[i][<span class="number">0</span>]-&gt;showName();</div><div class="line">                            <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">                        &#125;</div><div class="line">                        <span class="keyword">if</span>(rATK &gt;= B[i][<span class="number">0</span>]-&gt;life) &#123;</div><div class="line">                            <span class="built_in">printf</span>(<span class="string">"%03d:%02d blue "</span>, hour, t);</div><div class="line">                            B[i][<span class="number">0</span>]-&gt;showName();</div><div class="line">                            <span class="built_in">printf</span>(<span class="string">" used a bomb and killed red "</span>);;</div><div class="line">                            R[i][<span class="number">0</span>]-&gt;showName();</div><div class="line">                            <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">                        &#125;</div><div class="line">                        <span class="keyword">if</span>(bATK &gt;= R[i][<span class="number">0</span>]-&gt;life || rATK &gt;= B[i][<span class="number">0</span>]-&gt;life) &#123;</div><div class="line">                            <span class="keyword">delete</span> R[i][<span class="number">0</span>];</div><div class="line">                            R[i].clear();</div><div class="line">                            <span class="keyword">delete</span> B[i][<span class="number">0</span>];</div><div class="line">                            B[i].clear();</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(t == <span class="number">40</span>) &#123;</div><div class="line">                <span class="keyword">int</span> RB[Info::N+<span class="number">2</span>];</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Info::N; i++) &#123;</div><div class="line">                    RB[i] = <span class="number">0</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Info::N; i++) &#123;</div><div class="line">                    <span class="keyword">if</span>(R[i].size() &gt; <span class="number">0</span> &amp;&amp; B[i].size() &gt; <span class="number">0</span>) &#123;</div><div class="line">                        <span class="keyword">if</span>(R[i][<span class="number">0</span>]-&gt;life &lt;= <span class="number">0</span> || B[i][<span class="number">0</span>]-&gt;life &lt;= <span class="number">0</span>) &#123;</div><div class="line">                            </div><div class="line">                        &#125; <span class="keyword">else</span> &#123;</div><div class="line">                            <span class="keyword">if</span>(cityFlag[i] == <span class="number">1</span> || (cityFlag[i] == <span class="number">0</span> &amp;&amp; i%<span class="number">2</span> == <span class="number">1</span>)) &#123;</div><div class="line">                                <span class="keyword">int</span> AT = R[i][<span class="number">0</span>]-&gt;getMeleeAttack();</div><div class="line">                                B[i][<span class="number">0</span>]-&gt;life -= AT;</div><div class="line">                                <span class="keyword">if</span>(B[i][<span class="number">0</span>]-&gt;life &gt; <span class="number">0</span>) &#123;</div><div class="line">                                    <span class="keyword">int</span> BAT = B[i][<span class="number">0</span>]-&gt;getBackAttack();</div><div class="line">                                    R[i][<span class="number">0</span>]-&gt;life -= AT;</div><div class="line">                                &#125;</div><div class="line">                            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                                <span class="keyword">int</span> AT = B[i][<span class="number">0</span>]-&gt;getMeleeAttack();</div><div class="line">                                R[i][<span class="number">0</span>]-&gt;life -= AT;</div><div class="line">                                <span class="keyword">if</span>(R[i][<span class="number">0</span>]-&gt;life &gt; <span class="number">0</span>) &#123;</div><div class="line">                                    <span class="keyword">int</span> BAT = R[i][<span class="number">0</span>]-&gt;getBackAttack();</div><div class="line">                                    B[i][<span class="number">0</span>]-&gt;life -= AT;</div><div class="line">                                &#125;</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                        <span class="keyword">if</span>(R[i][<span class="number">0</span>]-&gt;life &gt; <span class="number">0</span> &amp;&amp; B[i][<span class="number">0</span>]-&gt;life &lt;= <span class="number">0</span>) &#123; </div><div class="line">                            RB[i] = <span class="number">1</span>;</div><div class="line">                            <span class="keyword">if</span>(cityBattle[i] == <span class="number">1</span>) &#123;</div><div class="line">                                cityFlag[i] = <span class="number">1</span>;</div><div class="line">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(cityBattle[i] == <span class="number">0</span>) &#123;</div><div class="line">                                cityBattle[i] = <span class="number">1</span>;</div><div class="line">                            &#125;</div><div class="line">                        &#125; </div><div class="line">                        <span class="keyword">if</span>(B[i][<span class="number">0</span>]-&gt;life &gt; <span class="number">0</span> &amp;&amp; R[i][<span class="number">0</span>]-&gt;life &lt;= <span class="number">0</span>) &#123;</div><div class="line">                            RB[i] = <span class="number">2</span>;							</div><div class="line">                            <span class="keyword">if</span>(cityBattle[i] == <span class="number">2</span>) &#123;</div><div class="line">                                cityFlag[i] = <span class="number">2</span>;</div><div class="line">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(cityBattle[i] == <span class="number">0</span>) &#123;</div><div class="line">                                cityBattle[i] = <span class="number">2</span>;</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">if</span>(R[i].size() &gt; <span class="number">0</span> &amp;&amp; R[i][<span class="number">0</span>]-&gt;life &lt;= <span class="number">0</span>) &#123;</div><div class="line">                        <span class="keyword">delete</span> R[i][<span class="number">0</span>];</div><div class="line">                        R[i].clear();</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">if</span>(B[i].size() &gt; <span class="number">0</span> &amp;&amp; B[i][<span class="number">0</span>]-&gt;life &lt;= <span class="number">0</span>) &#123;</div><div class="line">                        <span class="keyword">delete</span> B[i][<span class="number">0</span>];</div><div class="line">                        B[i].clear();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = Info::N + <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</div><div class="line">                    <span class="keyword">if</span>(RED.HP &gt;= <span class="number">8</span> &amp;&amp; RB[i] == <span class="number">1</span>) &#123;</div><div class="line">                        RED.HP -= <span class="number">8</span>;</div><div class="line">                        R[i][<span class="number">0</span>]-&gt;life += <span class="number">8</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= Info::N + <span class="number">1</span>; i++) &#123;</div><div class="line">                    <span class="keyword">if</span>(BLUE.HP &gt;= <span class="number">8</span> &amp;&amp; RB[i] == <span class="number">2</span>) &#123;</div><div class="line">                        BLUE.HP -= <span class="number">8</span>;</div><div class="line">                        B[i][<span class="number">0</span>]-&gt;life += <span class="number">8</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= Info::N + <span class="number">1</span>; i++) &#123;</div><div class="line">                    <span class="keyword">if</span>(RB[i] == <span class="number">1</span>) &#123;</div><div class="line">                        RED.HP += cityHP[i];</div><div class="line">                        cityHP[i] = <span class="number">0</span>;</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">if</span>(RB[i] == <span class="number">2</span>) &#123;</div><div class="line">                        BLUE.HP += cityHP[i];</div><div class="line">                        cityHP[i] = <span class="number">0</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(t == <span class="number">50</span>) &#123; <span class="comment">// fixed</span></div><div class="line">                <span class="built_in">printf</span>(<span class="string">"%03d:%02d %d elements in red headquarter\n"</span>, hour, t, RED.HP);</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"%03d:%02d %d elements in blue headquarter\n"</span>, hour, t, BLUE.HP);</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(t == <span class="number">55</span>) &#123; <span class="comment">// fixed</span></div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= Info::N + <span class="number">1</span>; i++) &#123;</div><div class="line">                    <span class="keyword">if</span>(R[i].size() == <span class="number">1</span>) &#123;</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"%03d:%02d red "</span>, hour, t);</div><div class="line">                        R[i][<span class="number">0</span>]-&gt;showName();</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">" has "</span>);</div><div class="line">                        R[i][<span class="number">0</span>]-&gt;showWeapon();</div><div class="line">                        <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">if</span>(B[i].size() == <span class="number">1</span>) &#123;</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"%03d:%02d blue "</span>, hour, t);</div><div class="line">                        B[i][<span class="number">0</span>]-&gt;showName();</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">" has "</span>);</div><div class="line">                        B[i][<span class="number">0</span>]-&gt;showWeapon();</div><div class="line">                        <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;  	</div><div class="line">    freopen(<span class="string">"in.txt"</span>, <span class="string">"r+t"</span>, <span class="built_in">stdin</span>);</div><div class="line">    freopen(<span class="string">"out-my.txt"</span>, <span class="string">"w+t"</span>, <span class="built_in">stdout</span>); </div><div class="line">    <span class="keyword">int</span> testcase, cases = <span class="number">0</span>;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;testcase); </div><div class="line">    <span class="keyword">while</span>(testcase--) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d %d %d"</span>, &amp;Info::M, &amp;Info::N, &amp;Info::R, &amp;Info::K, &amp;Info::T);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;Info::HP[Info::Mkind[i]]);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;Info::ATK[Info::Mkind[i]]);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case %d:\n"</span>, ++cases);</div><div class="line">        simulate();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/other/mooc-week9-abc" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/22/oj/other/mooc-week9-abc/" class="article-date">
  <time datetime="2014-04-22T12:31:29.000Z" itemprop="datePublished">2014-04-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-其他題目/">解題區 - 其他題目</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/22/oj/other/mooc-week9-abc/">程序设计实习 MOOC Week 9 ABC</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/04/22/oj/other/mooc-week9-abc/" data-id="ckq8nvxeq02oytkvn5gj0meby" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/04/22/oj/other/mooc-week9-abc/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/std-list/">std-list</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/std-set/">std-set</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h1 id="關於這一周"><a href="#關於這一周" class="headerlink" title="關於這一周"></a>關於這一周</h1><p>練習 STL 的語法。 <a href="http://cxsjsxmooc.openjudge.cn/" target="_blank" rel="external">題目來源</a></p>
<p>好久沒有練 C++ 程序，這是一個訓練 STL 的題單。</p>
<h2 id="練習項目"><a href="#練習項目" class="headerlink" title="練習項目"></a>練習項目</h2><h3 id="std-list"><a href="#std-list" class="headerlink" title="std::list"></a>std::list</h3><ul>
<li><code>list.merge(other_list)</code><br>  將 other_list 內容搬運到 list 後，other_list 清空。</li>
<li><code>list.sort()</code><br>  不依賴 std::sort, 自己內部有一個 sort()。</li>
<li><code>list.unique()</code><br>  跟另外一套的有點相似，一樣是要在排序後才能運行當作去重複。</li>
</ul>
<h3 id="std-set-amp-std-multiset"><a href="#std-set-amp-std-multiset" class="headerlink" title="std::set &amp; std::multiset"></a>std::set &amp; std::multiset</h3><ul>
<li><code>insert()</code></li>
<li><code>find()</code><br>  查找，後回傳 set&lt;&gt;::iterator 的型態。</li>
<li><code>set&lt;&gt;::iterator</code><br>  <code>begin()</code> 和 <code>end()</code> 的型態。</li>
<li><code>set&lt;&gt;::reverse_iterator</code><br>  <code>rbegin()</code> 和 <code>rend()</code> 的型態。</li>
<li><code>erase()</code><br>  特別小心這個，傳入如果是 iterator 的話，就只會刪除單一元素，如果對於 multiset 來說，傳入一般的值(不是迭代器指針) 則會將所有相同的都刪除。</li>
</ul>
<h3 id="std-string"><a href="#std-string" class="headerlink" title="std::string"></a>std::string</h3><ul>
<li><code>find(str [, start_pos])</code><br>  正向搜索 str 這個字串從 start_pos 開始算起。</li>
<li><code>rfind()</code><br>  逆向搜索 str 這個字串。</li>
<li><code>substr(start_post, sub_length)</code><br>  從某個位置開始，截出一段長度。</li>
</ul>
<h1 id="A-List"><a href="#A-List" class="headerlink" title="A - List"></a>A - List</h1><h2 id="題目"><a href="#題目" class="headerlink" title="題目"></a>題目</h2><p>总时间限制: 4000ms    内存限制: 65536kB</p>
<p>描述</p>
<pre><code>写一个程序完成以下命令：
new id ——新建一个指定编号为id的序列(id&lt;10000)
add id num——向编号为id的序列加入整数num
merge id1 id2——合并序列id1和id2中的数，并将id2清空
unique id——去掉序列id中重复的元素
out id ——从小到大输出编号为id的序列中的元素，以空格隔开
</code></pre><p>输入</p>
<pre><code>第一行一个数n，表示有多少个命令( n &lt;= 200000)。以后 n 行每行一个命令。
</code></pre><p>输出</p>
<pre><code>按题目要求输出。
</code></pre><p>样例输入</p>
<pre><code>16
new 1
new 2
add 1 1
add 1 2
add 1 3
add 2 1
add 2 2
add 2 3
add 2 4
out 1
out 2
merge 1 2
out 1
out 2
unique 1
out 1
</code></pre><p>样例输出</p>
<pre><code>1 2 3 
1 2 3 4
1 1 2 2 3 3 4

1 2 3 4
</code></pre><h2 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// http://cxsjsxmooc.openjudge.cn/</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> n; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) == <span class="number">1</span>; )  &#123;</div><div class="line">        <span class="keyword">char</span> cmd[<span class="number">10</span>];</div><div class="line">        <span class="keyword">int</span> id, num, aid;</div><div class="line">        <span class="built_in">map</span>&lt; <span class="keyword">int</span>, <span class="built_in">list</span>&lt;<span class="keyword">int</span>&gt; &gt; S;</div><div class="line">        <span class="keyword">while</span>(n--) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>, cmd);</div><div class="line">            <span class="keyword">if</span>(cmd[<span class="number">0</span>] == <span class="string">'n'</span>) &#123; <span class="comment">// new</span></div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;id);</div><div class="line">                S[id] = <span class="built_in">list</span>&lt;<span class="keyword">int</span>&gt;();</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(cmd[<span class="number">0</span>] == <span class="string">'a'</span>) &#123; <span class="comment">// add</span></div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;id, &amp;num);</div><div class="line">                S[id].push_back(num);</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(cmd[<span class="number">0</span>] == <span class="string">'m'</span>) &#123; <span class="comment">// merge</span></div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;id, &amp;aid);</div><div class="line">                S[id].merge(S[aid]);</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(cmd[<span class="number">0</span>] == <span class="string">'u'</span>) &#123; <span class="comment">// unique</span></div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;id);</div><div class="line">                S[id].sort();</div><div class="line">                S[id].unique();</div><div class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// out</span></div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;id);</div><div class="line">                S[id].sort();</div><div class="line">                <span class="built_in">list</span>&lt;<span class="keyword">int</span>&gt;::iterator it, jt;</div><div class="line">                it = S[id].begin(), jt = S[id].end();</div><div class="line">                <span class="keyword">int</span> f = <span class="number">0</span>;</div><div class="line">                <span class="keyword">for</span>(; it != jt; it++) &#123;</div><div class="line">                    <span class="keyword">if</span>(f)	<span class="built_in">putchar</span>(<span class="string">' '</span>);</div><div class="line">                    f = <span class="number">1</span>;</div><div class="line">                    <span class="built_in">printf</span>(<span class="string">"%d"</span>, *it);</div><div class="line">                &#125;</div><div class="line">                <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h1 id="B-Set"><a href="#B-Set" class="headerlink" title="B - Set"></a>B - Set</h1><h2 id="題目-1"><a href="#題目-1" class="headerlink" title="題目"></a>題目</h2><p>总时间限制: 5000ms    内存限制: 100000kB</p>
<p>描述</p>
<pre><code>现有一整数集（允许有重复元素），初始为空。我们定义如下操作：
add x 把x加入集合
del x 把集合中所有与x相等的元素删除
ask x 对集合中元素x的情况询问
对每种操作，我们要求进行如下输出。
add 输出操作后集合中x的个数
del 输出操作前集合中x的个数
ask 先输出0或1表示x是否曾被加入集合（0表示不曾加入），再输出当前集合中x的个数，中间用空格格开。
</code></pre><p>输入</p>
<pre><code>第一行是一个整数n，表示命令数。0&lt;=n&lt;=100000。
后面n行命令，如Description中所述。
</code></pre><p>输出</p>
<pre><code>共n行，每行按要求输出。
</code></pre><p>样例输入</p>
<pre><code>7
add 1
add 1
ask 1
ask 2
del 2
del 1
ask 1
</code></pre><p>样例输出</p>
<pre><code>1
2
1 2
0 0
0
2
1 0
</code></pre><h2 id="解法-1"><a href="#解法-1" class="headerlink" title="解法"></a>解法</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// http://cxsjsxmooc.openjudge.cn/</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> n, x; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) == <span class="number">1</span>;) &#123;</div><div class="line">        <span class="keyword">char</span> cmd[<span class="number">10</span>];</div><div class="line">        <span class="built_in">multiset</span>&lt;<span class="keyword">int</span>&gt; S;</div><div class="line">        <span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; I;</div><div class="line">        <span class="keyword">while</span>(n--) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>, cmd);</div><div class="line">            <span class="keyword">if</span>(cmd[<span class="number">0</span>] == <span class="string">'a'</span> &amp;&amp; cmd[<span class="number">1</span>] == <span class="string">'d'</span>) &#123; <span class="comment">// add</span></div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</div><div class="line">                I.insert(x);</div><div class="line">                S.insert(x);</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, S.count(x));</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(cmd[<span class="number">0</span>] == <span class="string">'a'</span> &amp;&amp; cmd[<span class="number">1</span>] == <span class="string">'s'</span>) &#123; <span class="comment">// ask</span></div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, I.find(x) != I.end(), S.count(x));</div><div class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// del</span></div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, S.count(x));</div><div class="line">                S.erase(x);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h1 id="C-字符串操作"><a href="#C-字符串操作" class="headerlink" title="C - 字符串操作"></a>C - 字符串操作</h1><h2 id="題目-2"><a href="#題目-2" class="headerlink" title="題目"></a>題目</h2><p>总时间限制: 1000ms    内存限制: 65536kB</p>
<p>描述</p>
<pre><code>给定n个字符串（从1开始编号），每个字符串中的字符位置从0开始编号，长度为1-500，现有如下若干操作：

    copy N X L：取出第N个字符串第X个字符开始的长度为L的字符串。
    add S1 S2：判断S1，S2是否为0-99999之间的整数，若是则将其转化为整数做加法，若不是，则作字符串加法，返回的值为一字符串。
    find S N：在第N个字符串中从左开始找寻S字符串，返回其第一次出现的位置，若没有找到，返回字符串的长度。
    rfind S N：在第N个字符串中从右开始找寻S字符串，返回其第一次出现的位置，若没有找到，返回字符串的长度。
    insert S N X：在第N个字符串的第X个字符位置中插入S字符串。
    reset S N：将第N个字符串变为S。
    print N：打印输出第N个字符串。
    printall：打印输出所有字符串。
    over：结束操作。

其中N，X，L可由find与rfind操作表达式构成，S，S1，S2可由copy与add操作表达式构成。
</code></pre><p>输入</p>
<pre><code>第一行为一个整数n（n在1-20之间）

接下来n行为n个字符串，字符串不包含空格及操作命令等。

接下来若干行为一系列操作，直到over结束。
</code></pre><p>输出</p>
<pre><code>根据操作提示输出对应字符串。
</code></pre><p>样例输入</p>
<pre><code>3
329strjvc
Opadfk48
Ifjoqwoqejr
insert copy 1 find 2 1 2 2 2
print 2
reset add copy 1 find 3 1 3 copy 2 find 2 2 2 3
print 3
insert a 3 2
printall
over
</code></pre><p>样例输出</p>
<pre><code>Op29adfk48
358
329strjvc
Op29adfk48
35a8
</code></pre><h2 id="解法-2"><a href="#解法-2" class="headerlink" title="解法"></a>解法</h2><p>這一題算是裡面最繁瑣的一題，一部分是因為其輸入的規則需要遞歸分析。<br>而為了實現遞歸分析，需要可以偷看輸入的下一個 token，因此先把每一個 token 切出來放在 queue 裏頭。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// http://cxsjsxmooc.openjudge.cn/</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctype.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">char</span> s[<span class="number">32</span>][<span class="number">512</span>], lineStr[<span class="number">1024</span>];</div><div class="line"><span class="built_in">string</span> str[<span class="number">32</span>];</div><div class="line"><span class="keyword">int</span> strSize;</div><div class="line"><span class="built_in">queue</span>&lt;<span class="built_in">string</span>&gt; tokenQ;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">str2num</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> atoi(s.c_str());</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="built_in">string</span> <span class="title">num2str</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">  	<span class="built_in">string</span> s;</div><div class="line">  	<span class="function"><span class="built_in">stringstream</span> <span class="title">ss</span><span class="params">(s)</span></span>;</div><div class="line">  	ss &lt;&lt; n;</div><div class="line">    <span class="keyword">return</span> ss.str();</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">isValidNum</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++) &#123;</div><div class="line">        <span class="keyword">if</span>(!<span class="built_in">isdigit</span>(s[i]))</div><div class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">        ret = ret * <span class="number">10</span> + s[i] - <span class="string">'0'</span>;</div><div class="line">        <span class="keyword">if</span>(ret &gt; <span class="number">99999</span>)</div><div class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="built_in">string</span> <span class="title">parsing</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">string</span> p = tokenQ.front();</div><div class="line">    tokenQ.pop();</div><div class="line">    <span class="keyword">if</span>(p == <span class="string">"copy"</span>)  &#123;</div><div class="line">        <span class="built_in">string</span> N, X, L;</div><div class="line">        <span class="keyword">int</span> n, x, l;</div><div class="line">        <span class="keyword">if</span>(tokenQ.front() == <span class="string">"find"</span> || tokenQ.front() == <span class="string">"rfind"</span>) &#123;</div><div class="line">            N = parsing();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            N = tokenQ.front(), tokenQ.pop();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(tokenQ.front() == <span class="string">"find"</span> || tokenQ.front() == <span class="string">"rfind"</span>) &#123;</div><div class="line">            X = parsing();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            X = tokenQ.front(), tokenQ.pop();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(tokenQ.front() == <span class="string">"find"</span> || tokenQ.front() == <span class="string">"rfind"</span>) &#123;</div><div class="line">            L = parsing();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            L = tokenQ.front(), tokenQ.pop();</div><div class="line">        &#125;</div><div class="line">        n = str2num(N), x = str2num(X), l = str2num(L);</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> str[n].substr(x, l);</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(p == <span class="string">"add"</span>) &#123;</div><div class="line">        <span class="built_in">string</span> S1, S2;</div><div class="line">        <span class="keyword">int</span> s1, s2;</div><div class="line">        <span class="keyword">if</span>(tokenQ.front() == <span class="string">"copy"</span> || tokenQ.front() == <span class="string">"add"</span>) &#123;</div><div class="line">            S1 = parsing();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            S1 = tokenQ.front(), tokenQ.pop();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(tokenQ.front() == <span class="string">"copy"</span> || tokenQ.front() == <span class="string">"add"</span>) &#123;</div><div class="line">            S2 = parsing();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            S2 = tokenQ.front(), tokenQ.pop();</div><div class="line">        &#125;</div><div class="line">        s1 = isValidNum(S1), s2 = isValidNum(S2);</div><div class="line">        <span class="keyword">if</span>(s1 &lt; <span class="number">0</span> || s2 &lt; <span class="number">0</span>)</div><div class="line">            <span class="keyword">return</span> S1 + S2;</div><div class="line">        <span class="keyword">else</span></div><div class="line">            <span class="keyword">return</span> num2str(s1 + s2);</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(p == <span class="string">"find"</span>) &#123;</div><div class="line">        <span class="built_in">string</span> S, N;</div><div class="line">        <span class="keyword">int</span> s, n;</div><div class="line">        <span class="keyword">if</span>(tokenQ.front() == <span class="string">"copy"</span> || tokenQ.front() == <span class="string">"add"</span>) &#123;</div><div class="line">            S = parsing();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            S = tokenQ.front(), tokenQ.pop();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(tokenQ.front() == <span class="string">"find"</span> || tokenQ.front() == <span class="string">"rfind"</span>) &#123;</div><div class="line">            N = parsing();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            N = tokenQ.front(), tokenQ.pop();</div><div class="line">        &#125;</div><div class="line">        n = str2num(N);</div><div class="line">        <span class="keyword">int</span> pos = str[n].find(S);</div><div class="line">        </div><div class="line">        <span class="keyword">if</span>(pos != <span class="built_in">string</span>::npos) &#123;</div><div class="line">            <span class="keyword">return</span> num2str(pos);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> num2str(str[n].length());</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(p == <span class="string">"rfind"</span>) &#123;</div><div class="line">        <span class="built_in">string</span> S, N;</div><div class="line">        <span class="keyword">int</span> s, n;</div><div class="line">        <span class="keyword">if</span>(tokenQ.front() == <span class="string">"copy"</span> || tokenQ.front() == <span class="string">"add"</span>) &#123;</div><div class="line">            S = parsing();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            S = tokenQ.front(), tokenQ.pop();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(tokenQ.front() == <span class="string">"find"</span> || tokenQ.front() == <span class="string">"rfind"</span>) &#123;</div><div class="line">            N = parsing();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            N = tokenQ.front(), tokenQ.pop();</div><div class="line">        &#125;</div><div class="line">        n = str2num(N);</div><div class="line">        <span class="keyword">int</span> pos = str[n].rfind(S);</div><div class="line">        <span class="keyword">if</span>(pos != <span class="built_in">string</span>::npos) &#123;</div><div class="line">            <span class="keyword">return</span> num2str(pos);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> num2str(str[n].length());</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(p == <span class="string">"insert"</span>) &#123;</div><div class="line">        <span class="built_in">string</span> S, N, X;</div><div class="line">        <span class="keyword">int</span> s, n, x;</div><div class="line">        <span class="keyword">if</span>(tokenQ.front() == <span class="string">"copy"</span> || tokenQ.front() == <span class="string">"add"</span>) &#123;</div><div class="line">            S = parsing();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            S = tokenQ.front(), tokenQ.pop();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(tokenQ.front() == <span class="string">"find"</span> || tokenQ.front() == <span class="string">"rfind"</span>) &#123;</div><div class="line">            N = parsing();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            N = tokenQ.front(), tokenQ.pop();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(tokenQ.front() == <span class="string">"find"</span> || tokenQ.front() == <span class="string">"rfind"</span>) &#123;</div><div class="line">            X = parsing();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            X = tokenQ.front(), tokenQ.pop();</div><div class="line">        &#125;</div><div class="line">        n = str2num(N), x = str2num(X);</div><div class="line">        str[n].insert(x, S);</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(p == <span class="string">"reset"</span>) &#123;</div><div class="line">        <span class="built_in">string</span> S, N, X;</div><div class="line">        <span class="keyword">int</span> s, n, x;</div><div class="line">        <span class="keyword">if</span>(tokenQ.front() == <span class="string">"copy"</span> || tokenQ.front() == <span class="string">"add"</span>) &#123;</div><div class="line">            S = parsing();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            S = tokenQ.front(), tokenQ.pop();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(tokenQ.front() == <span class="string">"find"</span> || tokenQ.front() == <span class="string">"rfind"</span>) &#123;</div><div class="line">            N = parsing();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            N = tokenQ.front(), tokenQ.pop();</div><div class="line">        &#125;</div><div class="line">        n = str2num(N);</div><div class="line">        str[n] = S;</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(p == <span class="string">"print"</span>) &#123;</div><div class="line">        <span class="built_in">string</span> S, N, X;</div><div class="line">        <span class="keyword">int</span> s, n, x;</div><div class="line">        <span class="keyword">if</span>(tokenQ.front() == <span class="string">"find"</span> || tokenQ.front() == <span class="string">"rfind"</span>) &#123;</div><div class="line">            N = parsing();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            N = tokenQ.front(), tokenQ.pop();</div><div class="line">        &#125;</div><div class="line">        n = str2num(N);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, str[n].c_str());</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(p == <span class="string">"printall"</span>) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= strSize; i++)</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, str[i].c_str());</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(p == <span class="string">"over"</span>) &#123;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="string">""</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> n; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) == <span class="number">1</span>;) &#123;</div><div class="line">        <span class="keyword">int</span> N, X, L, S1, S2, S;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s[i]);</div><div class="line">            str[i] = s[i];</div><div class="line">        &#125;</div><div class="line">        strSize = n;</div><div class="line">        <span class="keyword">while</span>(getchar() != <span class="string">'\n'</span>);</div><div class="line">        <span class="keyword">while</span>(gets(lineStr)) &#123;</div><div class="line">            <span class="function"><span class="built_in">stringstream</span> <span class="title">sin</span><span class="params">(lineStr)</span></span>;</div><div class="line">            <span class="built_in">string</span> token;</div><div class="line">            <span class="keyword">while</span>(<span class="built_in">sin</span> &gt;&gt; token)</div><div class="line">                tokenQ.push(token);</div><div class="line">            parsing();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/other/mooc-week9-dex" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/22/oj/other/mooc-week9-dex/" class="article-date">
  <time datetime="2014-04-22T12:31:29.000Z" itemprop="datePublished">2014-04-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-其他題目/">解題區 - 其他題目</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/22/oj/other/mooc-week9-dex/">程序设计实习 MOOC Week 9 DEX</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/04/22/oj/other/mooc-week9-dex/" data-id="ckq8nvxev02p2tkvngor70i9e" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/04/22/oj/other/mooc-week9-dex/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/std-list/">std-list</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/std-set/">std-set</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h1 id="接續上一篇"><a href="#接續上一篇" class="headerlink" title="接續上一篇"></a>接續上一篇</h1><h1 id="D-热血格斗场"><a href="#D-热血格斗场" class="headerlink" title="D - 热血格斗场"></a>D - 热血格斗场</h1><h2 id="題目"><a href="#題目" class="headerlink" title="題目"></a>題目</h2><p>总时间限制: 1000ms    内存限制: 65536kB</p>
<p>描述</p>
<pre><code>为了迎接08年的奥运会，让大家更加了解各种格斗运动，facer新开了一家热血格斗场。格斗场实行会员制，但是新来的会员不需要交入会费，而只要同一名老会员打一场表演赛，证明自己的实力。

我们假设格斗的实力可以用一个正整数表示，成为实力值。另外，每个人都有一个唯一的id，也是一个正整数。为了使得比赛更好看，每一个新队员都会选择与他实力最为接近的人比赛，即比赛双方的实力值之差的绝对值越小越好，如果有两个人的实力值与他差别相同，则他会选择比他弱的那个（显然，虐人必被虐好）。

不幸的是，Facer一不小心把比赛记录弄丢了，但是他还保留着会员的注册记录。现在请你帮facer恢复比赛纪录，按照时间顺序依次输出每场比赛双方的id。
</code></pre><p>输入</p>
<pre><code>第一行一个数n(0 &lt; n &lt;=100000)，表示格斗场新来的会员数（不包括facer）。以后n行每一行两个数，按照入会的时间给出会员的id和实力值。一开始，facer就算是会员，id为1，实力值1000000000。输入保证两人的实力值不同。
</code></pre><p>输出</p>
<pre><code>N行，每行两个数，为每场比赛双方的id，新手的id写在前面。
</code></pre><p>样例输入</p>
<pre><code>3
2 1
3 3
4 2
</code></pre><p>样例输出</p>
<pre><code>2 1
3 2
4 2
</code></pre><h2 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// http://cxsjsxmooc.openjudge.cn/</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> oo 0x3f3f3f3f</span></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> n, id, power; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) == <span class="number">1</span>;) &#123;</div><div class="line">        <span class="built_in">set</span>&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; S;</div><div class="line">        S.insert(make_pair(<span class="number">1000000000</span>, <span class="number">1</span>));</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)	 &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;id, &amp;power);</div><div class="line">            S.insert(make_pair(power, id));</div><div class="line">            <span class="built_in">set</span>&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt;::iterator it;</div><div class="line">            it = S.find(make_pair(power, id));</div><div class="line">            pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; f1, f2;</div><div class="line">            f1 = make_pair(-oo, <span class="number">0</span>);</div><div class="line">            f2 = make_pair(oo, <span class="number">0</span>);</div><div class="line">            <span class="keyword">if</span>(it != S.begin()) &#123;</div><div class="line">                it--;</div><div class="line">                f1 = *it;</div><div class="line">                it++;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(it != S.end()) &#123;</div><div class="line">                it++;</div><div class="line">                f2 = *it;</div><div class="line">                it--;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(<span class="built_in">abs</span>(f2.first - power) &lt; <span class="built_in">abs</span>(f1.first - power))</div><div class="line">                f1 = f2;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, id, f1.second);</div><div class="line">        &#125;</div><div class="line">    &#125;	</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h1 id="E-priority-queue练习题"><a href="#E-priority-queue练习题" class="headerlink" title="E - priority queue练习题"></a>E - priority queue练习题</h1><h2 id="題目-1"><a href="#題目-1" class="headerlink" title="題目"></a>題目</h2><p>总时间限制: 2500ms    内存限制: 131072kB</p>
<p>描述</p>
<pre><code>我们定义一个正整数a比正整数b优先的含义是：
*a的质因数数目（不包括自身）比b的质因数数目多；
*当两者质因数数目相等时，数值较大者优先级高。

现在给定一个容器，初始元素数目为0，之后每次往里面添加10个元素，每次添加之后，要求输出优先级最高与最低的元素，并把该两元素从容器中删除。
</code></pre><p>输入</p>
<pre><code>第一行: num (添加元素次数，num &lt;= 30)

下面10*num行，每行一个正整数n（n &lt; 10000000).
</code></pre><p>输出</p>
<pre><code>每次输入10个整数后，输出容器中优先级最高与最低的元素，两者用空格间隔。
</code></pre><p>样例输入</p>
<pre><code>1
10 7 66 4 5 30 91 100 8 9
</code></pre><p>样例输出</p>
<pre><code>66 5
</code></pre><h2 id="解法-1"><a href="#解法-1" class="headerlink" title="解法"></a>解法</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// http://cxsjsxmooc.openjudge.cn/</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getPF</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i*i &lt;= n; i++) &#123;</div><div class="line">        <span class="keyword">if</span>(n%i == <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">while</span>(n /= i, n%i == <span class="number">0</span>);</div><div class="line">            ret++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(n != <span class="number">1</span> &amp;&amp; ret &gt; <span class="number">0</span>)	ret++;</div><div class="line">    <span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> n; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) == <span class="number">1</span>;) &#123;</div><div class="line">        <span class="built_in">multiset</span>&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; S;</div><div class="line">        <span class="keyword">while</span>(n--) &#123;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>, x; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</div><div class="line">                S.insert(make_pair(getPF(x), x));</div><div class="line">            &#125;			</div><div class="line">            <span class="built_in">multiset</span>&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt;::iterator it;</div><div class="line">            <span class="built_in">multiset</span>&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt;::iterator jt;</div><div class="line">            it = S.begin();</div><div class="line">            jt = S.end();</div><div class="line">            jt--;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, (*jt).second, (*it).second);</div><div class="line">            S.erase(it);</div><div class="line">            S.erase(jt);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h1 id="X-思考题最后一题，不计分，供测试"><a href="#X-思考题最后一题，不计分，供测试" class="headerlink" title="X - 思考题最后一题，不计分，供测试"></a>X - 思考题最后一题，不计分，供测试</h1><h2 id="題目-2"><a href="#題目-2" class="headerlink" title="題目"></a>題目</h2><p>总时间限制: 1000ms    内存限制: 65536kB</p>
<p>描述</p>
<pre><code>请补齐下面程序，使得补齐后的程序，对于下面指定的输入数据，能产生指定的输出。
</code></pre><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></div><div class="line"><span class="class"><span class="title">class</span> <span class="title">CMyistream_iterator</span></span></div><div class="line"><span class="class">&#123;</span></div></pre></td></tr></table></figure>
<p>// 在此处补充你的代码<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>  </span></div><div class="line"><span class="function"></span>&#123; </div><div class="line">     </div><div class="line">     <span class="keyword">int</span> t;</div><div class="line">     <span class="built_in">cin</span> &gt;&gt; t;</div><div class="line">     <span class="keyword">while</span> (t--) &#123;</div><div class="line">     	 CMyistream_iterator&lt;<span class="keyword">int</span>&gt; inputInt(<span class="built_in">cin</span>);</div><div class="line">         <span class="keyword">int</span> n1,n2,n3;</div><div class="line">         n1 = * inputInt;</div><div class="line">         <span class="keyword">int</span> tmp = * inputInt; </div><div class="line">         <span class="built_in">cout</span> &lt;&lt; tmp &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">         inputInt ++;   </div><div class="line">         n2 = * inputInt; </div><div class="line">         inputInt ++;   </div><div class="line">         n3 = * inputInt; </div><div class="line">         <span class="built_in">cout</span> &lt;&lt; n1 &lt;&lt; <span class="string">","</span> &lt;&lt; n2&lt;&lt; <span class="string">","</span> &lt;&lt; n3 &lt;&lt; <span class="string">","</span>;</div><div class="line">         CMyistream_iterator&lt;<span class="built_in">string</span>&gt; inputStr(<span class="built_in">cin</span>);</div><div class="line">         <span class="built_in">string</span> s1,s2;</div><div class="line">         s1 = * inputStr; </div><div class="line">         inputStr ++;     </div><div class="line">         s2 = * inputStr; </div><div class="line">         <span class="built_in">cout</span> &lt;&lt; s1 &lt;&lt; <span class="string">","</span> &lt;&lt; s2 &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>输入</p>
<pre><code>第一行是整数t,表示有t组数据。
每组数据由三个整数和两个字符串组成。整数都是小于220的正整数，字符串中间没有空格
</code></pre><p>输出</p>
<pre><code>对每组输入数据，输出两行。
第一行是输入的第一个整数。
第二行依次输出输入的各项，用逗号&quot;,&quot;分隔。
</code></pre><p>样例输入</p>
<pre><code>2
79 90 20 hello me
21 375 45 Jack good
</code></pre><p>样例输出</p>
<pre><code>79
79,90,20,hello,me
21
21,375,45,Jack,good
</code></pre><h2 id="解法-2"><a href="#解法-2" class="headerlink" title="解法"></a>解法</h2><p>這裡要特別小心串流處理，這裡仍是用指針去維護。</p>
<p>Pointer Type(*) 和 Reference Type(&amp;) 使用上也要明白差別。</p>
<ul>
<li><p>假使宣告 <code>istream &amp;mcin;</code><br>  一定要用 <code>CMyistream_iterator(istream&amp; m): mcin(m)</code>    搭配 <code>mcin &gt;&gt; front</code></p>
<ul>
<li><p>為什麼 <code>mcin = m</code> 不能取代 <code>mcin(m)</code> ?<br>  雖然我不太明白，但是 Reference Type 一定要在宣告的時候就決定取的位址，也就是說 mcin 再也不能跟動對應的位址，與指標不同的地方就在這裡。</p>
<p>  通常會這個寫來降低複雜度 <code>int&amp; ret = MAP[index];</code> 其中 <code>ret</code> 再也不能更動位址，當然也許再 C++11 之後的版本會有所不同。</p>
</li>
</ul>
</li>
<li><p>假使宣告 <code>istream *mcin;</code><br>  彈性就很大，但使用時都要用 <code>*mcin &gt;&gt; front</code></p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></div><div class="line"><span class="class"><span class="title">class</span> <span class="title">CMyistream_iterator</span></span></div><div class="line"><span class="class">&#123;</span></div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        CMyistream_iterator(istream&amp; m): mcin(&amp;m) &#123;</div><div class="line">            *mcin &gt;&gt; front;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">void</span> <span class="keyword">operator</span> ++(<span class="keyword">int</span>) &#123;</div><div class="line">            *mcin &gt;&gt; front;</div><div class="line">        &#125;</div><div class="line">        T <span class="keyword">operator</span> * () &#123;</div><div class="line">            <span class="keyword">return</span> front;</div><div class="line">        &#125;</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        istream *mcin;</div><div class="line">        T front;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>  </span></div><div class="line"><span class="function"></span>&#123; </div><div class="line">     </div><div class="line">     <span class="keyword">int</span> t;</div><div class="line">     <span class="built_in">cin</span> &gt;&gt; t;</div><div class="line">     <span class="keyword">while</span> (t--) &#123;</div><div class="line">     	 CMyistream_iterator&lt;<span class="keyword">int</span>&gt; inputInt(<span class="built_in">cin</span>);</div><div class="line">         <span class="keyword">int</span> n1,n2,n3;</div><div class="line">         n1 = * inputInt;</div><div class="line">         <span class="keyword">int</span> tmp = * inputInt; </div><div class="line">         <span class="built_in">cout</span> &lt;&lt; tmp &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">         inputInt ++;   </div><div class="line">         n2 = * inputInt; </div><div class="line">         inputInt ++;   </div><div class="line">         n3 = * inputInt; </div><div class="line">         <span class="built_in">cout</span> &lt;&lt; n1 &lt;&lt; <span class="string">","</span> &lt;&lt; n2&lt;&lt; <span class="string">","</span> &lt;&lt; n3 &lt;&lt; <span class="string">","</span>;</div><div class="line">         CMyistream_iterator&lt;<span class="built_in">string</span>&gt; inputStr(<span class="built_in">cin</span>);</div><div class="line">         <span class="built_in">string</span> s1,s2;</div><div class="line">         s1 = * inputStr; </div><div class="line">         inputStr ++;     </div><div class="line">         s2 = * inputStr; </div><div class="line">         <span class="built_in">cout</span> &lt;&lt; s1 &lt;&lt; <span class="string">","</span> &lt;&lt; s2 &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-web/magic-circle" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/22/web/magic-circle/" class="article-date">
  <time datetime="2014-04-21T23:45:58.000Z" itemprop="datePublished">2014-04-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/網頁設計/">網頁設計</a>/<a class="article-category-link" href="/categories/網頁設計/JQuery/">JQuery</a>
  </div>

  </div>
  <div class="article-inner ">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/img/magic-circle.png" rel="gallery_ckq8nvx9f02hhtkvni9qwkbp5">
        <img src="/img/magic-circle.png" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/22/web/magic-circle/">JQuery 魔法陣製作 Magic Circle</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/04/22/web/magic-circle/" data-id="ckq8nvx9f02hhtkvni9qwkbp5" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/04/22/web/magic-circle/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jquery/">jquery</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/magic-circle/">magic-circle</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/中二病/">中二病</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h1 id="製作起源"><a href="#製作起源" class="headerlink" title="製作起源"></a>製作起源</h1><p><a href="http://gigazine.net/news/20140417-magic-ring/" target="_blank" rel="external">魔法陣字型出處</a> </p>
<p>也是因為在 2014-04-17 出了一款魔法陣字型，在藉由惡友們的催促下，不，是誘導下嘗試做了 jquery 的插件來完成魔法陣的製作。當然沒有網址中做得那麼好看。</p>
<p>不過具體下也努力去完成了。附圖如下：</p>
<h1 id="製作"><a href="#製作" class="headerlink" title="製作"></a>製作</h1><h2 id="前置作業"><a href="#前置作業" class="headerlink" title="前置作業"></a>前置作業</h2><ul>
<li>JQuery</li>
<li>CSS 旋轉和陰影配置</li>
</ul>
<h2 id="開始"><a href="#開始" class="headerlink" title="開始"></a>開始</h2><ul>
<li><p>配置多層圓，可以參考 <a href="http://css-tricks.com/set-text-on-a-circle/" target="_blank" rel="external">這裡</a>，先將內容拆成 <code>&lt;span&gt;A&lt;/span&gt;</code> 的形式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">h1 span &#123;</div><div class="line">  font: 24px myFirstFont, Monaco, MonoSpace;</div><div class="line">  height: 300px;</div><div class="line">  position: absolute;</div><div class="line">  width: 20px;</div><div class="line">  left: 50%;</div><div class="line">  top: 0;</div><div class="line">  -webkit-transform-origin: 50% 50%;</div><div class="line">  -moz-transform-origin: 50% 50%;</div><div class="line">  -ms-transform-origin: 50% 50%;</div><div class="line">  -o-transform-origin: 50% 50%;</div><div class="line">  transform-origin: 50% 50%;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>將每個 <code>&lt;span&gt;</code> 設置成絕對座標配置，乍看下是一個長條形，並且使用 <code>transform-origin 50% 50%</code> 設置旋轉中心，也就是長條形的正中間。<code>rgba(177, 17, 22, 1)</code> 為血紅色</p>
</li>
</ul>
<h1 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h1><ul>
<li><p>接著要計算字距，來方便每一個字符偏轉角度。而且每一層圓的偏轉角度還有所不同，這裡我並沒有詳細去計算。</p>
</li>
<li><p><code>transform rotate(50 deg)</code> 用來旋轉</p>
</li>
<li><p>光暈效果呈現 <code>box-shadow 0px 0px 10px rgba(177, 17, 22, 1)</code> 於外部產生陰影。</p>
<ul>
<li>至於內部效果沒有做得很好看。</li>
</ul>
</li>
</ul>
<p>在 <strong> 山田かみら </strong> 的建議下，進行的大幅度地修改，同時也發現之前的版本有過度延遲的問題，原因都發生於過多的 for each 計算。</p>
<ul>
<li>先修正過於愚蠢的 CSS，加入比較好的 class 處理，來達到可以物件化。</li>
<li>原本文字的處理仍需要使用旋轉的方式運作，而考慮將每一個圈放到同一個正方形內，直接對正方形作旋轉即可，剩下的操作交給瀏覽器去進行計算。因此，做了架構上的分層。</li>
</ul>
<h3 id="關於代碼"><a href="#關於代碼" class="headerlink" title="關於代碼"></a>關於代碼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">  $(function() &#123;</div><div class="line">      $(&quot;#test1&quot;).magicsquare(&apos;fire&apos;, &#123;radius: 500, radius_padding: 150,</div><div class="line">            radius_center: 200,	duration: 10&#125;);</div><div class="line"></div><div class="line">      $(&quot;#test2&quot;).magicsquare(&apos;fire&apos;, &#123;radius: 300, radius_padding: 50,</div><div class="line">            radius_center: 50,	duration: 30&#125;);</div><div class="line"></div><div class="line">      $(&quot;#test1&quot;).draggable();</div><div class="line">      $(&quot;#test2&quot;).draggable();</div><div class="line">      $(&quot;.center-content&quot;).click(function() &#123;</div><div class="line">          $(&quot;#test1&quot;).magicsquare(&apos;boom&apos;);</div><div class="line">          $(&quot;#test2&quot;).magicsquare(&apos;boom&apos;);</div><div class="line">      &#125;);</div><div class="line">    &#125;);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>不知道 CSS3 穩定了沒有，在動畫處理引用 animate.css。</p>
<p>但是如果要完成連續型的動畫播放，單純 CSS 目前不想去研究能不能寫腳本。所以在定秒處理之後呼叫 <code>callback()</code> 去進行下一個動畫放置 (仍以 jquery 為主)。</p>
<p>剩下的交給 <strong> 山田君 </strong> 了。</p>
<h2 id="Demo-amp-下載"><a href="#Demo-amp-下載" class="headerlink" title="Demo &amp; 下載"></a>Demo &amp; 下載</h2><p><img src="/img/demo.gif" alt="very old version demo gif"><br><a href="http://morris821028.github.io/jquery-magic-circle/">demo link</a></p>
<p><a href="https://github.com/morris821028/jquery-magic-circle" target="_blank" rel="external">repo jquery-magic-circle on Github</a><br><script type="text/javascript" src="http://morris821028.github.io/hexo-tag-oj/jquery.githubRepoWidget.js"></script><div class="github-widget" data-repo="morris821028/jquery-magic-circle"></div></p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a href="http://css-tricks.com/set-text-on-a-circle/" target="_blank" rel="external">http://css-tricks.com/set-text-on-a-circle/</a></li>
</ul>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-lesson/new-methodology" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/21/lesson/new-methodology/" class="article-date">
  <time datetime="2014-04-21T08:09:04.000Z" itemprop="datePublished">2014-04-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/學校課程/">學校課程</a>/<a class="article-category-link" href="/categories/學校課程/敏捷方法/">敏捷方法</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/21/lesson/new-methodology/">軟體開發方法論(翻譯部分內容)</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/04/21/lesson/new-methodology/" data-id="ckq8nvx7i02evtkvnbter2smo" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/04/21/lesson/new-methodology/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/軟體開發/">軟體開發</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h1 id="長篇大論"><a href="#長篇大論" class="headerlink" title="長篇大論"></a>長篇大論</h1><p>只求軟體開發的工程方法，最近上敏捷方法，教授開始講到了始祖 …</p>
<p>於是上演了輪番翻譯的戲碼，讓各種同學參與這份大型工程，關於翻譯的同時，深刻地理解到這也是為什麼無法接觸國外的最新資訊啊，曲解、誤解、亂解 …</p>
<blockquote>
<p>我的語言記憶體如此小，卻搭載世界最複雜的語言。</p>
</blockquote>
<h2 id="序"><a href="#序" class="headerlink" title="序"></a>序</h2><blockquote><p>In the past few years there’s been a blossoming of a new style of software methodology - referred to as agile methods. Alternatively characterized as an antidote to bureaucracy or a license to hack they’ve stirred up interest all over the software landscape. In this essay I explore the reasons for agile methods, focusing not so much on their weight but on their adaptive nature and their people-first orientation. </p>
<footer><strong>Martin Fowler</strong><cite><a href="http://www.martinfowler.com/articles/newMethodology.html" target="_blank" rel="external">The New Methodology</a></cite></footer></blockquote>
<p>Probably the most noticeable change to software process thinking in the last few years has been the appearance of the word ‘agile’. We talk of agile software methods, of how to introduce agility into a development team, or of how to resist the impending storm of agilists determined to change well-established practices.</p>
<p>也許在這過去幾年最引人注目對軟件過程的思考的改變 - “敏捷 agile” 一詞的出現。我們將談論如何將敏捷軟體方法(agile software method)引入到開發團隊，或者如何抗拒即將到來的敏捷提倡者所帶來的風暴，這風暴將改變原先建立的好的業界實踐方法。</p>
<p>This new movement grew out of the efforts of various people who dealt with software process in the 1990s, found them wanting, and looked for a new approach to software process. Most of the ideas were not new, indeed many people believed that much successful software had been built that way for a long time. There was, however, a view that these ideas had been stifled and not been treated seriously enough, particularly by people interested in software process.</p>
<p>這新運動來自于 1990 年起不同人對於軟體程序的努力，他們發現和找到一個新的軟體程序。大多數敏捷方法的想法並不新，大多數人認為很多成功的軟件本來就有內置這種方式很久了，的確是有的，然而有一觀點指出，這些想法對於對軟體過程感興趣的人眼中並沒有受到重視，甚至被受到抑制。</p>
<p>This essay was originally part of this movement. I originally published it in July 2000. I wrote it, like most of my essays, as part of trying to understand the topic. At that time I’d used Extreme Programming for several years after I was lucky enough to work with Kent Beck, Ron Jeffries, Don Wells, and above all the rest of the Chrysler C3 team in 1996. I had since had conversations and read books from other people who had similar ideas about software process, but had not necessarily wanted to take the same path as Extreme Programming. So in the essay I wanted to explore what were the similarities and differences between these methodologies.</p>
<p>這篇文章也是新運動的起源一部份，最初發表于 2000 年 7 月。作為嘗試了解這文章一部份，您必須知曉這篇文章的風格如同其他大多數我寫的文章。在很幸運地與 Kent Beck, Ron Jeffries, Don Wells 共事後，我已經使用極限編程 (Extreme Programming) 好幾年。從 1996 年的 Chrysler C3 team 那時。我有機會與別人互相交流資訊和書籍來得到他們對於軟體過程中的類似想法，但即使是極限編程 (Extreme Programming) 也沒有一定要採用一樣的走法，所以在這篇文章中，我想要探索這些方法間的異同。</p>
<p>My conclusion then, which I still believe now, is that there were some fundamental principles that united these methodologies, and these principles were a notable contrast from the assumptions of the established methodologies.</p>
<p>以我的話來說，我至今仍相信那些方法一定有一些共同的基本原則，這些原則可能會從原本既有的(主流)方法假設中有明顯地對比。</p>
<p>This essay has continued to be one of the most popular essays on my website, which means I feel somewhat bidden to keep it up to date. In its original form the essay both explored these differences in principles and provided a survey of agile methods as I then understood them. Too much has happened with agile methods since for me to keep up with the survey part, although I do provide some links to continue your explorations. The differences in principles still remain, and this discussion I’ve kept.</p>
<p>這篇文章將會一直是一篇這個網站最熱門的文章，也意味者我會感到使命去保持這篇文章的更新。在文章原始架構中，會探討我所了解的這些原則的差異和提供敏捷方法的調查。當我在調查的同時，敏捷方法已經發生了變動，但仍我也提供一些鏈結供您探索，這些原則的差異和討論內容仍會保留在這篇文章中。</p>
<p>Most software development is a chaotic activity, often characterized by the phrase “code and fix”. The software is written without much of an underlying plan, and the design of the system is cobbled together from many short term decisions. This actually works pretty well as the system is small, but as the system grows it becomes increasingly difficult to add new features to the system. Furthermore bugs become increasingly prevalent and increasingly difficult to fix. A typical sign of such a system is a long test phase after the system is “feature complete”. Such a long test phase plays havoc with schedules as testing and debugging is impossible to schedule. </p>
<p>大多數軟體開發是一個混亂的開始，常常以一句話代以概括 ”撰寫！修復！“，這些軟體在撰寫時不用事先有基礎的計劃，也不用系統架構，將由短期項目討論就可以拼湊起來。這確切在系統很小時可以運作，但當系統越大時將會變得相當困難去增加新的功能。此外，BUG 也會越來越普遍見到，且越來越難除錯。這典型系統是在功能齊備後，才經由長時間的測試階段。這麼長時間的測試階段將嚴重破壞測試和除錯的行程，使得行程根本無法安排。試階段起著嚴重破壞的時間表為測試和調試是不可能的安排。</p>
<p>The original movement to try to change this introduced the notion of methodology. These methodologies impose a disciplined process upon software development with the aim of making software development more predictable and more efficient. They do this by developing a detailed process with a strong emphasis on planning inspired by other engineering disciplines - which is why I like to refer to them as engineering methodologies (another widely used term for them is plan-driven methodologies). </p>
<p>起源運動將要改變這種方法的概念，這些方法論所施加的紀律，將協助軟體開發變得更可預測和更有效率。他們將透過製定詳細的過程，這些過程特別強調設計，靈感來自于其他工程學門- 這就是為什麼我喜歡稱呼它們為 ”工程方法 enginerring methodologies“ (對於他們來說，另一個廣泛使用的術語為 “計劃驅動方法 plan-driven methodologies”)</p>
<p>Engineering methodologies have been around for a long time. They’ve not been noticeable for being terribly successful. They are even less noted for being popular. The most frequent criticism of these methodologies is that they are bureaucratic. There’s so much stuff to do to follow the methodology that the whole pace of development slows down. </p>
<p>工程方法已經存有一段歷史，它們都沒有被注目那背後可怕的成功，它們相當少被認為是受流行的，常見的批評為 ”它們是官僚政治的“ // 相當死板的 ？ 。有相當多的項目都遵循這套方法論使用緩慢的發展步伐。</p>
<p><strong> Agile methodologies </strong> developed as a reaction to these methodologies. For many people the appeal of these agile methodologies is their reaction to the bureaucracy of the engineering methodologies. These new methods attempt a useful compromise between no process and too much process, providing just enough process to gain a reasonable payoff. </p>
<p>敏捷方法的發展就是反映這些工程方法論，對于大多數的人而言，敏捷方法的吸引力是反映出工程方法的官僚主義，這些新方法是在沒有進展和太多進展中的折衷妥協方案，提供一種恰當的過程來獲得合理回饋。</p>
<p>The result of all of this is that agile methods have some significant changes in emphasis from engineering methods. The most immediate difference is that they are less document-oriented, usually emphasizing a smaller amount of documentation for a given task. In many ways they are rather code-oriented: following a route that says that the key part of documentation is source code. </p>
<p>這一切的結過是，敏捷方法從工程方法中有顯的改變。最明顯的差異是少寫文件(文件導向)，通常強調少量文件的工作，在許多說法上，它們更偏向代碼導向(code-oriented: 文件的關鍵部分是源代碼 source code)</p>
<h1 id="糟透的軟體開發"><a href="#糟透的軟體開發" class="headerlink" title="糟透的軟體開發"></a>糟透的軟體開發</h1><p>在土木工程中，建造一個橋來說，通常在設計草圖完成後，即使換了別的公司繼續接按下去做，一樣能按照這個設計草圖完成。如果在施工過程中遇到問題，通常問題也不會太難，而且非常容易被解決。</p>
<p>在了解這些設計草圖後，可以發現勞心者和勞力者的工作是分開的，設計由專家耗費心力完成，而實作能由工人來按照草圖，因此這些設計草圖是確保工人們能看得懂，但是在軟體工程中，大部分都是勞心者和勞力者集一人之中。</p>
<p>施工是一個相當耗費成本的工作，在早期的軟體工程開發專家，希望能將土木工程的方法轉移到軟體工程上。讓專家進行設計，再讓低成本的工作人員來完成實作，設計費用通常比實作費用來的低，工程師仍有高低薪之分，新一代的低薪工程師呢！</p>
<p>專家寫出來的設計草圖，要讓 programmer 看得懂，通常是非常困難的。即使是 UML 圖，雖然在紙(草圖)上看起來相當不錯，但是實作上的問題卻相當多，土木工程的設計圖可以經過數學模型去測試，但是軟體工程的設計圖只能由人腦去找到邏輯BUG，即使是設計熟練的專家，要設計出不會有實作問題的草圖也是常發生的。</p>
<p>接續著剛剛討論的造橋問題，設計費用只占了全部花費的十分之一，按照草圖寫 code 是相當簡單的，根據 McConnell 調查大型專案，只有 15% 的成本進行程式撰寫和測試(這裡我們需要勞力成本比例越高越好)。即使把其他成本混在一起，設計仍占了 50% 的成本比例。軟體工程只是工程分枝中之一，這其中一定有蹊蹺。</p>
<p>結論</p>
<ul>
<li>軟體的建造相當便宜，甚至於免費(只淤需要電腦和編譯器，沒有實體。)</li>
<li>軟體受設計影響，因此需要有創造力和有天賦的人。</li>
<li>俱有創新的程序不容易去規劃，可預測的性質甚至變成不可能。</li>
<li>我們需要不同於傳統工程的方法，來解決這詭異的軟體工程的開發程序。</li>
</ul>
<p>常常有開發者收到客戶不斷地改變需求，但是改變需求是常態，但是對於開發者而言卻是想不透的謎。這表示當初需求並沒有弄完整，但是也不能說像客戶簽訂契約——表示在軟體完成前，需求都不會改變。需求改變是很正常的，這客戶來說這個契約反而不合理。</p>
<p>按需求收費，加什麼功能要多少錢？估算收費也是不好量化，也會根據產品使用的方式和使用者有關，因此品質的水準與費用是不好預估。客戶以為“軟”體容易修改，但並不是每個需求都容易修改，通常會耗費大量的時間去滿足客戶的需求。</p>
<p>如果需求不穩定，就得不到可預測的計劃去完成軟體。</p>
<h1 id="真的不可預測？"><a href="#真的不可預測？" class="headerlink" title="真的不可預測？"></a>真的不可預測？</h1><p>在 NASA 太空軟體開發中，他們的計劃是可以預測的，但這也只是一個特別的例子，主要原因是長期時間，龐大的團隊，穩定的需求。</p>
<p>更可怕的是，如果客戶需求不穩定，卻告知有可預測的計劃，這樣自欺欺人的行為相當令人詬病。</p>
<p>”可預測“是令人相當渴望的，這導致一開始擬定的計劃越飄越遠，最後計劃將會分崩離析。</p>
<p>按照方法論運行總是美好的，但是在軟體開發上必須要捨棄掉，但這樣的舉動相當困難，要捨棄一直以來處理事情的方式，但也並不是讓事情處理變得無法控制的混沌，捨棄“預測”吧！</p>
<h1 id="控制-“不可預測”程序"><a href="#控制-“不可預測”程序" class="headerlink" title="控制 “不可預測”程序"></a>控制 “不可預測”程序</h1><p>使用迭代方式，並且將計劃越短越好，看起來就是多方面失敗的開始，但卻有機會看來進步的地方，當計劃越短，就能越早知道反饋(feedback)。</p>
<p>文件可以隱藏缺失，沒有經過測試將會有更多的缺失。</p>
<p>XP 一周或兩周，SCRUM 一個月之類的，越熟練則會越短時間。</p>
<p>=====</p>
<p>並不是每個工程師都像零件，換個人就可以繼續運行。</p>
<p>不可更換的人零件都跑了，也就是最有創意的人力都走了，可更換的人卻留下了。</p>
<h1 id="Programmer-是有責任的專業人員？"><a href="#Programmer-是有責任的專業人員？" class="headerlink" title="Programmer 是有責任的專業人員？"></a>Programmer 是有責任的專業人員？</h1><p>早期是工廠的運行模式，希望能讓工人多做一點事情，來讓成本降低。</p>
<p>每個 programmer 是獨特的，產出的代碼也都不同，每一個人的創意不同，把人當資源就錯了。</p>
<p>施工和設計能不能分開？施工只是由編譯器來，因此軟體全是文創業，算是設計類型的職業。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/81/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/80/">80</a><a class="page-number" href="/page/81/">81</a><span class="page-number current">82</span><a class="page-number" href="/page/83/">83</a><a class="page-number" href="/page/84/">84</a><a class="page-number" href="/page/85/">85</a><a class="extend next" rel="next" href="/page/83/">Next &raquo;</a>
    </nav>
  
</section>
          
          
            <aside id="sidebar">
  <!-- <div id="ukagaka_panel"></div> -->
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/">學校課程</a><span class="category-list-count">115</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/介面設計/">介面設計</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/作業系統/">作業系統</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/即時系統/">即時系統</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/大學專題/">大學專題</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/巨量資料/">巨量資料</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/平行程式/">平行程式</a><span class="category-list-count">43</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/敏捷方法/">敏捷方法</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/數位影像生成/">數位影像生成</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/編譯器/">編譯器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/自然語言/">自然語言</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/虛擬實境/">虛擬實境</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算型智慧/">計算型智慧</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算幾何/">計算幾何</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算機圖學/">計算機圖學</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資料庫系統/">資料庫系統</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資訊安全/">資訊安全</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/通識課程/">通識課程</a><span class="category-list-count">14</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/">工作應用</a><span class="category-list-count">32</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/Java/">Java</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/Meme/">Meme</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/可持久化/">可持久化</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/鬼故事/">鬼故事</a><span class="category-list-count">10</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/手札日記/">手札日記</a><span class="category-list-count">46</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/">網頁設計</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/About-This-Blog/">About This Blog</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/HTML5/">HTML5</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/JQuery/">JQuery</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/Markdown/">Markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/NodeJs/">NodeJs</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/">解題區</a><span class="category-list-count">633</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/Latex/">Latex</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/出題解題/">出題解題</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-POJ/">解題區 - POJ</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a><span class="category-list-count">483</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a><span class="category-list-count">77</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-其他題目/">解題區 - 其他題目</a><span class="category-list-count">45</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-未解題目/">解題區 - 未解題目</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/雜言筆記/">雜言筆記</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a class="text" href="/2021/06/21/diary-202106/">
              
                <i class="icon-file-o"></i> 
              
            疫情下的工作變化</a>
          </li>
        
          <li>
            <a class="text" href="/2021/06/21/work/company-ghost-story-10/">
              
                <i class="icon-file-o"></i> 
              
            Company Ghost Story 公司鬼故事 10</a>
          </li>
        
          <li>
            <a class="text" href="/2021/05/30/diary-202105/">
              
                <i class="icon-file-o"></i> 
              
            前思後想 新居落成</a>
          </li>
        
          <li>
            <a class="text" href="/2021/05/30/java/java-memory-optimization-2/">
              
                <i class="icon-file-o"></i> 
              
            Java 優化內存使用 組合篇</a>
          </li>
        
          <li>
            <a class="text" href="/2021/05/30/java/java-memory-optimization-1/">
              
                <i class="icon-file-o"></i> 
              
            Java 優化內存使用 結構篇</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/diary-202101/">
              
                <i class="icon-file-o"></i> 
              
            二八進展</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-file-extension/">
              
                <i class="icon-file-o"></i> 
              
            File Extension</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-globl-var/">
              
                <i class="icon-file-o"></i> 
              
            Global Variable</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-handover/">
              
                <i class="icon-file-o"></i> 
              
            Handover</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-interview-recursion/">
              
                <i class="icon-file-o"></i> 
              
            Interview &amp; Recursion</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget-wrap">
    <h3 class="widget-title">Links</h3>
    <div class="widget">   
      	<ul>
	      <li><a href="http://mypaper.pchome.com.tw/zerojudge" target="_blank" title="Old Blog"><i class="icon-star"></i> Morris' Blog (pchome)</a></li>
	      <li><a href="http://flere114.blogspot.tw/" target="_blank" title="蘿莉勿觸"><i class="icon-googles"></i> flere's Blog</a></li>
	      <li><a href="http://dreamoon4.blogspot.tw/" target="_blank" title="夢月"><i class="icon-googles"></i> dreamoon's Blog</a></li>
	      <li><a href="http://m80126colin.github.io" target="_blank" title="許胖們"><i class="icon-github-alt"></i> m80126colin's Blog</a></li>
	      <li><a href="http://sd12582000.blogspot.tw/" target="_blank" title="妮可妮可"><i class="icon-github-alt"></i> Nico's Blog</a></li>
	      <li><a href="http://kuoe0.logdown.com/" target="_blank" title="郭至軒大神"><i class="icon-github-alt"></i> KuoE0's Dots</a></li>
	      <li><a href="http://tyan.io/" title=""><i class="icon-github-alt"></i> Tyan Blog</a></li>
    	</ul>
    </div>
</div>

  
    
<script src="/js/jquery-ui.js"></script>
<script src="/js/ukagaka/jquery.morris.ukagaka.resource.js"></script>
<script src="/js/ukagaka/typed.js"></script>
  
  
</aside>
          
        
      </div>
      <footer id="footer">
  
  <div class="outer">    
    <div class="social-group">
      
      <a href="https://github.com/morris821028" target="_blank" title="github"><i class="icon-github"></i></a>
      
      
      <a href="https://www.facebook.com/Morris1028" target="_blank" title="facebook"><i class="icon-facebook-sign"></i></a>
      
      
      <a href="http://uhunt.felix-halim.net/id/46705" target="_blank" title="uhunt" ><span class="icon-uhunt">UVa<span></a>
      
    </div>
    <div id="footer-info" class="inner">
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and Theme by <a href="https://github.com/morris821028/hexo-theme-landscape" target="_blank" title="landscape">landscape</a> &copy; 2021 Shiang-Yun Yang 
    </div>
  </div>
</footer>


    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link"><i class=icon-home ></i>&nbsp&nbspHome</a>
  
    <a href="/about" class="mobile-nav-link"><i class=icon-user ></i>&nbsp&nbspAbout</a>
  
    <a href="/archives" class="mobile-nav-link"><i class=icon-archive ></i>&nbsp&nbspArchives</a>
  
    <a href="/tags" class="mobile-nav-link"><i class=icon-tags ></i>&nbsp&nbspTags</a>
  
    <a href="/picture" class="mobile-nav-link"><i class=icon-camera ></i>&nbsp&nbspPictures</a>
  
    <a href="/works" class="mobile-nav-link"><i class=icon-trophy ></i>&nbsp&nbspWorks</a>
  
</nav>
    
<script>
  var disqus_shortname = 'morris1028';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/jquery.lazyload.js"></script>
<script src="/js/jquery.als-1.6.js"></script>

<script src="/js/script.js"></script>

  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>