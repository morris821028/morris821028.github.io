<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Morris&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Morris&#39; Blog">
<meta property="og:url" content="http://morris821028.github.io/page/5/index.html">
<meta property="og:site_name" content="Morris&#39; Blog">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Morris&#39; Blog">
<link rel="publisher" href="108158678174364350000">
  
    <link rel="alternative" href="/atom.xml" title="Morris&#39; Blog" type="application/atom+xml">
  
  
    <meta name="google-site-verification" content="5mRgj8NanEMpGZuNfHNJNmH90RgNlrnJXsFlTaKD6Gs" />
  
  
    <link rel="shortcut icon" href="/img/f.ico">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <script src="/js/jquery-2.1.0.min.js"></script>
  <link rel="stylesheet" href="/css/style.css">
  
  <link rel="stylesheet" href="http://cdn.oesmith.co.uk/morris-0.5.1.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="http://cdn.oesmith.co.uk/morris-0.5.1.min.js"></script>
  <!-- <link rel="import" href="/bower_components/app-layout/app-layout.html"> --><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"><div id="banner-right"></div></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Morris&#39; Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          
            <a class="main-nav-link" href="/"><i class=icon-home title='Home'></i></a>
          
        
          
            <a class="main-nav-link" href="/about"><i class=icon-user title='About'></i></a>
          
        
          
            <a class="main-nav-link" href="/archives"><i class=icon-archive title='Archives'></i></a>
          
        
          
            <a class="main-nav-link" href="/tags"><i class=icon-tags title='Tags'></i></a>
          
        
          
            <a class="main-nav-link" href="/picture"><i class=icon-camera title='Pictures'></i></a>
          
        
          
            <a class="main-nav-link" href="/works"><i class=icon-trophy title='Works'></i></a>
          
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://morris821028.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        
          
          <section id="main">
  
    <article id="post-work/company-ghost-story-8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/08/work/company-ghost-story-8/" class="article-date">
  <time datetime="2020-11-08T10:00:00.000Z" itemprop="datePublished">2020-11-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工作應用/">工作應用</a>/<a class="article-category-link" href="/categories/工作應用/鬼故事/">鬼故事</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/08/work/company-ghost-story-8/">Company Ghost Story 公司鬼故事 8</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2020/11/08/work/company-ghost-story-8/" data-id="cl4m6v7bh02m5j8vno5sr0v9o" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2020/11/08/work/company-ghost-story-8/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/鬼故事/">鬼故事</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><h3 id="Format-String"><a href="#Format-String" class="headerlink" title="Format String"></a>Format String</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">String.format(<span class="string">"ABC%s"</span>, <span class="string">"D"</span>); <span class="comment">// const string should be written directly</span></div><div class="line">String.format(<span class="string">"%s.%s"</span>, A.class.getName(), <span class="string">"C"</span>);</div></pre></td></tr></table></figure>
<p>對於可以直接計算得到的，應該直接展開。</p>
<h3 id="Math"><a href="#Math" class="headerlink" title="Math"></a>Math</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">double</span> theta = dx != <span class="number">0</span> ? Math.atan(dy/dx) : (dy &lt; <span class="number">0</span> ? ... : ...);</div><div class="line"></div><div class="line"><span class="comment">// or</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> (dx &lt; <span class="number">0</span>) &#123;</div><div class="line">    <span class="keyword">if</span> (dy &lt; <span class="number">0</span>)</div><div class="line">        ...</div><div class="line">&#125; <span class="keyword">else</span> (dx == <span class="number">0</span>) &#123;</div><div class="line">    <span class="keyword">if</span> (dy &lt; <span class="number">0</span>)</div><div class="line">        ...</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// why not be simple?</span></div><div class="line"><span class="keyword">double</span> theta = Math.atan2(dy, dx);</div></pre></td></tr></table></figure>
<p>數學很重要，可以減少很多分支判斷。</p>
<h3 id="Variable-Name"><a href="#Variable-Name" class="headerlink" title="Variable Name"></a>Variable Name</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">List&lt;T&gt; set = <span class="keyword">new</span> LinkedList&lt;&gt;(); <span class="comment">// what does `set` means?</span></div><div class="line"><span class="comment">// perhaps, I need to ask what does `list` means for you.</span></div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">TextField okBtn; <span class="comment">// why name button for text field?</span></div><div class="line">enableCancelButton(okBtn); <span class="comment">// are you sure about it?</span></div></pre></td></tr></table></figure>
<p>命名盡量貼切型態，不然有時候真的會有很奇怪。</p>
<h3 id="Initialize-Member"><a href="#Initialize-Member" class="headerlink" title="Initialize Member"></a>Initialize Member</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MPanel</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> JButton mButton;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MPanel</span><span class="params">()</span> </span>&#123; <span class="comment">// consturctor</span></div><div class="line">        ...</div><div class="line">        mButton = <span class="keyword">new</span> JButton(<span class="string">"A"</span>); <span class="comment">// what?</span></div><div class="line">        panel.add(mButton);</div><div class="line">        mButton = <span class="keyword">new</span> JButton(<span class="string">"B"</span>); <span class="comment">// what?</span></div><div class="line">        panel.add(mButton);</div><div class="line">        <span class="comment">// finally, which result you want to express mButton?</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在建構子中，每一個成員變數盡量只存放一次，採用 <code>final</code> 對每個成員變數檢查只初始化一次。</p>
<h3 id="Lambda-with-Final"><a href="#Lambda-with-Final" class="headerlink" title="Lambda with Final"></a>Lambda with Final</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">process</span><span class="params">(...)</span> </span>&#123;</div><div class="line">    String s = <span class="string">"default"</span>;</div><div class="line">    <span class="keyword">if</span> (isA())</div><div class="line">        s = <span class="string">"A"</span>;</div><div class="line">    <span class="keyword">final</span> String _s = s;		<span class="comment">// shut up, don't explain</span></div><div class="line">    blackhole(() -&gt; map(_s));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Lambda 函數抓取的時候都要抓取可推斷出 <code>final</code> 的變數。為了 lambda 而額外宣告一個變數作為 final 的話，應該要額外宣告一個 getter 函數去抓取，不然觀感上會覺得代碼有點多餘。</p>
<h3 id="Method-Name"><a href="#Method-Name" class="headerlink" title="Method Name"></a>Method Name</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">increment</span><span class="params">()</span> </span>&#123; <span class="comment">// why is noun?</span></div><div class="line">    i++;</div><div class="line">    i++;  <span class="comment">// why call it twice?</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>函數盡量使用動詞開頭，名詞有點奇怪。</p>
<h3 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">enableA</span><span class="params">()</span> </span>&#123;</div><div class="line">    a = <span class="keyword">true</span>;</div><div class="line">    b = <span class="keyword">true</span>;  <span class="comment">// why is b here?</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">disableA</span><span class="params">()</span> </span>&#123;</div><div class="line">    a = <span class="keyword">false</span>; <span class="comment">// wait ... where is B?</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>當名稱對應到成員變數時，就應該一件事情對應一個操作。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-work/company-ghost-story-7" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/01/work/company-ghost-story-7/" class="article-date">
  <time datetime="2020-11-01T10:00:00.000Z" itemprop="datePublished">2020-11-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工作應用/">工作應用</a>/<a class="article-category-link" href="/categories/工作應用/鬼故事/">鬼故事</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/01/work/company-ghost-story-7/">Company Ghost Story 公司鬼故事 7</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2020/11/01/work/company-ghost-story-7/" data-id="cl4m6v7bk02m9j8vnp4nxcziy" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2020/11/01/work/company-ghost-story-7/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/鬼故事/">鬼故事</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><h3 id="try-catch-exception"><a href="#try-catch-exception" class="headerlink" title="try-catch-exception"></a>try-catch-exception</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function">Object <span class="title">getSomething</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">final</span> Exception abort = <span class="keyword">new</span> RuntimeException();</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        <span class="comment">// ...</span></div><div class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">        <span class="keyword">if</span> (e == abort)</div><div class="line">            <span class="comment">// fine</span></div><div class="line">        <span class="keyword">else</span></div><div class="line">            e.printStackTrace();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>每次呼叫這個函數都要先建立一個例外，然後看裡面會不會丟出來，這個其實很浪費空間和時間建立。可以考慮建立一個特殊 <code>AbortException</code> 來取代預先建立的例外，或者建立一個全局的靜態例外物件來使用。</p>
<h3 id="Double-Brace-Initialization"><a href="#Double-Brace-Initialization" class="headerlink" title="Double Brace Initialization"></a>Double Brace Initialization</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">final</span> Set&lt;String&gt; set = <span class="keyword">new</span> HashSet&lt;&gt; &#123;</div><div class="line">    &#123;</div><div class="line">        add(<span class="string">"A"</span>);</div><div class="line">        add(<span class="string">"B"</span>);</div><div class="line">        add(<span class="string">"C"</span>);</div><div class="line">    &#125; <span class="comment">// no more</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// why not?</span></div><div class="line">set.add(<span class="string">"A"</span>);</div><div class="line">set.add(<span class="string">"B"</span>);</div><div class="line">set.add(<span class="string">"C"</span>);</div></pre></td></tr></table></figure>
<p>這會額外建立匿名類別。如果宣告在一般的成員方法中，還會捕抓成員變數，造成內存洩漏而無法回收的狀況。</p>
<h3 id="No-More-Inheritance"><a href="#No-More-Inheritance" class="headerlink" title="No More Inheritance"></a>No More Inheritance</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> <span class="keyword">extends</span> <span class="title">Pair</span>&lt;<span class="title">Integer</span>, <span class="title">Integer</span>&gt; </span>&#123;</div><div class="line">    Point(<span class="keyword">int</span> x, <span class="keyword">int</span> y) &#123;</div><div class="line">        <span class="keyword">super</span>(x, y);</div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (o <span class="keyword">instanceof</span> Point) &#123;</div><div class="line">            Point p = (Point) o;</div><div class="line">            <span class="keyword">return</span> first == p.first &amp;&amp; second == p.second; <span class="comment">// wrong</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>別忘了，Java 中的 wrapper class 可是一個物件，光靠 <code>==</code> 是不能比較相同與否。雖然對於數值小於某個定值的時候，他們會在常數內存池中取得，讓你覺得一切都好像沒事。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-lesson/ada-2020-hw1-p3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/10/31/lesson/ada-2020-hw1-p3/" class="article-date">
  <time datetime="2020-10-31T08:30:00.000Z" itemprop="datePublished">2020-10-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-其他題目/">解題區 - 其他題目</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/10/31/lesson/ada-2020-hw1-p3/">ADA 2020 Fall P3. ADA Party</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2020/10/31/lesson/ada-2020-hw1-p3/" data-id="cl4m6v73802amj8vngq0xm3eb" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2020/10/31/lesson/ada-2020-hw1-p3/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分治/">分治</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/排容/">排容</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <blockquote>
<p>Algorithm Design and Analysis (NTU CSIE, Fall 2020)</p>
</blockquote>
<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>給 <span>$N$</span><!-- Has MathJax --> 個堆，每個堆有 <span>$a_i$</span><!-- Has MathJax --> 個糖果，現在邀請 <span>$K$</span><!-- Has MathJax --> 個人，現在問有多少種挑選區間的方法，滿足扣掉最大堆和最小堆後，區間內的糖果總數可以被 <span>$K$</span><!-- Has MathJax --> 整除。</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">10 2</div><div class="line">6 9 3 4 5 6 1 7 8 3</div></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">25</div></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><blockquote>
<p>由於沒辦法參與課程，就測測自己產的測試資料，正確性有待確認。</p>
</blockquote>
<p>分治處理可行解的組合，每一次剖半計算，統計跨區間的答案個數。</p>
<p>討論項目分別為</p>
<ul>
<li>最大值、最小值嚴格都在左側</li>
<li>最大值、最小值嚴格都在右側</li>
<li>最大值在左側、最小值在右側</li>
<li>最大值在右側、最小值在左側</li>
</ul>
<p>最後兩項會有交集部分，則扣除 在左側的最大最小值接等於右側的最大最小值。對於每一項回答，搭配單調運行的滑動窗口解決。</p>
<p>時間複雜度 <span>$\mathcal{O}(n \log n)$</span><!-- Has MathJax -->、空間複雜度 <span>$\mathcal{O}(n)$</span><!-- Has MathJax --> </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="comment">// Algorithm Design and Analysis (NTU CSIE, Fall 2020)</span></div><div class="line"><span class="comment">// Problem 3. ADA Party</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">500005</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int32_t</span> MIN = LONG_MIN;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int32_t</span> MAX = LONG_MAX;</div><div class="line"><span class="keyword">int32_t</span> a[MAXN];</div><div class="line"><span class="keyword">int32_t</span> lsum[MAXN], rsum[MAXN];</div><div class="line"><span class="keyword">int32_t</span> lmin[MAXN], lmax[MAXN];</div><div class="line"><span class="keyword">int32_t</span> rmin[MAXN], rmax[MAXN];</div><div class="line"></div><div class="line"><span class="keyword">int</span> cases = <span class="number">0</span>;</div><div class="line"><span class="keyword">int</span> mark[MAXN];</div><div class="line"><span class="keyword">int</span> counter[MAXN];</div><div class="line"><span class="keyword">int</span> n, k;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">inc</span><span class="params">(<span class="keyword">int32_t</span> val)</span> </span>&#123;</div><div class="line">    val = (val%k+k)%k;</div><div class="line">    <span class="keyword">if</span> (mark[val] != cases)</div><div class="line">        mark[val] = cases, counter[val] = <span class="number">0</span>;</div><div class="line">    counter[val]++;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dec</span><span class="params">(<span class="keyword">int32_t</span> val)</span> </span>&#123;</div><div class="line">    val = (val%k+k)%k;</div><div class="line">    <span class="keyword">if</span> (mark[val] != cases)</div><div class="line">        mark[val] = cases, counter[val] = <span class="number">0</span>;</div><div class="line">    counter[val]--;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int32_t</span> val)</span> </span>&#123;</div><div class="line">    val = (val%k+k)%k;</div><div class="line">    <span class="keyword">if</span> (mark[val] != cases)</div><div class="line">        mark[val] = cases, counter[val] = <span class="number">0</span>;</div><div class="line">    <span class="keyword">return</span> counter[val];</div><div class="line">&#125;</div><div class="line"><span class="keyword">int64_t</span> common(<span class="keyword">int</span> l, <span class="keyword">int</span> m, <span class="keyword">int</span> r) &#123;</div><div class="line">    <span class="keyword">int64_t</span> ret = <span class="number">0</span>;</div><div class="line">    cases++;  <span class="comment">// max and min is same on both end</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = m, j = m+<span class="number">1</span>, jl = m+<span class="number">1</span>; i &gt;= l; i--) &#123;</div><div class="line">        <span class="keyword">while</span> (j &lt;= r &amp;&amp; (rmax[j] &lt;= lmax[i] &amp;&amp; rmin[j] &gt;= lmin[i])) &#123;</div><div class="line">            inc(rsum[j]-rmin[j]);</div><div class="line">            j++;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">while</span> (jl &lt; j &amp;&amp; (rmin[jl] &gt; lmin[i] || rmax[jl] &lt; lmax[i])) &#123;</div><div class="line">            dec(rsum[jl]-rmin[jl]);</div><div class="line">            jl++;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (j &gt; m+<span class="number">1</span> &amp;&amp; lmin[i] == rmin[j<span class="number">-1</span>] &amp;&amp; lmax[i] == rmax[j<span class="number">-1</span>])</div><div class="line">            ret += get(k-(lsum[i]-lmax[i]));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int64_t</span> divide(<span class="keyword">int</span> l, <span class="keyword">int</span> r) &#123;</div><div class="line">    <span class="keyword">if</span> (l &gt;= r)</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> m = (l+r)/<span class="number">2</span>;</div><div class="line">    <span class="keyword">int32_t</span> sum = <span class="number">0</span>;</div><div class="line">    <span class="keyword">int32_t</span> mn = MAX, mx = MIN;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = m; i &gt;= l; i--) &#123;</div><div class="line">        sum += a[i], mn = min(mn, a[i]), mx = max(mx, a[i]);</div><div class="line">        <span class="keyword">if</span> (sum &gt;= k)	sum %= k;</div><div class="line">        lsum[i] = sum, lmin[i] = mn, lmax[i] = mx;</div><div class="line">    &#125;</div><div class="line">    sum = <span class="number">0</span>, mn = MAX, mx = MIN;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = m+<span class="number">1</span>; i &lt;= r; i++) &#123;</div><div class="line">        sum += a[i], mn = min(mn, a[i]), mx = max(mx, a[i]);</div><div class="line">        <span class="keyword">if</span> (sum &gt;= k)	sum %= k;</div><div class="line">        rsum[i] = sum, rmin[i] = mn, rmax[i] = mx;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">int64_t</span> c1 = <span class="number">0</span>, c2 = <span class="number">0</span>, c3 = <span class="number">0</span>, c4 = <span class="number">0</span>;</div><div class="line"></div><div class="line">    cases++; <span class="comment">// min max on the left</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = m, j = m+<span class="number">1</span>; i &gt;= l; i--) &#123;</div><div class="line">        <span class="keyword">while</span> (j &lt;= r &amp;&amp; lmin[i] &lt; a[j] &amp;&amp; a[j] &lt; lmax[i]) &#123;</div><div class="line">            inc(rsum[j]);</div><div class="line">            j++;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (i &lt; m)</div><div class="line">            c1 += get(k-(lsum[i]-lmin[i]-lmax[i]));</div><div class="line">    &#125;</div><div class="line">    cases++; <span class="comment">// min max on the right</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = m+<span class="number">1</span>, j = m; i &lt;= r; i++) &#123;</div><div class="line">        <span class="keyword">while</span> (j &gt;= l &amp;&amp; rmin[i] &lt; a[j] &amp;&amp; a[j] &lt; rmax[i]) &#123;</div><div class="line">            inc(lsum[j]);</div><div class="line">            j--;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (i &gt; m+<span class="number">1</span>)</div><div class="line">            c2 += get(k-(rsum[i]-rmin[i]-rmax[i]));</div><div class="line">    &#125; </div><div class="line"></div><div class="line">    cases++;  <span class="comment">// min on the left, max on the right</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = m, j = m+<span class="number">1</span>, jl = m+<span class="number">1</span>; i &gt;= l; i--) &#123;</div><div class="line">        <span class="keyword">while</span> (j &lt;= r &amp;&amp; rmin[j] &gt;= lmin[i]) &#123;</div><div class="line">            inc(rsum[j]-rmax[j]);</div><div class="line">            j++;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">while</span> (jl &lt; j &amp;&amp; rmax[jl] &lt; lmax[i]) &#123;</div><div class="line">            dec(rsum[jl]-rmax[jl]);</div><div class="line">            jl++;</div><div class="line">        &#125;</div><div class="line">        c3 += get(k-(lsum[i]-lmin[i]));</div><div class="line">    &#125;</div><div class="line">    cases++; <span class="comment">// min on the right, max on the left</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = m+<span class="number">1</span>, j = m, jl = m; i &lt;= r; i++) &#123;</div><div class="line">        <span class="keyword">while</span> (j &gt;= l &amp;&amp; lmin[j] &gt;= rmin[i]) &#123;</div><div class="line">            inc(lsum[j]-lmax[j]);</div><div class="line">            j--;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">while</span> (jl &gt; j &amp;&amp; lmax[jl] &lt; rmax[i]) &#123;</div><div class="line">            dec(lsum[jl]-lmax[jl]);</div><div class="line">            jl--;</div><div class="line">        &#125;</div><div class="line">        c4 += get(k-(rsum[i]-rmin[i]));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int64_t</span> local = c1 + c2 + c3 + c4 - common(l, m, r);</div><div class="line">    <span class="keyword">return</span> local + divide(l, m) + divide(m+<span class="number">1</span>, r);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;n, &amp;k) == <span class="number">2</span>) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</div><div class="line">        <span class="built_in">memset</span>(counter, <span class="number">0</span>, <span class="keyword">sizeof</span>(counter[<span class="number">0</span>])*k);</div><div class="line">        <span class="keyword">int64_t</span> ret = divide(<span class="number">0</span>, n<span class="number">-1</span>);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ret);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-lesson/ada-2020-hw1-p2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/10/31/lesson/ada-2020-hw1-p2/" class="article-date">
  <time datetime="2020-10-31T08:00:00.000Z" itemprop="datePublished">2020-10-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-其他題目/">解題區 - 其他題目</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/10/31/lesson/ada-2020-hw1-p2/">ADA 2020 Fall P2. Bomb Game</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2020/10/31/lesson/ada-2020-hw1-p2/" data-id="cl4m6v73202aej8vnvbidrct2" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2020/10/31/lesson/ada-2020-hw1-p2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BIT/">BIT</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分治/">分治</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/整體二分/">整體二分</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <blockquote>
<p>Algorithm Design and Analysis (NTU CSIE, Fall 2020)</p>
</blockquote>
<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>有數名玩家依序抵達遊戲，並且落在位置 <span>$c_i$</span><!-- Has MathJax -->，並且具有防禦力 <span>$d_i$</span><!-- Has MathJax -->，過程中會有炸彈發生於 <span>$[l_i, r_i]$</span><!-- Has MathJax -->，對防禦力小於等於 <span>$p_i$</span><!-- Has MathJax --> 造成 <span>$k_i$</span><!-- Has MathJax --> 點傷害。</p>
<p>回報遊戲最後每一名玩家所受的傷害總額。</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">10 10</div><div class="line">P 3 5</div><div class="line">A 2 8 15 5</div><div class="line">P 7 10</div><div class="line">A 4 10 5 3</div><div class="line">A 1 9 10 7</div><div class="line">P 6 20</div><div class="line">P 5 1</div><div class="line">A 4 9 17 2</div><div class="line">A 1 2 20 4</div><div class="line">P 9 5</div></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">12</div><div class="line">9</div><div class="line">0</div><div class="line">2</div><div class="line">0</div></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><blockquote>
<p>由於沒辦法參與課程，就測測自己產的測試資料，正確性有待確認。</p>
</blockquote>
<p>如果這一題目強制在線對答，則需要一個樹套樹在 <span>$\mathcal{O}(\log^2 n)$</span><!-- Has MathJax --> 內回答每一個結果，需要一個動態開區間的實作方法。</p>
<p>如果採用離線處理，則可以透過逆序處理來回答，可以透過二維空間的 BIT 結構來完成，這時候空間上會是另一個問題，即使使用懶惰標記，預期可能會達到 <span>$\mathcal{O}(C \; D)$</span><!-- Has MathJax -->，通常是不允許的。</p>
<p>從分治算法切入，預想防禦能力高影響不受到攻擊力低的炸彈影響，無論時間與否都不受到影響。接下來，對防禦能力和攻擊力統稱力量。在分治的時候，對力量低的累計出答案，在合併階段受時間順序的影響才能回答。最後：</p>
<ol>
<li>對力量從小到大排序</li>
<li>分治算法<ol>
<li>對左區間和右區間按照時間由大到小排序</li>
<li>對於每一個左區間的詢問，插入所有滿足的右區間</li>
</ol>
</li>
</ol>
<p>時間複雜度 <span>$\mathcal{O}(n \log^2 n)$</span><!-- Has MathJax -->、空間複雜度 <span>$\mathcal{O}(n)$</span><!-- Has MathJax --> </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="comment">// Algorithm Design and Analysis (NTU CSIE, Fall 2020)</span></div><div class="line"><span class="comment">// Problem 2. Bomb Game</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">200005</span>;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BIT</span> &#123;</span></div><div class="line">    <span class="keyword">int64_t</span> a[MAXN];</div><div class="line">    <span class="keyword">int</span> l[MAXN];</div><div class="line">    <span class="keyword">int</span> cases = <span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> val, <span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">        <span class="keyword">while</span> (x &lt;= n) &#123;</div><div class="line">            <span class="keyword">if</span> (l[x] != cases)</div><div class="line">                l[x] = cases, a[x] = <span class="number">0</span>;</div><div class="line">            a[x] += val, x += x&amp;(-x);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">int64_t</span> sum(<span class="keyword">int</span> x) &#123;</div><div class="line">        <span class="keyword">int64_t</span> ret = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> (x) &#123;</div><div class="line">            <span class="keyword">if</span> (l[x] != cases)</div><div class="line">                l[x] = cases, a[x] = <span class="number">0</span>;</div><div class="line">            ret += a[x], x -= x&amp;(-x);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ret;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">reset</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">        cases++;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> k, <span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">        add(l, k, n);</div><div class="line">        add(r+<span class="number">1</span>, -k, n);</div><div class="line">    &#125;</div><div class="line">&#125; bit;</div><div class="line"></div><div class="line"><span class="keyword">int</span> n;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">PEvent</span> &#123;</span></div><div class="line">    <span class="keyword">int</span> c, d, i;</div><div class="line">&#125;;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AEvent</span> &#123;</span></div><div class="line">    <span class="keyword">int</span> l, r, p, k;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Event</span> &#123;</span></div><div class="line">    <span class="keyword">int</span> type; <span class="comment">// 'P' 0 or 'A' 1</span></div><div class="line">    <span class="keyword">int</span> time; <span class="comment">// input order</span></div><div class="line">    <span class="keyword">union</span> &#123;</div><div class="line">        PEvent p;</div><div class="line">        AEvent a;</div><div class="line">    &#125; data;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">power</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (type == <span class="number">0</span>)</div><div class="line">            <span class="keyword">return</span> data.p.d;</div><div class="line">        <span class="keyword">else</span></div><div class="line">            <span class="keyword">return</span> data.a.p;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">println</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (type == <span class="number">0</span>)</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"P %d %d\n"</span>, data.p.c, data.p.d);</div><div class="line">        <span class="keyword">else</span></div><div class="line">            <span class="built_in">printf</span>(<span class="string">"A %d %d %d %d\n"</span>, data.a.l, data.a.r, data.a.p, data.a.k);</div><div class="line">    &#125;</div><div class="line">&#125; events[MAXN];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">cmp_p</span><span class="params">(Event &amp;a, Event &amp;b)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> pa = a.power();</div><div class="line">    <span class="keyword">int</span> pb = b.power();</div><div class="line">    <span class="keyword">if</span> (pa != pb)</div><div class="line">        <span class="keyword">return</span> pa &lt; pb;</div><div class="line">    <span class="keyword">return</span> a.time &lt; b.time;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">cmp_t</span><span class="params">(Event &amp;a, Event &amp;b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> a.time &gt; b.time;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">int</span> ret[MAXN];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">resolve</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> m, <span class="keyword">int</span> r)</span> </span>&#123;</div><div class="line">    sort(events+l, events+m+<span class="number">1</span>, <span class="keyword">cmp_t</span>);</div><div class="line">    sort(events+m+<span class="number">1</span>, events+r+<span class="number">1</span>, <span class="keyword">cmp_t</span>);</div><div class="line"></div><div class="line">    <span class="comment">//	printf("resolve %d %d =========\n", l, r);</span></div><div class="line">    <span class="comment">//	for (int i = l; i &lt;= m; i++)</span></div><div class="line">    <span class="comment">//		events[i].println();</span></div><div class="line">    <span class="comment">//	puts("---");</span></div><div class="line">    <span class="comment">//	for (int i = m+1; i &lt;= r; i++)</span></div><div class="line">    <span class="comment">//		events[i].println();</span></div><div class="line">    bit.reset(n);</div><div class="line">    <span class="keyword">int</span> j = m+<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= m; i++) &#123;</div><div class="line">        <span class="keyword">if</span> (events[i].type)</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        <span class="keyword">int</span> qtime = events[i].time;</div><div class="line">        <span class="keyword">while</span> (j &lt;= r &amp;&amp; events[j].time &gt; qtime) &#123;</div><div class="line">            <span class="keyword">if</span> (events[j].type) &#123;</div><div class="line">                bit.add(events[j].data.a.l,</div><div class="line">                        events[j].data.a.r,</div><div class="line">                        events[j].data.a.k,</div><div class="line">                        n);</div><div class="line">                <span class="comment">//				printf("add %d %d %d %d\n", events[j].data.a.l,</span></div><div class="line">                <span class="comment">//						events[j].data.a.r,</span></div><div class="line">                <span class="comment">//						events[j].data.a.p,</span></div><div class="line">                <span class="comment">//						events[j].data.a.k);</span></div><div class="line">            &#125;</div><div class="line">            j++;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">//		printf("%d --- %d\n", events[i].data.p.i, bit.sum(events[i].data.p.c));</span></div><div class="line">        ret[events[i].data.p.i] += bit.sum(events[i].data.p.c);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">divide</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (l &gt;= r)</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">int</span> m = (l+r)/<span class="number">2</span>;</div><div class="line">    divide(l, m);</div><div class="line">    divide(m+<span class="number">1</span>, r);</div><div class="line"></div><div class="line">    resolve(l, m, r);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> m;</div><div class="line">    <span class="keyword">char</span> s[<span class="number">2</span>];</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;n, &amp;m);</div><div class="line"></div><div class="line">    <span class="keyword">int</span> id = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s);</div><div class="line">        events[i].time = i;</div><div class="line">        <span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">'P'</span>) &#123;</div><div class="line">            events[i].type = <span class="number">0</span>;</div><div class="line">            events[i].data.p.i = id++;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,</div><div class="line">                    &amp;events[i].data.p.c,</div><div class="line">                    &amp;events[i].data.p.d);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            events[i].type = <span class="number">1</span>;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d %d %d %d"</span>,</div><div class="line">                    &amp;events[i].data.a.l, </div><div class="line">                    &amp;events[i].data.a.r,</div><div class="line">                    &amp;events[i].data.a.p,</div><div class="line">                    &amp;events[i].data.a.k);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    sort(events, events+m, cmp_p);</div><div class="line">    divide(<span class="number">0</span>, m<span class="number">-1</span>);</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; id; i++)	</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ret[i]);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-note/diary-202010" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/10/25/note/diary-202010/" class="article-date">
  <time datetime="2020-10-25T11:16:06.000Z" itemprop="datePublished">2020-10-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/手札日記/">手札日記</a>
  </div>

  </div>
  <div class="article-inner ">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="https://i.imgur.com/g0lZncf.jpg" rel="gallery_cl4m6v78l02iaj8vn6dxvf98h">
        <img src="https://i.imgur.com/g0lZncf.jpg" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/10/25/note/diary-202010/">資訊科學的偏科生 面試者篇</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2020/10/25/note/diary-202010/" data-id="cl4m6v78l02iaj8vn6dxvf98h" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2020/10/25/note/diary-202010/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>從實習一年、正式工作三年，從一般的軟體工程職位軟體工程師 II (Software Enginner II) 開始爬，一年後升到資深工程師 (Senior Software Engineer)，第三年升到首席工程師 (Principal Software Engineer)，依照正常流程，這樣的躍遷是快的。</p>
<p>在薪水上可能會有點失望，必須了解到能力好與不好之間並沒有太大的差別，也就是說薪水不會有 30% 的差異，同時職位之間的差別也不到 20%。但工作量卻顯著地增加，這社會相當奇怪，這也難怪很多高科技的高手最後反而會想離開大公司的體制，自行創業或者轉行都是會發生的狀況。</p>
<p>從成功嶺出獄的第一天上班，頂著小平頭也參與面試流程，從那開始三年間面試了不少人，也與一些身歷百戰的朋友聊了一下狀況，而我卻沒站在白板上參與真的面試，大部分都是工作直接來找，看到需要繁瑣面試的公司都想直接忽略，畢竟身為一個偏科生，肯定是會被刷掉的，要找通才去找血統純正的學歷吧。</p>
<h2 id="面試狀況"><a href="#面試狀況" class="headerlink" title="面試狀況"></a>面試狀況</h2><h3 id="電話面試"><a href="#電話面試" class="headerlink" title="電話面試"></a>電話面試</h3><p>最近受到疫情影響，會盡量先以 <strong>電話面試</strong> 為第一關，通常會從簡單的問答看出端倪，如基礎的時間複雜度分析、程式架構、開發經歷上著手提問。有時會配上線上共享文件撰寫簡單的程式，這對刷 leetcode 準備面試的人都不算難。</p>
<p>通常用解說定義為主，或者可以分享一些使用經驗，對於模糊不清的項目直接表達說知道但是不熟悉，一旦描述錯誤或者是甚至在使用完全錯誤的方向，就會凸顯沒有仔細了解，在錯誤理解下又有大量的錯誤衍生，下場就會非常慘。</p>
<p>雷點如下：</p>
<ul>
<li>不知道二元樹的定義 (到底是怎麼碩班畢業的？)</li>
<li>不知道遞迴的實際流程 (到底是怎麼大學畢業的？)</li>
<li>要求指定語言的工作條件，卻不知物件導向 (可以不滿足所有應徵條件，但請理解每一項大概是什麼內容再來。)</li>
</ul>
<h3 id="自我介紹"><a href="#自我介紹" class="headerlink" title="自我介紹"></a>自我介紹</h3><p>通過第一階段後，很多人就會來到這個環節，通常要準備三十分鐘自我介紹，我比較喜歡稱作武力展示，但不是像相親那樣的自我介紹，如學歷、出生年月、興趣嗜好都不需要。如果早已遞交履歷，那些訊息不需要提第二次，這些口頭描述就像流水帳，聽起來也很無趣。</p>
<p>對於碩博剛畢業的人而言，大部分都直接拿論文出來講，對於程式能力比較吃重的職位，偏好程度很低，實在是不想當論文口委，畢竟研究領域差太遠，也不能驗證對錯與否。如果用口述方式表達，專有名詞與公式都也無法理解是否具有該實力。</p>
<p>從以前讀過碩班的經驗，很多碩士都是老師放水過關的，也有可能完全不需要寫程式的經驗也能畢業。對於那些跨科系的碩士及學碩學歷差異大的，都需配上其他的實務經驗，才能讓面試官比較有信心。</p>
<p>履歷部分請參考相關文章</p>
<ul>
<li><a href="https://blog.roga.tw/2009/11/2329" target="_blank" rel="external">《How the HR department and a programmer reads your resume?》 — roga’s blog</a></li>
<li><a href="https://kheresy.wordpress.com/2010/05/24/hr-%e5%92%8c%e7%a8%8b%e5%bc%8f%e8%a8%ad%e8%a8%88%e5%b8%ab%e6%80%8e%e9%ba%bc%e7%9c%8b%e4%bd%a0%e7%9a%84%e5%b1%a5%e6%ad%b7%ef%bc%9f/" target="_blank" rel="external">《HR 和程式設計師怎麼看你的履歷？》 — Heresy’s Space</a></li>
</ul>
<p>在過程中的確有幾個實際發生的項目</p>
<ol>
<li>博士學位的面試者容易遇到本公司可能無法讓你發展所才，請另尋他路的勸導<ul>
<li>原本想要的，但實在是太高學歷了。</li>
</ul>
</li>
<li>以 Microsoft Office Word/Excel 出現在技巧描述中<ul>
<li>因為大部分的工作工作都是之後再學，像這種被 GUI 固化的工具，很難拓展。</li>
</ul>
</li>
<li>只有在課堂上寫過程式，完全沒有課堂以外的程式項目或參與專案<ul>
<li>課堂以內是可接受的，但需要體現足夠自我挖掘與學習能力</li>
</ul>
</li>
<li>履歷上的縮排混雜著空白字元和跳脫字元<ul>
<li>若採用中文履歷，可參閱 <a href="https://github.com/sparanoid/chinese-copywriting-guidelines" target="_blank" rel="external">github/中文文案排版指北</a></li>
<li>體現細心與自我要求的程度，通常會視為考量部分。</li>
</ul>
</li>
</ol>
<p>在其他未提及和重點項目，</p>
<ol>
<li>履歷鏈結中出現 <code>?fbclid=XXX</code>，作為一個從事資訊行業的人會直接出局。</li>
<li>強調的內容卻用淡色系的文字或其他方式呈現，脫離一般的思考模式。</li>
<li>個人網站<ul>
<li>能提高具有該實力的證明。</li>
<li>展示出資訊整合的高度能力就是寫作，也可以從中看出溝通能力。</li>
<li>因分享教學是最好的學習，請參閱「費曼學習法」。</li>
</ul>
</li>
<li>github/bitbucket 等代碼託管帳號<ul>
<li>自行開發的項目架構一覽無遺，直接進行武力展示。</li>
<li>參與的開放項目，展現其求知慾與發現問題並解決的能力。</li>
<li>參與的專案討論，展現其挖掘與辯論分析的能力。</li>
</ul>
</li>
</ol>
<p>在過程中可以透過白板直接介紹，也可以純口頭表達，亦可以採用簡報的方式，手法不受任何限制，但盡量貼合目標工作內容所需要的技能或是該公司缺少的項目為主軸。千萬別忘記體現自己所做過，拉回自己擅長的領域。</p>
<p>有時面試官突然問個太細節的問題，則需要準備概要和講給不同領域的人能理解的一句話，否則將容易錯失表現機會。畢竟那些項目細節上網搜尋即可，就像論文描述幾十頁，而摘要卻只有幾百個字一樣，唯有充分理解的人，才能做到的能力。千萬別花半個小時去描述需要解決的問題定義，適可而止！</p>
<h3 id="筆試"><a href="#筆試" class="headerlink" title="筆試"></a>筆試</h3><p>好的公司是不會有筆試的。若有，則筆試應該只是參考依據。對沒有推薦人或認識的狀況下，筆試都是從嚴審核。反之，就不會佔有太大的比重。</p>
<blockquote>
<p>不同類型的公司對筆試的考核方式皆不同。</p>
</blockquote>
<p>對於著重實作細節的公司，如指定語言下的語法考試，甚至有一些未定義行為 (undefined behavior) 的項目需要注意，有的還會考以前大學教科書上附錄不想見的問題。這類型因為工作環境和需求，可能會讓新人非常受挫，對於新人的要求會比較高，才剛畢業的人通常要具備在沒有搜尋資源下，也能略知一二的能力。</p>
<p>對於跨領域的公司，會有一些其他領域題型，具有博學能力的人就會特別被選拔出來。像我們 EDA 公司，就有機會看到電子電路的題目，實際上答不出來也很正常，不用太沮喪，導致下一個階段表現不好。</p>
<p>對於應用方面，題目描述的手法也不一定像學校所學的非一即二的要求。若看到含糊不清的描述，那表示接下來的工作環境就是那種含糊不清的需求，則在答題上要自己以自身經驗去約束和討論問題，才能符合需求，原則上是以申論題的模式作答。</p>
<p>雷點如下：</p>
<ul>
<li>沒有檢查輸入、輸出的定義<ul>
<li>那個不是已知的條件，不能假設，常理上是絕對不行的啦。</li>
</ul>
</li>
<li>不完整的程式片段<ul>
<li>到底要回傳什麼，記得寫。</li>
</ul>
</li>
<li>不完整的上下文描述</li>
<li>沒有計算過程的答案<ul>
<li>直接迸出一個數值。如果答錯，是完全沒有轉圜的餘地的。畢竟不知道你是不是費馬，還是把過程列出來吧。</li>
</ul>
</li>
<li>全然忘卻高中數學<ul>
<li>如為什麼 <span>$\sin \theta$</span><!-- Has MathJax --> 是 <span>$\frac{a}{c}$</span><!-- Has MathJax --></li>
</ul>
</li>
<li>相關題目的邏輯矛盾<ul>
<li>如在前一題答說 A 是缺點，卻在下一題答 A 是優點</li>
</ul>
</li>
<li>履歷中有提及此項目，卻無法以此作答<ul>
<li>履歷上的項目看起來只是掛名的對吧？像是上百人團隊的工作項目。</li>
</ul>
</li>
<li>論述內容呈現大學必修科目沒有學好<ul>
<li>如說雜湊的整體空間複雜度是 <span>$\mathcal{O}(1)$</span><!-- Has MathJax --></li>
</ul>
</li>
<li>在行為準則考題中，連演都不演的真性格<ul>
<li>Q: 能不能與同事合作 A: 完全無法</li>
</ul>
</li>
</ul>
<p>同時，在撰寫的代碼中很容易展現出經驗差距，容易出錯的寫法雖然沒錯，卻間接告訴面試官有經驗不足的缺點。</p>
<h3 id="白板題"><a href="#白板題" class="headerlink" title="白板題"></a>白板題</h3><p>解決只刷 leetcode 的假工程師的回合 (與考驗同事的時候)。</p>
<p>每題作答 30 分鐘，採用白板討論構思方向與實作細節。通常考三題，答題過快會有第四個防破台題目出現，題目對於以前打比賽的都是水題，基本上都會在十分鐘內解決。</p>
<p>類型通常都是教科書上每一章節的經典算法，答不出來或者構思錯誤，多半都會被刷掉。即使答出來，討論實務經驗時，也會從中觀察出是否有足夠的學習基礎，以及對所學的概念應用的能力。那些培訓班出來的假高手通常會在變化題型受挫，分析相關問題時無法應答，及缺少實務相關經驗。</p>
<h2 id="後話"><a href="#後話" class="headerlink" title="後話"></a>後話</h2><p>不太選用從短程培訓班出來的，風險相當大，因為太多沒有實戰或者過時技術的老師在外頭開補習班。試想過，為什麼能力好卻不從事開發工作，卻跑來當老師的原因嗎？再者，程式補習班老師多半沒有學過教育學程，跟教授一樣不需要，那麼教學品質很難有所保證。</p>
<p>現在又有大學入學程式考試 APCS (Advanced Placement Computer Science)，自稱老師的越來越多，家長又瘋狂地看著老師的名號去選擇，而不知道科技業每一個職位與工作時間是有很大的差異，就像工作沒幾年就轉戰的 youtuber ，的確是高學歷也很聰明，但對於整體知識的養成與發展概念，通常都還沒沒達到融會貫通，只有問 A 答 B 的快速反應，缺少對 A 的定義及其他種非正規的可應用解的能力。</p>
<p>如何了解、觀察、解決、應用問題，適當地啟蒙學生才是老師要引導的。若像大學教授一樣教學生，九成的大學生畢業之後都不到八成內容。只是要知道問題的解決方法，可能還贏不了 Google，看看複製貼上的工程師就明白了。</p>
<p>有一些認識的學長，也開始從事家教和補習班老師，希望能遏止這種劣質的教學環境，就看看近期有沒有發展吧。</p>
<p>藉此，了解到不少學校的學生都找家教當槍手，學歷似乎也不能證明任何能力，家長資助和選對槍手才是當代的生存之道。面對欺瞞的文化，不行就說不行，請不要裝作很行，在面試過程中試出來，公司可是會記錄評價的。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-work/company-ghost-story-6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/10/24/work/company-ghost-story-6/" class="article-date">
  <time datetime="2020-10-24T10:00:00.000Z" itemprop="datePublished">2020-10-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工作應用/">工作應用</a>/<a class="article-category-link" href="/categories/工作應用/鬼故事/">鬼故事</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/10/24/work/company-ghost-story-6/">Company Ghost Story 公司鬼故事 6</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2020/10/24/work/company-ghost-story-6/" data-id="cl4m6v7bn02mcj8vn9cm2lwkf" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2020/10/24/work/company-ghost-story-6/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/鬼故事/">鬼故事</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><h3 id="Observer-vs-Inheritor"><a href="#Observer-vs-Inheritor" class="headerlink" title="Observer vs. Inheritor"></a>Observer vs. Inheritor</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Tool tool = <span class="keyword">new</span> Tool() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">fireSomething</span><span class="params">(T t)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.fireSomething(t);</div><div class="line">        updateProcess(t);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">updateProcess</span><span class="params">(T t)</span> </span>&#123;...&#125;</div></pre></td></tr></table></figure>
<p>當觀察者模式 (observer pattern) 的介面應優先考量 attach/addListener，不應該以繼承的方式覆寫 update/fireListener/notify 等函數。</p>
<h3 id="WhatIf"><a href="#WhatIf" class="headerlink" title="WhatIf?"></a>WhatIf?</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (isA()) &#123;</div><div class="line">    <span class="comment">// something</span></div><div class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (isA() &amp;&amp; isB()) &#123;</div><div class="line">    <span class="comment">// dead code</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>第二個 else-if 並不會執行到。</p>
<h3 id="Equals-vs"><a href="#Equals-vs" class="headerlink" title="Equals vs. =="></a>Equals vs. ==</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (a == b &amp;&amp; a.equals(b)) &#123;...&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (a == b || a.equals(b)) &#123;...&#125;</div></pre></td></tr></table></figure>
<p>對 Java 而言，有 <code>Objects.equals</code> 可以替代呼叫，又或者在 <code>boolean equals(Object)</code> 中包含 <code>==</code> 才對。</p>
<h3 id="String-format"><a href="#String-format" class="headerlink" title="String.format"></a>String.format</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String.format(<span class="string">"Move %s"</span>, fromObj, toObj);</div></pre></td></tr></table></figure>
<p>對上參數數量是很重要的。</p>
<h3 id="Mapper-Function"><a href="#Mapper-Function" class="headerlink" title="Mapper Function"></a>Mapper Function</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">static</span> T <span class="title">a2b</span><span class="params">(String key)</span> </span>&#123;</div><div class="line">    Map&lt;String, T&gt; mapper = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">    mapper.put(<span class="string">"..."</span>, ...);</div><div class="line">    mapper.put(<span class="string">"..."</span>, ...);</div><div class="line">    mapper.put(<span class="string">"..."</span>, ...);</div><div class="line">    mapper.put(<span class="string">"..."</span>, ...);</div><div class="line">    <span class="keyword">return</span> mapper.get(key);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>手動做 if-else 比較快的，建立 hash 可不是這麼簡單，記憶體宣告等因素需要考慮。而它也不屬於只宣告一次的靜態變數，因此並不適合這樣處理。</p>
<h3 id="Comparable"><a href="#Comparable" class="headerlink" title="Comparable"></a>Comparable</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(T other)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span>[] c = &#123;fa.compareTo(other.fa), fb.compareTo(other.fb) ...&#125;;</div><div class="line">    <span class="keyword">return</span> firstNotZero(c);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>if-else 不應該這樣被偷懶的，整個效能都爛了。</p>
<h3 id="Argument-vs-Method-Name"><a href="#Argument-vs-Method-Name" class="headerlink" title="Argument vs. Method Name"></a>Argument vs. Method Name</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">doExpand</span><span class="params">(<span class="keyword">boolean</span> isExpand)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!isExpand)</div><div class="line">        doCollapse();</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>好的命名決定品質。</p>
<h3 id="Switch"><a href="#Switch" class="headerlink" title="Switch"></a>Switch</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">enableAListener</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">removeAListener</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">addBListener</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">stopBListener</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setCListener</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">disableCListener</span><span class="params">()</span> </span>&#123;</div><div class="line">    sListeners.remove(sAListener);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>有一種被玩弄的感覺 …</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-work/company-ghost-story-5" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/30/work/company-ghost-story-5/" class="article-date">
  <time datetime="2020-09-30T12:00:00.000Z" itemprop="datePublished">2020-09-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工作應用/">工作應用</a>/<a class="article-category-link" href="/categories/工作應用/鬼故事/">鬼故事</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/30/work/company-ghost-story-5/">Company Ghost Story 公司鬼故事 5</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2020/09/30/work/company-ghost-story-5/" data-id="cl4m6v7be02m2j8vnk4ud8skm" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2020/09/30/work/company-ghost-story-5/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/鬼故事/">鬼故事</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><h3 id="Duplicate-Field"><a href="#Duplicate-Field" class="headerlink" title="Duplicate Field"></a>Duplicate Field</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</div><div class="line">    <span class="keyword">final</span> A a;</div><div class="line">    <span class="keyword">final</span> A b;</div><div class="line">    C(A a) &#123;</div><div class="line">        <span class="keyword">this</span>.a = a;</div><div class="line">        <span class="keyword">this</span>.b = a; <span class="comment">// why?</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>為什麼要做出兩個相同意義的欄位？</p>
<h3 id="Strange-Method-Name"><a href="#Strange-Method-Name" class="headerlink" title="Strange Method Name"></a>Strange Method Name</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UIComponent</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDisable</span><span class="params">(<span class="keyword">boolean</span> d)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isDisable</span><span class="params">()</span></span>;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isDisabled</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>英文不好的我，一度慘死。</p>
<h3 id="Strange-Method-Name-II"><a href="#Strange-Method-Name-II" class="headerlink" title="Strange Method Name II"></a>Strange Method Name II</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UIComponent</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEnabled</span><span class="params">(<span class="keyword">boolean</span> e)</span></span>;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEnabled</span><span class="params">()</span></span>;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">getEnabled</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>拜託決定一種風格做一件事情。</p>
<h3 id="Inefficient-Listener"><a href="#Inefficient-Listener" class="headerlink" title="Inefficient Listener"></a>Inefficient Listener</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(Component c)</span> </span>&#123;</div><div class="line">    c.addFocusListener(...);</div><div class="line">    c.addChangeListener(...);</div><div class="line">    c.addSelectListener(...);</div><div class="line">    c.setSelect(...); <span class="comment">// trigger listener ...</span></div><div class="line">    c.setFocus(...); <span class="comment">// trigger listener ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>初始化的優先順序很重要，多次觸發有可能發生，造成重複處理。</p>
<h3 id="Override-Method"><a href="#Override-Method" class="headerlink" title="Override Method"></a>Override Method</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">uninstall</span><span class="params">()</span> </span>&#123;</div><div class="line">    uninstallMe();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="title">uninstallMe</span><span class="params">()</span> </span>&#123; <span class="comment">// why not write into uninstall()?</span></div><div class="line">    <span class="comment">// something ...</span></div><div class="line">    <span class="keyword">super</span>.uninstall();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>函數這麼簡單，為什麼 <code>super.method</code> 寫在原本的函數外部。出現不同於 <code>@Override</code> 的函數中實在少見。</p>
<h3 id="Empty-Listener"><a href="#Empty-Listener" class="headerlink" title="Empty Listener"></a>Empty Listener</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">c.addWindowListener(<span class="keyword">new</span> WindowAdapter() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">windowClosed</span><span class="params">(WindowEvent e)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.windowClosed(e);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>不要註冊一堆空操作。</p>
<h3 id="Override-Empty"><a href="#Override-Empty" class="headerlink" title="Override Empty"></a>Override Empty</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">install</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="comment">// please add comment here if remove parent processing</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>這不知道在寫什麼，也沒叫 <code>super.install()</code>，該觸發事件的都沒觸發，真的沒事嗎？應該是寫錯了吧</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-work/company-ghost-story-4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/26/work/company-ghost-story-4/" class="article-date">
  <time datetime="2020-09-26T02:00:00.000Z" itemprop="datePublished">2020-09-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工作應用/">工作應用</a>/<a class="article-category-link" href="/categories/工作應用/鬼故事/">鬼故事</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/26/work/company-ghost-story-4/">Company Ghost Story 公司鬼故事 4</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2020/09/26/work/company-ghost-story-4/" data-id="cl4m6v7bb02lyj8vn5zg4rdqd" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2020/09/26/work/company-ghost-story-4/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/鬼故事/">鬼故事</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="SVN"><a href="#SVN" class="headerlink" title="SVN"></a>SVN</h2><h3 id="Commit-File"><a href="#Commit-File" class="headerlink" title="Commit File"></a>Commit File</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ svn status</div><div class="line">  .DS_Store</div><div class="line">  import.csv$</div><div class="line">  export.txt~</div><div class="line">  test_result.txt</div><div class="line">  golden.txt</div><div class="line">? test_result.log</div></pre></td></tr></table></figure>
<ul>
<li>別建立隱藏檔案格式，以小數點 <code>.</code> 開頭的在 Linux 可是隱藏檔案的意思</li>
<li>別上傳 <code>.DS_Store</code> 那個是 Mac 平台上的隱藏檔案，並不需要</li>
<li>別上傳 <code>xxx.csv$</code>那個是 Microsoft 平台上的 lock 檔案，並不需要</li>
<li>別上傳 <code>xxx.txt~</code> 那個是 emacs, nano, vim 等製造的備份檔案，並不需要</li>
<li>別上傳測試結果，如 <code>test_result.txt</code>，正常來講會覆寫，傳上去結果沒產生怎麼辦，比對還會過呢。</li>
<li>別上傳空資料夾</li>
</ul>
<h3 id="Commit-Log"><a href="#Commit-Log" class="headerlink" title="Commit Log"></a>Commit Log</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ svn <span class="built_in">log</span> golden.txt</div><div class="line">------------------------------------------------------------------------</div><div class="line">r32 | product_bot | 2003-01-13 00:43:13 -0600 (Mon, 13 Jan 2003) | 1 line</div><div class="line"></div><div class="line">Update golden</div></pre></td></tr></table></figure>
<p>拜託用自己的帳號上傳，不小心用到 <code>product_bot</code> 這種全自動的帳號，不曉得是誰修改的內容。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-java/java-stream" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/20/java/java-stream/" class="article-date">
  <time datetime="2020-09-20T10:00:00.000Z" itemprop="datePublished">2020-09-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工作應用/">工作應用</a>/<a class="article-category-link" href="/categories/工作應用/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/20/java/java-stream/">為什麼不推薦用 Java Stream 改寫迴圈</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2020/09/20/java/java-stream/" data-id="cl4m6v72r02a1j8vnenmwl0gf" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2020/09/20/java/java-stream/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/lambda/">lambda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/performance/">performance</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/stream/">stream</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/優化/">優化</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/效能/">效能</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <p>Java 8 開始推出了 stream 介面，搭配 lambda 可以達到函數式編程 (functional language) 的能力，但是也造成非常多的效能爆炸的憾事。尤其是在我們沒有深入了解官方實作的細節時，請別輕易地轉換到 stream 介面。</p>
<h2 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a>Stream</h2><p>在 <code>Stream</code> 出現之前，我們可以透過 <code>Iterator</code> 的實作來達到串流的概念，如 guava 庫所提供的 <code>FluentIterable</code> 就是一個替代方案。公司內部則是因為維護問題自己實作了一個自己的庫，因此沒辦法輕易地用 guava 的項目。但其中一點很明顯的不同在於 parallel 並行特性，即使是 <code>FluentIterable</code> 中，我也未見相關的平行操作。</p>
<p>在自己實作庫、人手不足的團隊配置下，直接吹捧去使用現有的函數庫，那麼問題就容易出現在於轉換上。必須考慮「何時我們該去使用」，決定好使用場景，再決定是否要改寫。公司已經升級到了 JDK 11 的，在銜接官方的 stream 實作時，依舊造成顯著的效能退化，甚至還有嚴重的運行問題，導致 dead lock 等問題。</p>
<h3 id="Static-Initialization-Block"><a href="#Static-Initialization-Block" class="headerlink" title="Static Initialization Block"></a>Static Initialization Block</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">classA</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> &#123;</div><div class="line">        getXXX().parallelStream().forEach(e -&gt; doSomething(e));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在 JDK 11 中，可能會無知地不小心在 static initialization block 中觸發 parallel 特性，此時會造成程式無法運行、卡住。這個問題在於 threading 之間調度時的鎖，另一部分則是 lambda 抓取變數造成的。目前在 bug <a href="https://bugs.openjdk.java.net/browse/JDK-8143380" target="_blank" rel="external">JDK-8143380</a> 回報系統上看出無意解決此問題，因為這是人為撰寫的問題。如果是呼叫大量的函數來初始化參數，很容易遇到不知道哪個函數區塊內偷偷開了平行計算。</p>
<p>像同事都把 <code>stream()</code> 都改寫成 <code>parallelStream()</code>，不管問題是大是小，這樣改寫有時候就造成莫名其妙的 Bug 發生，造成找了半天才發現問題。如果覺得著官方提供的項目都有公信力，而且不會做很蠢的事情，一直都可以很聰明地在平行與不平行取捨的話，那其實也不用設計 <code>parallelStream()</code> 給我們使用，統一一個 <code>stream()</code> 接口就好。</p>
<p>想到同事如此狂妄的想法「工程師不該考慮資源，從摩爾定律來看，硬體明年就會解決，我們要做出更好的 scalability 的寫法」，讓我整個火氣都上來，無法接受 <strong>用而不知</strong> 的習慣。在沒人力挺下，只能眼真真地看著代碼被改得亂七八糟。</p>
<h3 id="Stream-Cost"><a href="#Stream-Cost" class="headerlink" title="Stream Cost"></a>Stream Cost</h3><p>了解 <code>Stream</code> 基礎實作後，就會明白在沒有平行的狀況下，維護 stage 的狀態會是額外開銷，相較於手刻的 <code>Iterator</code>，很多沒有必要的狀態紀錄容易在非常簡單的迭代器中暴露。</p>
<h3 id="Stream-Concatentation"><a href="#Stream-Concatentation" class="headerlink" title="Stream Concatentation"></a>Stream Concatentation</h3><p>串流串接又是更可怕的實作技術，請參閱附錄文章 <a href="https://www.techempower.com/blog/2016/10/19/efficient-multiple-stream-concatenation-in-java/" target="_blank" rel="external">Efficient multiple-stream concatenation in Java</a>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">                                       concat(concat(concat(a, b), c), d)</div><div class="line">                                      /                                 \</div><div class="line">               concat(concat(a, b), c)                                   d</div><div class="line">              /                      \</div><div class="line">  concat(a, b)                        c</div><div class="line"> /           \</div><div class="line">a             b</div></pre></td></tr></table></figure>
<p>串接的實作像是二元樹。如果操作順序不當，馬上會產生一棵偏斜的二元樹，假設我們要取 <code>a</code> 裏頭的元素，則必須從根一路走到葉節點去。如果構造 $n$ 次操作，且每一個恰好為一個元素，蒐集所有的內容，時間複雜度為 $O(n^2)$。</p>
<p>因此，亂改寫遞迴構造器很容易出現問題，不如用原本的回傳值 <code>List/Collection</code> 把要的東西收集好，不支援惰性操作也好，舊的寫法依舊在 $O(n)$ 完成。若要支援惰性操作，使用 <code>StreamBuilder</code> 建立平衡的二元樹也能在 $O(n \log n)$ 最慘複雜度下完成迭代。</p>
<p>這個問題並不是開 <code>parallelStream()</code> 解決，必須從根本的複雜度去分析，</p>
<h3 id="Iterator-to-Stream"><a href="#Iterator-to-Stream" class="headerlink" title="Iterator to Stream"></a>Iterator to Stream</h3><p>從內建的 <code>Collection</code> 到 <code>Stream</code> 大部分都由官方做得很好，用不著花太多的心思去思考如何實作，直接呼叫相關函數即可。如果工作需要自己的 <code>Iterator</code> 變成 <code>Stream</code> 就沒有這麼好運。必須了解什麼是 <code>Spliterator</code>，而 <code>Spliterator</code> 是怎麼實作的，會有什麼樣的介面，而它是從何支援 <code>parallelStream</code> 這一項特性。</p>
<p>假設您已經詳讀 <code>Spliterators.java</code> 下的所有代碼，如自動建造函數 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> &lt;T&gt; <span class="function">Spliterator&lt;T&gt; <span class="title">spliteratorUnknownSize</span><span class="params">(Iterator&lt;? extends T&gt; iterator, <span class="keyword">int</span> characteristics)</span></span></div></pre></td></tr></table></figure>
<p>標示不確定迭代器實際運行的元素個數，好比在 stream 的 <code>flatMap()</code> 和 <code>filter()</code> 後，無法得知下一階段的元素多寡。在這些情況下只能透過這一類函數構造。然而官方預設的行為卻造成了嚴重的效能問題，它要求建造一個 <code>IteratorSpliterator</code>，而為了支援平行特性，平行通常需要透過高效的拆分陣列完成工作分配，因此會呼叫 <code>Spliterator::trySplit</code> 不斷地拆分，從源代碼中我們可以得知在未知大小的狀況下，則建立 <code>new Object[1024]</code> 預處理資料結構，即使在沒有開啟 <code>parallelStream</code>，依舊按照相同的運行流程。</p>
<p>有人說在 Java 開 <code>new Object[1024]</code> 很快，而最慘情況迭代器就只有一個元素，甚至沒有任何的狀況下，用最蠢的實作只消耗了一個迭代器的宣告開銷，而轉換串流卻消耗了整整數千個位元組，這是個效能損耗。就算 GC 很強，也不代表它能發現這麼複雜的操作，它整整跨足了超過一個函數區塊。</p>
<p>工作中因為繪製處理，需要運算數億次，若每一次都宣告這麼多餘的陣列，那麼莫虛有內存損耗高達幾十 GB，GC 若要運行 10 次，畫面繪製需要多一分鐘都是有可能的，將數秒不到的計算整整拖累下去。</p>
<h3 id="Lazy-Evaluation"><a href="#Lazy-Evaluation" class="headerlink" title="Lazy Evaluation"></a>Lazy Evaluation</h3><p>惰性計算是 stream 的主要特性之一，從另一個術語按需計算 (on-demand)。即使是官方提供的庫也有一些小 Bug 造成假的惰性計算。最常見的像是 <code>flatMap</code>、<code>map</code> 和 <code>filter</code> 混用的時候，最後使用 <code>findFirst</code> 操作。從代碼上，我們會預期差不多就是找到一個元素之前的所有計算，而從回報系統裡面下關鍵字去找，會發現不少多餘的計算發生。</p>
<p>同事老是說「我們自己的庫超慢的，用 stream 比較快。」</p>
<blockquote>
<p>言下之意，只是沒有遇到官方庫的 Bug，而你看到了庫的 Bug 卻從沒打算解決。</p>
</blockquote>
<p>最常見的迭代器實作，忘了 Lazy Evaluation 的寫法如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyIterator</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line">    ...</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">next</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!hasNext())</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</div><div class="line">        T val = nextVal;</div><div class="line">        findNext(); <span class="comment">// on-demand ?</span></div><div class="line">        <span class="keyword">return</span> val;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;...&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">findNext</span><span class="params">()</span> </span>&#123;</div><div class="line">        ... <span class="comment">// time complexity ?</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>很明顯地，透過 <code>findNext()</code> 我們可能只拿了第一個元素，在不需要第二個元素的狀況下，卻耗費了線性時間。</p>
<h2 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h2><p>還有一些問題，下一次再聊聊吧。</p>
<h2 id="Reading-List"><a href="#Reading-List" class="headerlink" title="Reading List"></a>Reading List</h2><ul>
<li><a href="https://blog.jooq.org/2015/12/08/3-reasons-why-you-shouldnt-replace-your-for-loops-by-stream-foreach/" target="_blank" rel="external">3 Reasons why You Shouldn’t Replace Your for-loops by Stream.forEach()</a></li>
<li><a href="https://www.techempower.com/blog/2016/10/19/efficient-multiple-stream-concatenation-in-java/" target="_blank" rel="external">Efficient multiple-stream concatenation in Java</a></li>
</ul>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-work/company-ghost-story-3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/20/work/company-ghost-story-3/" class="article-date">
  <time datetime="2020-09-20T06:00:00.000Z" itemprop="datePublished">2020-09-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工作應用/">工作應用</a>/<a class="article-category-link" href="/categories/工作應用/鬼故事/">鬼故事</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/20/work/company-ghost-story-3/">Company Ghost Story 公司鬼故事 3</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2020/09/20/work/company-ghost-story-3/" data-id="cl4m6v7b802luj8vnbec9lwbc" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2020/09/20/work/company-ghost-story-3/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/鬼故事/">鬼故事</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><h3 id="Setter-Getter"><a href="#Setter-Getter" class="headerlink" title="Setter/Getter"></a>Setter/Getter</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parser</span> </span>&#123;</div><div class="line">    <span class="function">X <span class="title">getX</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">x</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">readX</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">parseX</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">X</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>Java 特性預設都是透過 setter/getter 的概念來完成成員變數的存取。為了擴充使用不建議直接存取變數。</p>
</blockquote>
<p>這毫無設計的函數是發生甚麼事情？名字這麼像是想害死誰啊，而且還都是不同邏輯。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parser</span> </span>&#123;</div><div class="line">    <span class="function">X <span class="title">eX</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">aX</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">sX</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pX</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>不是這樣子說完，就用奇怪的前綴解決。把整個動詞完整描述出來會讓你打字很痛苦嗎？</p>
<h3 id="Inner-Anonymous-Class"><a href="#Inner-Anonymous-Class" class="headerlink" title="Inner/Anonymous Class"></a>Inner/Anonymous Class</h3><p>現在我們用一個指令去搜尋建立的 class files。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ find ./bin -name <span class="string">"*\$[0-9]*.class"</span></div><div class="line">xxxx<span class="variable">$1</span><span class="variable">$1</span>.class</div><div class="line">xxxx<span class="variable">$64</span><span class="variable">$1</span>.class</div><div class="line">...</div><div class="line">xxxx<span class="variable">$64</span><span class="variable">$64</span>.class</div></pre></td></tr></table></figure>
<p>居然發現了非常非常多的匿名類別，而且還是爆炸性的嵌套。這意味者當改變一個 class 檔案時，編譯會一次可能產生上百個檔案。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">getToken</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Token &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="string">"here we are"</span>; &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>這也是常常在調適函數時，不知道為什麼會有 IDE 崩潰的情況發生。其實都是上述的寫法氾濫，連帶的內存洩漏問題也很嚴重。事實上，大部分的匿名類別都可以額外地用功能去描述類別，請重新宣告並且命名好。</p>
<h3 id="Long-Name-Method"><a href="#Long-Name-Method" class="headerlink" title="Long Name Method"></a>Long Name Method</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">addXXXsToAdjacentYYYsSetSoItWillNotAAABBBWhereMMM</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">setXInDatabaseAAABBBField</span><span class="params">()</span></span>;</div></pre></td></tr></table></figure>
<p>這種命名函數比惡名昭彰的匈牙利還兇殘，直接把文件描述寫在函數上，這時候又願意打字了。</p>
<p>請找個稍微中立一點描述方法，等到哪天換了連帶功能，所有相關函數都要重新做過。</p>
<h3 id="Create-Context"><a href="#Create-Context" class="headerlink" title="Create Context"></a>Create Context</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        readPartA();</div><div class="line">        externalCall();</div><div class="line">    &#125; <span class="keyword">finally</span> &#123;</div><div class="line">        setCacheEnabled(<span class="keyword">true</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">readPartA</span><span class="params">()</span> </span>&#123;</div><div class="line">    setCacheEnabled(<span class="keyword">false</span>); <span class="comment">// why not place it in read()?</span></div><div class="line">    ...</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// in external.xxx</span></div><div class="line">java::setCacheEnabled(<span class="keyword">false</span>); <span class="comment">// what are you doing?</span></div><div class="line">...</div><div class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</div></pre></td></tr></table></figure>
<p>建立 context 的習慣是要寫在同一個檔案中，而且盡可能寫在同一個函數內。</p>
<p>跳來跳去，有時候只有下文，有時候只有上文，不覺得很可怕嗎？萬一中間執行失敗，直接萬劫不復。</p>
<h3 id="Create-Context-II"><a href="#Create-Context-II" class="headerlink" title="Create Context II"></a>Create Context II</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">    db.setDbCheckEnabled(<span class="keyword">false</span>);</div><div class="line">    ...</div><div class="line">    <span class="comment">// where's your setDbCheckEnabled(true);, can I trust you more?</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>直接把所有重要檢查通通關閉，卻忘了開起來，直接出逃啦。</p>
<h3 id="Create-Context-III"><a href="#Create-Context-III" class="headerlink" title="Create Context III"></a>Create Context III</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        db.setDbCheckAEnabled(<span class="keyword">false</span>);</div><div class="line">        db.setDbCheckBEnabled(<span class="keyword">false</span>);</div><div class="line">        ...</div><div class="line">    &#125; <span class="keyword">finally</span> &#123;</div><div class="line">        db.setDbCheckAEnabled(<span class="keyword">true</span>); <span class="comment">// setDbCheckBEnabled() first, please</span></div><div class="line">        db.setDbCheckBEnabled(<span class="keyword">true</span>); <span class="comment">// setDbCheckAEnabled() last, please</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>大部分都不會錯，但建議採用堆疊的順序撰寫。因為有些保護機制會造成重複工作。</p>
<h3 id="Create-Context-IV"><a href="#Create-Context-IV" class="headerlink" title="Create Context IV"></a>Create Context IV</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        db.setDbCheckAEnabled(<span class="keyword">false</span>);</div><div class="line">        db.setDbCheckBEnabled(<span class="keyword">false</span>);</div><div class="line">        ...</div><div class="line">        db.setDbCheckBEnabled(<span class="keyword">true</span>); <span class="comment">// I don't know.jpg</span></div><div class="line">        ...</div><div class="line">    &#125; <span class="keyword">finally</span> &#123;</div><div class="line">        db.setDbCheckBEnabled(<span class="keyword">true</span>);</div><div class="line">        db.setDbCheckAEnabled(<span class="keyword">true</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>我不知道.jpg。</p>
<h2 id="Regression-Test"><a href="#Regression-Test" class="headerlink" title="Regression Test"></a>Regression Test</h2><h3 id="Create-Test-Folder"><a href="#Create-Test-Folder" class="headerlink" title="Create Test Folder"></a>Create Test Folder</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ tree Regression/FunctionA</div><div class="line">├─testBBBB</div><div class="line">│  └─testCCCC</div><div class="line">│    └─testDDDD</div><div class="line">│      └─test.sh</div><div class="line">...</div></pre></td></tr></table></figure>
<p>為什麼需要前綴 test？請給我一個理由。</p>
<h3 id="Create-Test-Folder-II"><a href="#Create-Test-Folder-II" class="headerlink" title="Create Test Folder II"></a>Create Test Folder II</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ tree Regression/FunctionA</div><div class="line">├─DoNotThrowNoSuchElementException</div><div class="line">│  └─test.sh</div><div class="line">...</div></pre></td></tr></table></figure>
<p>如果是預期丟出錯誤的測試就算了，但錯誤的實例也是會變動的，這樣的資料夾名字不具有太深遠的意義。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/4/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/87/">87</a><a class="extend next" rel="next" href="/page/6/">Next &raquo;</a>
    </nav>
  
</section>
          
          
            <aside id="sidebar">
  <!-- <div id="ukagaka_panel"></div> -->
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/">學校課程</a><span class="category-list-count">115</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/介面設計/">介面設計</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/作業系統/">作業系統</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/即時系統/">即時系統</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/大學專題/">大學專題</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/巨量資料/">巨量資料</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/平行程式/">平行程式</a><span class="category-list-count">43</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/敏捷方法/">敏捷方法</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/數位影像生成/">數位影像生成</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/編譯器/">編譯器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/自然語言/">自然語言</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/虛擬實境/">虛擬實境</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算型智慧/">計算型智慧</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算幾何/">計算幾何</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算機圖學/">計算機圖學</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資料庫系統/">資料庫系統</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資訊安全/">資訊安全</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/通識課程/">通識課程</a><span class="category-list-count">14</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/">工作應用</a><span class="category-list-count">39</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/Java/">Java</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/Meme/">Meme</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/其他/">其他</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/可持久化/">可持久化</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/鬼故事/">鬼故事</a><span class="category-list-count">15</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/手札日記/">手札日記</a><span class="category-list-count">61</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/">網頁設計</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/About-This-Blog/">About This Blog</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/HTML5/">HTML5</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/JQuery/">JQuery</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/Markdown/">Markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/NodeJs/">NodeJs</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/">解題區</a><span class="category-list-count">633</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/Latex/">Latex</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/出題解題/">出題解題</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-POJ/">解題區 - POJ</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a><span class="category-list-count">483</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a><span class="category-list-count">77</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-其他題目/">解題區 - 其他題目</a><span class="category-list-count">45</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-未解題目/">解題區 - 未解題目</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/雜言筆記/">雜言筆記</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a class="text" href="/2022/06/20/note/diary-20220620/">
              
                <i class="icon-file-o"></i> 
              
            維護作業</a>
          </li>
        
          <li>
            <a class="text" href="/2022/06/19/work/company-ghost-story-15/">
              
                <i class="icon-file-o"></i> 
              
            Company Ghost Story 公司鬼故事 15</a>
          </li>
        
          <li>
            <a class="text" href="/2022/03/27/note/diary-20220327/">
              
                <i class="icon-file-o"></i> 
              
            規劃 ‧ 生活</a>
          </li>
        
          <li>
            <a class="text" href="/2022/01/03/note/diary-20220103-encrypt/">
              
                <i class="icon-file-o"></i> 
              
            《批改娘串起得那段經歷·玖 冬暄》</a>
          </li>
        
          <li>
            <a class="text" href="/2022/01/02/note/diary-20220102-encrypt/">
              
                <i class="icon-file-o"></i> 
              
            《批改娘串起得那段經歷·捌 風暴》</a>
          </li>
        
          <li>
            <a class="text" href="/2022/01/01/note/diary-20220101-encrypt/">
              
                <i class="icon-file-o"></i> 
              
            《批改娘串起得那段經歷·柒 暗潮》</a>
          </li>
        
          <li>
            <a class="text" href="/2022/01/01/note/diary-20220101/">
              
                <i class="icon-file-o"></i> 
              
            二八 ‧ 年尾</a>
          </li>
        
          <li>
            <a class="text" href="/2022/01/01/note/clove-letter/">
              
                <i class="icon-file-o"></i> 
              
            《獻給某工程師的情書》</a>
          </li>
        
          <li>
            <a class="text" href="/2021/12/31/note/diary-20211231-encrypt/">
              
                <i class="icon-file-o"></i> 
              
            《批改娘串起得那段經歷·陸 二八》</a>
          </li>
        
          <li>
            <a class="text" href="/2021/12/26/note/diary-20211226-encrypt/">
              
                <i class="icon-file-o"></i> 
              
            《批改娘串起得那段經歷·伍 坦白》</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget-wrap">
    <h3 class="widget-title">Links</h3>
    <div class="widget">   
        <ul>
          <li><a href="http://mypaper.pchome.com.tw/zerojudge" target="_blank" title="Old Blog"><i class="icon-star"></i> Morris' Blog (pchome)</a></li>
        </ul>
    </div>
</div>

  
    
<script src="/js/jquery-ui.js"></script>
<script src="/js/ukagaka/jquery.morris.ukagaka.resource.js"></script>
<script src="/js/ukagaka/typed.js"></script>
  
  
</aside>
          
        
      </div>
      <footer id="footer">
  
  <div class="outer">    
    <div class="social-group">
      
      <a href="https://github.com/morris821028" target="_blank" title="github"><i class="icon-github"></i></a>
      
      
      <a href="https://www.facebook.com/Morris1028" target="_blank" title="facebook"><i class="icon-facebook-sign"></i></a>
      
      
      <a href="http://uhunt.felix-halim.net/id/46705" target="_blank" title="uhunt" ><span class="icon-uhunt">UVa<span></a>
      
    </div>
    <div id="footer-info" class="inner">
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and Theme by <a href="https://github.com/morris821028/hexo-theme-landscape" target="_blank" title="landscape">landscape</a> &copy; 2022 Shiang-Yun Yang 
    </div>
  </div>
</footer>


    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link"><i class=icon-home ></i>&nbsp&nbspHome</a>
  
    <a href="/about" class="mobile-nav-link"><i class=icon-user ></i>&nbsp&nbspAbout</a>
  
    <a href="/archives" class="mobile-nav-link"><i class=icon-archive ></i>&nbsp&nbspArchives</a>
  
    <a href="/tags" class="mobile-nav-link"><i class=icon-tags ></i>&nbsp&nbspTags</a>
  
    <a href="/picture" class="mobile-nav-link"><i class=icon-camera ></i>&nbsp&nbspPictures</a>
  
    <a href="/works" class="mobile-nav-link"><i class=icon-trophy ></i>&nbsp&nbspWorks</a>
  
</nav>
    
<script>
  var disqus_shortname = 'morris1028';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/jquery.lazyload.js"></script>
<script src="/js/jquery.als-1.6.js"></script>

<script src="/js/script.js"></script>

  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>