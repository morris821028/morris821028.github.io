<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Morris&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Morris&#39; Blog">
<meta property="og:url" content="http://morris821028.github.io/page/80/index.html">
<meta property="og:site_name" content="Morris&#39; Blog">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Morris&#39; Blog">
<link rel="publisher" href="108158678174364350000">
  
    <link rel="alternative" href="/atom.xml" title="Morris&#39; Blog" type="application/atom+xml">
  
  
    <meta name="google-site-verification" content="5mRgj8NanEMpGZuNfHNJNmH90RgNlrnJXsFlTaKD6Gs" />
  
  
    <link rel="shortcut icon" href="/img/f.ico">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <script src="/js/jquery-2.1.0.min.js"></script>
  <link rel="stylesheet" href="/css/style.css">
  
  <link rel="stylesheet" href="http://cdn.oesmith.co.uk/morris-0.5.1.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="http://cdn.oesmith.co.uk/morris-0.5.1.min.js"></script>
  <link rel="import" href="/bower_components/app-layout/app-layout.html"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"><div id="banner-right"></div></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Morris&#39; Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          
            <a class="main-nav-link" href="/"><i class=icon-home title='Home'></i></a>
          
        
          
            <a class="main-nav-link" href="/about"><i class=icon-user title='About'></i></a>
          
        
          
            <a class="main-nav-link" href="/archives"><i class=icon-archive title='Archives'></i></a>
          
        
          
            <a class="main-nav-link" href="/tags"><i class=icon-tags title='Tags'></i></a>
          
        
          
            <a class="main-nav-link" href="/picture"><i class=icon-camera title='Pictures'></i></a>
          
        
          
            <a class="main-nav-link" href="/works"><i class=icon-trophy title='Works'></i></a>
          
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://morris821028.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        
          
          <section id="main">
  
    <article id="post-lesson/operating-system-hw-thread" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/18/lesson/operating-system-hw-thread/" class="article-date">
  <time datetime="2014-05-18T06:58:10.000Z" itemprop="datePublished">2014-05-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/學校課程/">學校課程</a>/<a class="article-category-link" href="/categories/學校課程/作業系統/">作業系統</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/18/lesson/operating-system-hw-thread/">作業系統 Thread 程式作業</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/18/lesson/operating-system-hw-thread/" data-id="ckpaivcam00d0n8vnd6vodlv2" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/18/lesson/operating-system-hw-thread/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/matrix/">matrix</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/thread/">thread</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/作業系統/">作業系統</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h1 id="C-Thread-練習"><a href="#C-Thread-練習" class="headerlink" title="C++ Thread 練習"></a>C++ Thread 練習</h1><h2 id="作業要求"><a href="#作業要求" class="headerlink" title="作業要求"></a>作業要求</h2><blockquote>
<p>作業一:應用 Thread 撰寫任意程式(語言不限)，繳交方式 FTP:140.115.155.192(選擇自己學號的資料夾上傳) 帳:os2014 密碼不知道者請再問助教，檔案名稱: “作業一_學號_姓名_第幾版” ex:”作業一_10252200x_林大乖_v1” 繳交內容:壓縮檔(報告word 以及 程式碼,執行檔)，截止日期:2014/05/25(日)23:59</p>
</blockquote>
<h2 id="程式功能"><a href="#程式功能" class="headerlink" title="程式功能"></a>程式功能</h2><p>兩個 <code>n*n</code> 矩陣相乘，在最基礎的 <code>O(n^3)</code> 效能上，使用 Thread 等相關技巧使其加速。</p>
<h2 id="運行"><a href="#運行" class="headerlink" title="運行"></a>運行</h2><ul>
<li><p>Mac OSX</p>
<pre><code>  $ clang -pthread x.cpp -o x
</code></pre>
</li>
<li><p>Linux</p>
<pre><code>  $ gcc -lpthread x.cpp -o x
</code></pre>
</li>
</ul>
<h2 id="測試效率"><a href="#測試效率" class="headerlink" title="測試效率"></a>測試效率</h2><ul>
<li>Mac OSX and Linux<pre><code>  $ time ./a.out
</code></pre>
</li>
</ul>
<h2 id="測試結果"><a href="#測試結果" class="headerlink" title="測試結果"></a>測試結果</h2><p>測試環境為 2013 Mac Air 1.3 GHz Intel Core i5 上對 <code>1024 x 1024</code> 的矩陣進行相乘的統計結果。</p>
<ul>
<li><code>matrix.cpp</code><br>最原始的一般寫法，直接使用 <code>O(n^3)</code> 。運行時間約在 20 秒左右完成。</li>
<li><code>matrix[v2].cpp</code><br>使用轉置矩陣後，在進行運算，這種方式是加快作業系統中的快取層，速度提升至約在 4 秒左右完成。</li>
<li><code>matrix[v3].cpp</code><br>建立在 <code>matrix[v2].cpp</code> 的基礎上，使用 4 條 thread，分別對處理的 column 進行分割操作，速度約在 2 秒內完成。</li>
<li>matrix[v4].cpp<br>與 <code>matrix[v3].cpp</code> 類似，調整 thread 的數量，查看效率變化，但是速度沒有更快的趨勢。</li>
</ul>
<h2 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h2><p>Thread 多不代表會比較快，而是該程式佔有 CPU 的機會比較高，使用的資源就會比較多。在整個作業系統中，Thread 多上下文切換的次數就會上升，對於作業系統整體效率是下降的，但是又不能沒有 Thread，看起來像是所有程式同時在運行，也要防止落入死機無法動彈的情況。</p>
<p>而在 thread 上面會發現，當數量達到一定程度後，速度就不會上升，有一部分是因為 CPU 超頻運作。</p>
<blockquote>
<p>超頻（英語：Overclocking）是把一個電子配件的時脈速度提升至高於廠方所定的速度運作，從而提升性能的方法，但此舉有可能導致該配件穩定性下降。</p>
</blockquote>
<p>可能是長時間閒置的 CPU 發現有大規模的工作運行，把時脈速度升起。</p>
<h1 id="代碼"><a href="#代碼" class="headerlink" title="代碼"></a>代碼</h1><h2 id="matrix-cpp"><a href="#matrix-cpp" class="headerlink" title="matrix.cpp"></a>matrix.cpp</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_N 1024</span></span><br><span class="line"><span class="keyword">double</span> A[MAX_N][MAX_N];</span><br><span class="line"><span class="keyword">double</span> B[MAX_N][MAX_N];</span><br><span class="line"><span class="keyword">double</span> C[MAX_N][MAX_N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">multiply</span><span class="params">(<span class="keyword">double</span> A[][MAX_N], <span class="keyword">double</span> B[][MAX_N], <span class="keyword">double</span> C[][MAX_N])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; MAX_N; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; MAX_N; j++) &#123;</span><br><span class="line">            <span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; MAX_N; k++) &#123;</span><br><span class="line">                sum += A[i][k] * B[k][j];</span><br><span class="line">            &#125;</span><br><span class="line">            C[i][j] = sum;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//clock_t start, finish;</span></span><br><span class="line">    <span class="comment">//start = clock(); // start time clock</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; MAX_N; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; MAX_N; j++) &#123;</span><br><span class="line">            A[i][j] = i;</span><br><span class="line">            B[i][j] = j;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">multiply</span>(A, B, C);</span><br><span class="line">    <span class="comment">//finish = clock(); // finish time clock</span></span><br><span class="line">    <span class="comment">//printf(&quot;Time: %lf\n&quot;, (double)(finish - start)/1000);</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="matrix-v2-cpp"><a href="#matrix-v2-cpp" class="headerlink" title="matrix[v2].cpp"></a>matrix[v2].cpp</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_N 1024</span></span><br><span class="line"><span class="keyword">double</span> A[MAX_N][MAX_N];</span><br><span class="line"><span class="keyword">double</span> B[MAX_N][MAX_N];</span><br><span class="line"><span class="keyword">double</span> C[MAX_N][MAX_N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">trans</span><span class="params">(<span class="keyword">double</span> A[][MAX_N])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; MAX_N; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt; MAX_N; j++) &#123;</span><br><span class="line">            <span class="built_in">swap</span>(A[i][j], A[j][i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">multiply</span><span class="params">(<span class="keyword">double</span> A[][MAX_N], <span class="keyword">double</span> B[][MAX_N], <span class="keyword">double</span> C[][MAX_N])</span> </span>&#123;</span><br><span class="line">    <span class="built_in">trans</span>(B);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; MAX_N; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; MAX_N; j++) &#123;</span><br><span class="line">            <span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; MAX_N; k++) &#123;</span><br><span class="line">                sum += A[i][k] * B[j][k];</span><br><span class="line">            &#125;</span><br><span class="line">            C[i][j] = sum;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//clock_t start, finish;</span></span><br><span class="line">    <span class="comment">//start = clock(); // start time clock</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; MAX_N; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; MAX_N; j++) &#123;</span><br><span class="line">            A[i][j] = i;</span><br><span class="line">            B[i][j] = j;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">multiply</span>(A, B, C);</span><br><span class="line">    <span class="comment">//finish = clock(); // finish time clock</span></span><br><span class="line">    <span class="comment">//printf(&quot;Time: %lf\n&quot;, (double)(finish - start)/1000);</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="matrix-v3-c"><a href="#matrix-v3-c" class="headerlink" title="matrix[v3].c"></a>matrix[v3].c</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pthread.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_N 1024</span></span><br><span class="line"><span class="keyword">double</span> A[MAX_N][MAX_N];</span><br><span class="line"><span class="keyword">double</span> B[MAX_N][MAX_N];</span><br><span class="line"><span class="keyword">double</span> C[MAX_N][MAX_N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">trans</span><span class="params">(<span class="keyword">double</span> A[][MAX_N])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> x;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; MAX_N; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = i+<span class="number">1</span>; j &lt; MAX_N; j++) &#123;</span><br><span class="line">            x = A[i][j];</span><br><span class="line">            A[i][j] = A[j][i];</span><br><span class="line">            A[j][i] = x;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_THREAD 4</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">multiply</span><span class="params">(<span class="keyword">void</span> *arg)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> id = *((<span class="keyword">int</span> *)arg);</span><br><span class="line">    <span class="keyword">int</span> st = id * MAX_N / MAX_THREAD;</span><br><span class="line">    <span class="keyword">int</span> ed = (id + <span class="number">1</span>) * MAX_N / MAX_THREAD - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> i, j, k;</span><br><span class="line">    <span class="keyword">for</span> (i = st; i &lt;= ed; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; MAX_N; j++) &#123;</span><br><span class="line">            <span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (k = <span class="number">0</span>; k &lt; MAX_N; k++) &#123;</span><br><span class="line">                sum += A[i][k] * B[j][k];</span><br><span class="line">            &#125;</span><br><span class="line">            C[i][j] = sum;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;Thread version&quot;</span>);</span><br><span class="line">    <span class="comment">//clock_t start, finish;</span></span><br><span class="line">    <span class="comment">//start = clock(); // start time clock</span></span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; MAX_N; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; MAX_N; j++) &#123;</span><br><span class="line">            A[i][j] = i;</span><br><span class="line">            B[i][j] = j;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">trans</span>(B);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">pthread_t</span> *threads;</span><br><span class="line">    threads = (<span class="keyword">pthread_t</span> *) <span class="built_in">malloc</span>(MAX_THREAD * <span class="built_in"><span class="keyword">sizeof</span></span>(<span class="keyword">pthread_t</span>));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; MAX_THREAD; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> *p = (<span class="keyword">int</span> *) <span class="built_in">malloc</span>(<span class="built_in"><span class="keyword">sizeof</span></span>(<span class="keyword">int</span>));</span><br><span class="line">        *p = i;</span><br><span class="line">        <span class="built_in">pthread_create</span>(&amp;threads[i], <span class="literal">NULL</span>, multiply, (<span class="keyword">void</span> *)(p));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; MAX_THREAD; i++) &#123;</span><br><span class="line">        <span class="built_in">pthread_join</span>(threads[i], <span class="literal">NULL</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//finish = clock(); // finish time clock</span></span><br><span class="line">    <span class="comment">//printf(&quot;Time: %lf\n&quot;, (double)(finish - start)/1000);</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>雖然作業可以有其他語言的相關 Thread，在 Java 作品方面可以查看 Github。</p>
<ul>
<li><a href="https://github.com/morris821028/hw-ChatRoom">聊天室 Chart Room</a></li>
<li><a href="https://github.com/morris821028/hw-FuzzySystem">演化模擬</a></li>
</ul>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-lesson/hw-agile-paper" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/14/lesson/hw-agile-paper/" class="article-date">
  <time datetime="2014-05-14T13:36:45.000Z" itemprop="datePublished">2014-05-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/學校課程/">學校課程</a>/<a class="article-category-link" href="/categories/學校課程/敏捷方法/">敏捷方法</a>
  </div>

  </div>
  <div class="article-inner ">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="/img/1399146778408.gif" rel="gallery_ckpaivcak00ctn8vnb6obfwse">
        <img src="/img/1399146778408.gif" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/14/lesson/hw-agile-paper/">論文選讀 Agile Development and User Experience Design ... </a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/14/lesson/hw-agile-paper/" data-id="ckpaivcak00ctn8vnb6obfwse" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/14/lesson/hw-agile-paper/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/軟體開發/">軟體開發</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h1 id="課程論文心得"><a href="#課程論文心得" class="headerlink" title="課程論文心得"></a>課程論文心得</h1><p>首先，所讀這一篇的論文名稱為『Agile Development and User Experience Design Integration as an Ongoing Achievement in Practice』 所以著重點在于用戶體驗設計要怎麼融入敏捷開發的探討。</p>
<p>什麼是用戶體驗？先說說 UX Designer 做些什麼嗎</p>
<p><a href="https://www.facebook.com/notes/kit-lin/%E7%AC%AC%E4%B8%80%E6%AC%A1%E8%BD%89ux-designer%E5%B0%B1%E4%B8%8A%E6%89%8B%E4%B8%8A/10152088295236310">第一次轉UX Designer就上手（上）</a></p>
<p><a href="https://www.facebook.com/notes/kit-lin/%E7%AC%AC%E4%B8%80%E6%AC%A1%E8%BD%89ux-designer%E5%B0%B1%E4%B8%8A%E6%89%8B%E4%B8%8B/10152088337196310">第一次轉UX Designer就上手（下）</a></p>
<p>看完內容後，總之 UX Designer 算是一種設計師，與理工背景的開發人員可是天差地遠，</p>
<p>他們比起宅宅開發者來說，要與用戶產生關係，繪畫、表達、心理學、與現實溝通，開發人員擁有技術並且完成目標，但是行為卻不是一般使用者，最簡單的說法是『為什麼做出來的軟體只有開發者會用？』如果在軟體的需求面向是開發者們的話，這也許還不是問題，但是要做出給一般人使用的軟體，這樣是行不同的。但是開發者的邏輯古怪到自己都不明白的機率是挺高的，因此會有 UX Designer。</p>
<p>借由 UX design，軟體將會有耐用性、易上手、輕便化 … 等，這讓我突然想到總是會開發出根本用不著的功能，或者是相當難操作的功能。</p>
<p>但是要把 UX design 完全融入是有困難的，因為邏輯思維不同的人，是很難協調的，又或者會互相侵蝕。</p>
<h2 id="開始談談論文的內容"><a href="#開始談談論文的內容" class="headerlink" title="開始談談論文的內容"></a>開始談談論文的內容</h2><p>這一篇論文，主要是 ** 觀察 **，也沒有觀察到所有目前的運行方式。換句話說，不會存在唯一一個好的開發方式，根據組織的規模和文化背景，所適用的運行方式也會有所不同，在理論上百分之百照抄別人的做法運用在自己的發開方式，但是可以藉由論文中觀察的幾點來學習我們的開發方式大概需要的是哪些面向需求。</p>
<p>而當開發人員是怎麼樣類型的人，就可能需要運用哪些方式，這些都是需要去探討的。外國也許按照它們的方式走成功，但並不代表按照一樣的作法一樣會成功，這就所謂 ** 新方法論 **。新方法論沒有絕對的方法，說來有點玄，也就是沒有固定方法就是方法！</p>
<p>由於組織規模不同，彼此部門又要互相協調，在設計與開發之間的不同在於時間的週期不同，工作類型的方式不同，如果是大規模組織，『提高內聚力，降低耦合度』因此專業分工的類型將會在 Study 1 中被提及，這麼考量是有它的原因在的。</p>
<p>而文藝復興時期的全才－達文西類型，則可以在 Study 2 中被提及，每一個人都必須學習一點別人的領域的項目，這樣可以互相考量、共同承擔，來分散思考風險。但這樣對於一般人是相當困難的，如果是菁英組織的運行，大概就是長得這樣。</p>
<p>在最後的 Study 3 中，雖然使用傳統的瀑布式開發，這種神祕的設計大於開發組合相當異常，但也許是一種新的導向。在往後的時代中，當技術相對成熟穩定時，面對的將會是設計需求大於開發需求。</p>
<hr>
<h1 id="RESEARCH-METHOD"><a href="#RESEARCH-METHOD" class="headerlink" title="RESEARCH METHOD"></a>RESEARCH METHOD</h1><p>這裡提供三種 Ethnography (社會學的一種寫作文本，中文翻譯：民族誌) 來探討敏捷開發人員和用戶體驗設計師的配置方式。</p>
<h2 id="A-In-the-field"><a href="#A-In-the-field" class="headerlink" title="A. In the field"></a>A. In the field</h2><p>(田野調查的區域，民族誌運用田野工作來提供人類社會學的描述研究)</p>
<p>總共有三個組織中，四個團隊參與本次研究，參與研究的團隊中正在進行 UX 設計，而我們主要的工作是觀察他們的工作運行情況。</p>
<p>共計在三種情況進行觀察。</p>
<ul>
<li>Study 1: 觀察時間為兩個星期</li>
<li>Study 2: 觀察時間為六天</li>
<li>Study 3: 觀察時間為兩天</li>
</ul>
<p>其中 Study 1, 2 過程中會涵蓋 Sprint 會議，而 Study 3 則只有涵蓋開發人員和設計師共處一室。</p>
<h2 id="B-Thematic-analysis"><a href="#B-Thematic-analysis" class="headerlink" title="B. Thematic analysis"></a>B. Thematic analysis</h2><p>(專題分析)</p>
<h2 id="C-Study-participants"><a href="#C-Study-participants" class="headerlink" title="C. Study participants"></a>C. Study participants</h2><p>(研究參與者)</p>
<h1 id="ACCOUNTS-OF-THE-DAY-TO-DAY-INTEGARTION-WORK"><a href="#ACCOUNTS-OF-THE-DAY-TO-DAY-INTEGARTION-WORK" class="headerlink" title="ACCOUNTS OF  THE DAY-TO-DAY INTEGARTION WORK"></a>ACCOUNTS OF  THE DAY-TO-DAY INTEGARTION WORK</h1><h2 id="Study-1"><a href="#Study-1" class="headerlink" title="Study 1"></a>Study 1</h2><p>這項研究在 14 位 developer 和 2 位 UX designer，這兩位 UX designer 並不屬於 developer team，而是屬於該公司的 UX design team，因此他們並沒有參與 Sprint meeting、Standup、Retrospective，當然開發人員也沒有參與 design meeting，developer team 和 design team 在不同樓層工作。</p>
<p>開發人員描述道『將 UX design 與 agile develop 分開，是基於管理層面。』這很大的原因在於要將 UX 創造力發揮到極限，不能讓軟體工程的問題阻擋他們思考。</p>
<p>而在 Sprint meeting 中觀察到，UX designer 會提供一個 UX design 在 sprint meeting 前送達。但在隨後的 UX design 版本則是偶爾送到 developer 手上，直到 sprint 的最後一天仍持續修改，這表示著 developer 無法依靠 UX design 考慮相關的實作項目，所以大多數的關於 UX 工作將會分配在最後幾個小時來完成。</p>
<p>然而如果詢問 UX designer 是否已經意識到自己時間分配所造成的影響，則他們會回答說『沒有』。但事實上，在發送 UX design 時就已經造成相當多的問題。</p>
<blockquote>
<p>[UX designer]: “That was never explicitly said to me … I thinks there was and still is visibility issues to do with what they’re doing and what their timeline are.”<br>這表示 UX designer 從來不知道這些事情，也從來沒有直接地被告知這項問題，也是因為不知道 developer 的運行工作和時程表。</p>
</blockquote>
<p>當要澄清或者是修改 UX design 時，develop 會將問題寫下，並且要求 UX designer 在他們的 feedback meeting 中討論。</p>
<blockquote>
<p>[senior UX designer]: “The visual designs are pretty much parallel to the wireframes … what kind of feedback do you want to give ?”<br>資深 UX designer 表示道：所有的視覺設計都是在線框 (wireframe) 的基礎上完成的，能有什麼樣的反饋？</p>
</blockquote>
<p>developer 並不完全了解 UX design，只能依靠 UX designer 的批准和重構，這 “批准” 主要是對於敏捷開發中的維護和支持的組成用途，但是當 developer 向 designer 發問時，往往是溝通失敗的。</p>
<blockquote>
<p>2pm: There is some problem with the visual design from UX [hadn’t arrived yet]. Project manager’s been trying to get in touch with the interaction designer, however can not get in contact - mobile switched off. Project manager has heard that UX are moving desks (not all the visual designs have been delivered since the developer feedback session). </p>
</blockquote>
<p>上述內容看得不明白，難道是就是單純 PM 得不到完整的 visual design，因此也就不能向互動工程師聯繫嗎？</p>
<h2 id="Study-2"><a href="#Study-2" class="headerlink" title="Study 2"></a>Study 2</h2><p>小型手機軟件開發的公司，這一間公司有兩支團隊，每一隊有 5 名 developer 和 1 名 UX designer。其中 UX designer 設計非功能性描述和 screen mock-ups，這幾個項目將可以幫助 developer 參考進行開發。</p>
<pre><code>mock-ups 相當於一種 prototype 可以支持動作的描述，通常會帶有基礎的 action code，關於 mock-ups 的相關工具有很多，但是通常價格不菲，邊設計還能自動幫忙產生代碼是不容易的工作。網路上找不到相關的解釋，就先這樣頂替了，相較於一般手繪製圖和文件描述，這樣的方式更為容易了解。
</code></pre>
<p>在他們會議中，每一個角色(QA, scrum master, product owner, UX designer, developer) 都參與討論會議，創造共同意識和共享決策責任。</p>
<blockquote>
<p>9:30 [developer]: How should tabs appear, is ad always right-most tab ? … UX designer tells the developer what whould happen: As new chats come in ad tab moves over to right-most tab.</p>
</blockquote>
<p>開發人員: 分頁到底該如何呈現，而廣告要固定在最右側的分頁嗎？ … UX designer 告訴我們應該「當新的聊天訊息進來時，廣告要移動到最右邊的分頁嗎？」</p>
<blockquote>
<p>[Product owner]: Still waiting on response for some questions from the client.</p>
</blockquote>
<p>Product owner: 這仍然在等待顧客的回報訊息</p>
<blockquote>
<p>[QA]: Kind of hard to do QA if we don’t have the answer … wayry of starting stories without behaviours which means we might have to change thins and that wastes time.</p>
</blockquote>
<p>QA: 這件事情很難做確認，如果我們沒有接收到回報，做的任何修改也許只是浪費時間，無法確定品質。</p>
<blockquote>
<p>[UX designer]: Do them anyway, they might need to go through a number of iterations before they agree this is what they want … it’s better of they see something working as soon as posssible.</p>
</blockquote>
<p>UX designer: 先把這問題放一旁，這需要多次迭代才能確定這是他們想要的 … 如果他們需要高效工作，則這個方式可能比較好。</p>
<blockquote>
<p>[QA]: What if an ad coes in at exactly the same time as a chat ?</p>
</blockquote>
<p>QA: 那如果廣告作為一個新的聊天訊息出場的話呢？</p>
<blockquote>
<p>[UX designer]: That’s extreme edge case and probably very hard to test. So leave it. QA agrees.</p>
</blockquote>
<p>UX designer: 這是一個相當極端的方式，非常難測試，所以先不要管這個。</p>
<p>這些對話通常在每一天的工作中進行，詢問另外一個團隊問題，而另外的團隊注意這些問題。</p>
<blockquote>
<p>[UX designer]: “… if developers come up with issues, these are discussed on a case-by-case basis as they come up … There are lots of small things which are easily worked out on a day-to-day basis”</p>
</blockquote>
<p>UX designer: 如果 developer 在每一個 case 基礎上想出了問題，這些小問題很容易在每日解決。</p>
<p>從會議過程中，主要，我們可以發現的每一個角色都參與了 UX design，同時也在職權外貢獻了他們的想法 - 例如 UX designer 建議在極端情況忽略 QA testing，而在 QA 沒有指責 UX designer 所做的 QA 決策，他們接受這項意見並沒有發出任何評論。其次，在這個 UX design 討論議題中也一起討論了 non-UX 的問題(如這個 QA testing 問題)。</p>
<p>這次的會議的下一步行動，包括實現解決方案和傳達問題給客戶。所有的角色參與討論導致決策同時考慮的設計價值和技術考量。</p>
<p>而在會議中，有 developer 向其他人簡單說明，他在網路空間上有一些之前專案製作時替換視覺設計的文件可以參考，這可以讓 UI designer 可以接受這些更改的項目，增加信服力。</p>
<blockquote>
<p>[UX designer]: Sometimes the developers’ decisions are better, as they are much closer to the implementation. 有時候開發者的決策會更好，因為他們更接近實作。</p>
</blockquote>
<h2 id="Study-3"><a href="#Study-3" class="headerlink" title="Study 3"></a>Study 3</h2><p>在非常小的公司進行，有 1 名 developer 和 2 名 UX designer，他們擅長瀑布形式的開發，在開發過程中 developer 和 UX designer 在同一間辦公室工作，目標是使得設計和開發更接近。正如 Study 1 的時候，發現 developer 會根據 UX designer 設計的線框 (wireframe) 和 visual design 努力地工作。</p>
<p>觀察兩天後的結果如下:</p>
<p>在一般的情況下，UX designer 通常和 developer 在不同樓層工作，developer 也表示他們很少去找 designer 討論遭遇的問題。</p>
<blockquote>
<p>[developer]: We often find things that don’t work, but we don’t go back to design. We just do our best. 我們常發現很多事情並不會 work，但是並沒有回去檢討設計，單純盡力而為。</p>
</blockquote>
<p>在這種共同工作的情況下，designer 給予了一些回應。</p>
<blockquote>
<p>[UX designer]: This style of working means we can collaborate in order to get our points across, rather than dictate because there’s no communication going on. 這種工作方式可以讓我們的觀點交換，而不是因為沒有通通合作的命令。</p>
</blockquote>
<blockquote>
<p>[Head of UX]: And when we first met with the client, the first thing they did was to present to us the findings of that initial research. So we can then go and propose what would bee the next step, which is quite different from any other type of work we’ve been invited to get involved in.</p>
</blockquote>
<p>在大多數的情況，不確定性，設計師在現場談話的記錄:</p>
<blockquote>
<p>[visual designer]: I just feel like I’m not getting any-where.</p>
</blockquote>
<blockquote>
<p>[IA]: I also feel that way.</p>
</blockquote>
<p>但是對於另一個情況下</p>
<blockquote>
<p>[developer]: Just cover the site map.</p>
</blockquote>
<p>developer 和 designer 共同工作</p>
<ul>
<li>可以相互討論跟顧客對談時的內容 (當時在場的感受不同)</li>
<li>目標計劃做些什麼，訊息可以提前知道。(想要做第二個版本)</li>
<li>「這個設計會不會很難實作？」這些問題將會很快被反應出來。</li>
</ul>
<blockquote>
<p>[developer]: It would probably be just as easy.</p>
</blockquote>
<hr>
<h1 id="THEME-FOR-ACHIEVING-INTEGRATION"><a href="#THEME-FOR-ACHIEVING-INTEGRATION" class="headerlink" title="THEME FOR ACHIEVING INTEGRATION"></a>THEME FOR ACHIEVING INTEGRATION</h1><h2 id="A-Integration-as-expectations-about-acceptable-behaviour"><a href="#A-Integration-as-expectations-about-acceptable-behaviour" class="headerlink" title="A. Integration as expectations about acceptable behaviour"></a>A. Integration as expectations about acceptable behaviour</h2><p>在 Study 1 中可以發現，如果將兩者隔離，很容易造成規劃的浪費和開發者在最後期限前超時工作。UX designer 同時跨越多個專案進行設計，丟出設計之後就沒有可接收開發者的反饋，只有等到 sprint meeting 的反應才重新設計，這時可能已經為期已晚。</p>
<p>在 Study 2 中可以發現，頻繁確保兩者之間有相互支持，並且在 UX design 和代碼之間可以互相溝通，相較于 Study 1 上，溝通性有上升，但這些遭遇的問題將會在每個人參與討論會議的過程中的一部份。</p>
<p>在 Study 3 中，每一個成員都有機會被其他角色問到自己領域的問題，同時也可以在與客戶討論中的觀察，在隨後討論。這都歸因于他們在同一間辦公室工作。</p>
<h2 id="B-Integration-as-mutual-awareness"><a href="#B-Integration-as-mutual-awareness" class="headerlink" title="B. Integration as mutual awareness"></a>B. Integration as mutual awareness</h2><p>相對于 Study 1 中，Study 2, 3 擁有了共同享有決策的責任，同時提高了互動上的認識。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-11291-with-yacc" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/12/oj/uva/uva-11291-with-yacc/" class="article-date">
  <time datetime="2014-05-12T10:54:49.000Z" itemprop="datePublished">2014-05-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/12/oj/uva/uva-11291-with-yacc/">Yacc 與 Lex 練習 - UVa 11291</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/12/oj/uva/uva-11291-with-yacc/" data-id="ckpaivcbi00gfn8vn61vh5owm" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/12/oj/uva/uva-11291-with-yacc/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Lex/">Lex</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Yacc/">Yacc</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h1 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h1><p>詳細題目請參考 <a href="http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=24&page=show_problem&problem=2266">UVa 11291 - Smeech</a></p>
<p>語法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;E[x]&gt; -&gt; &lt;Integer&gt; | (p &lt;E[x]&gt; &lt;E[x]&gt;)</span><br><span class="line">&lt;Integer&gt; -&gt; #number</span><br></pre></td></tr></table></figure>

<p>目標計算出 <code>E[X] = p * (e1 + e2) + (1 - p) * (e1 - e2)</code></p>
<h1 id="Yacc"><a href="#Yacc" class="headerlink" title="Yacc"></a>Yacc</h1><p>Yacc 主要是根據 CFG 進行解析。</p>
<p>其中，要對於 Yacc 語法的回傳值明白操作情況。</p>
<p>對於語法回傳值，我們來個最簡單的範例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">expression -&gt; LEFT_P NUMBER expression expression RIGHT_P</span><br><span class="line">    $$          $1     $2       $3         $4       $5</span><br></pre></td></tr></table></figure>
<p>其中 <code>$$</code> 是回傳值，其中的 <code>$1</code>、<code>$2</code> … 等，都是得到的回傳值。</p>
<p>對於 <code>yylval</code> 形態處理：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">%union &#123;</span><br><span class="line">    float 	floatVal;</span><br><span class="line">    int 	intVal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通常使用 <code>union</code> 的方式來共用記憶體，在 lex 那邊就可以根據 <code>yylval.floatVal</code> 進行操作。</p>
<p>當然，我們也要對於每一個 <code>nonterminal</code> 定義回傳的型態</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">%type &lt;floatVal&gt; NUMBER</span><br><span class="line">%type &lt;floatVal&gt; expression</span><br><span class="line">%type &lt;floatVal&gt; startsymbol</span><br></pre></td></tr></table></figure>

<p>基本上就大功告成了。</p>
<p>接著要考慮如何去完成多組測資組的問題，在這裡可以利用 kleene star 來完成。</p>
<p>但是對於輸出順序，使用 <code>input -&gt; input startsymbol</code> 跟 <code>input -&gt; startsymbol input</code> 輸出順序是不同的，如果要順著輸出，請選擇前者。</p>
<figure class="highlight cpp"><figcaption><span>file: a.y</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">%&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">yylex</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">double</span> ans = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">yyerror</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* message)</span> </span>&#123;</span><br><span class="line">    ans = <span class="number">-2147483647</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Invaild format\n&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">%&#125;</span><br><span class="line"></span><br><span class="line">%<span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">    <span class="keyword">float</span> 	floatVal;</span><br><span class="line">    <span class="keyword">int</span> 	intVal;</span><br><span class="line">&#125;</span><br><span class="line">%type &lt;floatVal&gt; NUMBER</span><br><span class="line">%type &lt;floatVal&gt; expression</span><br><span class="line">%type &lt;floatVal&gt; startsymbol</span><br><span class="line"></span><br><span class="line">%token LEFT_P RIGHT_P NUMBER</span><br><span class="line"></span><br><span class="line">%%</span><br><span class="line">input</span><br><span class="line">    : input startsymbol &#123;</span><br><span class="line">        ans = $<span class="number">2</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%.2f\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    | &#123;</span><br><span class="line">    &#125;</span><br><span class="line">startsymbol</span><br><span class="line">    : expression &#123;</span><br><span class="line">        $$ = $<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ;</span><br><span class="line">expression</span><br><span class="line">    : NUMBER &#123;</span><br><span class="line">        $$ = $<span class="number">1</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    | LEFT_P NUMBER expression expression RIGHT_P &#123;</span><br><span class="line">        $$ = $<span class="number">2</span> * ($<span class="number">3</span> + $<span class="number">4</span>) + (<span class="number">1.0f</span> - $<span class="number">2</span>) * ($<span class="number">3</span> - $<span class="number">4</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ;</span><br><span class="line">%%</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">yyparse</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="Lex"><a href="#Lex" class="headerlink" title="Lex"></a>Lex</h1><p>Lex 主要是扮演切出所有的 token 的角色，相當於 Scanner。同時要將值紀錄再 <code>yylval</code> 中，在 Yacc 那邊則會在 <code>$NUMBER</code> 中得到變數值。</p>
<p>在 Lex 語法上要特別小心，如果兩條的前綴 (prefix) 相同時 (解析上會產生相同的 token)，則會選擇長的那一條為優先。如果長度仍相同的話，請自行測試，這裡無法給予解答。而為什麼要這麼設計？為了保證後綴不會塞入奇怪的字符，因此可以先檢查隨後接的字符情況。</p>
<figure class="highlight cpp"><figcaption><span>file: a.l</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">%&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;a.tab.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line">%&#125;</span><br><span class="line"></span><br><span class="line">%%</span><br><span class="line">([-]?)[<span class="number">0</span><span class="number">-9</span>]*\.[<span class="number">0</span><span class="number">-9</span>]*		&#123;<span class="built_in">sscanf</span>(yytext, <span class="string">&quot;%f&quot;</span>, &amp;yylval.floatVal); <span class="keyword">return</span> NUMBER;&#125;</span><br><span class="line">([-]?)[<span class="number">0</span><span class="number">-9</span>]+				&#123;<span class="built_in">sscanf</span>(yytext, <span class="string">&quot;%f&quot;</span>, &amp;yylval.floatVal); <span class="keyword">return</span> NUMBER;&#125;</span><br><span class="line"><span class="string">&quot;(&quot;</span>					&#123;<span class="keyword">return</span> LEFT_P;&#125;</span><br><span class="line"><span class="string">&quot;)&quot;</span>					&#123;<span class="keyword">return</span> RIGHT_P;&#125;</span><br><span class="line">\n					&#123;&#125;</span><br><span class="line">.					&#123;&#125;</span><br><span class="line">%%</span><br></pre></td></tr></table></figure>

<h1 id="make-file"><a href="#make-file" class="headerlink" title="make file"></a>make file</h1><p>請用以下方法建造</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">morris $ sh make.sh</span><br></pre></td></tr></table></figure>

<p>代碼如下</p>
<figure class="highlight plaintext"><figcaption><span>file: make.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bison -d a.y</span><br><span class="line">flex a.l</span><br><span class="line">gcc -c a.tab.c</span><br><span class="line">gcc -c lex.yy.c</span><br><span class="line">gcc lex.yy.o a.tab.o -lfl</span><br></pre></td></tr></table></figure>

<p>產生的結果如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ tree </span><br><span class="line">. ├── a.l</span><br><span class="line">  ├── a.out </span><br><span class="line">  ├── a.tab.c </span><br><span class="line">  ├── a.tab.h </span><br><span class="line">  ├── a.tab.o </span><br><span class="line">  ├── a.y </span><br><span class="line">  ├── input~ </span><br><span class="line">  ├── lex.yy.c </span><br><span class="line">  ├── lex.yy.o </span><br><span class="line">  ├── make.sh </span><br><span class="line">  ├── make.sh~ </span><br><span class="line">  ├── testdata </span><br><span class="line">  │   ├── ac_output </span><br><span class="line">  │   └── input </span><br></pre></td></tr></table></figure>

<h1 id="執行"><a href="#執行" class="headerlink" title="執行"></a>執行</h1><p>執行的時候就跟標準輸入串流一樣。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">morris $ ./a.out &lt;input</span><br></pre></td></tr></table></figure>

<h2 id="參考範例輸入"><a href="#參考範例輸入" class="headerlink" title="參考範例輸入"></a>參考範例輸入</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">7</span><br><span class="line">(.5 3 9)</span><br><span class="line">(0.3 2 (1 1 -10))</span><br><span class="line">(1.0 (1.0 (1.0 -1 -2) (1.0 -1 -2)) (1.0 (1.0 1 2) 2))</span><br><span class="line">(0.99 82 (0.76 50 (0.85 (0.07 (0.88 28 (0.98 79 (0.09 77 51))) (0.30 (0.29 36 (0.36 (0.51 27 (0.68 (0.47 87 35) (0.25 85 59))) 31)) 64)) (0.14 (0.84 (0.77 29 71) (0.50 (0.99 (0.81 (0.78 (0.87 50 7) 71) 72) 14) (0.30 (0.50 9 37) (0.67 21 (0.73 86 (0.08 31 14)))))) (0.94 (0.96 (0.50 27 (0.94 (0.54 62 (0.63 89 29)) (0.81 24 (0.94 20 72)))) 4) (0.44 9 (0.59 (0.70 48 40) (0.64 (0.27 97 71) 43))))))))</span><br><span class="line">(0.15 12 60)</span><br><span class="line">(0.55 18 (0.95 (0.79 95 (0.97 (0.11 (0.96 (0.70 (0.38 73 66) (0.38 (0.06 (0.02 88 66) (0.39 35 37)) 69)) (0.81 3 (0.45 5 61))) (0.44 (0.67 (0.23 82 7) 38) (0.24 49 74))) 76)) (0.46 19 44)))</span><br><span class="line">(0.56 62 77)</span><br><span class="line">(0.03 (0.90 19 35) (0.17 50 (0.13 (0.96 74 (0.07 (0.51 78 (0.77 (0.78 (0.84 64 (0.41 7 59)) 21) (0.73 (0.95 (0.13 2 85) (0.08 29 50)) (0.24 (0.12 43 99) 71)))) 84)) (0.31 69 (0.82 31 24)))))</span><br><span class="line">(0.78 73 44)</span><br><span class="line">(0.09 (0.80 14 62) (0.57 (0.57 95 (0.33 94 31)) (0.70 (0.92 32 (0.13 20 (0.44 87 (0.45 83 26)))) (0.43 40 (0.51 (0.57 29 (0.65 13 (0.40 74 56))) 56)))))</span><br><span class="line">(0.96 (0.96 (0.65 (0.01 (0.98 (0.34 86 (0.68 87 21)) 27) (0.26 68 68)) (0.42 28 29)) 9) 99)</span><br><span class="line">(0.99 (0.60 53 27) (0.35 23 (0.15 (0.50 85 (0.73 56 (0.34 (0.44 (0.10 (0.62 (0.20 58 15) 56) (0.57 74 (0.23 20 78))) 62) (0.92 (0.72 (0.82 75 (0.08 35 93)) 43) (0.55 10 (0.45 (0.25 52 91) 71)))))) (0.61 39 (0.49 (0.92 87 (0.13 52 (0.69 (0.46 (0.82 27 72) 96) (0.27 51 99)))) (0.36 99 (0.60 68 (0.49 (0.25 (0.92 54 7) (0.48 47 32)) (0.08 (0.69 97 11) 34)))))))))</span><br><span class="line">(0.87 (0.32 (0.42 (0.66 69 (0.98 0 (0.46 94 (0.25 (0.57 (0.72 25 59) (0.35 91 (0.42 29 28))) 3)))) 19) 81) (0.72 (0.06 (0.66 (0.07 22 87) 44) (0.18 33 14)) 49))</span><br><span class="line">(0.72 (0.01 67 (0.13 (0.22 (0.88 11 86) (0.04 40 (0.41 (0.86 (0.81 (0.08 84 95) (0.88 19 67)) 8) 96))) 13)) (0.13 45 (0.19 (0.83 85 (0.77 (0.37 78 (0.44 44 59)) 37)) 56)))</span><br><span class="line">(0.51 (0.36 2 72) 25)</span><br><span class="line">(0.32 51 87)</span><br><span class="line">(0.06 (0.23 (0.70 93 47) (0.22 20 (0.90 (0.03 (0.48 (0.84 18 (0.29 (0.02 (0.06 52 49) 67) (0.49 (0.69 60 74) (0.59 92 0)))) 32) 80) (0.76 78 (0.66 8 94))))) 31)</span><br><span class="line">(0.29 (0.54 70 (0.64 (0.48 (0.50 25 (0.38 (0.07 (0.14 (0.44 (0.76 44 45) 67) 41) (0.15 (0.86 (0.89 87 42) (0.43 85 58)) (0.98 44 (0.48 34 28)))) (0.84 81 60))) 28) 16)) (0.84 (0.21 34 (0.78 (0.76 (0.51 82 (0.07 (0.78 (0.52 (0.65 51 58) 12) (0.05 52 (0.98 0 30))) (0.01 27 3))) (1.00 15 (0.53 (0.91 (0.38 62 (0.75 92 69)) (0.85 53 (0.84 92 83))) (0.70 (0.12 (0.24 23 83) 58) (0.62 56 38))))) 36)) (0.66 41 13)))</span><br><span class="line">(0.94 (0.47 30 56) (0.78 6 (0.45 (0.45 15 94) (0.77 (0.57 25 (0.33 66 12)) (0.66 74 (0.82 (0.14 75 50) (0.22 45 43)))))))</span><br><span class="line">(0.66 (0.58 (0.85 75 26) 45) (0.04 (0.94 82 (0.59 34 (0.02 (0.09 11 (0.31 (0.05 (0.92 (0.14 51 45) (0.47 25 46)) 6) 5)) 33))) (0.81 (0.09 15 (0.91 (0.77 (0.59 44 (0.57 (0.39 (0.81 18 75) (0.37 41 67)) 18)) (0.77 (0.68 (0.71 (0.31 87 94) 85) (0.00 35 (0.55 81 22))) 56)) 3)) (0.43 7 (0.98 94 3)))))</span><br><span class="line">(0.13 22 80)</span><br><span class="line">(0.77 45 81)</span><br><span class="line">(0.61 (0.21 (0.32 (0.32 (0.81 8 60) 78) (0.19 (0.92 68 (0.56 (0.22 79 32) (0.32 72 63))) 41)) (0.30 94 31)) (0.80 59 33))</span><br></pre></td></tr></table></figure>

<h2 id="參考範例輸出"><a href="#參考範例輸出" class="headerlink" title="參考範例輸出"></a>參考範例輸出</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">7.00</span><br><span class="line">3.00</span><br><span class="line">5.60</span><br><span class="line">-1.00</span><br><span class="line">241.55</span><br><span class="line">-30.00</span><br><span class="line">32.05</span><br><span class="line">71.24</span><br><span class="line">25.80</span><br><span class="line">97.64</span><br><span class="line">-37.98</span><br><span class="line">153.38</span><br><span class="line">67.92</span><br><span class="line">35.81</span><br><span class="line">-10.21</span><br><span class="line">-17.66</span><br><span class="line">19.68</span><br><span class="line">60.84</span><br><span class="line">92.20</span><br><span class="line">30.61</span><br><span class="line">157.62</span><br><span class="line">-37.20</span><br><span class="line">88.74</span><br><span class="line">-48.46</span><br></pre></td></tr></table></figure>

<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="http://www.ibm.com/developerworks/cn/linux/sdk/lex/">Yacc 与 Lex 快速入门</a></p>
<h1 id="指導"><a href="#指導" class="headerlink" title="指導"></a>指導</h1><p><a href="http://en.wikipedia.org/wiki/God">Inker</a></p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-1636" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/12/oj/uva/uva-1636/" class="article-date">
  <time datetime="2014-05-12T01:15:24.000Z" itemprop="datePublished">2014-05-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/12/oj/uva/uva-1636/">UVa 1636 - Headshot</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/12/oj/uva/uva-1636/" data-id="ckpaivcct00ltn8vnhpk61690" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/12/oj/uva/uva-1636/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/概率/">概率</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>You have a revolver gun with a cylinder that has n chambers. Chambers are located in a circle on a cylinder. Each chamber can be empty or can contain a round. One chamber is aligned with the gun’s barrel. When trigger of the gun is pulled, the gun’s cylinder rotates, aligning the next chamber with the barrel, hammer strikes the round, making a shot by firing a bullet through the barrel. If the chamber is empty when the hammer strikes it, then there is no shot but just a <code>click</code>.</p>
<p>You have found a use for this gun. You are playing Russian Roulette with your friend. Your friend loads rounds into some chambers, randomly rotates the cylinder, aligning a random chamber with a gun’s barrel, puts the gun to his head and pulls the trigger. You hear <code>click</code> and nothing else – the chamber was empty and the gun did not shoot.</p>
<p>Now it is your turn to put the gun to your head and pull the trigger. You have a choice. You can either pull the trigger right away or you can randomly rotate the gun’s cylinder and then pull the trigger. What should you choose to maximize the chances of your survival? </p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The input file contains several datasets. A dataset contains a single line with a string of n digits <code>0</code> and <code>1</code> ( 2 &lt;= n &lt;= 100). This line of digits represents the pattern of rounds that were loaded into the gun’s chambers. <code>0</code> represent an empty chamber, <code>1</code> represent a loaded one. In this representation, when cylinder rotates before a shot, the next chamber to the right gets aligned with the barrel for a shot. Since the chambers are actually located on a circle, the first chamber in this string follows the last one. There is at least one <code>0</code> in this string.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For each dataset, write to the output file one of the following words (without quotes):</p>
<ul>
<li><code>SHOOT</code> – if pulling the trigger right away makes you less likely to be actually shot in the head with the bullet (more likely that the chamber will be empty).</li>
<li><code>ROTATE</code> – if randomly rotating the cylinder before pulling the trigger makes you less likely to be actually shot in the head with the bullet (more likely that the chamber will be empty).</li>
<li><code>EQUAL</code> – if both of the above choices are equal in terms of probability of being shot.</li>
</ul>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0011</span><br><span class="line">0111</span><br><span class="line">000111</span><br></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EQUAL</span><br><span class="line">ROTATE</span><br><span class="line">SHOOT</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>** 題目描述：**</p>
<p>俄羅斯輪盤，現在與一位朋友一起玩這場遊戲，然而我們已經知道左輪手槍中的填彈資訊，剛聽到朋友按下扣板，但是沒有死。現在輪到你，請問要直接按？還是隨機轉一圈再按？</p>
<p>** 題目解法：**</p>
<p>不外乎地，我們要找到哪個機率高。</p>
<p>由於朋友按下沒死，也就是要考慮連續 2 個 <code>0</code> 的情況，下一個是 <code>0</code> 的機率為 <code>czero / zero</code></p>
<p>// 在前提為 0 的情況下，下一個為 0 的機率為何，也就是考慮 <code>00</code> 和 <code>01</code> 的情況下，<code>00</code> 的機率為何。<br>// czero 是連續為 0 的個數，zero 是 0 的個數 (同時也是 <code>00</code> <code>01</code> 的個數。)，n 是全部個數。</p>
<p>隨機轉一圈得到 <code>0</code> 的概率為 <code>zero / n</code>。</p>
<p>不小心把題目想太難，事實上這問題很簡單的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    char s[1024];</span><br><span class="line">    while(scanf(&quot;%s&quot;, s) == 1)&#123;</span><br><span class="line">        int n = strlen(s);</span><br><span class="line">        int zero = 0, one = 0, czero = 0;</span><br><span class="line">        for(int i = 0 ; i &lt; n ; i++ )&#123;</span><br><span class="line">            if(s[i] == &#x27;1&#x27;) </span><br><span class="line">                continue;</span><br><span class="line">            zero++;</span><br><span class="line">            if(s[(i+1)%n] == &#x27;0&#x27;) czero++;</span><br><span class="line">        &#125;</span><br><span class="line">        // czero - zero * (zero / n)</span><br><span class="line">        if(czero * n == zero * zero) </span><br><span class="line">            puts(&quot;EQUAL&quot;);</span><br><span class="line">        else if(czero * n &gt; zero * zero)</span><br><span class="line">            puts(&quot;SHOOT&quot;);</span><br><span class="line">        else </span><br><span class="line">            puts(&quot;ROTATE&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-1644" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/12/oj/uva/uva-1644/" class="article-date">
  <time datetime="2014-05-12T01:05:18.000Z" itemprop="datePublished">2014-05-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/12/oj/uva/uva-1644/">UVa 1644 - Prime Gap</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/12/oj/uva/uva-1644/" data-id="ckpaivcct00lwn8vnd5913srn" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/12/oj/uva/uva-1644/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sieve/">sieve</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p> The sequence of n - 1 consecutive composite numbers (positive integers that are not prime and not equal to 1) lying between two successive prime numbers p and p + n is called a prime gap of length n . For example, 〈24, 25, 26, 27, 28〉 between 23 and 29 is a prime gap of length 6.</p>
<p>Your mission is to write a program to calculate, for a given positive integer k , the length of the prime gap that contains k . For convenience, the length is considered 0 in case no prime gap contains k .</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The input is a sequence of lines each of which contains a single positive integer. Each positive integer is greater than 1 and less than or equal to the 100000th prime number, which is 1299709. The end of the input is indicated by a line containing a single zero.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>The output should be composed of lines each of which contains a single non-negative integer. It is the length of the prime gap that contains the corresponding positive integer in the input if it is a composite number, or `0’ otherwise. No other characters should occur in the output.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">10 </span><br><span class="line">11 </span><br><span class="line">27 </span><br><span class="line">2 </span><br><span class="line">492170 </span><br><span class="line">0</span><br></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4 </span><br><span class="line">0 </span><br><span class="line">6 </span><br><span class="line">0 </span><br><span class="line">114</span><br></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>** 題目描述：**</p>
<p>找該數字左右相鄰的兩個質數差值。</p>
<p>** 題目解法：**</p>
<p>線性篩法 (sieve)。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#define LL long long</span><br><span class="line">#define maxL (1300000&gt;&gt;5)+1</span><br><span class="line">#define GET(x) (mark[x&gt;&gt;5]&gt;&gt;(x&amp;31)&amp;1)</span><br><span class="line">#define SET(x) (mark[x&gt;&gt;5] |= 1&lt;&lt;(x&amp;31))</span><br><span class="line">using namespace std;</span><br><span class="line">int mark[maxL];</span><br><span class="line">int anaP[30], at = 0;</span><br><span class="line">void sieve() &#123;</span><br><span class="line">    register int i, j, k;</span><br><span class="line">    SET(1);</span><br><span class="line">    int n = 1300000;</span><br><span class="line">    for(i = 2; i &lt; n; i++) &#123;</span><br><span class="line">        if(!GET(i)) &#123;</span><br><span class="line">            for(k = n/i, j = i*k; k &gt;= i; k--, j -= i)</span><br><span class="line">                SET(j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">main() &#123;</span><br><span class="line">    sieve();</span><br><span class="line">    int n;</span><br><span class="line">    while(scanf(&quot;%d&quot;, &amp;n) == 1 &amp;&amp; n) &#123;</span><br><span class="line">    	int ret = 0;</span><br><span class="line">    	for(int i = n; GET(i); i++, ret++);</span><br><span class="line">    	for(int i = n; GET(i) &amp;&amp; i &gt; 0; i--, ret++);</span><br><span class="line">    	printf(&quot;%d\n&quot;, ret);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-lesson/compiler-clg-ll(1)" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/11/lesson/compiler-clg-ll(1)/" class="article-date">
  <time datetime="2014-05-11T14:36:41.000Z" itemprop="datePublished">2014-05-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/學校課程/">學校課程</a>/<a class="article-category-link" href="/categories/學校課程/編譯器/">編譯器</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/11/lesson/compiler-clg-ll(1)/">編譯器 Compiler CFG LL(1)</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/11/lesson/compiler-clg-ll(1)/" data-id="ckpaivcfr00nrn8vn8bxye54t" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/11/lesson/compiler-clg-ll(1)/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CFG/">CFG</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/First-Set/">First Set</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Follow-Set/">Follow Set</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LL-1/">LL(1)</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/編譯器/">編譯器</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h1 id="序文"><a href="#序文" class="headerlink" title="序文"></a>序文</h1><p>相較於其他技術而言，編譯器的確不是什麼有趣的課程，在這一門領域專研的人也變少了，所以專精的人越少，將會越有機會。易見地，也越來越少大學開設這門編譯器的課程，不過在一些公司，編譯器的技術將成為私囊秘寶，如何將代碼更加地優化快速，這就是相當令人感到為之一驚的地方。</p>
<h1 id="DFA-NFA-Regular-expression"><a href="#DFA-NFA-Regular-expression" class="headerlink" title="DFA, NFA, Regular expression"></a>DFA, NFA, Regular expression</h1><p>在討論所有語法前，要明白正規表達式 ( Regular expression = RegExp ) 的運作，RegExp 運作上涵蓋的語法集合是最小的，對於一個 RegExp 來說，可以轉換成具有 n 個狀態的 NFA，而這台 NFA 可以轉換成 2<sup>n</sup> 狀態的 DFA。</p>
<p>NFA 和 DFA 最大的不同在於轉移狀態時，考慮的路徑情況，NFA 可以在不考慮輸入進行轉移，或者在相同情況下可以有很多轉移選擇。 DFA 則必須在一個輸入唯一一個轉移情況下運作。</p>
<img src="/img/500px-DFAexample.svg.png" class="" title="DFA">

<p>如上圖 DFA 所示，邊上的內容就是根據輸入的情況進行轉移。</p>
<img src="/img/423px-NFASimpleExample.svg.png" class="" title="NFA">

<p>如上圖 NFA 所示，會發現狀態 <code>p</code> 對於輸入 <code>1</code> 有 2 種轉移可能 (<code>p-&gt;p</code> or <code>p-&gt;q</code>)。</p>
<p>最後可以得到一個 RegExp 一定會有一台 DFA 辨識它。而一台 DFA 也一定會有一個 RegExp，這句話的含意將可以在 <code>計算理論</code> 這門課中學到如何藉由類似 <code>Floyd Algorithm</code> 內點性質依序推出 DFA 對應的 RegExp。</p>
<h1 id="CFG-Context-free-grammar"><a href="#CFG-Context-free-grammar" class="headerlink" title="CFG (Context-free grammar)"></a>CFG (Context-free grammar)</h1><p>A context-free grammar is a formal system that describes a language by specifying how any legal string (i.e., sequence of tokens) can be derived from a start symbol. It consists of a set of productions, each of which states that a given symbol can be replaced by a given sequence of symbols. </p>
<p>另一個類似的語言是 <code>Context-sensitive grammar</code>，等價性質的兄弟是 <code>Chomsky normal form</code>。</p>
<ul>
<li>CFG <code>G = (Vt, Vn, S, P)</code><ul>
<li>Vt: 有限的 terminal 字符集</li>
<li>Vn: 有限的 nonterminal 字符集</li>
<li>S: 一開始出發的 start symbol</li>
<li>P: 轉換的規則 (production)</li>
<li>來個例子<pre><code>  LHS (left-hand side) -&gt; RHS (right-hand side)
  
  &lt;E&gt;         -&gt; &lt;Prefix&gt; ( &lt;E&gt; )
  &lt;E&gt;         -&gt; V &lt;Tail&gt;
  &lt;Prefix&gt;    -&gt; F
  &lt;Prefix&gt;    -&gt; l
  &lt;Tail&gt;      -&gt; + &lt;E&gt;
  &lt;Tail&gt;      -&gt; l
</code></pre>
明顯地<ul>
<li><code>Vt = &#123;(, ), V, F, l, +&#125;</code></li>
<li><code>Vn = &#123;&lt;E&gt;, &lt;Prefix&gt;, &lt;Tail&gt;&#125;</code></li>
<li><code>S = &lt;E&gt;</code></li>
<li><code>P</code> 就是給定那六條規規則</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>名詞<ul>
<li><em>Sentential form</em><br>  If S =&gt;<sup>*</sup> β, β then is said to be <em>sentential form</em> of the CFG<br>  簡單來說，所有從 start symbol 過程中替換出來的句子都稱為 sentential form。</li>
<li><em>Handle</em> of a sentential form<br>  The handle of a sentential form is the left-most simple phrase.<br>  <img src="/img/ch07-tree-1.png" alt="img"><br>  簡單來說，就是將一個 nonterminal 根據 production 轉換成 RHS (right-hand side) 的一個步驟。</li>
</ul>
</li>
</ul>
<ul>
<li>什麼是 CFG (上下文無關語法)？<br>  簡單來說，還真的是上下文無關，例如 <code>S -&gt; AB</code> 可以見到 S 轉換時，不會因為前文或後文是什麼內容而影響，而在 <code>Context-sensitive grammar</code> (上下文敏感) 可以見到 <code>aSb -&gt; AB</code> 會因為前面跟後面所受到的影響。</li>
</ul>
<blockquote>
<p>這裡使用大寫為 nontermainl，其他字符為 terminal。</p>
</blockquote>
<h2 id="First-Set"><a href="#First-Set" class="headerlink" title="First Set"></a>First Set</h2><ul>
<li>First(A)<ul>
<li>The set of all the <em>terminal</em> symbols that can <em>begin</em> a sentential form <em>derivable from</em> A. <code>A =&gt;* aB</code><pre><code>  First(A) = &#123;
      a in Vt | A =&gt;* aB, and
      Λ in Vt | A =&gt;* Λ
  &#125;
</code></pre>
</li>
<li>簡單地說，從這個 nonterminal 開始，第一個不能被替換的 terminal 就會在 First set 中。</li>
</ul>
</li>
<li>計算 <code>First(A)</code> 前，必須先建出這個 nonterminal 有沒有可能推出 Λ，即 <code>A =&gt;* Λ</code>。<br>這邊相當有意思，使用迭代更新，如果發現 <code>B =&gt;* Λ</code> 和 <code>C =&gt;* Λ</code> 則對於 Production <code>A =&gt; BC</code> 來說，可以得到 <code>A =&gt;* Λ</code> 就這麼依序推出所有情況，時間複雜度應該在 <code>O(n^2)</code>。</li>
<li>計算 <code>First(A)</code> 時，掃描規則 <code>LHS =&gt; RHS</code>，找到 <code>First(RHS)</code> 並且 <code>First(LHS).insert(First(RHS))</code>，依樣使用迭代更新推出所有情況，時間複雜度應該在 <code>O(n^2)</code>。</li>
</ul>
<h2 id="Follow-Set"><a href="#Follow-Set" class="headerlink" title="Follow Set"></a>Follow Set</h2><ul>
<li>Follow(A)<ul>
<li><em>A</em> is any nonterminal</li>
<li>Follow(A) is <em>the set of terminals</em> that may follow <em>A</em> in some sentential form. <code>S =&gt;* ... Aabc ...</code>follow set。<pre><code>  Follow(A) = &#123;
      a in Vt | S =&gt;* ... Aa ..., and
      Λ in Vt | S =&gt;* aA
  &#125;
</code></pre>
</li>
<li>請切記，一定要從 start symbol 開始替換的所有句子，而在這個 nonterminal 隨後可能跟著的 termainl 就會屬於它的。</li>
</ul>
</li>
<li>計算 <code>Follow(A)</code> 前，請先把 First set 都算完，接著也是用迭代更新，掃描規則 <code>A -&gt; a B b</code><br>對於 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if Λ not in First(b)</span><br><span class="line">    Follow(B).insert(First(b))</span><br><span class="line">else</span><br><span class="line">    Follow(B).insert(First(b) - Λ)</span><br><span class="line">    Follow(B).insert(Follow(A))</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="Predict-Set"><a href="#Predict-Set" class="headerlink" title="Predict Set"></a>Predict Set</h2><ul>
<li>Given the productions</li>
<li>During a (leftmost) derivation, Deciding which production to match, Using lookahead symbols</li>
<li>相較於 First set 和 Follow set，Predict Set 是根據 Production 產生的，也就是說一條 production 會有一個對應的 predict set，而 First set 和 Follow set 都是根據 nonterminal 產生一對一對應的集合，用來預測這一條規則的第一個 terminal 會有哪些。</li>
</ul>
<p>對於 production : <code>A -&gt; X1 X2 ... Xm</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if Λ in First(X1 X2 ... Xm)</span><br><span class="line">    Predict(A -&gt; X1 X2 ... Xm).insert(First(X1 X2 ... Xm) - Λ);</span><br><span class="line">    Predict(A -&gt; X1 X2 ... Xm).insert(Follow(A));</span><br><span class="line">else</span><br><span class="line">    Predict(A -&gt; X1 X2 ... Xm).insert(First(X1 X2 ... Xm));</span><br></pre></td></tr></table></figure>

<p>對於第一判斷情況在于 <code>... AE = ... X1 X2 ... Xm E</code>，明顯地可以從 <code>Follow(A)</code> 得到第一個字符為何。</p>
<h2 id="LL-1-Table"><a href="#LL-1-Table" class="headerlink" title="LL(1) Table"></a>LL(1) Table</h2><blockquote>
<p>尚未撰寫</p>
</blockquote>
<h1 id="C-code"><a href="#C-code" class="headerlink" title="C++ code"></a>C++ code</h1><h2 id="資料規格"><a href="#資料規格" class="headerlink" title="資料規格"></a>資料規格</h2><p>以下代碼實作 CFG 的 First Set, Follow Set, Predict Set 和 LL(1) Table。</p>
<p>用字符 <code>l</code> 代替 lambda</p>
<h2 id="資料範例"><a href="#資料範例" class="headerlink" title="資料範例"></a>資料範例</h2><ul>
<li><p>本課程簡易範例輸入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">S-&gt;aSe</span><br><span class="line">S-&gt;B</span><br><span class="line">B-&gt;bBe</span><br><span class="line">B-&gt;C</span><br><span class="line">C-&gt;cCe</span><br><span class="line">C-&gt;d</span><br><span class="line"></span><br><span class="line">A-&gt;BaAb</span><br><span class="line">A-&gt;cC</span><br><span class="line">B-&gt;d</span><br><span class="line">B-&gt;l</span><br><span class="line">C-&gt;eA</span><br><span class="line">C-&gt;l</span><br><span class="line"></span><br><span class="line">A-&gt;aAd</span><br><span class="line">A-&gt;B</span><br><span class="line">B-&gt;bBd</span><br><span class="line">B-&gt;C</span><br><span class="line">C-&gt;cCd</span><br><span class="line">C-&gt;l</span><br><span class="line"></span><br><span class="line">E-&gt;TX</span><br><span class="line">X-&gt;+E</span><br><span class="line">X-&gt;#</span><br><span class="line">T-&gt;(E)</span><br><span class="line">T-&gt;intY</span><br><span class="line">Y-&gt;*T</span><br><span class="line">Y-&gt;#</span><br><span class="line"></span><br><span class="line">E-&gt;P(E)</span><br><span class="line">E-&gt;vT</span><br><span class="line">P-&gt;f</span><br><span class="line">P-&gt;l</span><br><span class="line">T-&gt;+E</span><br><span class="line">T-&gt;l</span><br><span class="line"></span><br><span class="line">S-&gt;aSe</span><br><span class="line">S-&gt;B</span><br><span class="line">B-&gt;bBe</span><br><span class="line">B-&gt;C</span><br><span class="line">C-&gt;cCe</span><br><span class="line">C-&gt;d</span><br><span class="line"></span><br><span class="line">S-&gt;ABc</span><br><span class="line">A-&gt;a</span><br><span class="line">A-&gt;l</span><br><span class="line">B-&gt;b</span><br><span class="line">B-&gt;l</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>本課程簡易範例輸出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">B:b,c,d</span><br><span class="line">C:c,d</span><br><span class="line">S:a,b,c,d</span><br><span class="line">a:a</span><br><span class="line">b:b</span><br><span class="line">c:c</span><br><span class="line">d:d</span><br><span class="line">e:e</span><br><span class="line">A:a,c,d</span><br><span class="line">B:d,l</span><br><span class="line">C:e,l</span><br><span class="line">a:a</span><br><span class="line">b:b</span><br><span class="line">c:c</span><br><span class="line">d:d</span><br><span class="line">e:e</span><br><span class="line">A:a,b,c,l</span><br><span class="line">B:b,c,l</span><br><span class="line">C:c,l</span><br><span class="line">a:a</span><br><span class="line">b:b</span><br><span class="line">c:c</span><br><span class="line">d:d</span><br><span class="line">#:#</span><br><span class="line">(:(</span><br><span class="line">):)</span><br><span class="line">*:*</span><br><span class="line">+:+</span><br><span class="line">E:(,i</span><br><span class="line">T:(,i</span><br><span class="line">X:#,+</span><br><span class="line">Y:#,*</span><br><span class="line">i:i</span><br><span class="line">n:n</span><br><span class="line">t:t</span><br><span class="line">(:(</span><br><span class="line">):)</span><br><span class="line">+:+</span><br><span class="line">E:(,f,v</span><br><span class="line">P:f,l</span><br><span class="line">T:+,l</span><br><span class="line">f:f</span><br><span class="line">v:v</span><br><span class="line">B:b,c,d</span><br><span class="line">C:c,d</span><br><span class="line">S:a,b,c,d</span><br><span class="line">a:a</span><br><span class="line">b:b</span><br><span class="line">c:c</span><br><span class="line">d:d</span><br><span class="line">e:e</span><br><span class="line">A:a,l</span><br><span class="line">B:b,l</span><br><span class="line">S:a,b,c</span><br><span class="line">a:a</span><br><span class="line">b:b</span><br><span class="line">c:c</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<ul>
<li>HTML 格式範例輸入<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;program&gt;			-&gt; begin &lt;statement_list&gt; end</span><br><span class="line">&lt;statement_list&gt;	-&gt; &lt;statement&gt; &lt;statement_tail&gt;</span><br><span class="line">&lt;statement_tail&gt;	-&gt; &lt;statement&gt; &lt;statement_tail&gt;</span><br><span class="line">&lt;statement_tail&gt;	-&gt; l</span><br><span class="line">&lt;statement&gt;		-&gt; ID := &lt;expression&gt; ;</span><br><span class="line">&lt;statement&gt;		-&gt; read ( &lt;id_list&gt; ) ;</span><br><span class="line">&lt;statement&gt;		-&gt; write ( &lt;expr_list&gt; ) ;</span><br><span class="line">&lt;id_list&gt;			-&gt; ID &lt;id_tail&gt;</span><br><span class="line">&lt;id_tail&gt;			-&gt; , ID &lt;id_tail&gt;</span><br><span class="line">&lt;id_tail&gt;			-&gt; l</span><br><span class="line">&lt;expr_list&gt;		-&gt; &lt;expression&gt; &lt;expr_tail&gt;</span><br><span class="line">&lt;expr_tail&gt;		-&gt; , &lt;expression&gt; &lt;expr_tail&gt;</span><br><span class="line">&lt;expr_tail&gt;		-&gt; l</span><br><span class="line">&lt;expression&gt;		-&gt; &lt;primary&gt; &lt;primary_tail&gt;</span><br><span class="line">&lt;primary_tail&gt;		-&gt; &lt;add_op&gt;	&lt;primary&gt; &lt;primary_tail&gt;</span><br><span class="line">&lt;primary_tail&gt;		-&gt; l</span><br><span class="line">&lt;primary&gt;			-&gt; ( &lt;expression&gt; )</span><br><span class="line">&lt;primary&gt;			-&gt; ID</span><br><span class="line">&lt;primary&gt;			-&gt; INTLIT</span><br><span class="line">&lt;add_op&gt;			-&gt; +</span><br><span class="line">&lt;add_op&gt;			-&gt; -</span><br><span class="line">&lt;system_goal&gt;		-&gt; &lt;program&gt; $</span><br><span class="line"></span><br><span class="line">begin ID := ID - INTLIT + ID ; end $</span><br></pre></td></tr></table></figure></li>
<li>HTML 格式範例輸出<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">+----------------+----- First set -----+</span><br><span class="line">|$               | &#123; $ &#125;</span><br><span class="line">|(               | &#123; ( &#125;</span><br><span class="line">|)               | &#123; ) &#125;</span><br><span class="line">|+               | &#123; + &#125;</span><br><span class="line">|,               | &#123; , &#125;</span><br><span class="line">|-               | &#123; - &#125;</span><br><span class="line">|:=              | &#123; := &#125;</span><br><span class="line">|;               | &#123; ; &#125;</span><br><span class="line">|&lt;add_op&gt;        | &#123; + - &#125;</span><br><span class="line">|&lt;expr_list&gt;     | &#123; ( ID INTLIT &#125;</span><br><span class="line">|&lt;expr_tail&gt;     | &#123; , l &#125;</span><br><span class="line">|&lt;expression&gt;    | &#123; ( ID INTLIT &#125;</span><br><span class="line">|&lt;id_list&gt;       | &#123; ID &#125;</span><br><span class="line">|&lt;id_tail&gt;       | &#123; , l &#125;</span><br><span class="line">|&lt;primary&gt;       | &#123; ( ID INTLIT &#125;</span><br><span class="line">|&lt;primary_tail&gt;  | &#123; + - l &#125;</span><br><span class="line">|&lt;program&gt;       | &#123; begin &#125;</span><br><span class="line">|&lt;statement&gt;     | &#123; ID read write &#125;</span><br><span class="line">|&lt;statement_list&gt;| &#123; ID read write &#125;</span><br><span class="line">|&lt;statement_tail&gt;| &#123; ID l read write &#125;</span><br><span class="line">|&lt;system_goal&gt;   | &#123; begin &#125;</span><br><span class="line">|ID              | &#123; ID &#125;</span><br><span class="line">|INTLIT          | &#123; INTLIT &#125;</span><br><span class="line">|begin           | &#123; begin &#125;</span><br><span class="line">|end             | &#123; end &#125;</span><br><span class="line">|read            | &#123; read &#125;</span><br><span class="line">|write           | &#123; write &#125;</span><br><span class="line">+----------------+---------------------+</span><br><span class="line"></span><br><span class="line">+----------------+----- Follow set -----+</span><br><span class="line">|&lt;add_op&gt;        | &#123; ( ID INTLIT &#125;</span><br><span class="line">|&lt;expr_list&gt;     | &#123; ) &#125;</span><br><span class="line">|&lt;expr_tail&gt;     | &#123; ) &#125;</span><br><span class="line">|&lt;expression&gt;    | &#123; ) , ; &#125;</span><br><span class="line">|&lt;id_list&gt;       | &#123; ) &#125;</span><br><span class="line">|&lt;id_tail&gt;       | &#123; ) &#125;</span><br><span class="line">|&lt;primary&gt;       | &#123; ) + , - ; &#125;</span><br><span class="line">|&lt;primary_tail&gt;  | &#123; ) , ; &#125;</span><br><span class="line">|&lt;program&gt;       | &#123; $ &#125;</span><br><span class="line">|&lt;statement&gt;     | &#123; ID end read write &#125;</span><br><span class="line">|&lt;statement_list&gt;| &#123; end &#125;</span><br><span class="line">|&lt;statement_tail&gt;| &#123; end &#125;</span><br><span class="line">|&lt;system_goal&gt;   | &#123; l &#125;</span><br><span class="line">+----------------+---------------------+</span><br><span class="line"></span><br><span class="line">+----------------+----- LL(1) table -----+</span><br><span class="line">|                |     $|     (|     )|     +|     ,|     -|    :=|     ;|    ID|INTLIT| begin|   end|  read| write|</span><br><span class="line">|&lt;add_op&gt;        |      |      |      |    20|      |    21|      |      |      |      |      |      |      |      |</span><br><span class="line">|&lt;expr_list&gt;     |      |    11|      |      |      |      |      |      |    11|    11|      |      |      |      |</span><br><span class="line">|&lt;expr_tail&gt;     |      |      |    13|      |    12|      |      |      |      |      |      |      |      |      |</span><br><span class="line">|&lt;expression&gt;    |      |    14|      |      |      |      |      |      |    14|    14|      |      |      |      |</span><br><span class="line">|&lt;id_list&gt;       |      |      |      |      |      |      |      |      |     8|      |      |      |      |      |</span><br><span class="line">|&lt;id_tail&gt;       |      |      |    10|      |     9|      |      |      |      |      |      |      |      |      |</span><br><span class="line">|&lt;primary&gt;       |      |    17|      |      |      |      |      |      |    18|    19|      |      |      |      |</span><br><span class="line">|&lt;primary_tail&gt;  |      |      |    16|    15|    16|    15|      |    16|      |      |      |      |      |      |</span><br><span class="line">|&lt;program&gt;       |      |      |      |      |      |      |      |      |      |      |     1|      |      |      |</span><br><span class="line">|&lt;statement&gt;     |      |      |      |      |      |      |      |      |     5|      |      |      |     6|     7|</span><br><span class="line">|&lt;statement_list&gt;|      |      |      |      |      |      |      |      |     2|      |      |      |     2|     2|</span><br><span class="line">|&lt;statement_tail&gt;|      |      |      |      |      |      |      |      |     3|      |      |     4|     3|     3|</span><br><span class="line">|&lt;system_goal&gt;   |      |      |      |      |      |      |      |      |      |      |    22|      |      |      |</span><br><span class="line">+----------------+---------------------+</span><br><span class="line"></span><br><span class="line">Process syntax accept</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="代碼"><a href="#代碼" class="headerlink" title="代碼"></a>代碼</h2><p>2014/6/1 修正 parsing 時的 lambda 問題。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> HTMLProduction</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Production</span> &#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        string 			LHS;</span><br><span class="line">        vector&lt;string&gt; 	RHS;</span><br><span class="line">        <span class="keyword">int</span> 			label;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">Production</span>(string L = <span class="string">&quot;&quot;</span>, vector&lt;string&gt; R = vector&lt;string&gt;()) &#123;</span><br><span class="line">            LHS = L;</span><br><span class="line">            RHS = R;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%s -&gt; &quot;</span>, LHS.<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; RHS.<span class="built_in">size</span>(); i++)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>, RHS[i].<span class="built_in">c_str</span>());</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grammar</span> &#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">const</span> string 		lambda;</span><br><span class="line">        string 						start_symbol;</span><br><span class="line">        vector&lt;Production&gt; 			rules;</span><br><span class="line">        map&lt;string, set&lt;string&gt; &gt; 	first_set;</span><br><span class="line">        map&lt;string, set&lt;string&gt; &gt; 	follow_set;</span><br><span class="line">        map&lt;string, <span class="keyword">bool</span>&gt; 			derives_lambda;</span><br><span class="line">        map&lt;string, map&lt;string, Production&gt; &gt;	lltable;</span><br><span class="line">        </span><br><span class="line">        <span class="function">map&lt;string, <span class="keyword">bool</span>&gt; <span class="title">mark_lambda</span><span class="params">()</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">fill_first_set</span><span class="params">()</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">fill_follow_set</span><span class="params">()</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">isNonterminal</span><span class="params">(string token)</span></span>;</span><br><span class="line">        <span class="function">set&lt;string&gt; <span class="title">compute_first</span><span class="params">(vector&lt;string&gt; rhs)</span></span>;</span><br><span class="line">        <span class="function">set&lt;string&gt; <span class="title">get_predict_set</span><span class="params">(Production p)</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">fill_lltable</span><span class="params">()</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">lldriver</span><span class="params">(queue&lt;string&gt; tokens)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">const</span> string <span class="title">Grammar::lambda</span><span class="params">(<span class="string">&quot;l&quot;</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">set&lt;string&gt; <span class="title">Grammar::compute_first</span><span class="params">(vector&lt;string&gt; rhs)</span> </span>&#123;</span><br><span class="line">    set&lt;string&gt; result;</span><br><span class="line">    <span class="keyword">size_t</span> i;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(rhs.<span class="built_in">size</span>() == <span class="number">0</span> || rhs[<span class="number">0</span>] == Grammar::lambda) &#123;</span><br><span class="line">        result.<span class="built_in">insert</span>(Grammar::lambda);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result = first_set[rhs[<span class="number">0</span>]];</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; rhs.<span class="built_in">size</span>() &amp;&amp; </span><br><span class="line">            first_set[rhs[i<span class="number">-1</span>]].<span class="built_in">find</span>(Grammar::lambda) != first_set[rhs[i<span class="number">-1</span>]].<span class="built_in">end</span>(); i++) &#123;</span><br><span class="line">            set&lt;string&gt; f = first_set[rhs[i]];</span><br><span class="line">            f.<span class="built_in">erase</span>(Grammar::lambda);</span><br><span class="line">            result.<span class="built_in">insert</span>(f.<span class="built_in">begin</span>(), f.<span class="built_in">end</span>());	</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(i == rhs.<span class="built_in">size</span>() </span><br><span class="line">            &amp;&amp; first_set[rhs[i<span class="number">-1</span>]].<span class="built_in">find</span>(Grammar::lambda) != first_set[rhs[i<span class="number">-1</span>]].<span class="built_in">end</span>()) &#123;</span><br><span class="line">            result.<span class="built_in">insert</span>(Grammar::lambda);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            result.<span class="built_in">erase</span>(Grammar::lambda);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * please call get_predict_set() after fill_follow_set() and fill_first_set()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">set&lt;string&gt; <span class="title">Grammar::get_predict_set</span><span class="params">(Production p)</span> </span>&#123;</span><br><span class="line">    set&lt;string&gt; result;</span><br><span class="line">    set&lt;string&gt; rfirst;</span><br><span class="line">    </span><br><span class="line">    rfirst = <span class="built_in">compute_first</span>(p.RHS);</span><br><span class="line">    <span class="keyword">if</span>(rfirst.<span class="built_in">find</span>(Grammar::lambda) != rfirst.<span class="built_in">end</span>()) &#123;</span><br><span class="line">        rfirst.<span class="built_in">erase</span>(Grammar::lambda);</span><br><span class="line">        result.<span class="built_in">insert</span>(rfirst.<span class="built_in">begin</span>(), rfirst.<span class="built_in">end</span>());</span><br><span class="line">        rfirst = follow_set[p.LHS];</span><br><span class="line">        result.<span class="built_in">insert</span>(rfirst.<span class="built_in">begin</span>(), rfirst.<span class="built_in">end</span>());</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result.<span class="built_in">insert</span>(rfirst.<span class="built_in">begin</span>(), rfirst.<span class="built_in">end</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Grammar::fill_lltable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    string		A; <span class="comment">// nonterminal</span></span><br><span class="line">    Production 	p;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        p = rules[i];</span><br><span class="line">        A = p.LHS;</span><br><span class="line">        set&lt;string&gt; predict_set = <span class="built_in">get_predict_set</span>(p);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(set&lt;string&gt;::iterator it = predict_set.<span class="built_in">begin</span>();</span><br><span class="line">            it != predict_set.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">            <span class="built_in">assert</span>(lltable[A].<span class="built_in">find</span>(*it) == lltable[A].<span class="built_in">end</span>());</span><br><span class="line">            lltable[A][*it] = p;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Grammar::isNonterminal</span><span class="params">(string token)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> HTMLProduction</span></span><br><span class="line">    <span class="keyword">if</span>(token == Grammar::lambda)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(token[<span class="number">0</span>] == <span class="string">&#x27;&lt;&#x27;</span> &amp;&amp; token[token.<span class="built_in">length</span>() - <span class="number">1</span>] == <span class="string">&#x27;&gt;&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">    <span class="keyword">if</span>(token == Grammar::lambda)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; token.<span class="built_in">length</span>(); i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">isupper</span>(token[i]))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function">map&lt;string, <span class="keyword">bool</span>&gt; <span class="title">Grammar::mark_lambda</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">bool</span> 				rhs_derives_lambda;</span><br><span class="line">    <span class="keyword">bool</span> 				changes;</span><br><span class="line">    Production 			p;</span><br><span class="line">    </span><br><span class="line">    derives_lambda.<span class="built_in">clear</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* initially, nothing is marked. */</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        derives_lambda[rules[i].LHS] = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        changes = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            p = rules[i];</span><br><span class="line">            <span class="keyword">if</span>(!derives_lambda[p.LHS]) &#123;</span><br><span class="line">                <span class="keyword">if</span>(p.RHS.<span class="built_in">size</span>() == <span class="number">0</span> || p.RHS[<span class="number">0</span>] == Grammar::lambda) &#123;</span><br><span class="line">                    changes = derives_lambda[p.LHS] = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">/* does each part of RHS derive lambda ? */</span></span><br><span class="line">                rhs_derives_lambda = derives_lambda[<span class="built_in">string</span>(p.RHS[<span class="number">0</span>])];</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">size_t</span> j = <span class="number">1</span>; j &lt; p.RHS.<span class="built_in">size</span>(); j++) &#123;</span><br><span class="line">                    rhs_derives_lambda &amp;= derives_lambda[p.RHS[j]];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(rhs_derives_lambda) &#123;</span><br><span class="line">                    changes = <span class="literal">true</span>;</span><br><span class="line">                    derives_lambda[p.LHS] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span>(changes);</span><br><span class="line">    <span class="keyword">return</span> derives_lambda;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Grammar::fill_first_set</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    string 		A; <span class="comment">// nonterminal</span></span><br><span class="line">    string 		a; <span class="comment">// terminal</span></span><br><span class="line">    Production 	p;</span><br><span class="line">    <span class="keyword">bool</span> 		changes;</span><br><span class="line">        </span><br><span class="line">    <span class="built_in">mark_lambda</span>();</span><br><span class="line">    first_set.<span class="built_in">clear</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        A = rules[i].LHS;</span><br><span class="line">        <span class="keyword">if</span>(derives_lambda[A])</span><br><span class="line">            first_set[A].<span class="built_in">insert</span>(Grammar::lambda);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">size_t</span> j = <span class="number">0</span>; j &lt; rules[i].RHS.<span class="built_in">size</span>(); j++) &#123;</span><br><span class="line">            a = rules[i].RHS[j];</span><br><span class="line">            <span class="keyword">if</span>(!<span class="built_in">isNonterminal</span>(a)) &#123;</span><br><span class="line">                <span class="keyword">if</span>(a != Grammar::lambda)</span><br><span class="line">                    first_set[a].<span class="built_in">insert</span>(a);</span><br><span class="line">                <span class="keyword">if</span>(j == <span class="number">0</span>) &#123; <span class="comment">// A -&gt; aXX</span></span><br><span class="line">                    first_set[rules[i].LHS].<span class="built_in">insert</span>(a);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        changes = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            p = rules[i];</span><br><span class="line">            set&lt;string&gt; rfirst = <span class="built_in">compute_first</span>(p.RHS);</span><br><span class="line">            <span class="keyword">size_t</span> oldsize = first_set[p.LHS].<span class="built_in">size</span>();</span><br><span class="line">            first_set[p.LHS].<span class="built_in">insert</span>(rfirst.<span class="built_in">begin</span>(), rfirst.<span class="built_in">end</span>());</span><br><span class="line">            <span class="keyword">size_t</span> newsize = first_set[p.LHS].<span class="built_in">size</span>();</span><br><span class="line">            <span class="keyword">if</span>(oldsize != newsize)</span><br><span class="line">                changes = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span>(changes);</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Grammar::fill_follow_set</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    string 	A, B; <span class="comment">// nonterminal</span></span><br><span class="line">    Production 	p;</span><br><span class="line">    <span class="keyword">bool</span> 	changes;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        A = rules[i].LHS;</span><br><span class="line">        follow_set[A].<span class="built_in">clear</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    follow_set[start_symbol].<span class="built_in">insert</span>(Grammar::lambda);</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        changes = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="comment">/* A -&gt; a B b</span></span><br><span class="line"><span class="comment">			 * I.e. for each production and each occurrence</span></span><br><span class="line"><span class="comment">			 * of a nonterminal in its right-hand side. </span></span><br><span class="line"><span class="comment">			 */</span></span><br><span class="line">            p = rules[i];</span><br><span class="line">            A = p.LHS;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">size_t</span> j = <span class="number">0</span>; j &lt; p.RHS.<span class="built_in">size</span>(); j++) &#123;</span><br><span class="line">                B = p.RHS[j];</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">isNonterminal</span>(B)) &#123;</span><br><span class="line">                    <span class="function">vector&lt;string&gt; <span class="title">beta</span><span class="params">(p.RHS.begin() + j + <span class="number">1</span>, p.RHS.end())</span></span>;</span><br><span class="line">                    set&lt;string&gt; rfirst = <span class="built_in">compute_first</span>(beta);</span><br><span class="line">                    <span class="keyword">size_t</span> oldsize = follow_set[B].<span class="built_in">size</span>();</span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">if</span>(rfirst.<span class="built_in">find</span>(Grammar::lambda) == rfirst.<span class="built_in">end</span>()) &#123;</span><br><span class="line">                        follow_set[B].<span class="built_in">insert</span>(rfirst.<span class="built_in">begin</span>(), rfirst.<span class="built_in">end</span>());	</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        rfirst.<span class="built_in">erase</span>(Grammar::lambda);</span><br><span class="line">                        follow_set[B].<span class="built_in">insert</span>(rfirst.<span class="built_in">begin</span>(), rfirst.<span class="built_in">end</span>());	</span><br><span class="line">                        rfirst = follow_set[A];</span><br><span class="line">                        follow_set[B].<span class="built_in">insert</span>(rfirst.<span class="built_in">begin</span>(), rfirst.<span class="built_in">end</span>());</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">size_t</span> newsize = follow_set[B].<span class="built_in">size</span>();			</span><br><span class="line">                    <span class="keyword">if</span>(oldsize != newsize)</span><br><span class="line">                        changes = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span>(changes);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Grammar::lldriver</span><span class="params">(queue&lt;string&gt; tokens)</span> </span>&#123;</span><br><span class="line">    stack&lt;string&gt; 	stk;</span><br><span class="line">    string 			X;</span><br><span class="line">    string			a;</span><br><span class="line">    Production		p;</span><br><span class="line">    <span class="comment">/* Push the Start Symbol onto an empty stack */</span></span><br><span class="line">    stk.<span class="built_in">push</span>(start_symbol);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(!stk.<span class="built_in">empty</span>() &amp;&amp; !tokens.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        X = stk.<span class="built_in">top</span>();</span><br><span class="line">        a = tokens.<span class="built_in">front</span>();</span><br><span class="line">        <span class="comment">// cout &lt;&lt; X &lt;&lt; &quot; &quot; &lt;&lt; a &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">isNonterminal</span>(X) &amp;&amp; lltable[X].<span class="built_in">find</span>(a) != lltable[X].<span class="built_in">end</span>()) &#123;</span><br><span class="line">            p = lltable[X][a];</span><br><span class="line">            stk.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = p.RHS.<span class="built_in">size</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">                <span class="keyword">if</span>(p.RHS[i] == Grammar::lambda)</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                stk.<span class="built_in">push</span>(p.RHS[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(X == a) &#123;</span><br><span class="line">            stk.<span class="built_in">pop</span>();</span><br><span class="line">            tokens.<span class="built_in">pop</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(lltable[X].<span class="built_in">find</span>(Grammar::lambda) != lltable[X].<span class="built_in">end</span>()) &#123;</span><br><span class="line">            stk.<span class="built_in">pop</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">/* Process syntax error. */</span></span><br><span class="line">            <span class="built_in">puts</span>(<span class="string">&quot;Bad!&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!stk.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        X = stk.<span class="built_in">top</span>();</span><br><span class="line">        <span class="keyword">if</span>(lltable[X].<span class="built_in">find</span>(Grammar::lambda) != lltable[X].<span class="built_in">end</span>())</span><br><span class="line">            stk.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(tokens.<span class="built_in">size</span>() == <span class="number">0</span> &amp;&amp; stk.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;Good&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;Bad!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">queue&lt;string&gt; <span class="title">getTokens</span><span class="params">(<span class="keyword">char</span> s[])</span> </span>&#123;</span><br><span class="line">    <span class="function">stringstream 	<span class="title">sin</span><span class="params">(s)</span></span>;</span><br><span class="line">    queue&lt;string&gt; 	tokens;</span><br><span class="line">    string			token;</span><br><span class="line">    <span class="keyword">while</span>(sin &gt;&gt; token)</span><br><span class="line">        tokens.<span class="built_in">push</span>(token);</span><br><span class="line">    <span class="keyword">return</span> tokens;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">parsingProduction</span><span class="params">(string r, Grammar &amp;g)</span> </span>&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> HTMLProduction</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> 		production_label = <span class="number">0</span>;</span><br><span class="line">    <span class="function">stringstream 	<span class="title">sin</span><span class="params">(r)</span></span>;</span><br><span class="line">    string 			lhs, foo;</span><br><span class="line">    vector&lt;string&gt; 	tokens;</span><br><span class="line">    sin &gt;&gt; lhs &gt;&gt; foo;</span><br><span class="line">    <span class="keyword">while</span>(sin &gt;&gt; foo)</span><br><span class="line">        tokens.<span class="built_in">push_back</span>(foo);</span><br><span class="line">    <span class="function">Production <span class="title">p</span><span class="params">(lhs, tokens)</span></span>;</span><br><span class="line">    p.label = ++production_label;</span><br><span class="line">    g.rules.<span class="built_in">push_back</span>(p);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">    <span class="function">string <span class="title">div</span><span class="params">(<span class="string">&quot;-&gt;&quot;</span>)</span></span>;</span><br><span class="line">    <span class="keyword">size_t</span> found = r.<span class="built_in">find</span>(div);</span><br><span class="line">    <span class="keyword">if</span>(found != std::string::npos) &#123;</span><br><span class="line">        string rhs = r.<span class="built_in">substr</span>(found + div.<span class="built_in">length</span>());</span><br><span class="line">        vector&lt;string&gt; tokens;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rhs.<span class="built_in">size</span>(); i++)</span><br><span class="line">            tokens.<span class="built_in">push_back</span>(rhs.<span class="built_in">substr</span>(i, <span class="number">1</span>));</span><br><span class="line">        <span class="function">Production <span class="title">p</span><span class="params">(r.substr(<span class="number">0</span>, found), tokens)</span></span>;</span><br><span class="line">        g.rules.<span class="built_in">push_back</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//freopen(&quot;input.txt&quot;, &quot;r+t&quot;, stdin);</span></span><br><span class="line">    <span class="comment">//freopen(&quot;output.txt&quot;, &quot;w+t&quot;, stdout); </span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">char</span> in[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">gets</span>(in)) &#123;</span><br><span class="line">        Grammar g;</span><br><span class="line">        <span class="built_in">parsingProduction</span>(in, g);</span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">gets</span>(in) &amp;&amp; in[<span class="number">0</span>] != <span class="string">&#x27;\0&#x27;</span>) &#123;</span><br><span class="line">            <span class="built_in">parsingProduction</span>(in, g);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> HTMLProduction</span></span><br><span class="line">        g.start_symbol = <span class="string">&quot;&lt;system_goal&gt;&quot;</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">        g.start_symbol = <span class="string">&quot;S&quot;</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">        </span><br><span class="line">        g.<span class="built_in">fill_first_set</span>();</span><br><span class="line">        g.<span class="built_in">fill_follow_set</span>();</span><br><span class="line">        g.<span class="built_in">fill_lltable</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;+----------------+----- First set -----+&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(map&lt;string, set&lt;string&gt; &gt;::iterator it = g.first_set.<span class="built_in">begin</span>();</span><br><span class="line">            it != g.first_set.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;|%-16s| &#123;&quot;</span>, it-&gt;first.<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="keyword">for</span>(set&lt;string&gt;::iterator jt = it-&gt;second.<span class="built_in">begin</span>();</span><br><span class="line">                jt != it-&gt;second.<span class="built_in">end</span>(); jt++) &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; *jt;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">puts</span>(<span class="string">&quot; &#125;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;+----------------+---------------------+\n&quot;</span>);</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;+----------------+----- Follow set -----+&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(map&lt;string, set&lt;string&gt; &gt;::iterator it = g.follow_set.<span class="built_in">begin</span>();</span><br><span class="line">            it != g.follow_set.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;|%-16s| &#123;&quot;</span>, it-&gt;first.<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="keyword">for</span>(set&lt;string&gt;::iterator jt = it-&gt;second.<span class="built_in">begin</span>();</span><br><span class="line">                jt != it-&gt;second.<span class="built_in">end</span>(); jt++) &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; *jt;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">puts</span>(<span class="string">&quot; &#125;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;+----------------+---------------------+\n&quot;</span>);</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;+----------------+----- LL(1) table -----+&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;|%-16s|&quot;</span>, <span class="string">&quot;&quot;</span>);			</span><br><span class="line">        <span class="keyword">for</span>(map&lt;string, set&lt;string&gt; &gt;::iterator jt = g.first_set.<span class="built_in">begin</span>();</span><br><span class="line">                jt != g.first_set.<span class="built_in">end</span>(); jt++) &#123;</span><br><span class="line">            string A = jt-&gt;first;</span><br><span class="line">            <span class="keyword">if</span>(g.<span class="built_in">isNonterminal</span>(A))</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%6s|&quot;</span>, A.<span class="built_in">c_str</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(map&lt;string, map&lt;string, Production&gt; &gt;::iterator it = g.lltable.<span class="built_in">begin</span>();</span><br><span class="line">            it != g.lltable.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;|%-16s|&quot;</span>, it-&gt;first.<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="keyword">for</span>(map&lt;string, set&lt;string&gt; &gt;::iterator jt = g.first_set.<span class="built_in">begin</span>();</span><br><span class="line">                jt != g.first_set.<span class="built_in">end</span>(); jt++) &#123;</span><br><span class="line">                string A = jt-&gt;first;</span><br><span class="line">                <span class="keyword">if</span>(g.<span class="built_in">isNonterminal</span>(A))</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span>(it-&gt;second.<span class="built_in">find</span>(A) == it-&gt;second.<span class="built_in">end</span>()) </span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;%6s|&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;%6d|&quot;</span>, it-&gt;second[A].label);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;+----------------+---------------------+\n&quot;</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> HTMLProduction</span></span><br><span class="line">        <span class="built_in">gets</span>(in);</span><br><span class="line">        g.<span class="built_in">lldriver</span>(<span class="built_in">getTokens</span>(in));</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="備註"><a href="#備註" class="headerlink" title="備註"></a>備註</h1><p>要學會更多，請修 <code>計算理論</code> 這門課程。</p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-10378" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/10/oj/uva/uva-10378/" class="article-date">
  <time datetime="2014-05-10T06:28:27.000Z" itemprop="datePublished">2014-05-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/10/oj/uva/uva-10378/">UVa 10378 - Complex Numbers</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/10/oj/uva/uva-10378/" data-id="ckpaivcb700fdn8vn89qi3jvh" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/10/oj/uva/uva-10378/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/複數/">複數</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Numbers of the form a±bi are called complex numbers (Where i = √(-1)). In this problem you will have to find all the values of (a±bi)<sup>1/n</sup>. </p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The input file contains several lines of input. Each line has two parts. The first part will contain a complex number of the form a±bi and the second part will contain an integer n (0 &lt; n &lt;=100). Here a and b are integer numbers and 0 &lt;= |a|, |b|&lt;100. Input is terminated by end of file.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For each line of input you should produce n+2 lines of output. The description of output for each line of input is given in the next paragraph:</p>
<p>First line contains the case number as shown in the sample output. Next n lines should contain the n-th roots of the input complex number. The printed complex numbers should be of the form x±yi, where x and y are floating point numbers rounded upto three digits after the decimal point. Note that there is no space between the operators and operands. The roots are sorted according to descending order of their real part and then according to the descending order of their imaginary part. When the printed value of x or y is 0.000, it should be interpreted as positive zero. So you should never print something like “-0.000”. After all these outputs print a blank line. </p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3+4i 2</span><br><span class="line">5-4i 3</span><br></pre></td></tr></table></figure>

<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Case 1:</span><br><span class="line">2.000+1.000i</span><br><span class="line">-2.000-1.000i</span><br><span class="line"></span><br><span class="line">Case 2:</span><br><span class="line">1.810-0.414i</span><br><span class="line">-0.546+1.775i</span><br><span class="line">-1.264-1.361i</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>** 題目描述： **</p>
<p>問虛數 <code>a+bi</code> 的 n 次根號的結果，並且根據實數由大至小、虛數由大至小的字典順序輸出。</p>
<p>** 題目解法： **</p>
<p>先算出 <code>a+bi</code> 所占有的角度 <code>theta</code>，得到 <code>(theta + 2 * pi * i / n)</code> 是每一個根的角度，因為根據角度疊加原理得到 <code>(theta + 2 * pi * i / n) ^ n = theta + 2 * pi * i ＝ theta</code>，但是這題的困難是在於 如何避免 <code>-0.000</code> 的輸出。</p>
<p>原本錯誤排序的寫法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bool cmp(Point a, Point b) &#123;</span><br><span class="line">    if(fabs(a.x - b.x) &gt; eps)</span><br><span class="line">        return a.x &lt; b.x;</span><br><span class="line">    return a.y &lt; b.y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>應更正為如下代碼，如果要問我為什麼，現在還沒有仔細地理解，照理來說應該是差不多的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bool cmp(Point a, Point b) &#123;</span><br><span class="line">    if(fabs(a.x - b.x) &gt; eps)</span><br><span class="line">        return a.x &lt; b.x;</span><br><span class="line">    if(fabs(a.y - b.y) &gt; eps)</span><br><span class="line">        return a.y &lt; b.y;</span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>之前是想利用 <code>sprintf(buffer, &quot;%+.3lf%+.3lf&quot;, a, b);</code> 去檢查 <code>+0.000</code> 和 <code>-0.000</code>，這種寫法有點太過了，不過應該也是可行的。</p>
<figure class="highlight plaintext"><figcaption><span>cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;math.h&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#define eps 1e-6</span><br><span class="line">bool cmp(pair&lt;double, double&gt; a, pair&lt;double, double&gt; b) &#123;</span><br><span class="line">    if(fabs(a.first - b.first) &gt; eps)</span><br><span class="line">        return a.first &gt; b.first;</span><br><span class="line">    if(fabs(a.second - b.second) &lt; eps)</span><br><span class="line">        return false;</span><br><span class="line">    return a.second &gt; b.second;</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">    char s[50];</span><br><span class="line">    const double pi = acos(-1);</span><br><span class="line">    int n, i, cases = 0;</span><br><span class="line">    double a, b;</span><br><span class="line">    while(scanf(&quot;%s %d&quot;, s, &amp;n) == 2) &#123;</span><br><span class="line">        if(sscanf(s, &quot;%lf+%lfi&quot;, &amp;a, &amp;b) == 2)</span><br><span class="line">            &#123;&#125;</span><br><span class="line">        else</span><br><span class="line">            sscanf(s, &quot;%lf-%lfi&quot;, &amp;a, &amp;b), b = -b;</span><br><span class="line">        double theta = atan2(b, a);</span><br><span class="line">        double k = pow(sqrt(a*a+b*b), 1.0/n);</span><br><span class="line">        double px, py;</span><br><span class="line">        pair&lt;double, double&gt; D[128];</span><br><span class="line">        for(i = 0; i &lt; n; i++) &#123;</span><br><span class="line">            px = k*cos((theta + i*2*pi)/n);</span><br><span class="line">            py = k*sin((theta + i*2*pi)/n);</span><br><span class="line">            D[i] = make_pair(px, py);</span><br><span class="line">        &#125;</span><br><span class="line">        sort(D, D+n, cmp);</span><br><span class="line">        printf(&quot;Case %d:\n&quot;, ++cases);</span><br><span class="line">        for(i = 0; i &lt; n; i++) &#123;</span><br><span class="line">        	if(fabs(D[i].first) &lt; 0.0005)	D[i].first = 0;</span><br><span class="line">        	if(fabs(D[i].second) &lt; 0.0005)	D[i].second = 0;</span><br><span class="line">        	printf(&quot;%.3lf%+.3lfi\n&quot;, D[i].first, D[i].second);</span><br><span class="line">        &#125;</span><br><span class="line">        puts(&quot;&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-1572" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/07/oj/uva/uva-1572/" class="article-date">
  <time datetime="2014-05-06T23:46:52.000Z" itemprop="datePublished">2014-05-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/07/oj/uva/uva-1572/">UVa 1572 - Self-Assembly</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/07/oj/uva/uva-1572/" data-id="ckpaivccq00lin8vng9utg6vs" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/07/oj/uva/uva-1572/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/環/">環</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Automatic Chemical Manufacturing is experimenting with a process called self-assembly. In this process, molecules with natural asonity for each other are mixed together in a solution and allowed to spon-taneously assemble themselves into larger structures. But there is one problem: sometimes molecules assemble themselves into a structure of unbounded size, which gums up the machinery.</p>
<p>You must write a program to decide whether a given collection of molecules can be assembled into a structure of unbounded size. You should make two simplifying assumptions: 1) the problem is restricted to two dimensions, and 2) each molecule in the collection is represented as a square. The four edges of the square represent the surfaces on which the molecule can connect to other compatible molecules.</p>
<p>In each test case, you will be given a set of molecule descriptions. Each type of molecule is described by four two-character connector labels that indicate how its edges can connect to the edges of other molecules. There are two types of connector labels:</p>
<ul>
<li>An uppercase letter ( A, …, Z ) followed by <code>+</code> or <code>.</code> Two edges are compatible if their labels have the same letter but different signs. For example, <code>A+</code> is compatible with <code>A</code> but is not compatible with <code>A+</code> or <code>B</code>. </li>
<li>Two zero digits <code>00</code>. An edge with this label is not compatible with any edge (not even with<br>another edge labeled <code>00</code>).</li>
</ul>
<p>Assume there is an unlimited supply of molecules of each type, which may be rotated and reected.<br>As the molecules assemble themselves into larger structures, the edges of two molecules may be adjacent to each other only if they are compatible. It is permitted for an edge, regardless of its connector label, to be connected to nothing (no adjacent molecule on that edge). Figure A.1 shows an example of three molecule types and a structure of bounded size that can be assembled from them (other bounded structures are also possible with this set of molecules).</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The input consists of several test cases. A test case consists of two lines. The rst contains an integer n (1 &lt; n &lt; 40000) indicating the number of molecule types. The second line contains n eight-character strings, each describing a single type of molecule, separated by single spaces. Each string consists of four two-character connector labels representing the four edges of the molecule in clockwise order.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For each test case, display the word <code>unbounded</code> if the set of molecule types can generate a structure of unbounded size. Otherwise, display the word <code>bounded</code>.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">A+00A+A+ 00B+D+A- B-C+00C+</span><br><span class="line">1</span><br><span class="line">K+K-Q+Q-</span><br></pre></td></tr></table></figure>

<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bounded</span><br><span class="line">unbounded</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>** 題目描述：**</p>
<p>分定數種分子，每一種分子有無限多個，問會不會產生無邊界的化合物，也就是可以一直串一直串下去。</p>
<p>** 題目解法：**</p>
<p>鏡射和旋轉不用去理會，對於建圖並沒有影響，而題目圖片中看起來是平面，但是事實上可以螺旋疊起。</p>
<p><img src="/img/uva1572sol.PNG" alt="img"></p>
<p>如上圖片所示，使用這種建照方式去找環，只要有環的情況就會有無邊界的化合物。</p>
<p>不考慮找到每一個化合物間的關係，這關係過於龐大，只考慮接口連接的關係。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int g[64][64];</span><br><span class="line">int node(char a, char b) &#123;</span><br><span class="line">    return (a - &#x27;A&#x27;) + (b == &#x27;+&#x27; ? 0 : 26);</span><br><span class="line">&#125;</span><br><span class="line">int rnode(char a, char b) &#123;</span><br><span class="line">    return (a - &#x27;A&#x27;) + (b == &#x27;+&#x27; ? 26 : 0);</span><br><span class="line">&#125;</span><br><span class="line">int exist_cycle;</span><br><span class="line">int main() &#123;</span><br><span class="line">    int n;</span><br><span class="line">    char s[50];</span><br><span class="line">    while(scanf(&quot;%d&quot;, &amp;n) == 1) &#123;</span><br><span class="line">        memset(g, 0, sizeof(g));</span><br><span class="line">        for(int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">            scanf(&quot;%s&quot;, s);</span><br><span class="line">            for(int j = 0; j &lt; 4; j++)	 &#123;</span><br><span class="line">                for(int k = 0; k &lt; 4; k++) &#123;</span><br><span class="line">                    if(j == k || s[2 * j] == &#x27;0&#x27; || s[2 * k] == &#x27;0&#x27;)</span><br><span class="line">                        continue;</span><br><span class="line">                    int x = node(s[2 * j], s[2 * j + 1]);</span><br><span class="line">                    int y = rnode(s[2 * k], s[2 * k + 1]);</span><br><span class="line">                    g[x][y] = 1;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        exist_cycle = 0;</span><br><span class="line">        n = 52;</span><br><span class="line">        for(int k = 0; k &lt; n; k++) &#123;</span><br><span class="line">            for(int i = 0; i &lt; n; i++)</span><br><span class="line">                for(int j = 0; j &lt; n; j++)</span><br><span class="line">                    g[i][j] |= g[i][k]&amp;g[k][j];</span><br><span class="line">        &#125;</span><br><span class="line">        for(int i = 0; i &lt; n; i++)</span><br><span class="line">            exist_cycle |= g[i][i];</span><br><span class="line">        puts(exist_cycle ? &quot;unbounded&quot; : &quot;bounded&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line">3</span><br><span class="line">A+00A+A+ 00B+D+A- B-C+00C+</span><br><span class="line">1</span><br><span class="line">K+K-Q+Q-</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/poj/poj-1166" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/06/oj/poj/poj-1166/" class="article-date">
  <time datetime="2014-05-06T00:34:56.000Z" itemprop="datePublished">2014-05-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-POJ/">解題區 - POJ</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/06/oj/poj/poj-1166/">POJ 1166 - The Clocks</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/06/oj/poj/poj-1166/" data-id="ckpaivcay00ecn8vnaaz738ri" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/06/oj/poj/poj-1166/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bfs/">bfs</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">|-------|    |-------|    |-------|</span><br><span class="line">|       |    |       |    |   |   |</span><br><span class="line">|---O   |    |---O   |    |   O   |</span><br><span class="line">|       |    |       |    |       |</span><br><span class="line">|-------|    |-------|    |-------|</span><br><span class="line"></span><br><span class="line">    A            B            C    </span><br><span class="line"></span><br><span class="line">|-------|    |-------|    |-------|</span><br><span class="line">|       |    |       |    |       |</span><br><span class="line">|   O   |    |   O   |    |   O   |</span><br><span class="line">|   |   |    |   |   |    |   |   |</span><br><span class="line">|-------|    |-------|    |-------|</span><br><span class="line"></span><br><span class="line">    D            E            F    </span><br><span class="line"></span><br><span class="line">|-------|    |-------|    |-------|</span><br><span class="line">|       |    |       |    |       |</span><br><span class="line">|   O   |    |   O---|    |   O   |</span><br><span class="line">|   |   |    |       |    |   |   |</span><br><span class="line">|-------|    |-------|    |-------|</span><br><span class="line"></span><br><span class="line">    G            H            I    </span><br></pre></td></tr></table></figure>
<p>(Figure 1)</p>
<p>There are nine clocks in a 3*3 array (figure 1). The goal is to return all the dials to 12 o’clock with as few moves as possible. There are nine different allowed ways to turn the dials on the clocks. Each such way is called a move. Select for each move a number 1 to 9. That number will turn the dials 90’ (degrees) clockwise on those clocks which are affected according to figure 2 below.</p>
<table>
<thead>
<tr>
<th align="center">Move</th>
<th align="left">Affected clocks</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left">ABDE</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left">ABC</td>
</tr>
<tr>
<td align="center">3</td>
<td align="left">BCEF</td>
</tr>
<tr>
<td align="center">4</td>
<td align="left">ADG</td>
</tr>
<tr>
<td align="center">5</td>
<td align="left">BDEFH</td>
</tr>
<tr>
<td align="center">6</td>
<td align="left">CFI</td>
</tr>
<tr>
<td align="center">7</td>
<td align="left">DEGH</td>
</tr>
<tr>
<td align="center">8</td>
<td align="left">GHI</td>
</tr>
<tr>
<td align="center">9</td>
<td align="left">EFHI</td>
</tr>
</tbody></table>
<p>   (Figure 2)</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>Your program is to read from standard input. Nine numbers give the start positions of the dials. 0=12 o’clock, 1=3 o’clock, 2=6 o’clock, 3=9 o’clock.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>Your program is to write to standard output. Output a shortest sorted sequence of moves (numbers), which returns all the dials to 12 o’clock. You are convinced that the answer is unique.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3 3 0</span><br><span class="line">2 2 2</span><br><span class="line">2 1 2</span><br></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4 5 8 9</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>原來之前寫過這一題，請參閱 <a href="http://zerojudge.tw/ShowProblem?problemid=d730">d730: 升旗典礼 ——加强版</a></p>
<p>用 BFS 從 <code>0 0 0 0 0 0 0 0 0</code> 開始倒推回去，在 mark 的部份，用 4 進制 bitmask。</p>
<p>這題在 POJ 似乎只有一組測資，在 Zerojudge 則有非常多筆測資。</p>
<p>而事實上網路上還有另外一個高斯消去法，先預求反矩陣，之後直接帶入計算即可。沒有仔細去研究，不過聽說那解法限定一定有合法解，如何判定不合法解又是另外一個問題。總之，用了 BFS 過了就沒仔細去探討其他解法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">char mark[1&lt;&lt;18] = &#123;&#125;, ans[1&lt;&lt;18], best[1&lt;&lt;18];</span><br><span class="line">char dirp[4] = &#123;-3, 1, 1, 1&#125;;</span><br><span class="line">int next[1&lt;&lt;18] = &#123;&#125;;</span><br><span class="line">int pow4[10] = &#123;1&#125;;</span><br><span class="line">int move[10][7] = &#123; &#123;&#125;,</span><br><span class="line">                 	&#123;1, 2, 4, 5, 0&#125;,</span><br><span class="line">                 	&#123;1, 2, 3, 0&#125;,</span><br><span class="line">                 	&#123;2, 3, 5, 6, 0&#125;,</span><br><span class="line">                 	&#123;1, 4, 7, 0&#125;,</span><br><span class="line">                 	&#123;2, 4, 5, 6, 8, 0&#125;,</span><br><span class="line">                 	&#123;3, 6, 9, 0&#125;,</span><br><span class="line">                 	&#123;4, 5, 7, 8, 0&#125;,</span><br><span class="line">                 	&#123;7, 8, 9, 0&#125;,</span><br><span class="line">                 	&#123;5, 6, 8, 9, 0&#125;</span><br><span class="line">                   &#125;;</span><br><span class="line">void trans(int N, char s[]) &#123;</span><br><span class="line">    int i = 0;</span><br><span class="line">    while(N) &#123;</span><br><span class="line">        s[i++] = N%4, N /= 4;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">void build() &#123;</span><br><span class="line">    int a, b, c, qt = 0, t, p;</span><br><span class="line">    queue&lt;int&gt; Q;</span><br><span class="line">    best[0] = 0, mark[0] = 1;</span><br><span class="line">    Q.push(0);</span><br><span class="line">    while(!Q.empty()) &#123;</span><br><span class="line">    	int state = Q.front();</span><br><span class="line">    	Q.pop();</span><br><span class="line">    	char buf[10] = &#123;&#125;;</span><br><span class="line">    	trans(state, buf);</span><br><span class="line">    	for(int i = 1; i &lt; 10; i++) &#123;</span><br><span class="line">    		int nstate = state;</span><br><span class="line">    		for(int j = 0; move[i][j]; j++)</span><br><span class="line">    			nstate -= pow4[move[i][j] - 1] * dirp[buf[move[i][j] - 1]];</span><br><span class="line">    		if(mark[nstate] == 0) &#123;</span><br><span class="line">    			mark[nstate] = 1;</span><br><span class="line">    			next[nstate] = state;</span><br><span class="line">                best[nstate] = best[state] + 1;</span><br><span class="line">                ans[nstate] = i + &#x27;0&#x27;;</span><br><span class="line">    			Q.push(nstate);</span><br><span class="line">    		&#125;</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">int print_f = 0;</span><br><span class="line">void Print(int state) &#123;</span><br><span class="line">    if(state) &#123;</span><br><span class="line">        Print(next[state]);</span><br><span class="line">        if(print_f)</span><br><span class="line">            putchar(&#x27; &#x27;);</span><br><span class="line">        print_f = 1;</span><br><span class="line">        putchar(ans[state]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">    for(int i = 1; i &lt; 10; i++)</span><br><span class="line">        pow4[i] = pow4[i-1] * 4;</span><br><span class="line">    build();</span><br><span class="line">    while(true) &#123;</span><br><span class="line">    	int state = 0, x;</span><br><span class="line">        for(int i = 0; i &lt; 9; i++) &#123;</span><br><span class="line">            if(scanf(&quot;%d&quot;, &amp;x) != 1)</span><br><span class="line">            	return 0;</span><br><span class="line">            state |= x * pow4[i];</span><br><span class="line">        &#125;</span><br><span class="line">        print_f = 0;</span><br><span class="line">        Print(state);</span><br><span class="line">        puts(&quot;&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-10040" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/06/oj/uva/uva-10040/" class="article-date">
  <time datetime="2014-05-06T00:01:21.000Z" itemprop="datePublished">2014-05-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/06/oj/uva/uva-10040/">UVa 10040 - Ouroboros Snake</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/06/oj/uva/uva-10040/" data-id="ckpaivcb200ewn8vn6h5e9f8k" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/06/oj/uva/uva-10040/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/尤拉迴路/">尤拉迴路</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/最小表示法/">最小表示法</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/遞迴改寫/">遞迴改寫</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>Ouroboros was a mythical snake in Ancient Egypt. It has its tail inside its mouth and continuously devours itself.</p>
<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Ouroboros numbers are binary numbers of 2n bits that have the property of generating the whole set of numbers from 0 to 2n-1 as follows: To produce all of them we place the 2n bits wrapped in a circle so that the last bit goes before the first one. Then we can denote all 2n different strings with n bits starting each time with the next bit in the circle.</p>
<p>For example, for n=2 there are only four Ouroboros numbers. These are 0011, 0110, 1100 and 1001. For 0011, the following diagram and table depicts the process of finding all the bitstrings:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">k 	00110011... 	o(n=2,k)</span><br><span class="line">0 	00 	0</span><br><span class="line">1 	 01 	1</span><br><span class="line">2 	  11 	3</span><br><span class="line">3 	   10 	2</span><br></pre></td></tr></table></figure>

<p>Your program will compute the function o(n,k), where n &gt; 0 and <span>$0 \leq k &lt; 2^n$</span><!-- Has MathJax -->. This function calculates the k-th number inside the smallest Ouroboros number of size n-bits.</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The input starts with a line containing the number of test cases. For each test case you will be given a line with two integers n (0 &lt; n &lt;22) and k ( 0 &lt;= k &lt; 2^n).</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For every test case your output must evaluate the function o(n,k) and print the result on a line by itself.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4 </span><br><span class="line">2 0</span><br><span class="line">2 1</span><br><span class="line">2 2</span><br><span class="line">2 3</span><br></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><p>** 題目描述：**</p>
<p>有一個 <code>2^n</code> 個 bits 的環，而這個環恰好任取連續 n 個會湊滿 <code>[0, 2^n - 1]</code>，現在找一個字典順序最小的環，接著詢問這個環的某一個位置開始的數值。</p>
<p>** 題目解法：**</p>
<p>當詢問 n bits 的結果時，可以把圖建成 <code>2^(n-1)</code> 個節點，每一個節點有兩條邊，邊上分別為 0, 1，也就是說只要繞過所有的邊，相當於產生所有 <code>2^n</code> 個數字。</p>
<p>由於每一個點的 <code>indegree = outdegree</code> 一定存在尤拉迴路，接著在有向圖中找到一條尤拉迴路即可。</p>
<p>至於找字典順序最小環，使用 <code>周源最小表示法</code> 來找，如果可以的話希望能在搜尋時順便找到字典順序最小的。這裡就沒有系不去探究了。</p>
<p>以下是一個最簡單的版本，但這個版本在生成尤拉迴路時會遭遇到 stackoverflow。</p>
<figure class="highlight plaintext"><figcaption><span>TLE version because of stack overflow</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">char g[1&lt;&lt;21][2] = &#123;&#125;;</span><br><span class="line">int n, mask, highbit;</span><br><span class="line">char order[2][1&lt;&lt;21], *p;</span><br><span class="line">void dfs(int node) &#123;</span><br><span class="line">    int prefix = node;</span><br><span class="line">    prefix &lt;&lt;= 1;</span><br><span class="line">    for(int i = 0; i &lt; 2; i++) &#123;</span><br><span class="line">        if(g[node][i]) &#123;</span><br><span class="line">            g[node][i]--;</span><br><span class="line">            dfs((prefix|i)&amp;mask);</span><br><span class="line">    		*p = (i) +&#x27;0&#x27;, p++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">int MinExp(const char *s, const int slen) &#123;</span><br><span class="line">    int i = 0, j = 1, k = 0, x, y, tmp;</span><br><span class="line">    while(i &lt; slen &amp;&amp; j &lt; slen &amp;&amp; k &lt; slen) &#123;</span><br><span class="line">        x = i + k;</span><br><span class="line">        y = j + k;</span><br><span class="line">        if(x &gt;= slen)    x -= slen;</span><br><span class="line">        if(y &gt;= slen)    y -= slen;</span><br><span class="line">        if(s[x] == s[y]) &#123;</span><br><span class="line">            k++;</span><br><span class="line">        &#125; else if(s[x] &gt; s[y]) &#123;</span><br><span class="line">            i = j+1 &gt; i+k+1 ? j+1 : i+k+1;</span><br><span class="line">            k = 0;</span><br><span class="line">            tmp = i, i = j, j = tmp;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            j = i+1 &gt; j+k+1 ? i+1 : j+k+1;</span><br><span class="line">            k = 0;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return i;</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">    int testcase, K;</span><br><span class="line">    scanf(&quot;%d&quot;, &amp;testcase);</span><br><span class="line">    while(testcase--) &#123;</span><br><span class="line">        scanf(&quot;%d %d&quot;, &amp;n, &amp;K);</span><br><span class="line">        mask = (1&lt;&lt;(n-1)) - 1;</span><br><span class="line">        for(int i = (1&lt;&lt;(n-1)) - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">            g[i][0]++;</span><br><span class="line">            g[i][1]++;</span><br><span class="line">        &#125;</span><br><span class="line">        p = order[0];</span><br><span class="line">        dfs(0);</span><br><span class="line">        *p = &#x27;\0&#x27;, p++;</span><br><span class="line">        int len = strlen(order[0]);</span><br><span class="line">        for(int i = len - 1, j = 0; i &gt;= 0; i--, j++)</span><br><span class="line">            order[1][i] = order[0][j];</span><br><span class="line">        order[1][len] = &#x27;\0&#x27;;</span><br><span class="line">        int o1 = MinExp(order[0], len);</span><br><span class="line">        int o2 = MinExp(order[1], len);</span><br><span class="line">        int f = 0;</span><br><span class="line">        for(int i = 0; i &lt; len; i++) &#123;</span><br><span class="line">            if(order[0][(o1 + i)%len] != order[1][(o2 + i)%len]) &#123;</span><br><span class="line">                f = order[0][(o1 + i)%len] &gt; order[1][(o2 + i)%len];</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        int ret = 0;</span><br><span class="line">        for(int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">            ret = ret &lt;&lt; 1;</span><br><span class="line">            if(f == 0) &#123;</span><br><span class="line">                ret |= order[0][(o1 + i + K)%len] - &#x27;0&#x27;;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                ret |= order[1][(o2 + i + K)%len] - &#x27;0&#x27;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        printf(&quot;%d\n&quot;, ret);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由於上述程式在走訪尤拉迴路時，由於深度過深而造成 <code>stackoverflow</code> 因此需要局部改寫成手動的 stack。通常主機只支持 10 萬到 20 萬之間的深度，這題最慘會到 100 萬。</p>
<p>並且將答案預建出來，如果沒有預建表會導致 <code>Time limit</code>，我以為只有少數幾筆，真是大錯特錯了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;stack&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">char g[1&lt;&lt;21][2] = &#123;&#125;;</span><br><span class="line">int n, mask;</span><br><span class="line">char order[2][1&lt;&lt;21], *p;</span><br><span class="line">char ouroboros[22][1&lt;&lt;21];</span><br><span class="line">int olen[22];</span><br><span class="line">void dfs(int node) &#123;</span><br><span class="line">    stack&lt; pair&lt;int, int&gt; &gt; stk;</span><br><span class="line">    pair&lt;int, int&gt; state;</span><br><span class="line">    int line;	</span><br><span class="line">    stk.push(make_pair(node, 0));</span><br><span class="line">    while(!stk.empty()) &#123;</span><br><span class="line">        state = stk.top(), stk.pop();</span><br><span class="line">        node = state.first, line = state.second&amp;3;</span><br><span class="line">        if(line == 0) &#123;</span><br><span class="line">            int prefix = node &lt;&lt; 1;</span><br><span class="line">            if(g[node][0]) &#123;</span><br><span class="line">                g[node][0]--;</span><br><span class="line">                stk.push(make_pair(node, 1|8));</span><br><span class="line">                stk.push(make_pair((prefix|0)&amp;mask, 0));</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                stk.push(make_pair(node, 1));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else if(line == 1) &#123;</span><br><span class="line">            if(state.second&amp;8) &#123;</span><br><span class="line">    			*p = (0) +&#x27;0&#x27;, p++;</span><br><span class="line">            &#125;</span><br><span class="line">            int prefix = node &lt;&lt; 1;</span><br><span class="line">            if(g[node][1]) &#123;</span><br><span class="line">                g[node][1]--;</span><br><span class="line">                stk.push(make_pair(node, 2|8));</span><br><span class="line">                stk.push(make_pair((prefix|1)&amp;mask, 0));</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                stk.push(make_pair(node, 2));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            if(state.second&amp;8) &#123;</span><br><span class="line">    			*p = (1) +&#x27;0&#x27;, p++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">int MinExp(const char *s, const int slen) &#123;</span><br><span class="line">    int i = 0, j = 1, k = 0, x, y, tmp;</span><br><span class="line">    while(i &lt; slen &amp;&amp; j &lt; slen &amp;&amp; k &lt; slen) &#123;</span><br><span class="line">        x = i + k;</span><br><span class="line">        y = j + k;</span><br><span class="line">        if(x &gt;= slen)    x -= slen;</span><br><span class="line">        if(y &gt;= slen)    y -= slen;</span><br><span class="line">        if(s[x] == s[y]) &#123;</span><br><span class="line">            k++;</span><br><span class="line">        &#125; else if(s[x] &gt; s[y]) &#123;</span><br><span class="line">            i = j+1 &gt; i+k+1 ? j+1 : i+k+1;</span><br><span class="line">            k = 0;</span><br><span class="line">            tmp = i, i = j, j = tmp;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            j = i+1 &gt; j+k+1 ? i+1 : j+k+1;</span><br><span class="line">            k = 0;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return i;</span><br><span class="line">&#125;</span><br><span class="line">void build() &#123;</span><br><span class="line">    for(int n = 1; n &lt; 22; n++) &#123;</span><br><span class="line">        mask = (1&lt;&lt;(n-1)) - 1;</span><br><span class="line">        for(int i = (1&lt;&lt;(n-1)) - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">            g[i][0]++;</span><br><span class="line">            g[i][1]++;</span><br><span class="line">        &#125;</span><br><span class="line">        p = order[0];</span><br><span class="line">        dfs(0);</span><br><span class="line">        *p = &#x27;\0&#x27;, p++;</span><br><span class="line">        int len = strlen(order[0]);</span><br><span class="line">        for(int i = len - 1, j = 0; i &gt;= 0; i--, j++)</span><br><span class="line">            order[1][i] = order[0][j];</span><br><span class="line">        order[1][len] = &#x27;\0&#x27;;</span><br><span class="line">        int o1 = MinExp(order[0], len);</span><br><span class="line">        int o2 = MinExp(order[1], len);</span><br><span class="line">        int f = 0;</span><br><span class="line">        for(int i = 0; i &lt; len; i++) &#123;</span><br><span class="line">            if(order[0][(o1 + i)%len] != order[1][(o2 + i)%len]) &#123;</span><br><span class="line">                f = order[0][(o1 + i)%len] &gt; order[1][(o2 + i)%len];</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        for(int i = 0; i &lt; len; i++) &#123;</span><br><span class="line">            if(f == 0) &#123;</span><br><span class="line">                ouroboros[n][i] = order[0][(o1 + i)%len];</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                ouroboros[n][i] = order[1][(o2 + i)%len];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        olen[n] = len;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">    int testcase, K;</span><br><span class="line">    build();</span><br><span class="line">    scanf(&quot;%d&quot;, &amp;testcase);</span><br><span class="line">    while(testcase--) &#123;</span><br><span class="line">        scanf(&quot;%d %d&quot;, &amp;n, &amp;K);</span><br><span class="line">        int ret = 0;</span><br><span class="line">        for(int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">            ret = ret &lt;&lt; 1;</span><br><span class="line">            ret |= ouroboros[n][(i + K)%olen[n]] - &#x27;0&#x27;;</span><br><span class="line">        &#125;</span><br><span class="line">        printf(&quot;%d\n&quot;, ret);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/79/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/78/">78</a><a class="page-number" href="/page/79/">79</a><span class="page-number current">80</span><a class="page-number" href="/page/81/">81</a><a class="page-number" href="/page/82/">82</a><span class="space">&hellip;</span><a class="page-number" href="/page/85/">85</a><a class="extend next" rel="next" href="/page/81/">Next &raquo;</a>
    </nav>
  
</section>
          
          
            <aside id="sidebar">
  <!-- <div id="ukagaka_panel"></div> -->
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/">學校課程</a><span class="category-list-count">115</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/介面設計/">介面設計</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/作業系統/">作業系統</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/即時系統/">即時系統</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/大學專題/">大學專題</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/巨量資料/">巨量資料</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/平行程式/">平行程式</a><span class="category-list-count">43</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/敏捷方法/">敏捷方法</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/數位影像生成/">數位影像生成</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/編譯器/">編譯器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/自然語言/">自然語言</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/虛擬實境/">虛擬實境</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算型智慧/">計算型智慧</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算幾何/">計算幾何</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算機圖學/">計算機圖學</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資料庫系統/">資料庫系統</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資訊安全/">資訊安全</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/通識課程/">通識課程</a><span class="category-list-count">14</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/">工作應用</a><span class="category-list-count">30</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/Java/">Java</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/Meme/">Meme</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/可持久化/">可持久化</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/鬼故事/">鬼故事</a><span class="category-list-count">9</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/手札日記/">手札日記</a><span class="category-list-count">44</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/">網頁設計</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/About-This-Blog/">About This Blog</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/HTML5/">HTML5</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/JQuery/">JQuery</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/Markdown/">Markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/NodeJs/">NodeJs</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/">解題區</a><span class="category-list-count">633</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/Latex/">Latex</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/出題解題/">出題解題</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-POJ/">解題區 - POJ</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a><span class="category-list-count">483</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a><span class="category-list-count">77</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-其他題目/">解題區 - 其他題目</a><span class="category-list-count">45</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-未解題目/">解題區 - 未解題目</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/雜言筆記/">雜言筆記</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a class="text" href="/2021/05/30/java/java-memory-optimization-1/">
              
                <i class="icon-file-o"></i> 
              
            Java 優化內存使用 結構篇</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/diary-202101/">
              
                <i class="icon-file-o"></i> 
              
            二八進展</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-file-extension/">
              
                <i class="icon-file-o"></i> 
              
            File Extension</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-globl-var/">
              
                <i class="icon-file-o"></i> 
              
            Global Variable</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-handover/">
              
                <i class="icon-file-o"></i> 
              
            Handover</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-interview-recursion/">
              
                <i class="icon-file-o"></i> 
              
            Interview &amp; Recursion</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-job-build/">
              
                <i class="icon-file-o"></i> 
              
            Job Build</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-lang/">
              
                <i class="icon-file-o"></i> 
              
            Programming Language Impostors</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-machine-learning-newbie/">
              
                <i class="icon-file-o"></i> 
              
            Machine Learning for Newbie</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-parallel-gc/">
              
                <i class="icon-file-o"></i> 
              
            Parallel &amp; Garbage Collection</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget-wrap">
    <h3 class="widget-title">Links</h3>
    <div class="widget">   
      	<ul>
	      <li><a href="http://mypaper.pchome.com.tw/zerojudge" target="_blank" title="Old Blog"><i class="icon-star"></i> Morris' Blog (pchome)</a></li>
	      <li><a href="http://flere114.blogspot.tw/" target="_blank" title="蘿莉勿觸"><i class="icon-googles"></i> flere's Blog</a></li>
	      <li><a href="http://dreamoon4.blogspot.tw/" target="_blank" title="夢月"><i class="icon-googles"></i> dreamoon's Blog</a></li>
	      <li><a href="http://m80126colin.github.io" target="_blank" title="許胖們"><i class="icon-github-alt"></i> m80126colin's Blog</a></li>
	      <li><a href="http://sd12582000.blogspot.tw/" target="_blank" title="妮可妮可"><i class="icon-github-alt"></i> Nico's Blog</a></li>
	      <li><a href="http://kuoe0.logdown.com/" target="_blank" title="郭至軒大神"><i class="icon-github-alt"></i> KuoE0's Dots</a></li>
	      <li><a href="http://tyan.io/" title=""><i class="icon-github-alt"></i> Tyan Blog</a></li>
    	</ul>
    </div>
</div>

  
    
<script src="/js/jquery-ui.js"></script>
<script src="/js/ukagaka/jquery.morris.ukagaka.resource.js"></script>
<script src="/js/ukagaka/typed.js"></script>
<script type="text/javascript">
  $('#ukagaka_panel').ukagaka();
</script>
  
  
</aside>
          
        
      </div>
      <footer id="footer">
  
  <div class="outer">    
    <div class="social-group">
      
      <a href="https://github.com/morris821028" target="_blank" title="github"><i class="icon-github"></i></a>
      
      
      <a href="https://www.facebook.com/Morris1028" target="_blank" title="facebook"><i class="icon-facebook-sign"></i></a>
      
      
      <a href="http://uhunt.felix-halim.net/id/46705" target="_blank" title="uhunt" ><span class="icon-uhunt">UVa<span></a>
      
    </div>
    <div id="footer-info" class="inner">
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and Theme by <a href="https://github.com/morris821028/hexo-theme-landscape" target="_blank" title="landscape">landscape</a> &copy; 2021 Shiang-Yun Yang 
    </div>
  </div>
</footer>


    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link"><i class=icon-home ></i>&nbsp&nbspHome</a>
  
    <a href="/about" class="mobile-nav-link"><i class=icon-user ></i>&nbsp&nbspAbout</a>
  
    <a href="/archives" class="mobile-nav-link"><i class=icon-archive ></i>&nbsp&nbspArchives</a>
  
    <a href="/tags" class="mobile-nav-link"><i class=icon-tags ></i>&nbsp&nbspTags</a>
  
    <a href="/picture" class="mobile-nav-link"><i class=icon-camera ></i>&nbsp&nbspPictures</a>
  
    <a href="/works" class="mobile-nav-link"><i class=icon-trophy ></i>&nbsp&nbspWorks</a>
  
</nav>
    
<script>
  var disqus_shortname = 'morris1028';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/jquery.lazyload.js"></script>
<script src="/js/jquery.als-1.6.js"></script>

<script src="/js/script.js"></script>

  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>