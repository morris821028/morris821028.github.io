<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Category: 解題區 - Zerojudge | Morris&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Morris&#39; Blog">
<meta property="og:url" content="http://morris821028.github.io/categories/解題區/解題區-Zerojudge/page/5/index.html">
<meta property="og:site_name" content="Morris&#39; Blog">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Morris&#39; Blog">
<link rel="publisher" href="108158678174364350000">
  
    <link rel="alternative" href="/atom.xml" title="Morris&#39; Blog" type="application/atom+xml">
  
  
    <meta name="google-site-verification" content="5mRgj8NanEMpGZuNfHNJNmH90RgNlrnJXsFlTaKD6Gs" />
  
  
    <link rel="shortcut icon" href="/img/f.ico">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <script src="/js/jquery-2.1.0.min.js"></script>
  <link rel="stylesheet" href="/css/style.css">
  
  <link rel="stylesheet" href="http://cdn.oesmith.co.uk/morris-0.5.1.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="http://cdn.oesmith.co.uk/morris-0.5.1.min.js"></script>
  <link rel="import" href="/bower_components/app-layout/app-layout.html"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"><div id="banner-right"></div></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Morris&#39; Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          
            <a class="main-nav-link" href="/"><i class=icon-home title='Home'></i></a>
          
        
          
            <a class="main-nav-link" href="/about"><i class=icon-user title='About'></i></a>
          
        
          
            <a class="main-nav-link" href="/archives"><i class=icon-archive title='Archives'></i></a>
          
        
          
            <a class="main-nav-link" href="/tags"><i class=icon-tags title='Tags'></i></a>
          
        
          
            <a class="main-nav-link" href="/picture"><i class=icon-camera title='Pictures'></i></a>
          
        
          
            <a class="main-nav-link" href="/works"><i class=icon-trophy title='Works'></i></a>
          
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://morris821028.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        
          
          <section id="main">
  
    <article id="post-zj-b433" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/10/zj-b433/" class="article-date">
  <time datetime="2015-07-10T11:20:49.000Z" itemprop="datePublished">2015-07-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/10/zj-b433/">b433. 中間相遇法</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/07/10/zj-b433/" data-id="ckpaivca500b4n8vn8bib26bz" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/07/10/zj-b433/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/中間相遇法/">中間相遇法</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/密碼基礎/">密碼基礎</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>加密的每一道過程若存在反運算，則存在解密的程序。絕對安全的加密沒有反運算，那解密也是沒有辦法做到的。通常加解密中一定會用到互斥或 (XOR) 運算，從表格來看，單獨看任何一行一列都恰好分配一半的 0、一半的 1。對於密碼來說，明文跟密文的關係，不管知道的明文還是密文的部分，猜中的機率只有 <span>$1/2$</span><!-- Has MathJax -->，只要位元數一多，猜中的機率近乎 <span>$(\frac{1}{2})^n \cong 0$</span><!-- Has MathJax -->。</p>
<p>「只用 XOR key 是不行的，再做一次不就回來了嗎？」</p>
<p>「那用循環位移和加法的 overflow 破壞線性結構！」</p>
<p>「但記得要能解密回來哦。」</p>
<p>於是某 M 提供一個簡單的加密運算，明文 <span>$M$</span><!-- Has MathJax -->，加密金鑰 <span>$key$</span><!-- Has MathJax --></p>
<ul>
<li>密文 <span>$C =  ((M \text{&lt;&lt;&lt;} key) + key) \text{ XOR } key$</span><!-- Has MathJax --></li>
<li>明文 <span>$M =  ((C \text{ XOR } key) + (\sim key) + 1) \text{&gt;&gt;&gt;} key$</span><!-- Has MathJax --></li>
</ul>
<p>其中每一個運算都在 16-bit CPU 上運作，<span>$\text{&lt;&lt;&lt;}$</span><!-- Has MathJax --> 表示循環左移 (circular shift)，<span>$\sim$</span><!-- Has MathJax --> 表示 1 補數。</p>
<p>用抽象化表示加解密流程</p>
<ul>
<li><span>$C = E_{key}(M)$</span><!-- Has MathJax --></li>
<li><span>$M = D_{key}(C)$</span><!-- Has MathJax --></li>
</ul>
<h3 id="問題描述"><a href="#問題描述" class="headerlink" title="問題描述"></a>問題描述</h3><p>現在某 M 正用他自己設計的加解密協定跟未來的自己溝通，但發現到這種加解密，如果對方知道某 M 一定會傳送哪一個明文，接著只要匹配密文，窮舉 <span>$O(2^{16})$</span><!-- Has MathJax --> 來找到加密金鑰就會破功。</p>
<p>在電影《模仿遊戲》中，德國納粹 Enigma 密碼機，訊息中的結尾一定會附加「希特勒萬歲！(Heil Hitler!)」匹配密文後，窮舉金鑰就能破解。而某 M 常常傳送「萌萌哒！(Moe Moe Ta!)」只需要 <span>$O(2^{16})$</span><!-- Has MathJax --> 就能被破解。</p>
<p>於是某 M 強化他的加密協定，希望破解者至少要在 <span>$O(2^{32})$</span><!-- Has MathJax --> 的時間內找到，拖延破解時間。</p>
<p>*<span>$C = E_{key_2}(E_{key_1}(M))$</span><!-- Has MathJax --><br>*<span>$M = D_{key_1}(D_{key_2}(C))$</span><!-- Has MathJax --></p>
<p>現在知道某 M 傳送的其中一組 <span>$(C, M)$</span><!-- Has MathJax -->，請告訴某 M 有多少組 <span>$(key_1, key_2)$</span><!-- Has MathJax --> 的可能性。萬萬沒想到，中間相遇法能在 <span>$O(2^{16} \times 16)$</span><!-- Has MathJax --> 解決這個問題。</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">40380 23333</span><br><span class="line">30767 13657</span><br></pre></td></tr></table></figure>

<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">114688</span><br><span class="line">45568</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>套用中間相遇法<span>$E_{key_1}(M) = D_{key_2}(C)$</span><!-- Has MathJax --> 分別對等式兩邊進行計算，查看相碰情況。</p>
<p>複雜度為窮舉所有可能的 <span>$key_1$</span><!-- Has MathJax --> 和 <span>$key_2$</span><!-- Has MathJax -->，若用平衡樹進行碰撞檢查 <span>$O(2^{16} \times 16)$</span><!-- Has MathJax -->，利用 HASH 可以降到 <span>$O(2^{16})$</span><!-- Has MathJax -->，由於 <span>$O(2^{16})$</span><!-- Has MathJax --> 是記憶體可以宣告的，則直接使用數組來完成。</p>
<h3 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span> </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">short</span> <span class="keyword">int</span> UINT16;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleIdea</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    UINT16 key;</span><br><span class="line">    <span class="built_in">SimpleIdea</span>(UINT16 k = <span class="number">0</span>):</span><br><span class="line">        <span class="built_in">key</span>(k) &#123;&#125;</span><br><span class="line">    <span class="function">UINT16 <span class="title">encrypt</span><span class="params">(UINT16 m)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">rotate_left</span>(m, key&amp;<span class="number">15</span>) + key)^key;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">UINT16 <span class="title">decrypt</span><span class="params">(UINT16 m)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">rotate_left</span>((m^key)+(~key)+<span class="number">1</span>, <span class="number">16</span> - (key&amp;<span class="number">15</span>));</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function">UINT16 <span class="title">rotate_left</span><span class="params">(UINT16 x, UINT16 n)</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">return</span>  (x &lt;&lt; n) | (x &gt;&gt; (<span class="number">16</span>-n));</span><br><span class="line">    &#125;</span><br><span class="line">&#125; test;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> C, M;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;C, &amp;M) == <span class="number">2</span>) &#123;</span><br><span class="line">        unordered_map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; H1, H2;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="number">1</span>&lt;&lt;<span class="number">16</span>); i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> key1 = i, key2 = i;</span><br><span class="line">            test.key = key1;</span><br><span class="line">            H1[test.<span class="built_in">encrypt</span>(M)]++;</span><br><span class="line">            test.key = key2;</span><br><span class="line">            H2[test.<span class="built_in">decrypt</span>(C)]++;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : H1) &#123;</span><br><span class="line">            <span class="keyword">if</span> (H2.<span class="built_in">count</span>(x.first))</span><br><span class="line">                ret += H2[x.first] * x.second;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ret);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span> </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">short</span> <span class="keyword">int</span> UINT16;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleIdea</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    UINT16 key;</span><br><span class="line">    <span class="built_in">SimpleIdea</span>(UINT16 k = <span class="number">0</span>):</span><br><span class="line">        <span class="built_in">key</span>(k) &#123;&#125;</span><br><span class="line">    <span class="function">UINT16 <span class="title">encrypt</span><span class="params">(UINT16 m)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">rotate_left</span>(m, key&amp;<span class="number">15</span>) + key)^key;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">UINT16 <span class="title">decrypt</span><span class="params">(UINT16 m)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">rotate_left</span>((m^key)+(~key)+<span class="number">1</span>, <span class="number">16</span> - (key&amp;<span class="number">15</span>));</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function">UINT16 <span class="title">rotate_left</span><span class="params">(UINT16 x, UINT16 n)</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">return</span>  (x &lt;&lt; n) | (x &gt;&gt; (<span class="number">16</span>-n));</span><br><span class="line">    &#125;</span><br><span class="line">&#125; test;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> C, M;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;C, &amp;M) == <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> H[<span class="number">1</span>&lt;&lt;<span class="number">16</span>] = &#123;&#125;, ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="number">1</span>&lt;&lt;<span class="number">16</span>); i++) &#123;</span><br><span class="line">            test.key = i;</span><br><span class="line">            H[test.<span class="built_in">encrypt</span>(M)]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="number">1</span>&lt;&lt;<span class="number">16</span>); i++) &#123;</span><br><span class="line">            test.key = i;</span><br><span class="line">            ret += H[test.<span class="built_in">decrypt</span>(C)];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ret);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-zj-b428" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/10/zj-b428/" class="article-date">
  <time datetime="2015-07-10T11:17:51.000Z" itemprop="datePublished">2015-07-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/10/zj-b428/">b428. 凱薩加密</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/07/10/zj-b428/" data-id="ckpaivca400azn8vn61ozeqft" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/07/10/zj-b428/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/密碼基礎/">密碼基礎</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>曾幾何時，基礎題庫已經成了不基礎的題庫。小小新手們寫個題目，不少拿了 TLE、CE 求助無門，就再也不想打開 Zerojudge。高中生哪有寫這麼困難的題目，高中生都不像高中生。在某 M 那個年代寫的題目非常簡單，沒有特別變化處理，更別說多麼高檔的資料結構，暴力算法 (naive algorithm) 就能輕鬆切題。</p>
<p>「年代變了呢，現在的高中生要寫出比大學生的某 M 更困難的題目」</p>
<p>重溫解題的那份初心吧！</p>
<h3 id="題目描述"><a href="#題目描述" class="headerlink" title="題目描述"></a>題目描述</h3><p>在西元前就存在的一種加密－凱薩加密為目前最早發現的替換加密 (substitution cipher)。其原理很簡單，將一段明文往替換成往後數的第 <span>$k$</span><!-- Has MathJax --> 個英文字母。</p>
<p>若用數學式表示凱薩加密和解密，如下：</p>
<p>加密 <span>$C = E_K(P) = (P + k) \mod 26$</span><!-- Has MathJax --><br>解密 <span>$P = D_K(P) = (C - k) \mod 26$</span><!-- Has MathJax --> </p>
<p>例如 <span>$k = 3$</span><!-- Has MathJax --> 時，發生的情況如下：</p>
<p>明文字母表：<code>ABCDEFGHIJKLMNOPQRSTUVWXYZ</code><br>密文字母表：<code>DEFGHIJKLMNOPQRSTUVWXYZABC</code></p>
<p>從數學的觀點來看，每一個字母就是一個數字。</p>
<p>A = 0, B = 1, C = 2, …,X = 23, Y = 24, Z = 25</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ABCDEFGHIJKLMNOPQRSTUVWXYZ </span><br><span class="line">DEFGHIJKLMNOPQRSTUVWXYZABC</span><br><span class="line">DLQXABXEEQMEUQYLZPEK</span><br><span class="line">YGLSVWSZZLHZPLTGUKZF</span><br><span class="line">Z</span><br><span class="line">Z</span><br></pre></td></tr></table></figure>

<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">21</span><br><span class="line">0</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>只需要看第一個字符的變換方式即可。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> s1[<span class="number">1024</span>], s2[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%s %s&quot;</span>, s1, s2) == <span class="number">2</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, (((s2[<span class="number">0</span>] - <span class="string">&#x27;A&#x27;</span>) - (s1[<span class="number">0</span>] - <span class="string">&#x27;A&#x27;</span>))%<span class="number">26</span> + <span class="number">26</span>)%<span class="number">26</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-zj-a761" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/08/zj-a761/" class="article-date">
  <time datetime="2015-07-07T23:41:14.000Z" itemprop="datePublished">2015-07-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/08/zj-a761/">a761. 罐頭的記憶體</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/07/08/zj-a761/" data-id="ckpaivc9z00afn8vnaluqa3uq" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/07/08/zj-a761/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/作業系統/">作業系統</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分塊/">分塊</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/線段樹/">線段樹</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/離線處理/">離線處理</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>模擬作業系統的 dynamic memory allocation，</p>
<ul>
<li>宣告連續一段記憶體配置給某個程序，並且標記辨識碼。</li>
<li>若宣告失敗，則輸出碰撞區域中，辨識碼最小的數字。</li>
<li>詢問記憶體存取時，是否合法，若合法輸出程序的辨識碼。</li>
</ul>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">7</span><br><span class="line">load 29</span><br><span class="line">map 1 25 39</span><br><span class="line">map 2 23 24</span><br><span class="line">map 3 22 25</span><br><span class="line">map 4 25 40</span><br><span class="line">store 33   </span><br><span class="line">store 22</span><br></pre></td></tr></table></figure>

<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fail to load from 29</span><br><span class="line">region 1 created</span><br><span class="line">region 2 created</span><br><span class="line">fail to create region 3, overlap with region 1</span><br><span class="line">fail to create region 4, overlap with region 1</span><br><span class="line">store region to 1</span><br><span class="line">fail to store to 22</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><blockquote>
<p>溫馨提示：此題的測資隨機，單純離散化套用二分查找，編號最小使用線性搜索即可通過。by 蔡神 asas</p>
</blockquote>
<p>儘管直觀作法可以通過，來討論看看別種作法吧。</p>
<ul>
<li>線段樹 + 延遲標記 + 離線處理<br>離散結果最多有 <span>$O(N + Q)$</span><!-- Has MathJax --> 的離散點，單筆操作複雜度為 <span>$O(\log Q)$</span><!-- Has MathJax -->，空間複雜度 <span>$O(Q)$</span><!-- Has MathJax -->，空間消耗量相較於其他算法最多 (附加延遲標記的使用)。</li>
<li>分塊算法 + 離線處理<br>利用分塊 Unrolled Linked List 的快取優勢來降複雜度，空間複雜度仍然是 <span>$O(Q)$</span><!-- Has MathJax -->，單筆操作複雜度為 <span>$O(\sqrt{Q})$</span><!-- Has MathJax -->。空間複雜度的常數比線段樹少一半以上，別忘詢問離線是共同的空間成本。</li>
<li>分塊在線<br>直接宣告 <span>$O(2^{32})$</span><!-- Has MathJax --> 進行配置，因此分塊大小為 <span>$O(\sqrt{2^{32}})$</span><!-- Has MathJax -->。將配置連續區段用區間 <span>$[l, r, pid]$</span><!-- Has MathJax --> 的方式儲存在塊之中，用一個平衡樹維護每一個塊的狀態。由於要輸出編號最小的，詢問複雜度至少為 <span>$O(65536)$</span><!-- Has MathJax -->，為了加速詢問可以利用剪枝 (塊的最小值仍大於當前的答案) 來完成。空間複雜度跟實際情況有關，這一做法在當前數據中是最快，記憶體最小的一種辦法，因為在線很多詢問點是沒必要實際存在的。</li>
</ul>
<p>由於這一題沒有釋放記憶體操作，從均攤上可以清楚，分塊離線的修改離散點的次數最多為 <span>$O(Q)$</span><!-- Has MathJax -->，也就是每一個點均被塗色僅僅一次，剩下就是在詢問上加速。</p>
<h3 id="線段樹"><a href="#線段樹" class="headerlink" title="線段樹"></a>線段樹</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1</span>&lt;&lt;<span class="number">21</span>, INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SegmentTree</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">        <span class="keyword">int</span> val, del;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> a = <span class="number">0</span>, <span class="keyword">int</span> b = <span class="number">0</span>)</span> </span>&#123;</span><br><span class="line">            val = a, del = b;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; nodes[MAXN];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pushDown</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nodes[k].del != INF) &#123;</span><br><span class="line">            nodes[k&lt;&lt;<span class="number">1</span>].val = <span class="built_in">min</span>(nodes[k&lt;&lt;<span class="number">1</span>].val, nodes[k].del);</span><br><span class="line">            nodes[k&lt;&lt;<span class="number">1</span>].del = <span class="built_in">min</span>(nodes[k&lt;&lt;<span class="number">1</span>].del, nodes[k].del);</span><br><span class="line">            nodes[k&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].val = <span class="built_in">min</span>(nodes[k&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].val, nodes[k].del);</span><br><span class="line">            nodes[k&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].del = <span class="built_in">min</span>(nodes[k&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].del, nodes[k].del);</span><br><span class="line">            nodes[k].del = INF;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pushUp</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">        nodes[k].val = <span class="built_in">min</span>(nodes[k&lt;&lt;<span class="number">1</span>].val, nodes[k&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].val);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123; </span><br><span class="line">        nodes[k].<span class="built_in">init</span>(INF, INF);</span><br><span class="line">        <span class="keyword">if</span> (l == r)	<span class="keyword">return</span> ;</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r)/<span class="number">2</span>;</span><br><span class="line">        <span class="built_in">build</span>(k&lt;&lt;<span class="number">1</span>, l, mid);</span><br><span class="line">        <span class="built_in">build</span>(k&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, mid+<span class="number">1</span>, r);</span><br><span class="line">        <span class="built_in">pushUp</span>(k, l, r);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">assignUpdate</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        nodes[k].del = <span class="built_in">min</span>(nodes[k].del, val);</span><br><span class="line">        nodes[k].val = <span class="built_in">min</span>(nodes[k].val, val);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">assign</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x &lt;= l &amp;&amp; r &lt;= y) &#123;</span><br><span class="line">            <span class="built_in">assignUpdate</span>(k, l, r, val);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">pushDown</span>(k, l, r);</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (x &lt;= mid)	<span class="built_in">assign</span>(k&lt;&lt;<span class="number">1</span>, l, mid, x, y, val);</span><br><span class="line">        <span class="keyword">if</span> (y &gt; mid)	<span class="built_in">assign</span>(k&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, mid+<span class="number">1</span>, r, x, y, val);</span><br><span class="line">        <span class="built_in">pushUp</span>(k, l, r);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x &lt;= l &amp;&amp; r &lt;= x || nodes[k].val == INF)</span><br><span class="line">            <span class="keyword">return</span> nodes[k].val;</span><br><span class="line">        <span class="built_in">pushDown</span>(k, l, r);</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r)/<span class="number">2</span>, ret;</span><br><span class="line">        <span class="keyword">if</span> (x &lt;= mid)	ret = <span class="built_in">query</span>(k&lt;&lt;<span class="number">1</span>, l, mid, x);</span><br><span class="line">        <span class="keyword">else</span>			ret = <span class="built_in">query</span>(k&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, mid+<span class="number">1</span>, r, x);</span><br><span class="line">        <span class="built_in">pushUp</span>(k, l, r);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x &lt;= l &amp;&amp; r &lt;= y || nodes[k].val == INF)</span><br><span class="line">            <span class="keyword">return</span> nodes[k].val;</span><br><span class="line">        <span class="built_in">pushDown</span>(k, l, r);</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r)/<span class="number">2</span>, ret = INF;</span><br><span class="line">        <span class="keyword">if</span> (x &lt;= mid)</span><br><span class="line">            ret = <span class="built_in">min</span>(ret, <span class="built_in">query</span>(k&lt;&lt;<span class="number">1</span>, l, mid, x, y));</span><br><span class="line">        <span class="keyword">if</span> (y &gt; mid)</span><br><span class="line">            ret = <span class="built_in">min</span>(ret, <span class="built_in">query</span>(k&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, mid+<span class="number">1</span>, r, x, y));</span><br><span class="line">        <span class="built_in">pushUp</span>(k, l, r);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; tree;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXQ = <span class="number">524288</span>;</span><br><span class="line"><span class="keyword">char</span> cmd[MAXQ][<span class="number">8</span>];</span><br><span class="line"><span class="keyword">int</span> args[MAXQ][<span class="number">3</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;N) == <span class="number">1</span>) &#123;</span><br><span class="line">        map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; R;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, &amp;cmd[i]);</span><br><span class="line">            <span class="keyword">int</span> a, b, c;</span><br><span class="line">            <span class="keyword">if</span> (cmd[i][<span class="number">0</span>] == <span class="string">&#x27;l&#x27;</span>)</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a), R[a] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (cmd[i][<span class="number">0</span>] == <span class="string">&#x27;m&#x27;</span>)</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;a, &amp;b, &amp;c), R[b] = R[c] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a), R[a] = <span class="number">0</span>;</span><br><span class="line">            args[i][<span class="number">0</span>] = a, args[i][<span class="number">1</span>] = b, args[i][<span class="number">2</span>] = c;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : R)</span><br><span class="line">            x.second = ++size;</span><br><span class="line">        tree.<span class="built_in">build</span>(<span class="number">1</span>, <span class="number">1</span>, size);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> a, b, c, t;</span><br><span class="line">            a = args[i][<span class="number">0</span>], b = args[i][<span class="number">1</span>], c = args[i][<span class="number">2</span>];</span><br><span class="line">            <span class="keyword">if</span> (cmd[i][<span class="number">0</span>] == <span class="string">&#x27;l&#x27;</span>) &#123;</span><br><span class="line">                t = tree.<span class="built_in">query</span>(<span class="number">1</span>, <span class="number">1</span>, size, R[a]);</span><br><span class="line">                <span class="keyword">if</span> (t == INF)</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;fail to load from %d\n&quot;</span>, a);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;load from region %d\n&quot;</span>, t);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmd[i][<span class="number">0</span>] == <span class="string">&#x27;m&#x27;</span>) &#123;</span><br><span class="line">                t = tree.<span class="built_in">query</span>(<span class="number">1</span>, <span class="number">1</span>, size, R[b], R[c]);</span><br><span class="line">                <span class="keyword">if</span> (t != INF)</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;fail to create region %d, overlap with region %d\n&quot;</span>, a, t);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;region %d created\n&quot;</span>, a), tree.<span class="built_in">assign</span>(<span class="number">1</span>, <span class="number">1</span>, size, R[b], R[c], a);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                t = tree.<span class="built_in">query</span>(<span class="number">1</span>, <span class="number">1</span>, size, R[a]);</span><br><span class="line">                <span class="keyword">if</span> (t == INF)</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;fail to store to %d\n&quot;</span>, a);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;store to region %d\n&quot;</span>, t);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="分塊離線"><a href="#分塊離線" class="headerlink" title="分塊離線"></a>分塊離線</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>, MAXQ = <span class="number">524288</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Unrolled</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> PILE, mask, shift;</span><br><span class="line">    vector&lt; vector&lt;<span class="keyword">int</span>&gt; &gt; nodes;</span><br><span class="line">    vector&lt;<span class="keyword">int</span>&gt; dirty;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">alloc</span><span class="params">(<span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">        nodes.<span class="built_in">clear</span>(), dirty.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="keyword">for</span> (PILE = <span class="number">1</span>, shift = <span class="number">0</span>; PILE * PILE &lt; size; PILE &lt;&lt;= <span class="number">1</span>, shift++);</span><br><span class="line">        mask = PILE - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">0</span>, r; l &lt; size; l = r+<span class="number">1</span>) &#123;</span><br><span class="line">            r = <span class="built_in">min</span>(l+PILE<span class="number">-1</span>, size<span class="number">-1</span>);</span><br><span class="line">            nodes.<span class="built_in">push_back</span>(vector&lt;<span class="keyword">int</span>&gt;(r-l+<span class="number">1</span>, INF));</span><br><span class="line">            dirty.<span class="built_in">push_back</span>(INF);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> <span class="keyword">operator</span>[](<span class="keyword">const</span> <span class="keyword">int</span> x) <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> nodes[x&gt;&gt;shift][x&amp;mask];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">empty</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> bl = l&gt;&gt;shift, br = r&gt;&gt;shift;</span><br><span class="line">        <span class="keyword">int</span> ret = INF;</span><br><span class="line">        <span class="keyword">if</span> (bl == br) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; i++)</span><br><span class="line">                ret = <span class="built_in">min</span>(ret, (*<span class="keyword">this</span>)[i]);</span><br><span class="line">            <span class="keyword">return</span> ret;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = bl+<span class="number">1</span>; i &lt; br; i++)</span><br><span class="line">            ret = <span class="built_in">min</span>(ret, dirty[i]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = (bl+<span class="number">1</span>) * PILE<span class="number">-1</span>; i &gt;= l; i--)</span><br><span class="line">            ret = <span class="built_in">min</span>(ret, (*<span class="keyword">this</span>)[i]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = (br) * PILE; i &lt;= r; i++)</span><br><span class="line">            ret = <span class="built_in">min</span>(ret, (*<span class="keyword">this</span>)[i]);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fill</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> bl = l&gt;&gt;shift, br = r&gt;&gt;shift;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = bl; i &lt;= br; i++)</span><br><span class="line">            dirty[i] = <span class="built_in">min</span>(dirty[i], val);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = l, bi; i &lt;= r; i++)</span><br><span class="line">            nodes[i&gt;&gt;shift][i&amp;mask] = val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; mem;</span><br><span class="line"><span class="keyword">char</span> cmd[MAXQ][<span class="number">8</span>];</span><br><span class="line"><span class="keyword">int</span> args[MAXQ][<span class="number">3</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;N) == <span class="number">1</span>) &#123;</span><br><span class="line">        map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; R;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, &amp;cmd[i]);</span><br><span class="line">            <span class="keyword">int</span> a, b, c;</span><br><span class="line">            <span class="keyword">if</span> (cmd[i][<span class="number">0</span>] == <span class="string">&#x27;l&#x27;</span>)</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a), R[a] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (cmd[i][<span class="number">0</span>] == <span class="string">&#x27;m&#x27;</span>)</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;a, &amp;b, &amp;c), R[b] = R[c] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a), R[a] = <span class="number">0</span>;</span><br><span class="line">            args[i][<span class="number">0</span>] = a, args[i][<span class="number">1</span>] = b, args[i][<span class="number">2</span>] = c;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : R)</span><br><span class="line">            x.second = size++;</span><br><span class="line">        mem.<span class="built_in">alloc</span>(size);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> a, b, c, t;</span><br><span class="line">            a = args[i][<span class="number">0</span>], b = args[i][<span class="number">1</span>], c = args[i][<span class="number">2</span>];</span><br><span class="line">            <span class="keyword">if</span> (cmd[i][<span class="number">0</span>] == <span class="string">&#x27;l&#x27;</span>) &#123;</span><br><span class="line">                t = mem[R[a]];</span><br><span class="line">                <span class="keyword">if</span> (t == INF)</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;fail to load from %d\n&quot;</span>, a);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;load from region %d\n&quot;</span>, t);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmd[i][<span class="number">0</span>] == <span class="string">&#x27;m&#x27;</span>) &#123;</span><br><span class="line">                t = mem.<span class="built_in">empty</span>(R[b], R[c]);</span><br><span class="line">                <span class="keyword">if</span> (t != INF)</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;fail to create region %d, overlap with region %d\n&quot;</span>, a, t);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;region %d created\n&quot;</span>, a), mem.<span class="built_in">fill</span>(R[b], R[c], a);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                t = mem[R[a]];</span><br><span class="line">                <span class="keyword">if</span> (t == INF)</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;fail to store to %d\n&quot;</span>, a);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;store to region %d\n&quot;</span>, t);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="分塊在線"><a href="#分塊在線" class="headerlink" title="分塊在線"></a>分塊在線</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Unrolled</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Interval</span> &#123;</span></span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> l, r;</span><br><span class="line">        <span class="keyword">int</span> pid;</span><br><span class="line">        <span class="built_in">Interval</span>(<span class="keyword">long</span> <span class="keyword">long</span> a = <span class="number">0</span>, <span class="keyword">long</span> <span class="keyword">long</span> b = <span class="number">0</span>, <span class="keyword">int</span> c = <span class="number">0</span>):</span><br><span class="line">            <span class="built_in">l</span>(a), <span class="built_in">r</span>(b), <span class="built_in">pid</span>(c) &#123;&#125;</span><br><span class="line">        <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Interval &amp;x) <span class="keyword">const</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> l &lt; x.l || (l == x.l &amp;&amp; r &gt; x.r);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">include</span><span class="params">(<span class="keyword">int</span> x)</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> l &lt;= x &amp;&amp; x &lt;= r;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> PILE, mask;</span><br><span class="line">    <span class="keyword">int</span> shift;</span><br><span class="line">    vector&lt; set&lt;Interval&gt; &gt; nodes;</span><br><span class="line">    vector&lt;<span class="keyword">int</span>&gt; dirty;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">alloc</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> size)</span> </span>&#123;</span><br><span class="line">        nodes.<span class="built_in">clear</span>(), dirty.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="keyword">for</span> (PILE = <span class="number">1</span>, shift = <span class="number">0</span>; PILE * PILE &lt; size; PILE &lt;&lt;= <span class="number">1</span>, shift++);</span><br><span class="line">        mask = PILE - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> l = <span class="number">0</span>, r; l &lt; size; l = r+<span class="number">1</span>) &#123;</span><br><span class="line">            r = <span class="built_in">min</span>(l+PILE<span class="number">-1</span>, size<span class="number">-1</span>);</span><br><span class="line">            nodes.<span class="built_in">push_back</span>(set&lt;Interval&gt;());</span><br><span class="line">            dirty.<span class="built_in">push_back</span>(INF);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> <span class="keyword">operator</span>[](<span class="keyword">const</span> <span class="keyword">long</span> <span class="keyword">long</span> x) <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> set&lt;Interval&gt; &amp;s = nodes[x&gt;&gt;shift];</span><br><span class="line">        <span class="keyword">auto</span> it = s.<span class="built_in">upper_bound</span>(<span class="built_in">Interval</span>(x, x));</span><br><span class="line">        it = it == s.<span class="built_in">begin</span>() ? it : --it;</span><br><span class="line">        <span class="keyword">return</span> it == s.<span class="built_in">end</span>() || !(it-&gt;<span class="built_in">include</span>(x)) ? INF : it-&gt;pid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">empty</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> l, <span class="keyword">long</span> <span class="keyword">long</span> r)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> bl = l&gt;&gt;shift, br = r&gt;&gt;shift;</span><br><span class="line">        <span class="keyword">int</span> ret = INF;</span><br><span class="line">        <span class="keyword">if</span> (bl == br) &#123;</span><br><span class="line">            set&lt;Interval&gt; &amp;s = nodes[bl];</span><br><span class="line">            <span class="keyword">auto</span> st = s.<span class="built_in">upper_bound</span>(<span class="built_in">Interval</span>(l, l));</span><br><span class="line">            st = st == s.<span class="built_in">begin</span>() ? st : --st;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> it = st; it != s.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">max</span>(l, it-&gt;l) &lt;= <span class="built_in">min</span>(r, it-&gt;r))</span><br><span class="line">                    ret = <span class="built_in">min</span>(ret, it-&gt;pid);</span><br><span class="line">                <span class="keyword">if</span> (it-&gt;l &gt; r)</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ret;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = bl+<span class="number">1</span>; i &lt; br; i++)</span><br><span class="line">            ret = <span class="built_in">min</span>(ret, dirty[i]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> it = nodes[bl].<span class="built_in">rbegin</span>(); it != nodes[bl].<span class="built_in">rend</span>() &amp;&amp; ret &gt; dirty[bl]; it++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">max</span>(l, it-&gt;l) &lt;= <span class="built_in">min</span>(r, it-&gt;r)) &#123;</span><br><span class="line">                ret = <span class="built_in">min</span>(ret, it-&gt;pid);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> it = nodes[br].<span class="built_in">begin</span>(); it != nodes[br].<span class="built_in">end</span>() &amp;&amp; ret &gt; dirty[br]; it++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">max</span>(l, it-&gt;l) &lt;= <span class="built_in">min</span>(r, it-&gt;r)) &#123;</span><br><span class="line">                ret = <span class="built_in">min</span>(ret, it-&gt;pid);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fill</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> l, <span class="keyword">long</span> <span class="keyword">long</span> r, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> bl = l&gt;&gt;shift, br = r&gt;&gt;shift;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = bl; i &lt;= br; i++)</span><br><span class="line">            dirty[i] = <span class="built_in">min</span>(dirty[i], val);</span><br><span class="line">        <span class="keyword">if</span> (bl == br) &#123;</span><br><span class="line">            nodes[bl].<span class="built_in">insert</span>(<span class="built_in">Interval</span>(l, r, val));</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = bl+<span class="number">1</span>; i &lt; br; i++)</span><br><span class="line">            nodes[i].<span class="built_in">insert</span>(<span class="built_in">Interval</span>(i*PILE, (i+<span class="number">1</span>)*PILE<span class="number">-1</span>, val));</span><br><span class="line">        nodes[bl].<span class="built_in">insert</span>(<span class="built_in">Interval</span>(l, (bl+<span class="number">1</span>) * PILE<span class="number">-1</span>, val));</span><br><span class="line">        nodes[br].<span class="built_in">insert</span>(<span class="built_in">Interval</span>(br*PILE, r, val));</span><br><span class="line">    &#125;</span><br><span class="line">&#125; mem;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N;</span><br><span class="line">    <span class="keyword">char</span> cmd[<span class="number">8</span>];</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;N) == <span class="number">1</span>) &#123;</span><br><span class="line">        mem.<span class="built_in">alloc</span>(<span class="number">1LL</span>&lt;&lt;<span class="number">31</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, &amp;cmd);</span><br><span class="line">            <span class="keyword">int</span> a, b, c, t;</span><br><span class="line">            <span class="keyword">if</span> (cmd[<span class="number">0</span>] == <span class="string">&#x27;l&#x27;</span>) &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a);</span><br><span class="line">                t = mem[a];</span><br><span class="line">                <span class="keyword">if</span> (t == INF)</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;fail to load from %d\n&quot;</span>, a);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;load from region %d\n&quot;</span>, t);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmd[<span class="number">0</span>] == <span class="string">&#x27;m&#x27;</span>) &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">                t = mem.<span class="built_in">empty</span>(b, c);</span><br><span class="line">                <span class="keyword">if</span> (t != INF)</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;fail to create region %d, overlap with region %d\n&quot;</span>, a, t);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;region %d created\n&quot;</span>, a), mem.<span class="built_in">fill</span>(b, c, a);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a);</span><br><span class="line">                t = mem[a];</span><br><span class="line">                <span class="keyword">if</span> (t == INF)</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;fail to store to %d\n&quot;</span>, a);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;store to region %d\n&quot;</span>, t);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-zj-b436" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/08/zj-b436/" class="article-date">
  <time datetime="2015-07-07T23:37:37.000Z" itemprop="datePublished">2015-07-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/08/zj-b436/">b436. 圖片的梯度再進化</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/07/08/zj-b436/" data-id="ckpaivca600b7n8vn5o3k8dld" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/07/08/zj-b436/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/影像處理/">影像處理</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>可以參考 <a href="http://ip.csie.ncu.edu.tw/course/course.htm">中央大學影像處理實驗室 課程 講義第八章 邊擷取</a></p>
<p>除了索貝爾運算 Sobel operator，還有如 Prewitt operator、Kirsch operator … 等，來進行邊擷取。</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2 2</span><br><span class="line">0 0 0 255 255 255</span><br><span class="line">255 255 255 255 255 255</span><br></pre></td></tr></table></figure>

<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2 2</span><br><span class="line">191 191 191 128 128 128</span><br><span class="line">128 128 128 64 64 64</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>比較麻煩是在處理邊緣擴充，寫一個函數去特判延伸的 pixel 位置。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span> </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IMAGE</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Pixel</span> &#123;</span></span><br><span class="line">        <span class="keyword">double</span> r, g, b, a;</span><br><span class="line">        <span class="built_in">Pixel</span>(<span class="keyword">double</span> x = <span class="number">0</span>, <span class="keyword">double</span> y = <span class="number">0</span>, <span class="keyword">double</span> z = <span class="number">0</span>, <span class="keyword">double</span> w = <span class="number">0</span>):</span><br><span class="line">            <span class="built_in">r</span>(x), <span class="built_in">g</span>(y), <span class="built_in">b</span>(z), <span class="built_in">a</span>(w) &#123;&#125;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lf %lf %lf&quot;</span>, &amp;r, &amp;g, &amp;b);</span><br><span class="line">        &#125;</span><br><span class="line">        Pixel <span class="keyword">operator</span>-(<span class="keyword">const</span> Pixel &amp;x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r-x.r, g-x.g, b-x.b, a-x.a);</span><br><span class="line">    	&#125;</span><br><span class="line">    	Pixel <span class="keyword">operator</span>+(<span class="keyword">const</span> Pixel &amp;x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r+x.r, g+x.g, b+x.b, a+x.a);</span><br><span class="line">    	&#125;</span><br><span class="line">    	Pixel <span class="keyword">operator</span>*(<span class="keyword">const</span> <span class="keyword">double</span> x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r*x, g*x, b*x, a*x);</span><br><span class="line">    	&#125;</span><br><span class="line">        Pixel <span class="keyword">operator</span>/(<span class="keyword">const</span> <span class="keyword">double</span> x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r/x, g/x, b/x, a/x);</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    		<span class="built_in">printf</span>(<span class="string">&quot;%d %d %d&quot;</span>, (<span class="keyword">int</span>)<span class="built_in">round</span>(r), (<span class="keyword">int</span>)<span class="built_in">round</span>(g), (<span class="keyword">int</span>)<span class="built_in">round</span>(b));</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">int</span> W, H;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">256</span>;</span><br><span class="line">    Pixel data[MAXN][MAXN], tmp[MAXN][MAXN];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;W, &amp;H);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++)</span><br><span class="line">                data[i][j].<span class="built_in">read</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Pixel <span class="title">pabs</span><span class="params">(Pixel x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Pixel</span>(<span class="built_in">fabs</span>(x.r), <span class="built_in">fabs</span>(x.g), <span class="built_in">fabs</span>(x.b));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Pixel <span class="title">getPixel</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x &gt;= <span class="number">0</span> &amp;&amp; y &gt;= <span class="number">0</span> &amp;&amp; x &lt; H &amp;&amp; y &lt; W)</span><br><span class="line">            <span class="keyword">return</span> data[x][y];</span><br><span class="line">        <span class="keyword">if</span> (y &lt; <span class="number">0</span>)	<span class="keyword">return</span> data[<span class="built_in">min</span>(<span class="built_in">max</span>(x, <span class="number">0</span>), H<span class="number">-1</span>)][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span> (y &gt;= W)	<span class="keyword">return</span> data[<span class="built_in">min</span>(<span class="built_in">max</span>(x, <span class="number">0</span>), H<span class="number">-1</span>)][W<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span>)	<span class="keyword">return</span> data[<span class="number">0</span>][<span class="built_in">min</span>(<span class="built_in">max</span>(y, <span class="number">0</span>), W<span class="number">-1</span>)];</span><br><span class="line">        <span class="keyword">if</span> (x &gt;= H)	<span class="keyword">return</span> data[H<span class="number">-1</span>][<span class="built_in">min</span>(<span class="built_in">max</span>(y, <span class="number">0</span>), W<span class="number">-1</span>)];</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Pixel</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">border</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> dx[] = &#123;<span class="number">-1</span>, <span class="number">-1</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> dy[] = &#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> xw[] = &#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">-2</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> yw[] = &#123;<span class="number">-1</span>, <span class="number">-2</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++) &#123;</span><br><span class="line">                <span class="function">Pixel <span class="title">Dx</span><span class="params">(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span>, <span class="title">Dy</span><span class="params">(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">9</span>; k++) &#123;</span><br><span class="line">                    Dx = Dx + <span class="built_in">getPixel</span>(i+dx[k], j+dy[k]) * xw[k];</span><br><span class="line">                    Dy = Dy + <span class="built_in">getPixel</span>(i+dx[k], j+dy[k]) * yw[k];</span><br><span class="line">                &#125;</span><br><span class="line">                Dx = <span class="built_in">pabs</span>(Dx), Dy = <span class="built_in">pabs</span>(Dy);</span><br><span class="line">                tmp[i][j] = (Dx + Dy)/<span class="number">8.0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++)</span><br><span class="line">                data[i][j] = tmp[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, W, H);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++)</span><br><span class="line">                data[i][j].<span class="built_in">print</span>(), <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, j == W<span class="number">-1</span> ? <span class="string">&#x27;\n&#x27;</span> : <span class="string">&#x27; &#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; test;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    test.<span class="built_in">read</span>();</span><br><span class="line">    test.<span class="built_in">border</span>();</span><br><span class="line">    test.<span class="built_in">print</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-zj-b434" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/07/zj-b434/" class="article-date">
  <time datetime="2015-07-07T00:00:31.000Z" itemprop="datePublished">2015-07-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/07/zj-b434/">b434. 圖片的梯度</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/07/07/zj-b434/" data-id="ckpaivca500b5n8vnehpg7lbn" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/07/07/zj-b434/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/影像處理/">影像處理</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>可以參考 <a href="http://ip.csie.ncu.edu.tw/course/course.htm">中央大學影像處理實驗室 課程 講義第八章 邊擷取</a></p>
<p>邊緣擷取可以靠相鄰像素的差異來判斷是否是邊緣，若顏色差異很大則表示是邊。然而圖片像素是不連續的離散點，因此沒有辦法利用微積分學到的微分來得精準，而是要採用差分 (減法)，至於遮罩要取多大是個問題，一般而言還會搭配降噪的矩陣來完成。</p>
<p>如 Prewitt operator、Sobel operator、Kirsch operator … 等，矩陣都有搭配降噪處理。之所以用矩陣表示，是為了讓 GPU 快速地計算數值。</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2 2</span><br><span class="line">0 0 0 255 255 255</span><br><span class="line">255 255 255 255 255 255</span><br></pre></td></tr></table></figure>

<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2 2</span><br><span class="line">255 255 255 0 0 0</span><br><span class="line">0 0 0 0 0 0</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>按照公式模擬即可。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span> </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IMAGE</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Pixel</span> &#123;</span></span><br><span class="line">        <span class="keyword">double</span> r, g, b, a;</span><br><span class="line">        <span class="built_in">Pixel</span>(<span class="keyword">double</span> x = <span class="number">0</span>, <span class="keyword">double</span> y = <span class="number">0</span>, <span class="keyword">double</span> z = <span class="number">0</span>, <span class="keyword">double</span> w = <span class="number">0</span>):</span><br><span class="line">            <span class="built_in">r</span>(x), <span class="built_in">g</span>(y), <span class="built_in">b</span>(z), <span class="built_in">a</span>(w) &#123;&#125;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lf %lf %lf&quot;</span>, &amp;r, &amp;g, &amp;b);</span><br><span class="line">        &#125;</span><br><span class="line">        Pixel <span class="keyword">operator</span>-(<span class="keyword">const</span> Pixel &amp;x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r-x.r, g-x.g, b-x.b, a-x.a);</span><br><span class="line">    	&#125;</span><br><span class="line">    	Pixel <span class="keyword">operator</span>+(<span class="keyword">const</span> Pixel &amp;x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r+x.r, g+x.g, b+x.b, a+x.a);</span><br><span class="line">    	&#125;</span><br><span class="line">    	Pixel <span class="keyword">operator</span>*(<span class="keyword">const</span> <span class="keyword">double</span> x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r*x, g*x, b*x, a*x);</span><br><span class="line">    	&#125;</span><br><span class="line">        Pixel <span class="keyword">operator</span>/(<span class="keyword">const</span> <span class="keyword">double</span> x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r/x, g/x, b/x, a/x);</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    		<span class="built_in">printf</span>(<span class="string">&quot;%d %d %d&quot;</span>, (<span class="keyword">int</span>)<span class="built_in">round</span>(r), (<span class="keyword">int</span>)<span class="built_in">round</span>(g), (<span class="keyword">int</span>)<span class="built_in">round</span>(b));</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">int</span> W, H;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">256</span>;</span><br><span class="line">    Pixel data[MAXN][MAXN];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;W, &amp;H);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++)</span><br><span class="line">                data[i][j].<span class="built_in">read</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Pixel <span class="title">pabs</span><span class="params">(Pixel x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Pixel</span>(<span class="built_in">fabs</span>(x.r), <span class="built_in">fabs</span>(x.g), <span class="built_in">fabs</span>(x.b));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">border</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++) &#123;</span><br><span class="line">                <span class="function">Pixel <span class="title">dx</span><span class="params">(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span>, <span class="title">dy</span><span class="params">(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">                <span class="keyword">if</span> (i+<span class="number">1</span> &lt; H)</span><br><span class="line">                    dx = data[i+<span class="number">1</span>][j] - data[i][j];</span><br><span class="line">                <span class="keyword">if</span> (j+<span class="number">1</span> &lt; W)</span><br><span class="line">                    dy = data[i][j+<span class="number">1</span>] - data[i][j];</span><br><span class="line">                dx = <span class="built_in">pabs</span>(dx), dy = <span class="built_in">pabs</span>(dy);</span><br><span class="line">                data[i][j] = (dx + dy)/<span class="number">2.0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, W, H);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++)</span><br><span class="line">                data[i][j].<span class="built_in">print</span>(), <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, j == W<span class="number">-1</span> ? <span class="string">&#x27;\n&#x27;</span> : <span class="string">&#x27; &#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; test;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    test.<span class="built_in">read</span>();</span><br><span class="line">    test.<span class="built_in">border</span>();</span><br><span class="line">    test.<span class="built_in">print</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-zj-b427" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/07/zj-b427/" class="article-date">
  <time datetime="2015-07-07T00:00:25.000Z" itemprop="datePublished">2015-07-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/07/zj-b427/">b427. 漸層色彩</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/07/07/zj-b427/" data-id="ckpaivca400ayn8vn9ykkfnz6" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/07/07/zj-b427/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/影像處理/">影像處理</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>給予兩個顏色的像素，在一張空白影像中使用漸層效果。</p>
<ul>
<li>水平由左到右的漸層</li>
<li>從中心點擴散的漸層</li>
</ul>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3 3 0 0 0 0 255 255 255 255 255</span><br></pre></td></tr></table></figure>

<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3 3</span><br><span class="line">0 0 0 255 128 128 128 255 255 255 255 255</span><br><span class="line">0 0 0 255 128 128 128 255 255 255 255 255</span><br><span class="line">0 0 0 255 128 128 128 255 255 255 255 255</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>線性內插，特別小心中心點 (x, y) 會是一個浮點數情況。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span> </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IMAGE</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Pixel</span> &#123;</span></span><br><span class="line">        <span class="keyword">double</span> r, g, b, a;</span><br><span class="line">        <span class="built_in">Pixel</span>(<span class="keyword">double</span> x = <span class="number">0</span>, <span class="keyword">double</span> y = <span class="number">0</span>, <span class="keyword">double</span> z = <span class="number">0</span>, <span class="keyword">double</span> w = <span class="number">0</span>):</span><br><span class="line">            <span class="built_in">r</span>(x), <span class="built_in">g</span>(y), <span class="built_in">b</span>(z), <span class="built_in">a</span>(w) &#123;&#125;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lf %lf %lf %lf&quot;</span>, &amp;r, &amp;g, &amp;b, &amp;a);</span><br><span class="line">        &#125;</span><br><span class="line">        Pixel <span class="keyword">operator</span>-(<span class="keyword">const</span> Pixel &amp;x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r-x.r, g-x.g, b-x.b, a-x.a);</span><br><span class="line">    	&#125;</span><br><span class="line">    	Pixel <span class="keyword">operator</span>+(<span class="keyword">const</span> Pixel &amp;x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r+x.r, g+x.g, b+x.b, a+x.a);</span><br><span class="line">    	&#125;</span><br><span class="line">    	Pixel <span class="keyword">operator</span>*(<span class="keyword">const</span> <span class="keyword">double</span> x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r*x, g*x, b*x, a*x);</span><br><span class="line">    	&#125;</span><br><span class="line">        Pixel <span class="keyword">operator</span>/(<span class="keyword">const</span> <span class="keyword">double</span> x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r/x, g/x, b/x, a/x);</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    		<span class="built_in">printf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>, (<span class="keyword">int</span>)<span class="built_in">round</span>(r), (<span class="keyword">int</span>)<span class="built_in">round</span>(g), (<span class="keyword">int</span>)<span class="built_in">round</span>(b), (<span class="keyword">int</span>)<span class="built_in">round</span>(a));</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">int</span> W, H;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">300</span>;</span><br><span class="line">    Pixel data[MAXN][MAXN];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;W, &amp;H);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++)</span><br><span class="line">                data[i][j].<span class="built_in">read</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">alloc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> TYPE;</span><br><span class="line">        Pixel st, ed;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;W, &amp;H, &amp;TYPE);</span><br><span class="line">        st.<span class="built_in">read</span>(), ed.<span class="built_in">read</span>();</span><br><span class="line">        <span class="built_in">gradient</span>(st, ed, TYPE);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">gradient</span><span class="params">(Pixel st, Pixel ed, <span class="keyword">int</span> TYPE)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (TYPE != <span class="number">0</span> &amp;&amp; TYPE != <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (TYPE == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++) </span><br><span class="line">                    data[i][j] = W<span class="number">-1</span> ? st + (ed - st) * j / (W<span class="number">-1</span>) : st;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">double</span> cx = (H<span class="number">-1</span>)/<span class="number">2.0</span>, cy = (W<span class="number">-1</span>)/<span class="number">2.0</span>;</span><br><span class="line">            <span class="keyword">double</span> cr = <span class="built_in">hypot</span>(cx, cy);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++)</span><br><span class="line">                    data[i][j] = cr ? st + (ed - st) * <span class="built_in">hypot</span>(i-cx, j-cy) / cr : st;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, W, H);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++)</span><br><span class="line">                data[i][j].<span class="built_in">print</span>(), <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, j == W<span class="number">-1</span> ? <span class="string">&#x27;\n&#x27;</span> : <span class="string">&#x27; &#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; test;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    test.<span class="built_in">alloc</span>();</span><br><span class="line">    test.<span class="built_in">print</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-zj-b426" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/07/zj-b426/" class="article-date">
  <time datetime="2015-07-06T23:55:27.000Z" itemprop="datePublished">2015-07-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/07/zj-b426/">b426. 宇宙光明體</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/07/07/zj-b426/" data-id="ckpaivca300axn8vn2fzwbyyv" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/07/07/zj-b426/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/影像處理/">影像處理</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>模擬兩張圖片的合成。</p>
<p>將前景圖片疊在背景圖片之上，按照權重比例來融合重疊部分得像素。</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0 0 0.5</span><br><span class="line">1 1</span><br><span class="line">255 255 255</span><br><span class="line">1 1</span><br><span class="line">0 0 0</span><br></pre></td></tr></table></figure>

<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 1</span><br><span class="line">128 128 128</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><blockquote>
<p>原來是宇宙光明體，還以為是宇宙大覺者呢。</p>
</blockquote>
<p>按照公式純模擬即可。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span> </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">0</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IMAGE</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Pixel</span> &#123;</span></span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">double</span> r, g, b, a;</span><br><span class="line">        <span class="built_in">Pixel</span>(<span class="keyword">long</span> <span class="keyword">double</span> x = <span class="number">0</span>, <span class="keyword">long</span> <span class="keyword">double</span> y = <span class="number">0</span>, <span class="keyword">long</span> <span class="keyword">double</span> z = <span class="number">0</span>, <span class="keyword">long</span> <span class="keyword">double</span> w = <span class="number">0</span>):</span><br><span class="line">            <span class="built_in">r</span>(x), <span class="built_in">g</span>(y), <span class="built_in">b</span>(z), <span class="built_in">a</span>(w) &#123;&#125;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">int</span> p1, p2, p3;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;p1, &amp;p2, &amp;p3);</span><br><span class="line">            r = p1, g = p2, b = p3;</span><br><span class="line">        &#125;</span><br><span class="line">        Pixel <span class="keyword">operator</span>-(<span class="keyword">const</span> Pixel &amp;x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r-x.r, g-x.g, b-x.b, a-x.a);</span><br><span class="line">    	&#125;</span><br><span class="line">    	Pixel <span class="keyword">operator</span>+(<span class="keyword">const</span> Pixel &amp;x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r+x.r, g+x.g, b+x.b, a+x.a);</span><br><span class="line">    	&#125;</span><br><span class="line">    	Pixel <span class="keyword">operator</span>*(<span class="keyword">const</span> <span class="keyword">long</span> <span class="keyword">double</span> x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r*x, g*x, b*x, a*x);</span><br><span class="line">    	&#125;</span><br><span class="line">        Pixel <span class="keyword">operator</span>/(<span class="keyword">const</span> <span class="keyword">long</span> <span class="keyword">double</span> x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r/x, g/x, b/x, a/x);</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    		<span class="keyword">double</span> p1 = r, p2 = g, p3 = b, p4 = a;</span><br><span class="line">    		<span class="built_in">printf</span>(<span class="string">&quot;%.0lf %.0lf %.0lf&quot;</span>, p1 + eps, p2 + eps, p3 + eps);</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">int</span> W, H;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">256</span>;</span><br><span class="line">    Pixel data[MAXN][MAXN];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;W, &amp;H);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++)</span><br><span class="line">                data[i][j].<span class="built_in">read</span>();</span><br><span class="line">    &#125;	</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(IMAGE &amp;other, <span class="keyword">int</span> X, <span class="keyword">int</span> Y, <span class="keyword">double</span> OPACITY)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; other.H &amp;&amp; i+X &lt; H; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; other.W &amp;&amp; j+Y &lt; W; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i+X &gt;= <span class="number">0</span> &amp;&amp; j+Y &gt;= <span class="number">0</span>)</span><br><span class="line">                    data[i+X][j+Y] = other.data[i][j] * OPACITY + data[i+X][j+Y] * (<span class="number">1</span> - OPACITY);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, W, H);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++)</span><br><span class="line">                data[i][j].<span class="built_in">print</span>(), <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, j == W<span class="number">-1</span> ? <span class="string">&#x27;\n&#x27;</span> : <span class="string">&#x27; &#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; back, fore;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> OPACITY;</span><br><span class="line">    <span class="keyword">int</span> X, Y;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %lf&quot;</span>, &amp;X, &amp;Y, &amp;OPACITY);</span><br><span class="line">    fore.<span class="built_in">read</span>();</span><br><span class="line">    back.<span class="built_in">read</span>();</span><br><span class="line">    back.<span class="built_in">add</span>(fore, Y, X, OPACITY);</span><br><span class="line">    back.<span class="built_in">print</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-zj-b425" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/07/zj-b425/" class="article-date">
  <time datetime="2015-07-06T23:48:11.000Z" itemprop="datePublished">2015-07-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/07/zj-b425/">b425. 抽菸動作 請勿模仿</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/07/07/zj-b425/" data-id="ckpaivca300awn8vnc4c60o9y" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/07/07/zj-b425/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/影像處理/">影像處理</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>替影像打上馬賽克效果，馬賽克效果是把區域內部的每一個像素改變，改變的方法為從舊的圖像中，搜索以其為中心的 11 x 11 方形內部所有像素的平均。</p>
<p>這一題要馬賽克區域為圓形，接著找到方形內部的像素平均即可。</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0 1 2</span><br><span class="line">1 2</span><br><span class="line">1 2 3</span><br><span class="line">4 5 6</span><br></pre></td></tr></table></figure>

<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 2</span><br><span class="line">3 4 5</span><br><span class="line">3 4 5</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>馬賽克的方案也許還有其他，從這裡可以知道平均造就出新的像素顏色。那麼可以列出方程式，所謂的解馬賽克估計也是去找線性聯立方程組，利用高斯消去法就能求解，可惜的是會有多組解的情況吧。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span> </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IMAGE</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Pixel</span> &#123;</span></span><br><span class="line">        <span class="keyword">double</span> r, g, b, a;</span><br><span class="line">        <span class="built_in">Pixel</span>(<span class="keyword">double</span> x = <span class="number">0</span>, <span class="keyword">double</span> y = <span class="number">0</span>, <span class="keyword">double</span> z = <span class="number">0</span>, <span class="keyword">double</span> w = <span class="number">0</span>):</span><br><span class="line">            <span class="built_in">r</span>(x), <span class="built_in">g</span>(y), <span class="built_in">b</span>(z), <span class="built_in">a</span>(w) &#123;&#125;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lf %lf %lf&quot;</span>, &amp;r, &amp;g, &amp;b);</span><br><span class="line">        &#125;</span><br><span class="line">        Pixel <span class="keyword">operator</span>-(<span class="keyword">const</span> Pixel &amp;x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r-x.r, g-x.g, b-x.b, a-x.a);</span><br><span class="line">    	&#125;</span><br><span class="line">    	Pixel <span class="keyword">operator</span>+(<span class="keyword">const</span> Pixel &amp;x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r+x.r, g+x.g, b+x.b, a+x.a);</span><br><span class="line">    	&#125;</span><br><span class="line">    	Pixel <span class="keyword">operator</span>*(<span class="keyword">const</span> <span class="keyword">double</span> x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r*x, g*x, b*x, a*x);</span><br><span class="line">    	&#125;</span><br><span class="line">        Pixel <span class="keyword">operator</span>/(<span class="keyword">const</span> <span class="keyword">double</span> x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r/x, g/x, b/x, a/x);</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    		<span class="built_in">printf</span>(<span class="string">&quot;%d %d %d&quot;</span>, (<span class="keyword">int</span>)<span class="built_in">round</span>(r), (<span class="keyword">int</span>)<span class="built_in">round</span>(g), (<span class="keyword">int</span>)<span class="built_in">round</span>(b));</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">int</span> W, H;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">300</span>;</span><br><span class="line">    Pixel data[MAXN][MAXN], tmp[MAXN][MAXN];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;W, &amp;H);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++)</span><br><span class="line">                data[i][j].<span class="built_in">read</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">blur</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> X, <span class="keyword">long</span> <span class="keyword">long</span> Y, <span class="keyword">long</span> <span class="keyword">long</span> R)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (R &lt; <span class="number">0</span>)	<span class="keyword">return</span> ;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((i-X)*(i-X) + (j-Y)*(j-Y) &lt;= R*R) &#123;</span><br><span class="line">                    <span class="function">Pixel <span class="title">B</span><span class="params">(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">                    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> a = <span class="number">-5</span>; a &lt;= <span class="number">5</span>; a++) &#123;</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> b = <span class="number">-5</span>; b &lt;= <span class="number">5</span>; b++) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (i+a &lt; H &amp;&amp; j+b &lt; W &amp;&amp; i+a &gt;= <span class="number">0</span> &amp;&amp; j+b &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                                B = B + data[i+a][j+b];</span><br><span class="line">                                cnt++;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    tmp[i][j] = B / cnt;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    tmp[i][j] = data[i][j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++)</span><br><span class="line">                data[i][j] = tmp[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, W, H);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++)</span><br><span class="line">                data[i][j].<span class="built_in">print</span>(), <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, j == W<span class="number">-1</span> ? <span class="string">&#x27;\n&#x27;</span> : <span class="string">&#x27; &#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; test;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> X, Y, R;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld %lld %lld&quot;</span>, &amp;X, &amp;Y, &amp;R);</span><br><span class="line">    test.<span class="built_in">read</span>();</span><br><span class="line">    test.<span class="built_in">blur</span>(Y, X, R);</span><br><span class="line">    test.<span class="built_in">print</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-zj-b424" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/07/zj-b424/" class="article-date">
  <time datetime="2015-07-06T23:18:48.000Z" itemprop="datePublished">2015-07-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/07/zj-b424/">b424. 圖片縮放</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/07/07/zj-b424/" data-id="ckpaivca300avn8vnhrzpav05" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/07/07/zj-b424/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/影像處理/">影像處理</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>此題有精準度誤差，未能提交成功。</p>
<p>進行圖片縮放，有兩種方案來補足缺失或者是簡化的像素計算。不管縮放如何，在新的坐標系的點可以對應到舊坐標系中，並且會有四個像素點 (正方形) 包含這個對應點，有可能會有所缺失，但至少包含一個點。</p>
<ul>
<li>最近鄰點法 (nearest-neighbor approach)<br>找正方形中哪個點最靠近新的對應點，就令其像素顏色等於最靠近的點。</li>
<li>雙線性內插 (bi-linear interpolation)<br>顏色由相鄰四個點決定，使用雙性內插來得到新的像素顏色。</li>
</ul>
<p>特別注意，雖然邊長根據縮放四捨五入，但在計算時先不考慮最終結果的長寬，否則縮放倍率也會跟著四捨五入。</p>
<p>可以參考 <a href="http://ip.csie.ncu.edu.tw/course/course.htm">中央大學影像處理實驗室 課程 講義第二章</a></p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2 2 0</span><br><span class="line">2 1 </span><br><span class="line">1 2 3 255 4 5 6 255 </span><br></pre></td></tr></table></figure>

<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">4 2</span><br><span class="line">1 2 3 255 3 4 5 255 4 5 6 255 4 5 6 255</span><br><span class="line">1 2 3 255 3 4 5 255 4 5 6 255 4 5 6 255</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>除了陷阱的邊長四捨五入外，精準度根據雙性內插影響。</p>
<p>雙線性內插可以由下列兩種方案，或者還有其他的</p>
<ul>
<li>兩次 lerp 插值，先水平後垂直或者先垂直後水平</li>
<li>特別的 <span>$f(x, y) = (1-a)(1-b) g(j, k) + a(1-b) g(j+1, k) + (1-a) b g(j, k+1) + a b g(j+1, k+1)$</span><!-- Has MathJax --></li>
</ul>
<p>特別發現到，第二種方案沒有用到除法運算，但乘法運算的優先順序會影響到誤差。然而我的代碼是混用造成難以評估的誤差。關於第二種方案的坐標系，可以參考講義中的圖示。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span> </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-18</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IMAGE</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Pixel</span> &#123;</span></span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">double</span> r, g, b, a;</span><br><span class="line">        <span class="built_in">Pixel</span>(<span class="keyword">long</span> <span class="keyword">double</span> x = <span class="number">0</span>, <span class="keyword">long</span> <span class="keyword">double</span> y = <span class="number">0</span>, <span class="keyword">long</span> <span class="keyword">double</span> z = <span class="number">0</span>, <span class="keyword">long</span> <span class="keyword">double</span> w = <span class="number">0</span>):</span><br><span class="line">            <span class="built_in">r</span>(x), <span class="built_in">g</span>(y), <span class="built_in">b</span>(z), <span class="built_in">a</span>(w) &#123;&#125;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">int</span> p1, p2, p3, p4;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>, &amp;p1, &amp;p2, &amp;p3, &amp;p4);</span><br><span class="line">            r = p1, g = p2, b = p3, a = p4;</span><br><span class="line">        &#125;</span><br><span class="line">        Pixel <span class="keyword">operator</span>-(<span class="keyword">const</span> Pixel &amp;x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r-x.r, g-x.g, b-x.b, a-x.a);</span><br><span class="line">    	&#125;</span><br><span class="line">    	Pixel <span class="keyword">operator</span>+(<span class="keyword">const</span> Pixel &amp;x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r+x.r, g+x.g, b+x.b, a+x.a);</span><br><span class="line">    	&#125;</span><br><span class="line">    	Pixel <span class="keyword">operator</span>*(<span class="keyword">const</span> <span class="keyword">long</span> <span class="keyword">double</span> x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r*x, g*x, b*x, a*x);</span><br><span class="line">    	&#125;</span><br><span class="line">        Pixel <span class="keyword">operator</span>/(<span class="keyword">const</span> <span class="keyword">long</span> <span class="keyword">double</span> x) <span class="keyword">const</span> &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="built_in">Pixel</span>(r/x, g/x, b/x, a/x);</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    		<span class="keyword">double</span> p1 = r, p2 = g, p3 = b, p4 = a;</span><br><span class="line">    		<span class="built_in">printf</span>(<span class="string">&quot;%.0lf %.0lf %.0lf %.0lf&quot;</span>, p1 + eps, p2 + eps, p3 + eps, p4 + eps);</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">int</span> W, H;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">512</span>;</span><br><span class="line">    Pixel data[MAXN][MAXN], tmp[MAXN][MAXN];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;W, &amp;H);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++)</span><br><span class="line">                data[i][j].<span class="built_in">read</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">isValid</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x &gt;= <span class="number">0</span> &amp;&amp; y &gt;= <span class="number">0</span> &amp;&amp; x &lt; H &amp;&amp; y &lt; W;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">long</span> <span class="keyword">double</span> SX, <span class="keyword">long</span> <span class="keyword">double</span> SY, <span class="keyword">int</span> trans = <span class="number">0</span>)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (trans != <span class="number">0</span> &amp;&amp; trans != <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> ;			</span><br><span class="line">        <span class="keyword">int</span> rW = (<span class="keyword">int</span>) <span class="built_in">round</span>(SX * W);</span><br><span class="line">        <span class="keyword">int</span> rH = (<span class="keyword">int</span>) <span class="built_in">round</span>(SY * H);</span><br><span class="line">        <span class="keyword">if</span> (rW &gt; <span class="number">256</span> || rH &gt; <span class="number">256</span> || rW &lt;= <span class="number">0</span> || rH &lt;= <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; rH; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; rW; j++) &#123;</span><br><span class="line">                <span class="keyword">long</span> <span class="keyword">double</span> x = i / SY;</span><br><span class="line">                <span class="keyword">long</span> <span class="keyword">double</span> y = j / SX;</span><br><span class="line">                <span class="keyword">int</span> lx, rx, ly, ry;</span><br><span class="line">                lx = <span class="built_in">floor</span>(x), rx = <span class="built_in">ceil</span>(x);</span><br><span class="line">                ly = <span class="built_in">floor</span>(y), ry = <span class="built_in">ceil</span>(y);</span><br><span class="line">                </span><br><span class="line">                Pixel v[] = &#123;data[lx][ly], data[lx][ry], data[rx][ly], data[rx][ry]&#125;;</span><br><span class="line">                <span class="keyword">int</span> px[] = &#123;lx, lx, rx, rx&#125;;</span><br><span class="line">                <span class="keyword">int</span> py[] = &#123;ly, ry, ly, ry&#125;;</span><br><span class="line">                <span class="keyword">if</span> (trans == <span class="number">0</span>) &#123;</span><br><span class="line">                    Pixel t1, t2;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="built_in">isValid</span>(px[<span class="number">0</span>], py[<span class="number">0</span>]) &amp;&amp; <span class="built_in">isValid</span>(px[<span class="number">1</span>], py[<span class="number">1</span>]) &amp;&amp; <span class="built_in">isValid</span>(px[<span class="number">2</span>], py[<span class="number">2</span>]) &amp;&amp; <span class="built_in">isValid</span>(px[<span class="number">3</span>], py[<span class="number">3</span>])) &#123;</span><br><span class="line">                        <span class="keyword">long</span> <span class="keyword">double</span> a = x - lx, b = y - ly;</span><br><span class="line">                        tmp[i][j] = v[<span class="number">0</span>] * (<span class="number">1</span> - a) * (<span class="number">1</span> - b) + v[<span class="number">2</span>] * a * (<span class="number">1</span> - b)</span><br><span class="line">                                    + v[<span class="number">1</span>] * (<span class="number">1</span> - a) * b + v[<span class="number">3</span>] * a * b;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">isValid</span>(px[<span class="number">0</span>], py[<span class="number">0</span>]) &amp;&amp; <span class="built_in">isValid</span>(px[<span class="number">2</span>], py[<span class="number">2</span>])) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (rx != lx)</span><br><span class="line">                            tmp[i][j] = v[<span class="number">0</span>] + (v[<span class="number">2</span>] - v[<span class="number">0</span>]) * ((x - lx) / (rx - lx));</span><br><span class="line">                        <span class="keyword">else</span></span><br><span class="line">                            tmp[i][j] = v[<span class="number">0</span>];</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">isValid</span>(px[<span class="number">0</span>], py[<span class="number">0</span>]) &amp;&amp; <span class="built_in">isValid</span>(px[<span class="number">1</span>], py[<span class="number">1</span>])) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (ry != ly)</span><br><span class="line">                            tmp[i][j] = v[<span class="number">0</span>] + (v[<span class="number">1</span>] - v[<span class="number">0</span>]) * ((y - ly) / (ry - ly));</span><br><span class="line">                        <span class="keyword">else</span></span><br><span class="line">                            tmp[i][j] = v[<span class="number">0</span>];</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">isValid</span>(px[<span class="number">0</span>], py[<span class="number">0</span>])) &#123;</span><br><span class="line">                        tmp[i][j] = v[<span class="number">0</span>];</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="built_in">puts</span>(<span class="string">&quot;WTF&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">int</span> c = <span class="number">-1</span>;</span><br><span class="line">                    <span class="keyword">double</span> mndist;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (!<span class="built_in">isValid</span>(px[k], py[k]))</span><br><span class="line">                            <span class="keyword">continue</span>;</span><br><span class="line">                        <span class="keyword">double</span> d = (x-px[k])*(x-px[k])+(y-py[k])*(y-py[k]);</span><br><span class="line">                        <span class="keyword">if</span> (c == <span class="number">-1</span> || mndist &gt; d)</span><br><span class="line">                            c = k, mndist = d;</span><br><span class="line">                    &#125;</span><br><span class="line">                    tmp[i][j] = data[px[c]][py[c]];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        W = rW, H = rH;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++)</span><br><span class="line">                data[i][j] = tmp[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, W, H);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; H; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; j++)</span><br><span class="line">                data[i][j].<span class="built_in">print</span>(), <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, j == W<span class="number">-1</span> ? <span class="string">&#x27;\n&#x27;</span> : <span class="string">&#x27; &#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; test;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> X, Y;</span><br><span class="line">    <span class="keyword">int</span> TYPE;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lf %lf %d&quot;</span>, &amp;X, &amp;Y, &amp;TYPE);</span><br><span class="line">    test.<span class="built_in">read</span>();</span><br><span class="line">    test.<span class="built_in">resize</span>(X, Y, TYPE);</span><br><span class="line">    test.<span class="built_in">print</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-zj-b423" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/07/zj-b423/" class="article-date">
  <time datetime="2015-07-06T23:18:35.000Z" itemprop="datePublished">2015-07-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/07/zj-b423/">b423. 魔術橡皮擦</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/07/07/zj-b423/" data-id="ckpaivca300aun8vn7m5j8xfg" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/07/07/zj-b423/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/影像處理/">影像處理</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>提供影像去背、相鄰去色兩種方案。</p>
<ul>
<li>去背對整張影像找像素差小於某一個範圍內，就將其 alpha 值設成 0。</li>
<li>相鄰去色對鄰近四個方向上下左右進行搜索，將像素差低於某個閥值的都加入到集合中進行 alpha 值設成 0。</li>
</ul>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0 0 0 0</span><br><span class="line">3 2</span><br><span class="line">1 2 3 255 4 5 6 255 7 8 9 255</span><br><span class="line">10 11 12 255 13 14 15 255 16 17 18 255</span><br></pre></td></tr></table></figure>

<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3 2</span><br><span class="line">1 2 3 0 4 5 6 255 7 8 9 255</span><br><span class="line">10 11 12 255 13 14 15 255 16 17 18 255</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">int</span> X, Y, TYPE, DIFF;</span><br><span class="line"><span class="keyword">namespace</span> Image &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">256</span>;</span><br><span class="line">    <span class="keyword">int</span> n, m, rgba[MAXN][MAXN][<span class="number">4</span>], used[MAXN][MAXN] = &#123;&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">RGB_diff</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (rgba[x][y][<span class="number">0</span>]-rgba[a][b][<span class="number">0</span>])*(rgba[x][y][<span class="number">0</span>]-rgba[a][b][<span class="number">0</span>])+</span><br><span class="line">                (rgba[x][y][<span class="number">1</span>]-rgba[a][b][<span class="number">1</span>])*(rgba[x][y][<span class="number">1</span>]-rgba[a][b][<span class="number">1</span>])+</span><br><span class="line">                (rgba[x][y][<span class="number">2</span>]-rgba[a][b][<span class="number">2</span>])*(rgba[x][y][<span class="number">2</span>]-rgba[a][b][<span class="number">2</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">gTransparent</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">long</span> <span class="keyword">long</span> diff)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span> || y &lt; <span class="number">0</span> || x &gt;= m || y &gt;= n || diff &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        diff = diff * diff;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">RGB_diff</span>(x, y, i, j) &lt;= diff)</span><br><span class="line">                    rgba[i][j][<span class="number">3</span>] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">lTransparent</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> ox, <span class="keyword">int</span> oy, <span class="keyword">long</span> <span class="keyword">long</span> diff)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (ox &lt; <span class="number">0</span> || oy &lt; <span class="number">0</span> || ox &gt;= m || oy &gt;= n || diff &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> dx[] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> dy[] = &#123;<span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span> || y &lt; <span class="number">0</span> || x &gt;= m || y &gt;= n)</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">RGB_diff</span>(x, y, ox, oy) &gt; diff * diff || used[x][y])</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        rgba[x][y][<span class="number">3</span>] = <span class="number">0</span>, used[x][y] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">            <span class="built_in">lTransparent</span>(x+dx[i], y+dy[i], ox, oy, diff);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, n, m);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d %d %d %d%c&quot;</span>, rgba[i][j][<span class="number">0</span>], rgba[i][j][<span class="number">1</span>], rgba[i][j][<span class="number">2</span>], rgba[i][j][<span class="number">3</span>], j == n<span class="number">-1</span> ? <span class="string">&#x27;\n&#x27;</span> : <span class="string">&#x27; &#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>, &amp;X, &amp;Y, &amp;TYPE, &amp;DIFF);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;Image::n, &amp;Image::m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; Image::m; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; Image::n; j++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++)</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;Image::rgba[i][j][k]);</span><br><span class="line">    <span class="built_in">swap</span>(X, Y);</span><br><span class="line">    <span class="keyword">if</span> (TYPE == <span class="number">0</span>)</span><br><span class="line">        Image::<span class="built_in">gTransparent</span>(X, Y, DIFF);</span><br><span class="line">    <span class="keyword">if</span> (TYPE == <span class="number">1</span>)</span><br><span class="line">        Image::<span class="built_in">lTransparent</span>(X, Y, X, Y, DIFF);</span><br><span class="line">    Image::<span class="built_in">print</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/categories/解題區/解題區-Zerojudge/page/4/">&laquo; Prev</a><a class="page-number" href="/categories/解題區/解題區-Zerojudge/">1</a><span class="space">&hellip;</span><a class="page-number" href="/categories/解題區/解題區-Zerojudge/page/3/">3</a><a class="page-number" href="/categories/解題區/解題區-Zerojudge/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/categories/解題區/解題區-Zerojudge/page/6/">6</a><a class="page-number" href="/categories/解題區/解題區-Zerojudge/page/7/">7</a><a class="page-number" href="/categories/解題區/解題區-Zerojudge/page/8/">8</a><a class="extend next" rel="next" href="/categories/解題區/解題區-Zerojudge/page/6/">Next &raquo;</a>
    </nav>
  
</section>
          
          
            <aside id="sidebar">
  <!-- <div id="ukagaka_panel"></div> -->
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/">學校課程</a><span class="category-list-count">115</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/介面設計/">介面設計</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/作業系統/">作業系統</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/即時系統/">即時系統</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/大學專題/">大學專題</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/巨量資料/">巨量資料</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/平行程式/">平行程式</a><span class="category-list-count">43</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/敏捷方法/">敏捷方法</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/數位影像生成/">數位影像生成</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/編譯器/">編譯器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/自然語言/">自然語言</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/虛擬實境/">虛擬實境</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算型智慧/">計算型智慧</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算幾何/">計算幾何</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算機圖學/">計算機圖學</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資料庫系統/">資料庫系統</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資訊安全/">資訊安全</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/通識課程/">通識課程</a><span class="category-list-count">14</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/">工作應用</a><span class="category-list-count">30</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/Java/">Java</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/Meme/">Meme</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/可持久化/">可持久化</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/鬼故事/">鬼故事</a><span class="category-list-count">9</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/手札日記/">手札日記</a><span class="category-list-count">44</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/">網頁設計</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/About-This-Blog/">About This Blog</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/HTML5/">HTML5</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/JQuery/">JQuery</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/Markdown/">Markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/NodeJs/">NodeJs</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/">解題區</a><span class="category-list-count">633</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/Latex/">Latex</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/出題解題/">出題解題</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-POJ/">解題區 - POJ</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a><span class="category-list-count">483</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a><span class="category-list-count">77</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-其他題目/">解題區 - 其他題目</a><span class="category-list-count">45</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-未解題目/">解題區 - 未解題目</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/雜言筆記/">雜言筆記</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a class="text" href="/2021/05/30/java/java-memory-optimization-1/">
              
                <i class="icon-file-o"></i> 
              
            Java 優化內存使用 結構篇</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/diary-202101/">
              
                <i class="icon-file-o"></i> 
              
            二八進展</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-file-extension/">
              
                <i class="icon-file-o"></i> 
              
            File Extension</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-globl-var/">
              
                <i class="icon-file-o"></i> 
              
            Global Variable</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-handover/">
              
                <i class="icon-file-o"></i> 
              
            Handover</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-interview-recursion/">
              
                <i class="icon-file-o"></i> 
              
            Interview &amp; Recursion</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-job-build/">
              
                <i class="icon-file-o"></i> 
              
            Job Build</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-lang/">
              
                <i class="icon-file-o"></i> 
              
            Programming Language Impostors</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-machine-learning-newbie/">
              
                <i class="icon-file-o"></i> 
              
            Machine Learning for Newbie</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-parallel-gc/">
              
                <i class="icon-file-o"></i> 
              
            Parallel &amp; Garbage Collection</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget-wrap">
    <h3 class="widget-title">Links</h3>
    <div class="widget">   
      	<ul>
	      <li><a href="http://mypaper.pchome.com.tw/zerojudge" target="_blank" title="Old Blog"><i class="icon-star"></i> Morris' Blog (pchome)</a></li>
	      <li><a href="http://flere114.blogspot.tw/" target="_blank" title="蘿莉勿觸"><i class="icon-googles"></i> flere's Blog</a></li>
	      <li><a href="http://dreamoon4.blogspot.tw/" target="_blank" title="夢月"><i class="icon-googles"></i> dreamoon's Blog</a></li>
	      <li><a href="http://m80126colin.github.io" target="_blank" title="許胖們"><i class="icon-github-alt"></i> m80126colin's Blog</a></li>
	      <li><a href="http://sd12582000.blogspot.tw/" target="_blank" title="妮可妮可"><i class="icon-github-alt"></i> Nico's Blog</a></li>
	      <li><a href="http://kuoe0.logdown.com/" target="_blank" title="郭至軒大神"><i class="icon-github-alt"></i> KuoE0's Dots</a></li>
	      <li><a href="http://tyan.io/" title=""><i class="icon-github-alt"></i> Tyan Blog</a></li>
    	</ul>
    </div>
</div>

  
    
<script src="/js/jquery-ui.js"></script>
<script src="/js/ukagaka/jquery.morris.ukagaka.resource.js"></script>
<script src="/js/ukagaka/typed.js"></script>
<script type="text/javascript">
  $('#ukagaka_panel').ukagaka();
</script>
  
  
</aside>
          
        
      </div>
      <footer id="footer">
  
  <div class="outer">    
    <div class="social-group">
      
      <a href="https://github.com/morris821028" target="_blank" title="github"><i class="icon-github"></i></a>
      
      
      <a href="https://www.facebook.com/Morris1028" target="_blank" title="facebook"><i class="icon-facebook-sign"></i></a>
      
      
      <a href="http://uhunt.felix-halim.net/id/46705" target="_blank" title="uhunt" ><span class="icon-uhunt">UVa<span></a>
      
    </div>
    <div id="footer-info" class="inner">
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and Theme by <a href="https://github.com/morris821028/hexo-theme-landscape" target="_blank" title="landscape">landscape</a> &copy; 2021 Shiang-Yun Yang 
    </div>
  </div>
</footer>


    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link"><i class=icon-home ></i>&nbsp&nbspHome</a>
  
    <a href="/about" class="mobile-nav-link"><i class=icon-user ></i>&nbsp&nbspAbout</a>
  
    <a href="/archives" class="mobile-nav-link"><i class=icon-archive ></i>&nbsp&nbspArchives</a>
  
    <a href="/tags" class="mobile-nav-link"><i class=icon-tags ></i>&nbsp&nbspTags</a>
  
    <a href="/picture" class="mobile-nav-link"><i class=icon-camera ></i>&nbsp&nbspPictures</a>
  
    <a href="/works" class="mobile-nav-link"><i class=icon-trophy ></i>&nbsp&nbspWorks</a>
  
</nav>
    
<script>
  var disqus_shortname = 'morris1028';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/jquery.lazyload.js"></script>
<script src="/js/jquery.als-1.6.js"></script>

<script src="/js/script.js"></script>

  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>