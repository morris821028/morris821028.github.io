<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Category: 解題區 | Morris&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Morris&#39; Blog">
<meta property="og:url" content="http://morris821028.github.io/categories/解題區/page/61/index.html">
<meta property="og:site_name" content="Morris&#39; Blog">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Morris&#39; Blog">
<link rel="publisher" href="108158678174364350000">
  
    <link rel="alternative" href="/atom.xml" title="Morris&#39; Blog" type="application/atom+xml">
  
  
    <meta name="google-site-verification" content="5mRgj8NanEMpGZuNfHNJNmH90RgNlrnJXsFlTaKD6Gs" />
  
  
    <link rel="shortcut icon" href="/img/f.ico">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <script src="/js/jquery-2.1.0.min.js"></script>
  <link rel="stylesheet" href="/css/style.css">
  
  <link rel="stylesheet" href="http://cdn.oesmith.co.uk/morris-0.5.1.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="http://cdn.oesmith.co.uk/morris-0.5.1.min.js"></script>
  <link rel="import" href="/bower_components/app-layout/app-layout.html"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"><div id="banner-right"></div></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Morris&#39; Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          
            <a class="main-nav-link" href="/"><i class=icon-home title='Home'></i></a>
          
        
          
            <a class="main-nav-link" href="/about"><i class=icon-user title='About'></i></a>
          
        
          
            <a class="main-nav-link" href="/archives"><i class=icon-archive title='Archives'></i></a>
          
        
          
            <a class="main-nav-link" href="/tags"><i class=icon-tags title='Tags'></i></a>
          
        
          
            <a class="main-nav-link" href="/picture"><i class=icon-camera title='Pictures'></i></a>
          
        
          
            <a class="main-nav-link" href="/works"><i class=icon-trophy title='Works'></i></a>
          
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://morris821028.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        
          
          <section id="main">
  
    <article id="post-oj/uva/uva-172" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/28/oj/uva/uva-172/" class="article-date">
  <time datetime="2014-05-27T23:33:52.000Z" itemprop="datePublished">2014-05-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/28/oj/uva/uva-172/">UVa 172 - Calculator Language</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/28/oj/uva/uva-172/" data-id="ckpaivccu00lxn8vn1g0g5xt3" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/28/oj/uva/uva-172/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/parsing-tree/">parsing tree</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/stack/">stack</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p> Calculator Language (CL) supports assignment, positive and negative integers and simple arithmetic. The allowable characters in a CL statement are thus:</p>
<p><img src="/img/172img1.gif"></p>
<p>All operators have the same precedence and are right associative, thus 15 - 8 - 3 = 15 - (8 - 3) = 10. As one would expect, brackets will force the expression within them to be evaluated first. Brackets may be nested arbitrarily deeply. An expression never has two operators next to each other (even if separated by a bracket), an assignment operator is always immediately preceded by a variable and the leftmost operator on a line is always an assignment. For readability, spaces may be freely inserted into an expression, except between a negative sign and a number. A negative sign will not appear before a variable. All variables are initialised to zero (0) and retain their values until changed explicitly.</p>
<p>Write a program that will accept and evaluate expressions written in this language. Each expression occupies one line and contains at least one assignment operator, and maybe more.</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>Input will consist of a series of lines, each line containing a correct CL expression. No line will be longer than 100 characters. The file will be terminated by a line consisting of a single #.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>Output will consist of a series of lines, one for each line of the input. Each line will consist of a list of the final values of all variables whose value changes as a result of the evaluation of that expression. If more than one variable changes value, they should be listed in alphabetical order, separated by commas. If a variable changes value more than once in an expression, only the final value is output. A variable is said to change value if its value after the expression has been evaluated is different from its value before the expression was evaluated. If no variables change value, then print the message `No Change’. Follow the format shown below exactly.</p>
<h2 id="Sample-input"><a href="#Sample-input" class="headerlink" title="Sample input"></a>Sample input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">A = B = 4</span><br><span class="line">C = (D = 2)*_2</span><br><span class="line">C = D = 2 * _2</span><br><span class="line">F = C - D</span><br><span class="line">E = D * _10</span><br><span class="line">Z = 10 / 3</span><br><span class="line">#</span><br></pre></td></tr></table></figure>
<h2 id="Sample-output"><a href="#Sample-output" class="headerlink" title="Sample output"></a>Sample output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">A = 4, B = 4</span><br><span class="line">C = -4, D = 2</span><br><span class="line">D = -4</span><br><span class="line">No Change</span><br><span class="line">E = 40</span><br><span class="line">Z = 3</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>** 題目描述：**</p>
<p>給一個六則運算，並且所有運算由右往左，也就是題目提及的 <code>right associative</code>，並且在每一個運算式之後輸出有改變值的變數結果。</p>
<p>** 題目解法：**</p>
<p>要處理的問題相當多，按照一般的思路要做出 <code>right associative</code> 還不打緊，就像冪次的定義一樣，也就是把 stack 的嚴格遞增改成非嚴格遞增。</p>
<p>但是查閱討論區給定的數據後，如下所示</p>
<p>範例輸入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">B=(A=1)+(A=2)</span><br><span class="line">#</span><br></pre></td></tr></table></figure>
<p>範例輸出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A = 1, B = 3</span><br></pre></td></tr></table></figure>

<p>這表示著連括弧運算順序都是 <code>right associative</code>，這一點相當苦惱，於是最後建造 tree，然後先拜訪右子樹、再拜訪左子樹來解決這些問題。</p>
<p>中間誤把 <code>No Change</code> 寫成 <code>No change</code>，因此卡了不少 <code>Wrong Answer</code>。</p>
<p>Sample Input:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">A = B = 4</span><br><span class="line">B=B-6+B=100</span><br><span class="line">C = (D = 2) * _2</span><br><span class="line">C = D = 2 * _2</span><br><span class="line">E = D * _10</span><br><span class="line">F = 15 - 8 - 3</span><br><span class="line">F = 15 - 8 + _3</span><br><span class="line">F=1+F=F-1</span><br><span class="line">A=((3))</span><br><span class="line">Z=Y=X=A=B=C=1+D=E=F=G=2-H=K=J=I=L=M=O=N=P=Q=R=S=T=V=U=W=3</span><br><span class="line">A=100/2</span><br><span class="line">A=100/_2</span><br><span class="line">B=(_1+A*2)/2</span><br><span class="line">B=(1+A*_2)/2</span><br><span class="line">A=(((1-2)*3)+4)</span><br><span class="line">A=((1-(2*3))+4)</span><br><span class="line">A=((1-2)*(3+4))</span><br><span class="line">A=(1-(2*(3+4)))</span><br><span class="line">A=1+2+1+1+1+1+1+1+1+1+1+1+1+1+1+11+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+3</span><br><span class="line"># </span><br></pre></td></tr></table></figure>
<p>AC Sample Output:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">A = 4, B = 4</span><br><span class="line">B = -6</span><br><span class="line">C = -4, D = 2</span><br><span class="line">D = -4</span><br><span class="line">E = 40</span><br><span class="line">F = 10</span><br><span class="line">No Change</span><br><span class="line">No Change</span><br><span class="line">A = 3</span><br><span class="line">A = 0, B = 0, C = 0, D = -1, E = -1, F = -1, G = -1, H = 3, I = 3, J = 3, K = 3, L = 3, M = 3, N = 3, O = 3, P = 3, Q = 3, R = 3, S = 3, T = 3, U = 3, V = 3, W = 3</span><br><span class="line">A = 50</span><br><span class="line">A = -50</span><br><span class="line">B = -50</span><br><span class="line">B = 50</span><br><span class="line">A = 1</span><br><span class="line">A = -1</span><br><span class="line">A = -7</span><br><span class="line">A = -13</span><br><span class="line">A = 62 </span><br></pre></td></tr></table></figure>
<p>一開始還在想為什麼當 <code>B = 4</code> 時，<code>B=B-6+B=100</code> 會產出 <code>B = -6</code>，由右往左運算。</p>
<ul>
<li>B = 100</li>
<li>6 + B = 106</li>
<li>B - (6 + B) = 100 - 106 = -6</li>
<li>B assign(=) -6</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Accepted</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">priority_op</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span>(c) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;(&#x27;</span>:<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;=&#x27;</span>:<span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>: <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>: <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>:<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;ERROR&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">trans</span><span class="params">(<span class="keyword">char</span> infix[], <span class="keyword">char</span> buffer[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(infix);</span><br><span class="line">    <span class="keyword">char</span> *ptr = buffer;</span><br><span class="line">    stack&lt;<span class="keyword">char</span>&gt; op;</span><br><span class="line">    *ptr = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(infix[i] == <span class="string">&#x27;_&#x27;</span> || <span class="built_in">isdigit</span>(infix[i]) || <span class="built_in">isalpha</span>(infix[i])) &#123;</span><br><span class="line">        	<span class="keyword">while</span>(infix[i] == <span class="string">&#x27;_&#x27;</span> || <span class="built_in">isdigit</span>(infix[i]) || <span class="built_in">isalpha</span>(infix[i])) &#123;</span><br><span class="line">        		<span class="keyword">if</span>(infix[i] == <span class="string">&#x27;_&#x27;</span>)</span><br><span class="line">        			<span class="built_in">sprintf</span>(ptr, <span class="string">&quot;-&quot;</span>);</span><br><span class="line">        		<span class="keyword">else</span></span><br><span class="line">            		<span class="built_in">sprintf</span>(ptr, <span class="string">&quot;%c&quot;</span>, infix[i]);	</span><br><span class="line">            	<span class="keyword">while</span>(*ptr)    ptr++;</span><br><span class="line">            	i++;</span><br><span class="line">        	&#125;</span><br><span class="line">            <span class="built_in">sprintf</span>(ptr, <span class="string">&quot; &quot;</span>);	</span><br><span class="line">            <span class="keyword">while</span>(*ptr)    ptr++;</span><br><span class="line">        	i--;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        	<span class="keyword">if</span>(infix[i] == <span class="string">&#x27; &#x27;</span>)	<span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(infix[i] == <span class="string">&#x27;)&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">while</span>(!op.<span class="built_in">empty</span>() &amp;&amp; op.<span class="built_in">top</span>() != <span class="string">&#x27;(&#x27;</span>) &#123;</span><br><span class="line">                    <span class="built_in">sprintf</span>(ptr, <span class="string">&quot;%c &quot;</span>, op.<span class="built_in">top</span>()), op.<span class="built_in">pop</span>();</span><br><span class="line">                    <span class="keyword">while</span>(*ptr) ptr++;</span><br><span class="line">                &#125;</span><br><span class="line">                op.<span class="built_in">pop</span>();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(infix[i] != <span class="string">&#x27;(&#x27;</span>) &#123;</span><br><span class="line">                	<span class="keyword">if</span>(infix[i] == <span class="string">&#x27;=&#x27;</span>) &#123;</span><br><span class="line">                		<span class="keyword">while</span>(!op.<span class="built_in">empty</span>() &amp;&amp; <span class="built_in">priority_op</span>(op.<span class="built_in">top</span>()) &gt; <span class="built_in">priority_op</span>(infix[i])) &#123;</span><br><span class="line">                    		<span class="built_in">sprintf</span>(ptr, <span class="string">&quot;%c &quot;</span>, op.<span class="built_in">top</span>()), op.<span class="built_in">pop</span>();</span><br><span class="line">                    		<span class="keyword">while</span>(*ptr) ptr++;</span><br><span class="line">                		&#125;</span><br><span class="line">                	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                		<span class="keyword">while</span>(!op.<span class="built_in">empty</span>() &amp;&amp; <span class="built_in">priority_op</span>(op.<span class="built_in">top</span>()) &gt; <span class="built_in">priority_op</span>(infix[i]) &amp;&amp; op.<span class="built_in">top</span>() != <span class="string">&#x27;=&#x27;</span>) &#123;</span><br><span class="line">                    		<span class="built_in">sprintf</span>(ptr, <span class="string">&quot;%c &quot;</span>, op.<span class="built_in">top</span>()), op.<span class="built_in">pop</span>();</span><br><span class="line">                    		<span class="keyword">while</span>(*ptr) ptr++;</span><br><span class="line">                		&#125;</span><br><span class="line">                	&#125;</span><br><span class="line">                &#125;</span><br><span class="line">                op.<span class="built_in">push</span>(infix[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!op.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="built_in">sprintf</span>(ptr, <span class="string">&quot;%c &quot;</span>, op.<span class="built_in">top</span>()), op.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">while</span>(*ptr) ptr++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> Variable[<span class="number">26</span>] = &#123;&#125;, oldVal[<span class="number">26</span>] = &#123;&#125;;</span><br><span class="line"><span class="function">string <span class="title">to_string</span><span class="params">(<span class="keyword">int</span> number)</span> </span>&#123;</span><br><span class="line">   stringstream ss;<span class="comment">//create a stringstream</span></span><br><span class="line">   ss &lt;&lt; number;<span class="comment">//add number to the stream</span></span><br><span class="line">   <span class="keyword">return</span> ss.<span class="built_in">str</span>();<span class="comment">//return a string with the contents of the stream</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TreeNode</span> &#123;</span></span><br><span class="line">    string 	A, B, OP;</span><br><span class="line">    <span class="keyword">int</span> 	l, r;</span><br><span class="line">    <span class="built_in">TreeNode</span>(string a=<span class="string">&quot;&quot;</span>, string b=<span class="string">&quot;&quot;</span>, string op=<span class="string">&quot;&quot;</span>):</span><br><span class="line">        <span class="built_in">A</span>(a), <span class="built_in">B</span>(b), <span class="built_in">OP</span>(op) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">TreeNode node[<span class="number">1024</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">runTree</span><span class="params">(<span class="keyword">int</span> label)</span> </span>&#123;</span><br><span class="line">    string 	A = node[label].A;</span><br><span class="line">    string	B = node[label].B;</span><br><span class="line">    <span class="keyword">int</span> 	a, b;</span><br><span class="line">    <span class="keyword">if</span>(node[label].OP == <span class="string">&quot;LEAF&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">isalpha</span>(A[<span class="number">0</span>]))</span><br><span class="line">           	a = Variable[A[<span class="number">0</span>] - <span class="string">&#x27;A&#x27;</span>];</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">           	a = <span class="built_in">atoi</span>(A.<span class="built_in">c_str</span>());</span><br><span class="line">        <span class="keyword">return</span> a;	</span><br><span class="line">    &#125;</span><br><span class="line">    b = <span class="built_in">runTree</span>(node[label].r);</span><br><span class="line">    a = <span class="built_in">runTree</span>(node[label].l);</span><br><span class="line"><span class="comment">//	printf(&quot;%d %d\n&quot;, a, b);</span></span><br><span class="line">    <span class="comment">//cout &lt;&lt; A &lt;&lt; &quot;, &quot; &lt;&lt; B &lt;&lt; &quot;, &quot; &lt;&lt; node[label].OP &lt;&lt; endl;</span></span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span>(node[label].OP[<span class="number">0</span>]) &#123;</span><br><span class="line">    	<span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>: a = a + b; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>: a = a - b; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>: a = a * b; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>: a = a / b; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;=&#x27;</span>: </span><br><span class="line">        	a = b;</span><br><span class="line">        	<span class="keyword">if</span>(<span class="built_in">isalpha</span>(A[<span class="number">0</span>])) &#123;</span><br><span class="line">        		Variable[A[<span class="number">0</span>] - <span class="string">&#x27;A&#x27;</span>] = a;</span><br><span class="line">        		<span class="comment">//cout &lt;&lt; A &lt;&lt; &quot; -- &quot; &lt;&lt; a &lt;&lt; endl;</span></span><br><span class="line">        	&#125;</span><br><span class="line">        	<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">buildTree</span><span class="params">(<span class="keyword">char</span> postfix[])</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function">stringstream	<span class="title">sin</span><span class="params">(postfix)</span></span>;</span><br><span class="line">    string 			token, A, B;</span><br><span class="line">    stack&lt;string&gt;	stk;</span><br><span class="line">    stack&lt;<span class="keyword">int</span>&gt;		nodeLabel;</span><br><span class="line">    <span class="keyword">int</span> 			treeSize = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(sin &gt;&gt; token) &#123;</span><br><span class="line">    	<span class="keyword">if</span>(<span class="built_in">isalpha</span>(token[<span class="number">0</span>])) &#123;</span><br><span class="line">    		stk.<span class="built_in">push</span>(token);</span><br><span class="line">    		nodeLabel.<span class="built_in">push</span>(treeSize);</span><br><span class="line">    		node[treeSize++] = <span class="built_in">TreeNode</span>(token, <span class="string">&quot;&quot;</span>, <span class="string">&quot;LEAF&quot;</span>);</span><br><span class="line">    		</span><br><span class="line">    	&#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isdigit</span>(token[token.<span class="built_in">length</span>() - <span class="number">1</span>])) &#123;</span><br><span class="line">    		stk.<span class="built_in">push</span>(token);</span><br><span class="line">    		nodeLabel.<span class="built_in">push</span>(treeSize);</span><br><span class="line">    		node[treeSize++] = <span class="built_in">TreeNode</span>(token, <span class="string">&quot;&quot;</span>, <span class="string">&quot;LEAF&quot;</span>);</span><br><span class="line">    	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            B = stk.<span class="built_in">top</span>(), stk.<span class="built_in">pop</span>();</span><br><span class="line">            A = stk.<span class="built_in">top</span>(), stk.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">int</span> a, b;</span><br><span class="line">            b = nodeLabel.<span class="built_in">top</span>(), nodeLabel.<span class="built_in">pop</span>();</span><br><span class="line">            a = nodeLabel.<span class="built_in">top</span>(), nodeLabel.<span class="built_in">pop</span>();</span><br><span class="line">            nodeLabel.<span class="built_in">push</span>(treeSize);</span><br><span class="line">            node[treeSize] = <span class="built_in">TreeNode</span>(A, B, token);</span><br><span class="line">            node[treeSize].l = a, node[treeSize].r = b;</span><br><span class="line">            treeSize++;</span><br><span class="line">            stk.<span class="built_in">push</span>(<span class="string">&quot;INNER&quot;</span>);</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">runTree</span>(nodeLabel.<span class="built_in">top</span>());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">char</span> infix[<span class="number">262144</span>], postfix[<span class="number">262144</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">gets</span>(infix) &amp;&amp; infix[<span class="number">0</span>] != <span class="string">&#x27;#&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">trans</span>(infix, postfix);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++)</span><br><span class="line">        	oldVal[i] = Variable[i];</span><br><span class="line">        	</span><br><span class="line">        <span class="built_in">buildTree</span>(postfix);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</span><br><span class="line">        	<span class="keyword">if</span>(oldVal[i] != Variable[i]) &#123;</span><br><span class="line">        		<span class="keyword">if</span>(f)	<span class="built_in">printf</span>(<span class="string">&quot;, &quot;</span>);</span><br><span class="line">        		f = <span class="number">1</span>;</span><br><span class="line">        		<span class="built_in">printf</span>(<span class="string">&quot;%c = %d&quot;</span>, i + <span class="string">&#x27;A&#x27;</span>, Variable[i]);</span><br><span class="line">        	&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(f == <span class="number">0</span>)</span><br><span class="line">        	<span class="built_in">puts</span>(<span class="string">&quot;No Change&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        	<span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="comment">//printf(&quot;%s\n&quot;, postfix);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-177" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/27/oj/uva/uva-177/" class="article-date">
  <time datetime="2014-05-26T23:35:58.000Z" itemprop="datePublished">2014-05-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/27/oj/uva/uva-177/">UVa 177 - Paper Folding</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/27/oj/uva/uva-177/" data-id="ckpaivccu00lzn8vnb9a3g9w8" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/27/oj/uva/uva-177/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/遞迴/">遞迴</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>If a large sheet of paper is folded in half, then in half again, etc, with all the folds parallel, then opened up flat, there are a series of parallel creases, some pointing up and some down, dividing the paper into fractions of the original length. If the paper is only opened <code>half-way&#39;&#39; up, so every crease forms a 90 degree angle, then (viewed end-on) it forms a </code>dragon curve’’. For example, if four successive folds are made, then the following curve is seen (note that it does not cross itself, but two corners touch):</p>
<p><img src="/img/177img1.gif" alt="UVa 177"></p>
<p>Write a program to draw the curve which appears after N folds. The exact specification of the curve is as follows:</p>
<ul>
<li>The paper starts flat, with the ``start edge’’ on the left, looking at it from above.</li>
<li>The right half is folded over so it lies on top of the left half, then the right half of the new double sheet is folded on top of the left, to form a 4-thick sheet, and so on, for N folds.</li>
<li>Then every fold is opened from a 180 degree bend to a 90 degree bend.</li>
<li>Finally the bottom edge of the paper is viewed end-on to see the dragon curve. </li>
</ul>
<p>From this view, the only unchanged part of the original paper is the piece containing the <code>start edge</code>, and this piece will be horizontal, with the <code>start edge</code> on the left. This uniquely defines the curve. In the above picture, the <code>start edge</code> is the left end of the rightmost bottom horizontal piece (marked <code>s</code>). Horizontal pieces are to be displayed with the underscore character <code>_</code>, and vertical pieces with the <code>|</code> character.</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>Input will consist of a series of lines, each with a single number N (1 &lt;= N &lt;= 13). The end of the input will be marked by a line containing a zero.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>Output will consist of a series of dragon curves, one for each value of N in the input. Your picture must be shifted as far left, and as high as possible. Note that for large N, the picture will be greater than 80 characters wide, so it will look messy on the screen. The pattern for each different number of folds is terminated by a line containing a single `^’.</p>
<h2 id="Sample-input"><a href="#Sample-input" class="headerlink" title="Sample input"></a>Sample input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">4</span><br><span class="line">1</span><br><span class="line">0</span><br></pre></td></tr></table></figure>
<h2 id="Sample-output"><a href="#Sample-output" class="headerlink" title="Sample output"></a>Sample output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">|_</span><br><span class="line"> _|</span><br><span class="line">^</span><br><span class="line">   _   _</span><br><span class="line">  |_|_| |_</span><br><span class="line">   _|    _|</span><br><span class="line">|_|</span><br><span class="line">^</span><br><span class="line">_|</span><br><span class="line">^</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>** 題目描述：**</p>
<p>將一個長條紙水平擺放，接著將右手邊的紙摺疊到左上邊的紙上面，接著又再重複做幾次，直到 <code>N</code> 次 ( 若將其攤平則會有 2<sup>N</sup> 個折疊區塊 )。摺疊完後，依序將其攤開，攤開的方式為：將前一次摺疊的 (想像與 <code>s</code> 重疊的那一片) 從 180 度旋轉到 90 度位置，依序攤開 N 次。</p>
<p>** 題目解法：**</p>
<p>這一題就是題目理解麻煩點，但是不難發現肯定是有遞迴需要處理的。</p>
<p>假設我們定義展開的每一根，分別為往上下左右的射線，會發現其對應關係，新的尾會跟舊的頭對照，依序對照到中間部分。</p>
<p>最後得到關係</p>
<ul>
<li>上 變成 左</li>
<li>下 變成 右</li>
<li>左 變成 下</li>
<li>右 變成 上</li>
</ul>
<p>輸出處理方面，利用一個 map 結構去完成。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">map&lt;<span class="keyword">int</span>, set&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; &gt; P;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> A[<span class="number">1</span>&lt;&lt;<span class="number">15</span>];</span><br><span class="line">    <span class="comment">// 0 up, 1 down, 2 left, 3 right</span></span><br><span class="line">    <span class="keyword">int</span> trans[] = &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> m = <span class="number">1</span>;</span><br><span class="line">    A[<span class="number">0</span>] = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = m - <span class="number">1</span>, k = m; j &gt;= <span class="number">0</span>; j--, k++)</span><br><span class="line">            A[k] = trans[A[j]];</span><br><span class="line">        m = m &lt;&lt; <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">-1</span>, y = <span class="number">0</span>, px = <span class="number">0</span>, py = <span class="number">0</span>;</span><br><span class="line">    P.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(A[i] == <span class="number">0</span>)		x = px&lt;&lt;<span class="number">1</span>, y = py;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(A[i] == <span class="number">1</span>)	x = px&lt;&lt;<span class="number">1</span>, y = py - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(A[i] == <span class="number">2</span>)	x = (px&lt;&lt;<span class="number">1</span>)<span class="number">-1</span>, y = py;</span><br><span class="line">        <span class="keyword">else</span>				x = (px&lt;&lt;<span class="number">1</span>)+<span class="number">1</span>, y = py;</span><br><span class="line">        <span class="comment">//printf(&quot;%d %d %d - %d %d\n&quot;, px, py, A[i], x, y);</span></span><br><span class="line">        <span class="keyword">if</span>(A[i] == <span class="number">0</span>) &#123;</span><br><span class="line">            P[y].<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(x, <span class="number">0</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(A[i] == <span class="number">1</span>) &#123;</span><br><span class="line">            P[y].<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(x, <span class="number">1</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(A[i] == <span class="number">2</span>) &#123;</span><br><span class="line">            P[y].<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(x, <span class="number">2</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            P[y].<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(x, <span class="number">3</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(A[i] == <span class="number">0</span>)		py++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(A[i] == <span class="number">1</span>)	py--;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(A[i] == <span class="number">2</span>)	px--;</span><br><span class="line">        <span class="keyword">else</span>				px++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> n; <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n) == <span class="number">1</span> &amp;&amp; n; ) &#123;</span><br><span class="line">        <span class="built_in">build</span>(n);</span><br><span class="line">        <span class="keyword">int</span> mxy = <span class="number">-0x3f3f3f3f</span>, mnx = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">        <span class="keyword">for</span>(map&lt;<span class="keyword">int</span>, set&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; &gt;::iterator it = P.<span class="built_in">begin</span>();</span><br><span class="line">        it != P.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">            mxy = <span class="built_in">max</span>(mxy, it-&gt;first);</span><br><span class="line">            <span class="keyword">for</span>(set&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt;::iterator jt = it-&gt;second.<span class="built_in">begin</span>();</span><br><span class="line">                jt != it-&gt;second.<span class="built_in">end</span>(); jt++) &#123;</span><br><span class="line">                mnx = <span class="built_in">min</span>(mnx, jt-&gt;first);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(map&lt;<span class="keyword">int</span>, set&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; &gt;::reverse_iterator it = P.<span class="built_in">rbegin</span>();</span><br><span class="line">        it != P.<span class="built_in">rend</span>(); it++) &#123;</span><br><span class="line">            <span class="keyword">int</span> i = mnx;</span><br><span class="line">            <span class="keyword">for</span>(set&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt;::iterator jt = it-&gt;second.<span class="built_in">begin</span>();</span><br><span class="line">                jt != it-&gt;second.<span class="built_in">end</span>(); jt++) &#123;</span><br><span class="line">                <span class="keyword">while</span>(i &lt; jt-&gt;first)	<span class="built_in">putchar</span>(<span class="string">&#x27; &#x27;</span>), i++;</span><br><span class="line">                i++;</span><br><span class="line">                <span class="keyword">if</span>(jt-&gt;second == <span class="number">0</span> || jt-&gt;second == <span class="number">1</span>)</span><br><span class="line">                    <span class="built_in">putchar</span>(<span class="string">&#x27;|&#x27;</span>);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="built_in">putchar</span>(<span class="string">&#x27;_&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//printf(&quot;%d %d\n&quot;, mxy, mnx);</span></span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;^&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-132" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/26/oj/uva/uva-132/" class="article-date">
  <time datetime="2014-05-25T22:59:01.000Z" itemprop="datePublished">2014-05-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/26/oj/uva/uva-132/">UVa 132 - Bumpy Objects</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/26/oj/uva/uva-132/" data-id="ckpaivccn00l3n8vn3wyogoiw" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/26/oj/uva/uva-132/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/凸包/">凸包</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/幾何/">幾何</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p><img src="/img/132img1.gif" alt="132img1"></p>
<p>Consider objects such as these. They are polygons, specified by the coordinates of a centre of mass and their vertices. In the figure, centres of mass are shown as black squares. The vertices will be numbered consecutively anti-clockwise as shown.</p>
<p>An object can be rotated to stand stably if two vertices can be found that can be joined by a straight line that does not intersect the object, and, when this line is horizontal, the centre of mass lies above the line and strictly between its endpoints. There are typically many stable positions and each is defined by one of these lines known as its base line. A base line, and its associated stable position, is identified by the highest numbered vertex touched by that line.</p>
<p>Write a program that will determine the stable position that has the lowest numbered base line. Thus for the above objects, the desired base lines would be 6 for object 1, 6 for object 2 and 2 for the square. You may assume that the objects are possible, that is they will be represented as non self-intersecting polygons, although they may well be concave.</p>
<h2 id="Input-and-Output"><a href="#Input-and-Output" class="headerlink" title="Input and Output"></a>Input and Output</h2><p>Successive lines of a data set will contain: a string of less than 20 characters identifying the object; the coordinates of the centre of mass; and the coordinates of successive points terminated by two zeroes (0 0), on one or more lines as necessary. There may be successive data sets (objects). The end of data will be defined by the string ‘#’.</p>
<p>Output will consist of the identification string followed by the number of the relevant base line.</p>
<h2 id="Sample-input"><a href="#Sample-input" class="headerlink" title="Sample input"></a>Sample input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Object2</span><br><span class="line">4 3</span><br><span class="line">3 2  5 2  6 1  7 1  6 3  4 7  1 1  2 1  0 0</span><br><span class="line">Square </span><br><span class="line">2 2</span><br><span class="line">1 1  3 1  3 3  1 3  0 0</span><br><span class="line">#</span><br></pre></td></tr></table></figure>
<h2 id="Sample-output"><a href="#Sample-output" class="headerlink" title="Sample output"></a>Sample output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Object2             6</span><br><span class="line">Square              2</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>** 題目描述： **</p>
<p>給定一個多邊形，將會給予這個多邊形的質心和頂點。在圖中，質心表示成黑色正方形的小點，而頂點將會使用連續編號逆時針給點。</p>
<p>多邊形可以藉由旋轉放置於水平，並且穩定立起。這時可以發現，會有兩個頂點拉起的水平線，並且質心會位於水平線上的兩個端點之間。</p>
<p>通常一個多邊形具有多個這種水平放置方法，對於一個水平放置方式，可以用在水平線上最大編號的頂點描述。</p>
<p>請輸出最小水平放置的編號。</p>
<p>** 題目解法： **</p>
<p>對多邊形著手凸包計算，這裡使用單調鍊去完成凸包。接著利用內積找到質心是否在兩個水平線端點 (segment 的上方) 之間。</p>
<p>可以利用外積判斷是否在線 (line) 上。</p>
<p>好好利用數學運算，將可以在簡短的代碼完成。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> eps 1e-6</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Pt</span> &#123;</span></span><br><span class="line">    <span class="keyword">double</span> x, y;</span><br><span class="line">    <span class="built_in">Pt</span>(<span class="keyword">double</span> a = <span class="number">0</span>, <span class="keyword">double</span> b = <span class="number">0</span>):</span><br><span class="line">    	<span class="built_in">x</span>(a), <span class="built_in">y</span>(b) &#123;&#125;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Pt &amp;a) <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">fabs</span>(x-a.x) &gt; eps)</span><br><span class="line">            <span class="keyword">return</span> x &lt; a.x;</span><br><span class="line">        <span class="keyword">return</span> y &lt; a.y;</span><br><span class="line">    &#125;</span><br><span class="line">    Pt <span class="keyword">operator</span>-(<span class="keyword">const</span> Pt &amp;a) <span class="keyword">const</span> &#123;</span><br><span class="line">        Pt ret;</span><br><span class="line">        ret.x = x - a.x;</span><br><span class="line">        ret.y = y - a.y;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dot</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.x * b.x + a.y * b.y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">cross2</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.x * b.y - a.y * b.x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">cross</span><span class="params">(Pt o, Pt a, Pt b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (a.x-o.x)*(b.y-o.y)-(a.y-o.y)*(b.x-o.x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">between</span><span class="params">(Pt a, Pt b, Pt c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dot</span>(c - a, b - a) &gt;= <span class="number">0</span> &amp;&amp; <span class="built_in">dot</span>(c - b, a - b) &gt;= <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">onSeg</span><span class="params">(Pt a, Pt b, Pt c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">between</span>(a, b, c) &amp;&amp; <span class="built_in">fabs</span>(<span class="built_in">cross</span>(a, b, c)) &lt; eps;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">monotone</span><span class="params">(<span class="keyword">int</span> n, Pt p[], Pt ch[])</span> </span>&#123;</span><br><span class="line">    <span class="built_in">sort</span>(p, p+n);</span><br><span class="line">    <span class="keyword">int</span> i, m = <span class="number">0</span>, t;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span>(m &gt;= <span class="number">2</span> &amp;&amp; <span class="built_in">cross</span>(ch[m<span class="number">-2</span>], ch[m<span class="number">-1</span>], p[i]) &lt;= <span class="number">0</span>)</span><br><span class="line">            m--;</span><br><span class="line">        ch[m++] = p[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i = n<span class="number">-1</span>, t = m+<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">while</span>(m &gt;= t &amp;&amp; <span class="built_in">cross</span>(ch[m<span class="number">-2</span>], ch[m<span class="number">-1</span>], p[i]) &lt;= <span class="number">0</span>)</span><br><span class="line">            m--;</span><br><span class="line">        ch[m++] = p[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> m - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> testcase[<span class="number">105</span>];</span><br><span class="line">    Pt P[<span class="number">1024</span>], CH[<span class="number">1024</span>], IN[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, testcase) == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="built_in">strcmp</span>(testcase, <span class="string">&quot;#&quot;</span>))</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">double</span> 	x, y;</span><br><span class="line">        <span class="keyword">int</span> 	n = <span class="number">0</span>, m;</span><br><span class="line">        Pt mc;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lf %lf&quot;</span>, &amp;mc.x, &amp;mc.y);</span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%lf %lf&quot;</span>, &amp;x, &amp;y) == <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(x == <span class="number">0</span> &amp;&amp; y == <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            IN[n] = P[n] = <span class="built_in">Pt</span>(x, y);</span><br><span class="line">            n++;</span><br><span class="line">        &#125;</span><br><span class="line">        m = <span class="built_in">monotone</span>(n, P, CH);</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>, j = m - <span class="number">1</span>; i &lt; m; j = i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">between</span>(CH[i], CH[j], mc)) &#123;</span><br><span class="line">                <span class="keyword">int</span> mn = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; n; k++)</span><br><span class="line">                    <span class="keyword">if</span>(<span class="built_in">onSeg</span>(CH[i], CH[j], IN[k]))</span><br><span class="line">                        mn = <span class="built_in">max</span>(mn, k);</span><br><span class="line">                ret = <span class="built_in">min</span>(ret, mn);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%-20s%d\n&quot;</span>, testcase, ret + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-134-" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/23/oj/uva/uva-134-/" class="article-date">
  <time datetime="2014-05-23T00:08:43.000Z" itemprop="datePublished">2014-05-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/23/oj/uva/uva-134-/">UVa 134 - Loglan-A Logical Language</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/23/oj/uva/uva-134-/" data-id="ckpaivcco00l5n8vn31588pb8" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/23/oj/uva/uva-134-/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LL-1/">LL(1)</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/編譯器/">編譯器</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Loglan is a synthetic speakable language designed to test some of the fundamental problems of linguistics, such as the Sapir Whorf hypothesis. It is syntactically unambiguous, culturally neutral and metaphysically parsimonious. What follows is a gross over-simplification of an already very small grammar of some 200 rules.</p>
<p>Loglan sentences consist of a series of words and names, separated by spaces, and are terminated by a period (.). Loglan words all end with a vowel; names, which are derived extra-linguistically, end with a consonant. Loglan words are divided into two classes–little words which specify the structure of a sentence, and predicates which have the form CCVCV or CVCCV where C represents a consonant and V represents a vowel (see examples later).</p>
<p>The subset of Loglan that we are considering uses the following grammar:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">A             →  a | e | i | o | u</span><br><span class="line">MOD           →  ga | ge | gi | go | gu</span><br><span class="line">BA            →  ba | be | bi | bo | bu</span><br><span class="line">DA            →  da | de | di | do | du</span><br><span class="line">LA            →  la | le | li | lo | lu</span><br><span class="line">NAM           →  &#123;all names&#125;</span><br><span class="line">PREDA         →  &#123;all predicates&#125;</span><br><span class="line">&lt;sentence&gt;    →  &lt;statement&gt; | &lt;predclaim&gt;</span><br><span class="line">&lt;predclaim&gt;   →  &lt;predname&gt; BA &lt;preds&gt; | DA &lt;preds&gt;</span><br><span class="line">&lt;preds&gt;       →  &lt;predstring&gt; | &lt;preds&gt; A &lt;predstring&gt;</span><br><span class="line">&lt;predname&gt;    →  LA &lt;predstring&gt; | NAM</span><br><span class="line">&lt;predstring&gt;  →  PREDA | &lt;predstring&gt; PREDA</span><br><span class="line">&lt;statement&gt;   →  &lt;predname&gt; &lt;verbpred&gt; &lt;predname&gt; | &lt;predname&gt; &lt;verbpred&gt;</span><br><span class="line">&lt;verbpred&gt;    →  MOD &lt;predstring&gt;</span><br></pre></td></tr></table></figure>
<p>Write a program that will read a succession of strings and determine whether or not they are correctly formed Loglan sentences.</p>
<h2 id="Input-and-Output"><a href="#Input-and-Output" class="headerlink" title="Input and Output"></a>Input and Output</h2><p>Each Loglan sentence will start on a new line and will be terminated by a period (.). The sentence may occupy more than one line and words may be separated by more than one whitespace character. The input will be terminated by a line containing a single `#’. You can assume that all words will be correctly formed.</p>
<p>Output will consist of one line for each sentence containing either <code>Good&#39; or </code>Bad!’.</p>
<h2 id="Sample-input"><a href="#Sample-input" class="headerlink" title="Sample input"></a>Sample input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">la mutce bunbo mrenu bi ditca.</span><br><span class="line">la fumna bi le mrenu.</span><br><span class="line">djan ga vedma le negro ketpi.</span><br><span class="line">#</span><br></pre></td></tr></table></figure>

<h2 id="Sample-output"><a href="#Sample-output" class="headerlink" title="Sample output"></a>Sample output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Good</span><br><span class="line">Bad!</span><br><span class="line">Good</span><br></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>其實這一題有比較好的解法，但是在正在學編譯器，因此把 LL(1) parser 運用在此題<br>，所以代碼會稍微長一點。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;sentence&gt;    -&gt;  &lt;common_pre&gt;</span><br><span class="line">&lt;sentence&gt;    -&gt;  DA &lt;preds&gt;</span><br><span class="line">&lt;common_pre&gt;  -&gt;  &lt;predname&gt; &lt;suffix&gt;</span><br><span class="line">&lt;suffix&gt;      -&gt;  &lt;predclaim&gt;</span><br><span class="line">&lt;suffix&gt;      -&gt;  &lt;statement&gt;</span><br><span class="line">&lt;predclaim&gt;   -&gt;  BA &lt;preds&gt;</span><br><span class="line">&lt;preds&gt;       -&gt;  &lt;preds_head&gt; &lt;preds_tail&gt;</span><br><span class="line">&lt;preds_head&gt;  -&gt;  &lt;predstring&gt;</span><br><span class="line">&lt;preds_tail&gt;  -&gt;  A &lt;predstring&gt; &lt;preds_tail&gt;</span><br><span class="line">&lt;preds_tail&gt;  -&gt;  l</span><br><span class="line">&lt;predname&gt;    -&gt;  LA &lt;predstring&gt;</span><br><span class="line">&lt;predname&gt;    -&gt;  NAM</span><br><span class="line">&lt;predstring&gt;  -&gt;  PREDA &lt;predstr_tail&gt;</span><br><span class="line">&lt;predstr_tail&gt; -&gt; PREDA &lt;predstr_tail&gt;</span><br><span class="line">&lt;predstr_tail&gt; -&gt; l</span><br><span class="line">&lt;statement&gt;   -&gt;  &lt;verbpred&gt; &lt;statement_s&gt;</span><br><span class="line">&lt;statement_s&gt; -&gt;  &lt;predname&gt;</span><br><span class="line">&lt;statement_s&gt; -&gt;  l</span><br><span class="line">&lt;verbpred&gt;    -&gt;  MOD &lt;predstring&gt;</span><br></pre></td></tr></table></figure>

<p>為了要符合 LL(1) 的形式，要想辦法將 Grammar 符合規格，也就是每一條 production rule 的 predict set 不會有模稜兩個的情況，也就是說當我看到某個 non-terminal 在 stack 上，在去看下一個 token，然後可以對於 (non-terminal, token) 只找到一條規則去匹配。</p>
<p>predict set 是根據每一條 production rule 所產生的，也就是說這個推論可以產生的第一個 token 是什麼，假使有相同的前綴時，則必須拉出做調整。// 因為這將會造成模稜兩可的情況。</p>
<p>遇到</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A -&gt; BCx</span><br><span class="line">A -&gt; BCy</span><br></pre></td></tr></table></figure>
<p>應調整成</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A -&gt; BCW</span><br><span class="line">W -&gt; x</span><br><span class="line">W -&gt; y</span><br></pre></td></tr></table></figure>

<p>在 parsing 問題上，應避免替換的無限迴圈。<br>遇到</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A -&gt; AC</span><br><span class="line">A -&gt; X</span><br><span class="line">A -&gt; Y</span><br></pre></td></tr></table></figure>
<p>應調整成</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A -&gt; WD</span><br><span class="line">D -&gt; CD</span><br><span class="line">D -&gt; lambda</span><br><span class="line">W -&gt; X</span><br><span class="line">W -&gt; Y</span><br></pre></td></tr></table></figure>

<p>發現對照課本的 parsing function 撰寫起來才發現有些不完善的地方，對於 <code>lldriver()</code> 會沒有辦法應對輸入結束，要吐出 lambda 的問題。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Production</span> &#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        string 			LHS;</span><br><span class="line">        vector&lt;string&gt; 	RHS;</span><br><span class="line">        <span class="keyword">int</span> 			label;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">Production</span>(string L = <span class="string">&quot;&quot;</span>, vector&lt;string&gt; R = vector&lt;string&gt;()) &#123;</span><br><span class="line">            LHS = L;</span><br><span class="line">            RHS = R;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%s -&gt; &quot;</span>, LHS.<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; RHS.<span class="built_in">size</span>(); i++)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>, RHS[i].<span class="built_in">c_str</span>());</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grammar</span> &#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">const</span> string 		lambda;</span><br><span class="line">        string 						start_symbol;</span><br><span class="line">        vector&lt;Production&gt; 			rules;</span><br><span class="line">        map&lt;string, set&lt;string&gt; &gt; 	first_set;</span><br><span class="line">        map&lt;string, set&lt;string&gt; &gt; 	follow_set;</span><br><span class="line">        map&lt;string, <span class="keyword">bool</span>&gt; 			derives_lambda;</span><br><span class="line">        map&lt;string, map&lt;string, Production&gt; &gt;	lltable;</span><br><span class="line">        </span><br><span class="line">        <span class="function">map&lt;string, <span class="keyword">bool</span>&gt; <span class="title">mark_lambda</span><span class="params">()</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">fill_first_set</span><span class="params">()</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">fill_follow_set</span><span class="params">()</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">isNonterminal</span><span class="params">(string token)</span></span>;</span><br><span class="line">        <span class="function">set&lt;string&gt; <span class="title">compute_first</span><span class="params">(vector&lt;string&gt; rhs)</span></span>;</span><br><span class="line">        <span class="function">set&lt;string&gt; <span class="title">get_predict_set</span><span class="params">(Production p)</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">fill_lltable</span><span class="params">()</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">lldriver</span><span class="params">(queue&lt;string&gt; tokens)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">const</span> string <span class="title">Grammar::lambda</span><span class="params">(<span class="string">&quot;l&quot;</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">set&lt;string&gt; <span class="title">Grammar::compute_first</span><span class="params">(vector&lt;string&gt; rhs)</span> </span>&#123;</span><br><span class="line">    set&lt;string&gt; result;</span><br><span class="line">    <span class="keyword">size_t</span> i;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(rhs.<span class="built_in">size</span>() == <span class="number">0</span> || rhs[<span class="number">0</span>] == Grammar::lambda) &#123;</span><br><span class="line">        result.<span class="built_in">insert</span>(Grammar::lambda);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result = first_set[rhs[<span class="number">0</span>]];</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; rhs.<span class="built_in">size</span>() &amp;&amp; </span><br><span class="line">            first_set[rhs[i<span class="number">-1</span>]].<span class="built_in">find</span>(Grammar::lambda) != first_set[rhs[i<span class="number">-1</span>]].<span class="built_in">end</span>(); i++) &#123;</span><br><span class="line">            set&lt;string&gt; f = first_set[rhs[i]];</span><br><span class="line">            f.<span class="built_in">erase</span>(Grammar::lambda);</span><br><span class="line">            result.<span class="built_in">insert</span>(f.<span class="built_in">begin</span>(), f.<span class="built_in">end</span>());	</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(i == rhs.<span class="built_in">size</span>() </span><br><span class="line">            &amp;&amp; first_set[rhs[i<span class="number">-1</span>]].<span class="built_in">find</span>(Grammar::lambda) != first_set[rhs[i<span class="number">-1</span>]].<span class="built_in">end</span>()) &#123;</span><br><span class="line">            result.<span class="built_in">insert</span>(Grammar::lambda);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            result.<span class="built_in">erase</span>(Grammar::lambda);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * please call get_predict_set() after fill_follow_set() and fill_first_set()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">set&lt;string&gt; <span class="title">Grammar::get_predict_set</span><span class="params">(Production p)</span> </span>&#123;</span><br><span class="line">    set&lt;string&gt; result;</span><br><span class="line">    set&lt;string&gt; rfirst;</span><br><span class="line">    </span><br><span class="line">    rfirst = <span class="built_in">compute_first</span>(p.RHS);</span><br><span class="line">    <span class="keyword">if</span>(rfirst.<span class="built_in">find</span>(Grammar::lambda) != rfirst.<span class="built_in">end</span>()) &#123;</span><br><span class="line">        rfirst.<span class="built_in">erase</span>(Grammar::lambda);</span><br><span class="line">        result.<span class="built_in">insert</span>(rfirst.<span class="built_in">begin</span>(), rfirst.<span class="built_in">end</span>());</span><br><span class="line">        rfirst = follow_set[p.LHS];</span><br><span class="line">        result.<span class="built_in">insert</span>(rfirst.<span class="built_in">begin</span>(), rfirst.<span class="built_in">end</span>());</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result.<span class="built_in">insert</span>(rfirst.<span class="built_in">begin</span>(), rfirst.<span class="built_in">end</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Grammar::fill_lltable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    string		A; <span class="comment">// nonterminal</span></span><br><span class="line">    Production 	p;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        p = rules[i];</span><br><span class="line">        A = p.LHS;</span><br><span class="line">        set&lt;string&gt; predict_set = <span class="built_in">get_predict_set</span>(p);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(set&lt;string&gt;::iterator it = predict_set.<span class="built_in">begin</span>();</span><br><span class="line">            it != predict_set.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">            <span class="built_in">assert</span>(lltable[A].<span class="built_in">find</span>(*it) == lltable[A].<span class="built_in">end</span>());</span><br><span class="line">            lltable[A][*it] = p;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Grammar::isNonterminal</span><span class="params">(string token)</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(token[<span class="number">0</span>] == <span class="string">&#x27;&lt;&#x27;</span> &amp;&amp; token[token.<span class="built_in">length</span>() - <span class="number">1</span>] == <span class="string">&#x27;&gt;&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function">map&lt;string, <span class="keyword">bool</span>&gt; <span class="title">Grammar::mark_lambda</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">bool</span> 				rhs_derives_lambda;</span><br><span class="line">    <span class="keyword">bool</span> 				changes;</span><br><span class="line">    Production 			p;</span><br><span class="line">    </span><br><span class="line">    derives_lambda.<span class="built_in">clear</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* initially, nothing is marked. */</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        derives_lambda[rules[i].LHS] = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        changes = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            p = rules[i];</span><br><span class="line">            <span class="keyword">if</span>(!derives_lambda[p.LHS]) &#123;</span><br><span class="line">                <span class="keyword">if</span>(p.RHS.<span class="built_in">size</span>() == <span class="number">0</span> || p.RHS[<span class="number">0</span>] == Grammar::lambda) &#123;</span><br><span class="line">                    changes = derives_lambda[p.LHS] = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">/* does each part of RHS derive lambda ? */</span></span><br><span class="line">                rhs_derives_lambda = derives_lambda[<span class="built_in">string</span>(p.RHS[<span class="number">0</span>])];</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">size_t</span> j = <span class="number">1</span>; j &lt; p.RHS.<span class="built_in">size</span>(); j++) &#123;</span><br><span class="line">                    rhs_derives_lambda &amp;= derives_lambda[p.RHS[j]];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(rhs_derives_lambda) &#123;</span><br><span class="line">                    changes = <span class="literal">true</span>;</span><br><span class="line">                    derives_lambda[p.LHS] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span>(changes);</span><br><span class="line">    <span class="keyword">return</span> derives_lambda;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Grammar::fill_first_set</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    string 		A; <span class="comment">// nonterminal</span></span><br><span class="line">    string 		a; <span class="comment">// terminal</span></span><br><span class="line">    Production 	p;</span><br><span class="line">    <span class="keyword">bool</span> 		changes;</span><br><span class="line">        </span><br><span class="line">    <span class="built_in">mark_lambda</span>();</span><br><span class="line">    first_set.<span class="built_in">clear</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        A = rules[i].LHS;</span><br><span class="line">        <span class="keyword">if</span>(derives_lambda[A])</span><br><span class="line">            first_set[A].<span class="built_in">insert</span>(Grammar::lambda);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">size_t</span> j = <span class="number">0</span>; j &lt; rules[i].RHS.<span class="built_in">size</span>(); j++) &#123;</span><br><span class="line">            a = rules[i].RHS[j];</span><br><span class="line">            <span class="keyword">if</span>(!<span class="built_in">isNonterminal</span>(a)) &#123;</span><br><span class="line">                <span class="keyword">if</span>(a != Grammar::lambda)</span><br><span class="line">                    first_set[a].<span class="built_in">insert</span>(a);</span><br><span class="line">                <span class="keyword">if</span>(j == <span class="number">0</span>) &#123; <span class="comment">// A -&gt; aXX</span></span><br><span class="line">                    first_set[rules[i].LHS].<span class="built_in">insert</span>(a);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        changes = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            p = rules[i];</span><br><span class="line">            set&lt;string&gt; rfirst = <span class="built_in">compute_first</span>(p.RHS);</span><br><span class="line">            <span class="keyword">size_t</span> oldsize = first_set[p.LHS].<span class="built_in">size</span>();</span><br><span class="line">            first_set[p.LHS].<span class="built_in">insert</span>(rfirst.<span class="built_in">begin</span>(), rfirst.<span class="built_in">end</span>());</span><br><span class="line">            <span class="keyword">size_t</span> newsize = first_set[p.LHS].<span class="built_in">size</span>();</span><br><span class="line">            <span class="keyword">if</span>(oldsize != newsize)</span><br><span class="line">                changes = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span>(changes);</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Grammar::fill_follow_set</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    string 	A, B; <span class="comment">// nonterminal</span></span><br><span class="line">    Production 	p;</span><br><span class="line">    <span class="keyword">bool</span> 	changes;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        A = rules[i].LHS;</span><br><span class="line">        follow_set[A].<span class="built_in">clear</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    follow_set[start_symbol].<span class="built_in">insert</span>(Grammar::lambda);</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        changes = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; rules.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="comment">/* A -&gt; a B b</span></span><br><span class="line"><span class="comment">			 * I.e. for each production and each occurrence</span></span><br><span class="line"><span class="comment">			 * of a nonterminal in its right-hand side. </span></span><br><span class="line"><span class="comment">			 */</span></span><br><span class="line">            p = rules[i];</span><br><span class="line">            A = p.LHS;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">size_t</span> j = <span class="number">0</span>; j &lt; p.RHS.<span class="built_in">size</span>(); j++) &#123;</span><br><span class="line">                B = p.RHS[j];</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">isNonterminal</span>(B)) &#123;</span><br><span class="line">                    <span class="function">vector&lt;string&gt; <span class="title">beta</span><span class="params">(p.RHS.begin() + j + <span class="number">1</span>, p.RHS.end())</span></span>;</span><br><span class="line">                    set&lt;string&gt; rfirst = <span class="built_in">compute_first</span>(beta);</span><br><span class="line">                    <span class="keyword">size_t</span> oldsize = follow_set[B].<span class="built_in">size</span>();</span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">if</span>(rfirst.<span class="built_in">find</span>(Grammar::lambda) == rfirst.<span class="built_in">end</span>()) &#123;</span><br><span class="line">                        follow_set[B].<span class="built_in">insert</span>(rfirst.<span class="built_in">begin</span>(), rfirst.<span class="built_in">end</span>());	</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        rfirst.<span class="built_in">erase</span>(Grammar::lambda);</span><br><span class="line">                        follow_set[B].<span class="built_in">insert</span>(rfirst.<span class="built_in">begin</span>(), rfirst.<span class="built_in">end</span>());	</span><br><span class="line">                        rfirst = follow_set[A];</span><br><span class="line">                        follow_set[B].<span class="built_in">insert</span>(rfirst.<span class="built_in">begin</span>(), rfirst.<span class="built_in">end</span>());</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">size_t</span> newsize = follow_set[B].<span class="built_in">size</span>();			</span><br><span class="line">                    <span class="keyword">if</span>(oldsize != newsize)</span><br><span class="line">                        changes = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span>(changes);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Grammar::lldriver</span><span class="params">(queue&lt;string&gt; tokens)</span> </span>&#123;</span><br><span class="line">    stack&lt;string&gt; 	stk;</span><br><span class="line">    string 			X;</span><br><span class="line">    string			a;</span><br><span class="line">    Production		p;</span><br><span class="line">    <span class="comment">/* Push the Start Symbol onto an empty stack */</span></span><br><span class="line">    stk.<span class="built_in">push</span>(start_symbol);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(!stk.<span class="built_in">empty</span>() &amp;&amp; !tokens.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        X = stk.<span class="built_in">top</span>();</span><br><span class="line">        a = tokens.<span class="built_in">front</span>();</span><br><span class="line">        <span class="comment">// cout &lt;&lt; X &lt;&lt; &quot; &quot; &lt;&lt; a &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">isNonterminal</span>(X) &amp;&amp; lltable[X].<span class="built_in">find</span>(a) != lltable[X].<span class="built_in">end</span>()) &#123;</span><br><span class="line">            p = lltable[X][a];</span><br><span class="line">            stk.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = p.RHS.<span class="built_in">size</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">                <span class="keyword">if</span>(p.RHS[i] == Grammar::lambda)</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                stk.<span class="built_in">push</span>(p.RHS[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(X == a) &#123;</span><br><span class="line">            stk.<span class="built_in">pop</span>();</span><br><span class="line">            tokens.<span class="built_in">pop</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(lltable[X].<span class="built_in">find</span>(Grammar::lambda) != lltable[X].<span class="built_in">end</span>()) &#123;</span><br><span class="line">            stk.<span class="built_in">pop</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">/* Process syntax error. */</span></span><br><span class="line">            <span class="built_in">puts</span>(<span class="string">&quot;Bad!&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!stk.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        X = stk.<span class="built_in">top</span>();</span><br><span class="line">        <span class="keyword">if</span>(lltable[X].<span class="built_in">find</span>(Grammar::lambda) != lltable[X].<span class="built_in">end</span>())</span><br><span class="line">            stk.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(tokens.<span class="built_in">size</span>() == <span class="number">0</span> &amp;&amp; stk.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;Good&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;Bad!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">aVowel</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span>(c) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:<span class="keyword">case</span> <span class="string">&#x27;e&#x27;</span>:<span class="keyword">case</span> <span class="string">&#x27;i&#x27;</span>:<span class="keyword">case</span> <span class="string">&#x27;o&#x27;</span>:<span class="keyword">case</span> <span class="string">&#x27;u&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">string <span class="title">token2symbol</span><span class="params">(<span class="keyword">const</span> string &amp;str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = str.<span class="built_in">length</span>();</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">islower</span>(str[n - <span class="number">1</span>]) || !<span class="built_in">aVowel</span>(str[n - <span class="number">1</span>])) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;NAM&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span> (n) &#123;</span><br><span class="line">    	<span class="keyword">case</span> <span class="number">1</span>: <span class="keyword">return</span> <span class="string">&quot;A&quot;</span>;</span><br><span class="line">    	<span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">        n = <span class="built_in">aVowel</span>(str[<span class="number">4</span>]);</span><br><span class="line">        n |= ((<span class="built_in">aVowel</span>(str[<span class="number">0</span>]) &lt;&lt; <span class="number">4</span>) | (<span class="built_in">aVowel</span>(str[<span class="number">1</span>]) &lt;&lt; <span class="number">3</span>));</span><br><span class="line">        n |= ((<span class="built_in">aVowel</span>(str[<span class="number">2</span>]) &lt;&lt; <span class="number">2</span>) | (<span class="built_in">aVowel</span>(str[<span class="number">3</span>]) &lt;&lt; <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">return</span> (n == <span class="number">5</span> || n == <span class="number">9</span>) ? <span class="string">&quot;PREDA&quot;</span> : <span class="string">&quot;UN&quot;</span>;</span><br><span class="line">    	<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        	<span class="built_in"><span class="keyword">switch</span></span> (str[<span class="number">0</span>]) &#123;</span><br><span class="line">        		<span class="keyword">case</span> <span class="string">&#x27;g&#x27;</span>: <span class="keyword">return</span> <span class="string">&quot;MOD&quot;</span>;</span><br><span class="line">        		<span class="keyword">case</span> <span class="string">&#x27;b&#x27;</span>: <span class="keyword">return</span> <span class="string">&quot;BA&quot;</span>;</span><br><span class="line">        		<span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>: <span class="keyword">return</span> <span class="string">&quot;DA&quot;</span>;</span><br><span class="line">        		<span class="keyword">case</span> <span class="string">&#x27;l&#x27;</span>: <span class="keyword">return</span> <span class="string">&quot;LA&quot;</span>;</span><br><span class="line">        	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;UN&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">parsingProduction</span><span class="params">(string r, Grammar &amp;g)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> 		production_label = <span class="number">0</span>;</span><br><span class="line">    <span class="function">stringstream 	<span class="title">sin</span><span class="params">(r)</span></span>;</span><br><span class="line">    string 			lhs, foo;</span><br><span class="line">    vector&lt;string&gt; 	tokens;</span><br><span class="line">    sin &gt;&gt; lhs &gt;&gt; foo;</span><br><span class="line">    <span class="keyword">while</span>(sin &gt;&gt; foo)</span><br><span class="line">        tokens.<span class="built_in">push_back</span>(foo);</span><br><span class="line">    <span class="function">Production <span class="title">p</span><span class="params">(lhs, tokens)</span></span>;</span><br><span class="line">    p.label = ++production_label;</span><br><span class="line">    g.rules.<span class="built_in">push_back</span>(p);</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Grammar g;</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;sentence&gt;    -&gt;  &lt;common_pre&gt;&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;sentence&gt;    -&gt;  DA &lt;preds&gt;&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;common_pre&gt;  -&gt;  &lt;predname&gt; &lt;suffix&gt;&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;suffix&gt;      -&gt;  &lt;predclaim&gt;&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;suffix&gt;	  	 -&gt;  &lt;statement&gt;&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;predclaim&gt;   -&gt;  BA &lt;preds&gt;&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;predclaim&gt;   -&gt;  DA &lt;preds&gt;&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;preds&gt;       -&gt;  &lt;preds_head&gt; &lt;preds_tail&gt;&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;preds_head&gt;  -&gt;  &lt;predstring&gt;&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;preds_tail&gt;  -&gt;  A &lt;predstring&gt; &lt;preds_tail&gt;&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;preds_tail&gt;  -&gt;  l&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;predname&gt;    -&gt;  LA &lt;predstring&gt;&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;predname&gt;    -&gt;  NAM&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;predstring&gt;  -&gt;  PREDA &lt;predstr_tail&gt;&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;predstr_tail&gt; -&gt; PREDA &lt;predstr_tail&gt;&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;predstr_tail&gt; -&gt; l&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;statement&gt;   -&gt;  &lt;verbpred&gt; &lt;statement_s&gt;&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;statement_s&gt; -&gt;  &lt;predname&gt;&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;statement_s&gt; -&gt;  l&quot;</span>, g);</span><br><span class="line">    <span class="built_in">parsingProduction</span>(<span class="string">&quot;&lt;verbpred&gt;    -&gt;  MOD &lt;predstring&gt;&quot;</span>, g);</span><br><span class="line">    </span><br><span class="line">    g.start_symbol = <span class="string">&quot;&lt;sentence&gt;&quot;</span>;</span><br><span class="line">        </span><br><span class="line">    g.<span class="built_in">fill_first_set</span>();</span><br><span class="line">    g.<span class="built_in">fill_follow_set</span>();</span><br><span class="line">    g.<span class="built_in">fill_lltable</span>();</span><br><span class="line">    </span><br><span class="line">    queue&lt;string&gt; SYMBOL;</span><br><span class="line">    <span class="keyword">for</span>(string token; cin &gt;&gt; token &amp;&amp; token != <span class="string">&quot;#&quot;</span>;) &#123;</span><br><span class="line">        <span class="keyword">size_t</span> pos = token.<span class="built_in">find</span>(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span>(pos == string::npos) &#123;</span><br><span class="line">            SYMBOL.<span class="built_in">push</span>(<span class="built_in">token2symbol</span>(token));</span><br><span class="line">            <span class="comment">//cout &lt;&lt; token2symbol(token) &lt;&lt; &quot; &quot;;</span></span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        token.<span class="built_in">erase</span>(token.<span class="built_in">length</span>() - <span class="number">1</span>);</span><br><span class="line">        <span class="comment">//cout &lt;&lt; token2symbol(token) &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">if</span>(token.<span class="built_in">length</span>() &gt; <span class="number">0</span>)</span><br><span class="line">            SYMBOL.<span class="built_in">push</span>(<span class="built_in">token2symbol</span>(token));</span><br><span class="line">        g.<span class="built_in">lldriver</span>(SYMBOL);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(!SYMBOL.<span class="built_in">empty</span>())</span><br><span class="line">            SYMBOL.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/icpc-4020" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/22/oj/uva/icpc-4020/" class="article-date">
  <time datetime="2014-05-22T00:14:25.000Z" itemprop="datePublished">2014-05-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/22/oj/uva/icpc-4020/">ICPC 4020 - Hard Rode</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/22/oj/uva/icpc-4020/" data-id="ckpaivcb200etn8vnbt9zc7yc" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/22/oj/uva/icpc-4020/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/窮舉/">窮舉</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>The road to Shu is hard, even harder than climbing to the blue sky. A poem by Li Po from Tang Dynasty 1,200 years ago described the difficulty in travelling into Sichuan.</p>
<p>\epsfbox{p4020.eps}</p>
<p>However the above old saying is no longer true as a convenient communication network of railway, highway, waterway and air transport has come into being. Railways cover a total mileage of 2,693 km, consisting of five trunk lines including the BaojiChengdu and Chengdu-Chongqing railways, eight feeder lines and four local railways. The total mileage of highways stretches to nearly 80,000 km, ranking at the forefront in China. Now a highway network with the provincial capital of Chengdu as the center radiating to all cities in the province has been formed. A total of 500 km of expressways have been built. It is very easy to transfer passengers and freights between Sichuan and other provinces. After a nationwide railway speed acceleration launched in last year, trains can be allowed to run at a speed above 120 km per hour. However, the average speed of a train depends on its make-up. There is only single railway track between stations from Baoji to Chengdu, A primary task for dispatchers is to arrange for trains to meet and pass each other. You are requested to write a program to make the arrangement for a series of trains of different speeds from one station to its next station in the least amount of time.</p>
<p>What you should pay attention to while writing this program is that since there is a single railway track from Baoji to Chengdu, two trains are not allowed to pass the same spot at the same time, or they would be collision, and that because of the limited staff, there should be a fixed interval time between two trains out of the station, what’s more, the trains could pull into the station at the same time, but never get out at the same time.</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The input consists of several test cases. Each test case begins with a line containing 3 integers L (1 &lt;= L &lt;= 100000) , N (1 &lt;= N &lt;= 8) and T (1 &lt; T &lt; 10000) which indicate the distance between two stations (unit is meter), the number of trains, as well as the interval time of adjacent trains when trains leave the start (unit is second).</p>
<p>The next N lines contain average speeds of N trains (unit is m/s).</p>
<p>A single line with L = 0 indicates the end of input file and should not be processed by your program.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For each test case, your output should be in one line with the minimum time(round to integer) needed by the trains pulling into the terminal as indicated in the sample output.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">100000 6 300 </span><br><span class="line">3 </span><br><span class="line">4 </span><br><span class="line">5 </span><br><span class="line">6 </span><br><span class="line">2 </span><br><span class="line">1 </span><br><span class="line">0</span><br></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Case 1: 101500</span><br></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>** 題目描述：**</p>
<p>從 陝西省寶雞市 到 四川省成都市 有一條鐵軌，而這一條鐵軌一次有好幾台火車在運行，但是不會發生追撞事件，然而每台火車的速度不一樣，而且站務人員會每隔固定時間發一班車，在不發生碰撞的情況下，最後一台火車到達成都市的最少時間為何？</p>
<p>** 題目解法：**</p>
<p>在這樣的情況，有可能慢車先出發，然在在 <code>T</code> 秒之後，快車恰好追到慢車，這樣的情況會更好。但是實際數據應該長成什麼樣子沒有仔細考慮。</p>
<p>如果使用慢車最後出發，這樣能確保一定不會產生碰撞，但不確定是否是最佳解。</p>
<p>所以使用 <code>O(n!)</code> 的窮舉來計算答案。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> L, N, T, cases = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> speed[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;L, &amp;N, &amp;T) == <span class="number">3</span> &amp;&amp; L) &#123;</span><br><span class="line">        <span class="keyword">int</span> p[<span class="number">10</span>] = &#123;&#125;;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;speed[i]);</span><br><span class="line">            p[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(speed, speed + N);</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> ret = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">double</span> start = T, lastTime = L / speed[p[<span class="number">0</span>]];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++) &#123;</span><br><span class="line">                <span class="keyword">double</span> time = L / speed[p[i]] + start;</span><br><span class="line">                <span class="keyword">if</span>(time &gt;= lastTime) &#123;</span><br><span class="line">                    start += T;</span><br><span class="line">                    lastTime = time;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    lastTime = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                    <span class="comment">// start += T + (lastTime - time);</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ret = <span class="built_in">min</span>(ret, (<span class="keyword">long</span> <span class="keyword">long</span>) <span class="built_in">ceil</span>(lastTime));</span><br><span class="line">        &#125; <span class="keyword">while</span> (<span class="built_in">next_permutation</span>(p, p + N));</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Case %d: %lld\n&quot;</span>, ++cases, ret);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-10320" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/21/oj/uva/uva-10320/" class="article-date">
  <time datetime="2014-05-20T23:33:18.000Z" itemprop="datePublished">2014-05-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/21/oj/uva/uva-10320/">UVa 10320 - Cow Trouble! Help Please</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/21/oj/uva/uva-10320/" data-id="ckpaivcb700fcn8vnd17bcqme" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/21/oj/uva/uva-10320/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/幾何/">幾何</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>There are many classic problem with cows/goats and grass field in the world of mathematics. One of such problems is shown in the picture (left one) below. A goat is tied at point C which is on the edge of a round field with a rope of length R. One has to determine the length R when the cow can eat 50% grass of the round field. But in this problem we will consider a slightly different scenario which is shown in the second figure. In a field of infinite area there is a house ABDC. A cow is tied with pillar B of the house with a rope of length R. The length and width of the house is l and w. If the house was not there the cow could eat all the grass in the round green field (The round green field is a circle of radius R). But the presence of the house will certainly reduce his ability as the cow cannot enter the house nor can any part of the rope. You will have to determine the area the cow can now roam around and eat grass.</p>
<p>Fig 1: A classic Problem with a Goat</p>
<p>Fig 2: The Current Classic Problem with Cow</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The input file contains several lines of input. Each line contains three floating point numbers l, w and R as described in the problem statement. All numbers are less than 10000. Input is terminated by end of file.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For each line of input produce one line of output. This output denotes the area that the cow can cover by not entering the house. This value should contain ten digits after the decimal point. Output will be checked with special judge. So you should not worry about very small precision errors.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">10 5 5</span><br><span class="line">10 4 8</span><br></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">58.9048622548</span><br><span class="line">163.3628179867</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>** 題目描述：**<br>有一頭牛被一根長度 R 的繩子拴在一棟建築物 ABCD 的 B 點上，草地的範圍為無限大，求牛可以吃到的草的範圍。Input 會給l, w 和 R 表示建築物長寬和繩長；l, w, R &lt; 10000。Output 要輸到小數點第 10 位。</p>
<p>** 題目解法：**</p>
<p>就是根據 R 的四種情況去討論，其中最麻煩的是對於 <code>R &gt; l + w</code>，這種情況會需要討論重疊的區域，算出三角形夾角然後分別算兩個扇形面積，再弄回重疊區域三角形中的哪一塊有草。</p>
<p>其實這一題的題解網路上是有的，但是 PO 出來是因為自己卡在 WA，原因是這樣子的，假使 <code>A = 0.5 * B</code> 和 <code>A = B / 2</code>，這兩者寫法並無不同，但是後者的精準度比較好，很多次的 WA 都掛在這一點。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> w, l, r;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">double</span> pi = <span class="built_in">acos</span>(<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%lf %lf %lf&quot;</span>, &amp;l, &amp;w, &amp;r) == <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(w &gt; l)</span><br><span class="line">            <span class="built_in">swap</span>(w, l);</span><br><span class="line">        <span class="keyword">double</span> area;</span><br><span class="line">        <span class="keyword">if</span>(r &lt;= w)</span><br><span class="line">            area = r * r * pi * <span class="number">3</span> / <span class="number">4.0</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(r &lt;= l)</span><br><span class="line">            area = r * r * pi * <span class="number">3</span> / <span class="number">4.0</span> + (r - w) * (r - w) * pi / <span class="number">4.0</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(r &lt;= l + w)</span><br><span class="line">            area = r * r * pi * <span class="number">3</span> / <span class="number">4.0</span> + (r - w) * (r - w) * pi / <span class="number">4.0</span> </span><br><span class="line">                    + (r - l) * (r - l) * pi / <span class="number">4.0</span>;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">double</span> a = <span class="built_in">atan2</span>(l, w), b, c;</span><br><span class="line">            <span class="keyword">double</span> la, lb, lc;</span><br><span class="line">            </span><br><span class="line">            la = <span class="built_in">hypot</span>(w, l);</span><br><span class="line">            lb = r - w;</span><br><span class="line">            lc = r - l;</span><br><span class="line">            b = <span class="built_in">acos</span>((la*la + lb*lb - lc*lc)/(<span class="number">2</span>*la*lb)) + a;</span><br><span class="line">            c = <span class="built_in">acos</span>((la*la + lc*lc - lb*lb)/(<span class="number">2</span>*la*lc)) + (pi /<span class="number">2</span>) - a;</span><br><span class="line">                        </span><br><span class="line">            area = r * r * pi * <span class="number">3</span> / <span class="number">4.0</span>;</span><br><span class="line">            area += (r - w) * (r - w) * (pi - b) / <span class="number">2</span>;</span><br><span class="line">            area += (r - l) * (r - l) * (pi - c) / <span class="number">2</span>;</span><br><span class="line">            area += lb * la * <span class="built_in">sin</span>(b - a) / <span class="number">2</span>;</span><br><span class="line">            area -= w * l / <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%0.10lf\n&quot;</span>, area);			</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-12717" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/19/oj/uva/uva-12717/" class="article-date">
  <time datetime="2014-05-19T01:21:04.000Z" itemprop="datePublished">2014-05-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/19/oj/uva/uva-12717/">UVa 12717 - Fiasco</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/19/oj/uva/uva-12717/" data-id="ckpaivcce00k1n8vnc8om3w42" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/19/oj/uva/uva-12717/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/除錯修正/">除錯修正</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Natasha always mixes up things in her algorithm classes. Last week Prof. Chhaya Murthy gave the class a classical problem -finding shortest path to all nodes from a special node of a weighted graph. Before that in another class, the professor taught them Prim’s and Dijkstra’s algorithms which are similar looking but does very different things. Always confused, poor Natasha submitted something<br>very similar to the Prim’s algorithm (actually we should call it Natasha’s  lgorithm), she didn’t test it properly. Pseudocode of her algorithm looks as follows</p>
<p><img src="/img/uva12717.png" alt="uva 12717"></p>
<p>After submission, she showed the code to a friend who is good at algorithms. That friend immediately found the aw. Natasha was really terrifed and started to cry. Then there came the guys, the guys who liked her. They jumped at the opportunity and got hold of the dataset to be used to test the solutions. Your friend Rehan is one of those guys. He really wanted to impress Natasha. He asked you to change the dataset in such a way that Natasha’s algorithm gives the right result. After the change, Rehan will somehow be able to put the modified data with the old timestamp. Rehan told you that:</p>
<ol>
<li>The dataset has T test cases.</li>
<li>Each case contains a connected weighted undirected graph with n nodes and<br>m edges.</li>
<li>Each case will contain a source node source.</li>
<li>Edge weights are positive and distinct. </li>
</ol>
<p>To avoid suspicion, Rehan asked you not to change which vertices the edges connect, or the overall set of edge weights. You may only reorder which weights are assigned to which edges</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The first line of the input denotes the number of datasets T (1 &lt; T &lt;= 15). T sets of case will follow. Each case will start with a triplet of numbers n (2 &lt;= n &lt;= 2500), m (1 &lt;= m &lt;= 25000) and source (1 &lt;= source &lt;= n) | the number of nodes, the number of edges and the starting node respectively.</p>
<p>Each of the next m lines will contain a triplet of numbers <code>(u, v, w)</code> meaning that there is an edge between node u and node v with weight w (1 &lt;= w &lt;= m). Nodes are numbered from 1 to n. </p>
<p>It is guaranteed that there is no duplicate or self-edges in the input and the graph is connected. In each given graph, all edge weights will be distinct.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For each set of input, print one set of output. First line of a set should be of the format, <code>Case X:</code> where X is the case number. Then print each edge triplet | one triplet (u, v, w) in each line separated by a single space. The edges should be printed in the order given in the input. If there is more than one solution to a dataset, any one of them will do.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">7 9 5</span><br><span class="line">2 4 2</span><br><span class="line">1 4 8</span><br><span class="line">7 2 6</span><br><span class="line">3 4 7</span><br><span class="line">5 7 5</span><br><span class="line">7 3 9</span><br><span class="line">6 1 1</span><br><span class="line">6 3 4</span><br><span class="line">5 6 3</span><br></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Case 1:</span><br><span class="line">2 4 7</span><br><span class="line">1 4 9</span><br><span class="line">7 2 3</span><br><span class="line">3 4 8</span><br><span class="line">5 7 1</span><br><span class="line">7 3 4</span><br><span class="line">6 1 5</span><br><span class="line">6 3 6</span><br><span class="line">5 6 2</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>** 題目描述：**<br>// 給一個錯誤代碼，修改測資，使錯誤代碼輸出正確。<br>在一門演算法課程中，上到了最短路徑算法，教授指出了 Prim 和 Dijkstra 算法之間的不同，課堂上有個妹子很不小心搞混了這兩個算法，甚至弄出了更奇怪的程序，這代碼其中有缺陷，她和朋友分享代碼後，沒想到朋友瞬間戳出輸出錯誤的測資，妹子一時之間哭了出來。</p>
<p>現在為了擄獲芳心，請修改測資，使得錯誤代碼有一樣的正確輸出。</p>
<p>** 題目解法：**<br>這個妹子錯的地方在於，更新的時候，沒有將為探訪點的情況加以考慮，直接以 BFS 的方式丟入，那麼在隨後更新的路徑長就不會被丟入 Priority Queue，這樣在 Dijkstra 的更新順序上就會出錯。也就是說，只要 Graph 的權重依據 BFS 順序 符合由小到大，不會出現隨後更新的問題即可。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; g[<span class="number">2505</span>];</span><br><span class="line"><span class="keyword">int</span> used[<span class="number">25005</span>];</span><br><span class="line"><span class="keyword">int</span> in_x[<span class="number">25005</span>], in_y[<span class="number">25005</span>], in_w[<span class="number">25005</span>];</span><br><span class="line">map&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;, <span class="keyword">int</span>&gt; shortest_tree;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> source)</span> </span>&#123;</span><br><span class="line">    queue&lt;<span class="keyword">int</span>&gt; 	Q;</span><br><span class="line">    <span class="keyword">int</span> 		u, v, e = <span class="number">0</span>;</span><br><span class="line">    Q.<span class="built_in">push</span>(source), used[source] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        u = Q.<span class="built_in">front</span>(), Q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; g[u].<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            v = g[u][i];</span><br><span class="line">            <span class="keyword">if</span>(used[v])	<span class="keyword">continue</span>;</span><br><span class="line">            used[v] = <span class="number">1</span>;</span><br><span class="line">            shortest_tree[<span class="built_in">make_pair</span>(u, v)] = in_w[e], e++;</span><br><span class="line">            Q.<span class="built_in">push</span>(v);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> testcase, cases = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> n, m, source;</span><br><span class="line">    <span class="keyword">int</span> x, y, w;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;testcase);</span><br><span class="line">    <span class="keyword">while</span>(testcase--) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;n, &amp;m, &amp;source);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            g[i].<span class="built_in">clear</span>();</span><br><span class="line">            used[i] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        shortest_tree.<span class="built_in">clear</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;x, &amp;y, &amp;w);</span><br><span class="line">            g[x].<span class="built_in">push_back</span>(y);</span><br><span class="line">            g[y].<span class="built_in">push_back</span>(x);</span><br><span class="line">            in_x[i] = x, in_y[i] = y, in_w[i] = w;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="built_in">sort</span>(g[i].<span class="built_in">begin</span>(), g[i].<span class="built_in">end</span>());</span><br><span class="line">        <span class="built_in">sort</span>(in_w, in_w + m);</span><br><span class="line">        <span class="built_in">bfs</span>(source);</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Case %d:\n&quot;</span>, ++cases);</span><br><span class="line">        map&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;, <span class="keyword">int</span>&gt;::iterator it, jt, kt;</span><br><span class="line">        <span class="keyword">int</span> e = m - <span class="number">1</span>;</span><br><span class="line">        kt = shortest_tree.<span class="built_in">end</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            it = shortest_tree.<span class="built_in">find</span>(<span class="built_in">make_pair</span>(in_x[i], in_y[i]));</span><br><span class="line">            jt = shortest_tree.<span class="built_in">find</span>(<span class="built_in">make_pair</span>(in_y[i], in_x[i]));</span><br><span class="line">            <span class="keyword">if</span>(it != kt)</span><br><span class="line">                w = it-&gt;second;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(jt != kt)</span><br><span class="line">                w = jt-&gt;second;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                w = in_w[e], e--;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d %d %d\n&quot;</span>, in_x[i], in_y[i], w);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">7 9 5</span></span><br><span class="line"><span class="comment">2 4 2</span></span><br><span class="line"><span class="comment">1 4 8</span></span><br><span class="line"><span class="comment">7 2 6</span></span><br><span class="line"><span class="comment">3 4 7</span></span><br><span class="line"><span class="comment">5 7 5</span></span><br><span class="line"><span class="comment">7 3 9</span></span><br><span class="line"><span class="comment">6 1 1</span></span><br><span class="line"><span class="comment">6 3 4</span></span><br><span class="line"><span class="comment">5 6 3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-12716" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/19/oj/uva/uva-12716/" class="article-date">
  <time datetime="2014-05-19T00:58:46.000Z" itemprop="datePublished">2014-05-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/19/oj/uva/uva-12716/">UVa 12716 - GCD XOR</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/19/oj/uva/uva-12716/" data-id="ckpaivccd00k0n8vn3z9j4dtq" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/19/oj/uva/uva-12716/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/觀察/">觀察</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Given an integer N, Find how many pairs (A, B) are there such that <code>gcd(A, B) = A xor B</code> where 1 &lt; B &lt; A &lt;= N. Here gcd(A, B) means the greatest common divisor of the numbers A and B. And A xor B is the value of the bitwise xor operation on the binary representation of A and B.</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The First line of the input contains an integer T (T &lt; 10000) denoting the number of test cases. The following T lines contain an integer N (1 &lt;= N &lt;= 30000000).</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For each test case, print the case number first in the format, <code>Case X:</code> (here, X is the serial of the input) followed by a space and then the answer for that case.<br>There is no new-line between cases.</p>
<p>Explanation<br>Sample 1:<br>For N = 7, there are four valid pairs: (3, 2), (5, 4), (6, 4) and (7, 6).</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">7</span><br><span class="line">20000000</span><br></pre></td></tr></table></figure>

<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Case 1: 4</span><br><span class="line">Case 2: 34866117</span><br></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>首先，嘗試把 <code>N &lt;= 1000</code> 的情況列下來，列出 <code>gcd(A, B) = C = A xor B</code></p>
<p>其中滿足 <code>B &lt; A and A mod C = 0</code>，然後我們又觀察到 <code>A&amp;C == C</code>，也就是說看 bitmask 的話，C 是 A 的 subset。</p>
<p>經由這一點，我們可以先寫出一個不會過 (TLE) 的做法，對 A 找到所有因子 C，查看是否符合 <code>A&amp;C == C</code>，但是這樣的做法很容易知道時間效率不夠好。</p>
<p>下面是一個最簡單的版本。</p>
<figure class="highlight cpp"><figcaption><span>TLE version</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxL (30000000&gt;&gt;5)+1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GET(x) (mark[(x)&gt;&gt;5]&gt;&gt;((x)&amp;31)&amp;1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SET(x) (mark[(x)&gt;&gt;5] |= 1&lt;&lt;((x)&amp;31))</span></span><br><span class="line"><span class="keyword">int</span> mark[maxL];</span><br><span class="line"><span class="keyword">int</span> P[<span class="number">5500</span>], Pt = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> F[<span class="number">30000005</span>] = &#123;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sieve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">int</span> i, j, k, l;</span><br><span class="line">    <span class="built_in">SET</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">50000</span>;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="built_in">GET</span>(i)) &#123;</span><br><span class="line">            <span class="keyword">for</span>(j = i + i; j &lt;= n; j += i)</span><br><span class="line">                <span class="built_in">SET</span>(j);</span><br><span class="line">            P[Pt++] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">vector&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; <span class="built_in">factor</span>(<span class="keyword">int</span> n) &#123;</span><br><span class="line">    <span class="keyword">int</span> on = n;</span><br><span class="line">    vector&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; R;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>, j; i &lt; Pt &amp;&amp; P[i] * P[i] &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(n%P[i] == <span class="number">0</span>) &#123;		</span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>; n%P[i] == <span class="number">0</span>; n /= P[i], j++);</span><br><span class="line">            R.<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(P[i], j));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n != <span class="number">1</span>)	R.<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(n, <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">return</span> R;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make</span><span class="params">(<span class="keyword">int</span> idx, <span class="keyword">int</span> n, <span class="keyword">int</span> m, vector&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; &amp;v)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(idx == v.<span class="built_in">size</span>()) &#123;</span><br><span class="line">        <span class="keyword">if</span>((n&amp;m) == m)</span><br><span class="line">            F[n]++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> a = m, b = v[idx].first;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = v[idx].second; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        <span class="built_in">make</span>(idx + <span class="number">1</span>, n, a, v), a *= b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">sieve</span>();</span><br><span class="line">    vector&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; ff;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">30000000</span>; i++) &#123;</span><br><span class="line">        ff = <span class="built_in">factor</span>(i);</span><br><span class="line">        <span class="built_in">make</span>(<span class="number">0</span>, i, <span class="number">1</span>, ff);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> testcase, cases = <span class="number">0</span>, n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;testcase);</span><br><span class="line">    <span class="keyword">while</span>(testcase--) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            ret += F[i];</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ret - n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接著，使用其他的考慮方式，既然 <code>(n, n + 1)</code> 是已知解，其倍數解 <code>(kn, k(n + 1))</code>也是考量的一部分。</p>
<p>總歸一句，觀察 orz。</p>
<figure class="highlight cpp"><figcaption><span>accepted</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> F[<span class="number">30000005</span>] = &#123;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">30000000</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i &lt;&lt; <span class="number">1</span>; i + j &lt;= <span class="number">30000000</span>; j += i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(((i + j)&amp;(j)) == j)</span><br><span class="line">                F[i + j]++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">30000000</span>; i++)</span><br><span class="line">        F[i] += F[i<span class="number">-1</span>];</span><br><span class="line">    <span class="keyword">int</span> testcase, cases = <span class="number">0</span>, n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;testcase);</span><br><span class="line">    <span class="keyword">while</span>(testcase--) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Case %d: %d\n&quot;</span>, ++cases, F[n]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-11291-with-yacc" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/12/oj/uva/uva-11291-with-yacc/" class="article-date">
  <time datetime="2014-05-12T10:54:49.000Z" itemprop="datePublished">2014-05-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/12/oj/uva/uva-11291-with-yacc/">Yacc 與 Lex 練習 - UVa 11291</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/12/oj/uva/uva-11291-with-yacc/" data-id="ckpaivcbi00gfn8vn61vh5owm" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/12/oj/uva/uva-11291-with-yacc/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Lex/">Lex</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Yacc/">Yacc</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h1 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h1><p>詳細題目請參考 <a href="http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=24&page=show_problem&problem=2266">UVa 11291 - Smeech</a></p>
<p>語法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;E[x]&gt; -&gt; &lt;Integer&gt; | (p &lt;E[x]&gt; &lt;E[x]&gt;)</span><br><span class="line">&lt;Integer&gt; -&gt; #number</span><br></pre></td></tr></table></figure>

<p>目標計算出 <code>E[X] = p * (e1 + e2) + (1 - p) * (e1 - e2)</code></p>
<h1 id="Yacc"><a href="#Yacc" class="headerlink" title="Yacc"></a>Yacc</h1><p>Yacc 主要是根據 CFG 進行解析。</p>
<p>其中，要對於 Yacc 語法的回傳值明白操作情況。</p>
<p>對於語法回傳值，我們來個最簡單的範例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">expression -&gt; LEFT_P NUMBER expression expression RIGHT_P</span><br><span class="line">    $$          $1     $2       $3         $4       $5</span><br></pre></td></tr></table></figure>
<p>其中 <code>$$</code> 是回傳值，其中的 <code>$1</code>、<code>$2</code> … 等，都是得到的回傳值。</p>
<p>對於 <code>yylval</code> 形態處理：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">%union &#123;</span><br><span class="line">    float 	floatVal;</span><br><span class="line">    int 	intVal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通常使用 <code>union</code> 的方式來共用記憶體，在 lex 那邊就可以根據 <code>yylval.floatVal</code> 進行操作。</p>
<p>當然，我們也要對於每一個 <code>nonterminal</code> 定義回傳的型態</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">%type &lt;floatVal&gt; NUMBER</span><br><span class="line">%type &lt;floatVal&gt; expression</span><br><span class="line">%type &lt;floatVal&gt; startsymbol</span><br></pre></td></tr></table></figure>

<p>基本上就大功告成了。</p>
<p>接著要考慮如何去完成多組測資組的問題，在這裡可以利用 kleene star 來完成。</p>
<p>但是對於輸出順序，使用 <code>input -&gt; input startsymbol</code> 跟 <code>input -&gt; startsymbol input</code> 輸出順序是不同的，如果要順著輸出，請選擇前者。</p>
<figure class="highlight cpp"><figcaption><span>file: a.y</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">%&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">yylex</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">double</span> ans = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">yyerror</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* message)</span> </span>&#123;</span><br><span class="line">    ans = <span class="number">-2147483647</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Invaild format\n&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">%&#125;</span><br><span class="line"></span><br><span class="line">%<span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">    <span class="keyword">float</span> 	floatVal;</span><br><span class="line">    <span class="keyword">int</span> 	intVal;</span><br><span class="line">&#125;</span><br><span class="line">%type &lt;floatVal&gt; NUMBER</span><br><span class="line">%type &lt;floatVal&gt; expression</span><br><span class="line">%type &lt;floatVal&gt; startsymbol</span><br><span class="line"></span><br><span class="line">%token LEFT_P RIGHT_P NUMBER</span><br><span class="line"></span><br><span class="line">%%</span><br><span class="line">input</span><br><span class="line">    : input startsymbol &#123;</span><br><span class="line">        ans = $<span class="number">2</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%.2f\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    | &#123;</span><br><span class="line">    &#125;</span><br><span class="line">startsymbol</span><br><span class="line">    : expression &#123;</span><br><span class="line">        $$ = $<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ;</span><br><span class="line">expression</span><br><span class="line">    : NUMBER &#123;</span><br><span class="line">        $$ = $<span class="number">1</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    | LEFT_P NUMBER expression expression RIGHT_P &#123;</span><br><span class="line">        $$ = $<span class="number">2</span> * ($<span class="number">3</span> + $<span class="number">4</span>) + (<span class="number">1.0f</span> - $<span class="number">2</span>) * ($<span class="number">3</span> - $<span class="number">4</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ;</span><br><span class="line">%%</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">yyparse</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="Lex"><a href="#Lex" class="headerlink" title="Lex"></a>Lex</h1><p>Lex 主要是扮演切出所有的 token 的角色，相當於 Scanner。同時要將值紀錄再 <code>yylval</code> 中，在 Yacc 那邊則會在 <code>$NUMBER</code> 中得到變數值。</p>
<p>在 Lex 語法上要特別小心，如果兩條的前綴 (prefix) 相同時 (解析上會產生相同的 token)，則會選擇長的那一條為優先。如果長度仍相同的話，請自行測試，這裡無法給予解答。而為什麼要這麼設計？為了保證後綴不會塞入奇怪的字符，因此可以先檢查隨後接的字符情況。</p>
<figure class="highlight cpp"><figcaption><span>file: a.l</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">%&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;a.tab.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line">%&#125;</span><br><span class="line"></span><br><span class="line">%%</span><br><span class="line">([-]?)[<span class="number">0</span><span class="number">-9</span>]*\.[<span class="number">0</span><span class="number">-9</span>]*		&#123;<span class="built_in">sscanf</span>(yytext, <span class="string">&quot;%f&quot;</span>, &amp;yylval.floatVal); <span class="keyword">return</span> NUMBER;&#125;</span><br><span class="line">([-]?)[<span class="number">0</span><span class="number">-9</span>]+				&#123;<span class="built_in">sscanf</span>(yytext, <span class="string">&quot;%f&quot;</span>, &amp;yylval.floatVal); <span class="keyword">return</span> NUMBER;&#125;</span><br><span class="line"><span class="string">&quot;(&quot;</span>					&#123;<span class="keyword">return</span> LEFT_P;&#125;</span><br><span class="line"><span class="string">&quot;)&quot;</span>					&#123;<span class="keyword">return</span> RIGHT_P;&#125;</span><br><span class="line">\n					&#123;&#125;</span><br><span class="line">.					&#123;&#125;</span><br><span class="line">%%</span><br></pre></td></tr></table></figure>

<h1 id="make-file"><a href="#make-file" class="headerlink" title="make file"></a>make file</h1><p>請用以下方法建造</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">morris $ sh make.sh</span><br></pre></td></tr></table></figure>

<p>代碼如下</p>
<figure class="highlight plaintext"><figcaption><span>file: make.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bison -d a.y</span><br><span class="line">flex a.l</span><br><span class="line">gcc -c a.tab.c</span><br><span class="line">gcc -c lex.yy.c</span><br><span class="line">gcc lex.yy.o a.tab.o -lfl</span><br></pre></td></tr></table></figure>

<p>產生的結果如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ tree </span><br><span class="line">. ├── a.l</span><br><span class="line">  ├── a.out </span><br><span class="line">  ├── a.tab.c </span><br><span class="line">  ├── a.tab.h </span><br><span class="line">  ├── a.tab.o </span><br><span class="line">  ├── a.y </span><br><span class="line">  ├── input~ </span><br><span class="line">  ├── lex.yy.c </span><br><span class="line">  ├── lex.yy.o </span><br><span class="line">  ├── make.sh </span><br><span class="line">  ├── make.sh~ </span><br><span class="line">  ├── testdata </span><br><span class="line">  │   ├── ac_output </span><br><span class="line">  │   └── input </span><br></pre></td></tr></table></figure>

<h1 id="執行"><a href="#執行" class="headerlink" title="執行"></a>執行</h1><p>執行的時候就跟標準輸入串流一樣。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">morris $ ./a.out &lt;input</span><br></pre></td></tr></table></figure>

<h2 id="參考範例輸入"><a href="#參考範例輸入" class="headerlink" title="參考範例輸入"></a>參考範例輸入</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">7</span><br><span class="line">(.5 3 9)</span><br><span class="line">(0.3 2 (1 1 -10))</span><br><span class="line">(1.0 (1.0 (1.0 -1 -2) (1.0 -1 -2)) (1.0 (1.0 1 2) 2))</span><br><span class="line">(0.99 82 (0.76 50 (0.85 (0.07 (0.88 28 (0.98 79 (0.09 77 51))) (0.30 (0.29 36 (0.36 (0.51 27 (0.68 (0.47 87 35) (0.25 85 59))) 31)) 64)) (0.14 (0.84 (0.77 29 71) (0.50 (0.99 (0.81 (0.78 (0.87 50 7) 71) 72) 14) (0.30 (0.50 9 37) (0.67 21 (0.73 86 (0.08 31 14)))))) (0.94 (0.96 (0.50 27 (0.94 (0.54 62 (0.63 89 29)) (0.81 24 (0.94 20 72)))) 4) (0.44 9 (0.59 (0.70 48 40) (0.64 (0.27 97 71) 43))))))))</span><br><span class="line">(0.15 12 60)</span><br><span class="line">(0.55 18 (0.95 (0.79 95 (0.97 (0.11 (0.96 (0.70 (0.38 73 66) (0.38 (0.06 (0.02 88 66) (0.39 35 37)) 69)) (0.81 3 (0.45 5 61))) (0.44 (0.67 (0.23 82 7) 38) (0.24 49 74))) 76)) (0.46 19 44)))</span><br><span class="line">(0.56 62 77)</span><br><span class="line">(0.03 (0.90 19 35) (0.17 50 (0.13 (0.96 74 (0.07 (0.51 78 (0.77 (0.78 (0.84 64 (0.41 7 59)) 21) (0.73 (0.95 (0.13 2 85) (0.08 29 50)) (0.24 (0.12 43 99) 71)))) 84)) (0.31 69 (0.82 31 24)))))</span><br><span class="line">(0.78 73 44)</span><br><span class="line">(0.09 (0.80 14 62) (0.57 (0.57 95 (0.33 94 31)) (0.70 (0.92 32 (0.13 20 (0.44 87 (0.45 83 26)))) (0.43 40 (0.51 (0.57 29 (0.65 13 (0.40 74 56))) 56)))))</span><br><span class="line">(0.96 (0.96 (0.65 (0.01 (0.98 (0.34 86 (0.68 87 21)) 27) (0.26 68 68)) (0.42 28 29)) 9) 99)</span><br><span class="line">(0.99 (0.60 53 27) (0.35 23 (0.15 (0.50 85 (0.73 56 (0.34 (0.44 (0.10 (0.62 (0.20 58 15) 56) (0.57 74 (0.23 20 78))) 62) (0.92 (0.72 (0.82 75 (0.08 35 93)) 43) (0.55 10 (0.45 (0.25 52 91) 71)))))) (0.61 39 (0.49 (0.92 87 (0.13 52 (0.69 (0.46 (0.82 27 72) 96) (0.27 51 99)))) (0.36 99 (0.60 68 (0.49 (0.25 (0.92 54 7) (0.48 47 32)) (0.08 (0.69 97 11) 34)))))))))</span><br><span class="line">(0.87 (0.32 (0.42 (0.66 69 (0.98 0 (0.46 94 (0.25 (0.57 (0.72 25 59) (0.35 91 (0.42 29 28))) 3)))) 19) 81) (0.72 (0.06 (0.66 (0.07 22 87) 44) (0.18 33 14)) 49))</span><br><span class="line">(0.72 (0.01 67 (0.13 (0.22 (0.88 11 86) (0.04 40 (0.41 (0.86 (0.81 (0.08 84 95) (0.88 19 67)) 8) 96))) 13)) (0.13 45 (0.19 (0.83 85 (0.77 (0.37 78 (0.44 44 59)) 37)) 56)))</span><br><span class="line">(0.51 (0.36 2 72) 25)</span><br><span class="line">(0.32 51 87)</span><br><span class="line">(0.06 (0.23 (0.70 93 47) (0.22 20 (0.90 (0.03 (0.48 (0.84 18 (0.29 (0.02 (0.06 52 49) 67) (0.49 (0.69 60 74) (0.59 92 0)))) 32) 80) (0.76 78 (0.66 8 94))))) 31)</span><br><span class="line">(0.29 (0.54 70 (0.64 (0.48 (0.50 25 (0.38 (0.07 (0.14 (0.44 (0.76 44 45) 67) 41) (0.15 (0.86 (0.89 87 42) (0.43 85 58)) (0.98 44 (0.48 34 28)))) (0.84 81 60))) 28) 16)) (0.84 (0.21 34 (0.78 (0.76 (0.51 82 (0.07 (0.78 (0.52 (0.65 51 58) 12) (0.05 52 (0.98 0 30))) (0.01 27 3))) (1.00 15 (0.53 (0.91 (0.38 62 (0.75 92 69)) (0.85 53 (0.84 92 83))) (0.70 (0.12 (0.24 23 83) 58) (0.62 56 38))))) 36)) (0.66 41 13)))</span><br><span class="line">(0.94 (0.47 30 56) (0.78 6 (0.45 (0.45 15 94) (0.77 (0.57 25 (0.33 66 12)) (0.66 74 (0.82 (0.14 75 50) (0.22 45 43)))))))</span><br><span class="line">(0.66 (0.58 (0.85 75 26) 45) (0.04 (0.94 82 (0.59 34 (0.02 (0.09 11 (0.31 (0.05 (0.92 (0.14 51 45) (0.47 25 46)) 6) 5)) 33))) (0.81 (0.09 15 (0.91 (0.77 (0.59 44 (0.57 (0.39 (0.81 18 75) (0.37 41 67)) 18)) (0.77 (0.68 (0.71 (0.31 87 94) 85) (0.00 35 (0.55 81 22))) 56)) 3)) (0.43 7 (0.98 94 3)))))</span><br><span class="line">(0.13 22 80)</span><br><span class="line">(0.77 45 81)</span><br><span class="line">(0.61 (0.21 (0.32 (0.32 (0.81 8 60) 78) (0.19 (0.92 68 (0.56 (0.22 79 32) (0.32 72 63))) 41)) (0.30 94 31)) (0.80 59 33))</span><br></pre></td></tr></table></figure>

<h2 id="參考範例輸出"><a href="#參考範例輸出" class="headerlink" title="參考範例輸出"></a>參考範例輸出</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">7.00</span><br><span class="line">3.00</span><br><span class="line">5.60</span><br><span class="line">-1.00</span><br><span class="line">241.55</span><br><span class="line">-30.00</span><br><span class="line">32.05</span><br><span class="line">71.24</span><br><span class="line">25.80</span><br><span class="line">97.64</span><br><span class="line">-37.98</span><br><span class="line">153.38</span><br><span class="line">67.92</span><br><span class="line">35.81</span><br><span class="line">-10.21</span><br><span class="line">-17.66</span><br><span class="line">19.68</span><br><span class="line">60.84</span><br><span class="line">92.20</span><br><span class="line">30.61</span><br><span class="line">157.62</span><br><span class="line">-37.20</span><br><span class="line">88.74</span><br><span class="line">-48.46</span><br></pre></td></tr></table></figure>

<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="http://www.ibm.com/developerworks/cn/linux/sdk/lex/">Yacc 与 Lex 快速入门</a></p>
<h1 id="指導"><a href="#指導" class="headerlink" title="指導"></a>指導</h1><p><a href="http://en.wikipedia.org/wiki/God">Inker</a></p>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-1636" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/12/oj/uva/uva-1636/" class="article-date">
  <time datetime="2014-05-12T01:15:24.000Z" itemprop="datePublished">2014-05-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/12/oj/uva/uva-1636/">UVa 1636 - Headshot</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/12/oj/uva/uva-1636/" data-id="ckpaivcct00ltn8vnhpk61690" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/12/oj/uva/uva-1636/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/概率/">概率</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>You have a revolver gun with a cylinder that has n chambers. Chambers are located in a circle on a cylinder. Each chamber can be empty or can contain a round. One chamber is aligned with the gun’s barrel. When trigger of the gun is pulled, the gun’s cylinder rotates, aligning the next chamber with the barrel, hammer strikes the round, making a shot by firing a bullet through the barrel. If the chamber is empty when the hammer strikes it, then there is no shot but just a <code>click</code>.</p>
<p>You have found a use for this gun. You are playing Russian Roulette with your friend. Your friend loads rounds into some chambers, randomly rotates the cylinder, aligning a random chamber with a gun’s barrel, puts the gun to his head and pulls the trigger. You hear <code>click</code> and nothing else – the chamber was empty and the gun did not shoot.</p>
<p>Now it is your turn to put the gun to your head and pull the trigger. You have a choice. You can either pull the trigger right away or you can randomly rotate the gun’s cylinder and then pull the trigger. What should you choose to maximize the chances of your survival? </p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The input file contains several datasets. A dataset contains a single line with a string of n digits <code>0</code> and <code>1</code> ( 2 &lt;= n &lt;= 100). This line of digits represents the pattern of rounds that were loaded into the gun’s chambers. <code>0</code> represent an empty chamber, <code>1</code> represent a loaded one. In this representation, when cylinder rotates before a shot, the next chamber to the right gets aligned with the barrel for a shot. Since the chambers are actually located on a circle, the first chamber in this string follows the last one. There is at least one <code>0</code> in this string.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For each dataset, write to the output file one of the following words (without quotes):</p>
<ul>
<li><code>SHOOT</code> – if pulling the trigger right away makes you less likely to be actually shot in the head with the bullet (more likely that the chamber will be empty).</li>
<li><code>ROTATE</code> – if randomly rotating the cylinder before pulling the trigger makes you less likely to be actually shot in the head with the bullet (more likely that the chamber will be empty).</li>
<li><code>EQUAL</code> – if both of the above choices are equal in terms of probability of being shot.</li>
</ul>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0011</span><br><span class="line">0111</span><br><span class="line">000111</span><br></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EQUAL</span><br><span class="line">ROTATE</span><br><span class="line">SHOOT</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>** 題目描述：**</p>
<p>俄羅斯輪盤，現在與一位朋友一起玩這場遊戲，然而我們已經知道左輪手槍中的填彈資訊，剛聽到朋友按下扣板，但是沒有死。現在輪到你，請問要直接按？還是隨機轉一圈再按？</p>
<p>** 題目解法：**</p>
<p>不外乎地，我們要找到哪個機率高。</p>
<p>由於朋友按下沒死，也就是要考慮連續 2 個 <code>0</code> 的情況，下一個是 <code>0</code> 的機率為 <code>czero / zero</code></p>
<p>// 在前提為 0 的情況下，下一個為 0 的機率為何，也就是考慮 <code>00</code> 和 <code>01</code> 的情況下，<code>00</code> 的機率為何。<br>// czero 是連續為 0 的個數，zero 是 0 的個數 (同時也是 <code>00</code> <code>01</code> 的個數。)，n 是全部個數。</p>
<p>隨機轉一圈得到 <code>0</code> 的概率為 <code>zero / n</code>。</p>
<p>不小心把題目想太難，事實上這問題很簡單的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    char s[1024];</span><br><span class="line">    while(scanf(&quot;%s&quot;, s) == 1)&#123;</span><br><span class="line">        int n = strlen(s);</span><br><span class="line">        int zero = 0, one = 0, czero = 0;</span><br><span class="line">        for(int i = 0 ; i &lt; n ; i++ )&#123;</span><br><span class="line">            if(s[i] == &#x27;1&#x27;) </span><br><span class="line">                continue;</span><br><span class="line">            zero++;</span><br><span class="line">            if(s[(i+1)%n] == &#x27;0&#x27;) czero++;</span><br><span class="line">        &#125;</span><br><span class="line">        // czero - zero * (zero / n)</span><br><span class="line">        if(czero * n == zero * zero) </span><br><span class="line">            puts(&quot;EQUAL&quot;);</span><br><span class="line">        else if(czero * n &gt; zero * zero)</span><br><span class="line">            puts(&quot;SHOOT&quot;);</span><br><span class="line">        else </span><br><span class="line">            puts(&quot;ROTATE&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/categories/解題區/page/60/">&laquo; Prev</a><a class="page-number" href="/categories/解題區/">1</a><span class="space">&hellip;</span><a class="page-number" href="/categories/解題區/page/59/">59</a><a class="page-number" href="/categories/解題區/page/60/">60</a><span class="page-number current">61</span><a class="page-number" href="/categories/解題區/page/62/">62</a><a class="page-number" href="/categories/解題區/page/63/">63</a><a class="page-number" href="/categories/解題區/page/64/">64</a><a class="extend next" rel="next" href="/categories/解題區/page/62/">Next &raquo;</a>
    </nav>
  
</section>
          
          
            <aside id="sidebar">
  <!-- <div id="ukagaka_panel"></div> -->
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/">學校課程</a><span class="category-list-count">115</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/介面設計/">介面設計</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/作業系統/">作業系統</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/即時系統/">即時系統</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/大學專題/">大學專題</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/巨量資料/">巨量資料</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/平行程式/">平行程式</a><span class="category-list-count">43</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/敏捷方法/">敏捷方法</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/數位影像生成/">數位影像生成</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/編譯器/">編譯器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/自然語言/">自然語言</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/虛擬實境/">虛擬實境</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算型智慧/">計算型智慧</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算幾何/">計算幾何</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算機圖學/">計算機圖學</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資料庫系統/">資料庫系統</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資訊安全/">資訊安全</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/通識課程/">通識課程</a><span class="category-list-count">14</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/">工作應用</a><span class="category-list-count">30</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/Java/">Java</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/Meme/">Meme</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/可持久化/">可持久化</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/鬼故事/">鬼故事</a><span class="category-list-count">9</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/手札日記/">手札日記</a><span class="category-list-count">44</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/">網頁設計</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/About-This-Blog/">About This Blog</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/HTML5/">HTML5</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/JQuery/">JQuery</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/Markdown/">Markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/NodeJs/">NodeJs</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/">解題區</a><span class="category-list-count">633</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/Latex/">Latex</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/出題解題/">出題解題</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-POJ/">解題區 - POJ</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a><span class="category-list-count">483</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a><span class="category-list-count">77</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-其他題目/">解題區 - 其他題目</a><span class="category-list-count">45</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-未解題目/">解題區 - 未解題目</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/雜言筆記/">雜言筆記</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a class="text" href="/2021/05/30/java/java-memory-optimization-1/">
              
                <i class="icon-file-o"></i> 
              
            Java 優化內存使用 結構篇</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/diary-202101/">
              
                <i class="icon-file-o"></i> 
              
            二八進展</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-file-extension/">
              
                <i class="icon-file-o"></i> 
              
            File Extension</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-globl-var/">
              
                <i class="icon-file-o"></i> 
              
            Global Variable</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-handover/">
              
                <i class="icon-file-o"></i> 
              
            Handover</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-interview-recursion/">
              
                <i class="icon-file-o"></i> 
              
            Interview &amp; Recursion</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-job-build/">
              
                <i class="icon-file-o"></i> 
              
            Job Build</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-lang/">
              
                <i class="icon-file-o"></i> 
              
            Programming Language Impostors</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-machine-learning-newbie/">
              
                <i class="icon-file-o"></i> 
              
            Machine Learning for Newbie</a>
          </li>
        
          <li>
            <a class="text" href="/2021/01/31/work/meme-parallel-gc/">
              
                <i class="icon-file-o"></i> 
              
            Parallel &amp; Garbage Collection</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget-wrap">
    <h3 class="widget-title">Links</h3>
    <div class="widget">   
      	<ul>
	      <li><a href="http://mypaper.pchome.com.tw/zerojudge" target="_blank" title="Old Blog"><i class="icon-star"></i> Morris' Blog (pchome)</a></li>
	      <li><a href="http://flere114.blogspot.tw/" target="_blank" title="蘿莉勿觸"><i class="icon-googles"></i> flere's Blog</a></li>
	      <li><a href="http://dreamoon4.blogspot.tw/" target="_blank" title="夢月"><i class="icon-googles"></i> dreamoon's Blog</a></li>
	      <li><a href="http://m80126colin.github.io" target="_blank" title="許胖們"><i class="icon-github-alt"></i> m80126colin's Blog</a></li>
	      <li><a href="http://sd12582000.blogspot.tw/" target="_blank" title="妮可妮可"><i class="icon-github-alt"></i> Nico's Blog</a></li>
	      <li><a href="http://kuoe0.logdown.com/" target="_blank" title="郭至軒大神"><i class="icon-github-alt"></i> KuoE0's Dots</a></li>
	      <li><a href="http://tyan.io/" title=""><i class="icon-github-alt"></i> Tyan Blog</a></li>
    	</ul>
    </div>
</div>

  
    
<script src="/js/jquery-ui.js"></script>
<script src="/js/ukagaka/jquery.morris.ukagaka.resource.js"></script>
<script src="/js/ukagaka/typed.js"></script>
<script type="text/javascript">
  $('#ukagaka_panel').ukagaka();
</script>
  
  
</aside>
          
        
      </div>
      <footer id="footer">
  
  <div class="outer">    
    <div class="social-group">
      
      <a href="https://github.com/morris821028" target="_blank" title="github"><i class="icon-github"></i></a>
      
      
      <a href="https://www.facebook.com/Morris1028" target="_blank" title="facebook"><i class="icon-facebook-sign"></i></a>
      
      
      <a href="http://uhunt.felix-halim.net/id/46705" target="_blank" title="uhunt" ><span class="icon-uhunt">UVa<span></a>
      
    </div>
    <div id="footer-info" class="inner">
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and Theme by <a href="https://github.com/morris821028/hexo-theme-landscape" target="_blank" title="landscape">landscape</a> &copy; 2021 Shiang-Yun Yang 
    </div>
  </div>
</footer>


    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link"><i class=icon-home ></i>&nbsp&nbspHome</a>
  
    <a href="/about" class="mobile-nav-link"><i class=icon-user ></i>&nbsp&nbspAbout</a>
  
    <a href="/archives" class="mobile-nav-link"><i class=icon-archive ></i>&nbsp&nbspArchives</a>
  
    <a href="/tags" class="mobile-nav-link"><i class=icon-tags ></i>&nbsp&nbspTags</a>
  
    <a href="/picture" class="mobile-nav-link"><i class=icon-camera ></i>&nbsp&nbspPictures</a>
  
    <a href="/works" class="mobile-nav-link"><i class=icon-trophy ></i>&nbsp&nbspWorks</a>
  
</nav>
    
<script>
  var disqus_shortname = 'morris1028';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/jquery.lazyload.js"></script>
<script src="/js/jquery.als-1.6.js"></script>

<script src="/js/script.js"></script>

  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>