<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Category: 解題區 | Morris&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Morris&#39; Blog">
<meta property="og:url" content="http://morris821028.github.io/categories/解題區/page/55/index.html">
<meta property="og:site_name" content="Morris&#39; Blog">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Morris&#39; Blog">
<link rel="publisher" href="108158678174364350000">
  
    <link rel="alternative" href="/atom.xml" title="Morris&#39; Blog" type="application/atom+xml">
  
  
    <meta name="google-site-verification" content="5mRgj8NanEMpGZuNfHNJNmH90RgNlrnJXsFlTaKD6Gs" />
  
  
    <link rel="shortcut icon" href="/img/f.ico">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <script src="/js/jquery-2.1.0.min.js"></script>
  <link rel="stylesheet" href="/css/style.css">
  
  <link rel="stylesheet" href="http://cdn.oesmith.co.uk/morris-0.5.1.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="http://cdn.oesmith.co.uk/morris-0.5.1.min.js"></script>
  <!-- <link rel="import" href="/bower_components/app-layout/app-layout.html"> --><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"><div id="banner-right"></div></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Morris&#39; Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          
            <a class="main-nav-link" href="/"><i class=icon-home title='Home'></i></a>
          
        
          
            <a class="main-nav-link" href="/about"><i class=icon-user title='About'></i></a>
          
        
          
            <a class="main-nav-link" href="/archives"><i class=icon-archive title='Archives'></i></a>
          
        
          
            <a class="main-nav-link" href="/tags"><i class=icon-tags title='Tags'></i></a>
          
        
          
            <a class="main-nav-link" href="/picture"><i class=icon-camera title='Pictures'></i></a>
          
        
          
            <a class="main-nav-link" href="/works"><i class=icon-trophy title='Works'></i></a>
          
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://morris821028.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        
          
          <section id="main">
  
    <article id="post-oj/uva/uva-11184" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/21/oj/uva/uva-11184/" class="article-date">
  <time datetime="2014-07-21T09:28:22.000Z" itemprop="datePublished">2014-07-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/21/oj/uva/uva-11184/">UVa 11184 - Joyful Ride</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/07/21/oj/uva/uva-11184/" data-id="ckxv1wnjb02q5a8vny2imnc5y" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/07/21/oj/uva/uva-11184/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/規律/">規律</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Suppose you want to own a roller coaster. Before you start, you might be interested in designing the course. The course is circular when seen from above, with n towers of equal distances on it. The figure below shows a course with n=7 (numbers inside circles are heights of towers).</p>
<p>To make the towers look interesting, their heights should be distinct positive integers not greater than n+1. To let customers enjoy a large variety of excitement, the height differences between neighboring towers should be all different. Since there are n height differences, each integer value between 1 and n must appear exactly once. In the example above, the height differences are: 8-1=7, 8-2=6, 7-2=5, 7-3=4, 5-3=2, 5-4=1, 4-1=3. You can check that every integer between 1 and 7 appears exactly once.</p>
<p>Write a program to design the ride.</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The input consists of several test cases. Each case contains a single integer n (2 £ n £ 1000), the number of towers. The last test case is followed by a single zero, which should not be processed.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For each test case, print the case number and n numbers if the design is possible, ‘-1’ otherwise.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">7</div><div class="line">234</div><div class="line">0</div></pre></td></tr></table></figure>
<h2 id="Output-for-Sample-Input"><a href="#Output-for-Sample-Input" class="headerlink" title="Output for Sample Input"></a>Output for Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Case 1: 1 4 5 3 7 2 8</div><div class="line">Case 2: -1</div></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p><strong> 題目描述： </strong></p>
<p>找到一個擺放 N + 1 個數字的環狀，數字彼此之間的差值恰好可以湊出所有 1 到 N 之間的整數。</p>
<p><strong> 題目解法： </strong></p>
<p>先窮舉前幾項的可能</p>
<p>Input<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td></tr></table></figure></p>
<p>Output<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">Case 1: -1</div><div class="line">Case 2: 1 2 4</div><div class="line">Case 3: 1 3 2 5</div><div class="line">Case 4: -1</div><div class="line">Case 5: -1</div><div class="line">Case 6: 1 4 5 3 7 2 8</div><div class="line">Case 7: 1 5 4 6 3 8 2 9</div><div class="line">Case 8: -1</div><div class="line">Case 9: -1</div><div class="line">Case 10: 1 6 7 5 8 4 10 3 11 2 12</div><div class="line">Case 11: 1 7 6 8 5 9 4 11 3 12 2 13</div><div class="line">Case 12: -1</div><div class="line">Case 13: -1</div><div class="line">Case 14: 1 8 9 7 10 6 11 5 13 4 14 3 15 2 16</div><div class="line">Case 15: 1 9 8 10 7 11 6 12 5 14 4 15 3 16 2 17</div><div class="line">Case 16: -1</div><div class="line">Case 17: -1</div><div class="line">Case 18: 1 10 11 9 12 8 13 7 14 6 16 5 17 4 18 3 19 2 20</div><div class="line">Case 19: 1 11 10 12 9 13 8 14 7 15 6 17 5 18 4 19 3 20 2 21</div></pre></td></tr></table></figure></p>
<p>可以發現，對於 mod 4 餘 3、0 會沒有解。<br>仔細觀察一下規律，起頭 1，並且分別是 +-+-+- 從 -1+2-3+4 … 類推。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> n, cases = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) == <span class="number">1</span> &amp;&amp; n) &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case %d:"</span>, ++cases);</div><div class="line">        <span class="keyword">if</span>(n%<span class="number">4</span> != <span class="number">3</span> &amp;&amp; n%<span class="number">4</span> != <span class="number">0</span>)</div><div class="line">            <span class="built_in">puts</span>(<span class="string">" -1"</span>);</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">int</span> d = (n+<span class="number">1</span>)/<span class="number">4</span>*<span class="number">2</span><span class="number">-1</span> + (n%<span class="number">4</span> == <span class="number">0</span>);</div><div class="line">            <span class="keyword">int</span> sum = <span class="number">1</span> + d;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">" 1 %d"</span>, sum);</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>, j = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">                <span class="keyword">if</span>(i == d)</div><div class="line">                    <span class="keyword">continue</span>;</div><div class="line">                <span class="keyword">if</span>(j%<span class="number">2</span> != d%<span class="number">2</span>)</div><div class="line">                    sum += i;</div><div class="line">                <span class="keyword">else</span></div><div class="line">                    sum -= i;</div><div class="line">                <span class="built_in">printf</span>(<span class="string">" %d"</span>, sum);</div><div class="line">                j++;</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-11106" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/21/oj/uva/uva-11106/" class="article-date">
  <time datetime="2014-07-21T09:16:28.000Z" itemprop="datePublished">2014-07-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/21/oj/uva/uva-11106/">UVa 11106 - Rectilinear Polygon</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/07/21/oj/uva/uva-11106/" data-id="ckxv1wnji02qca8vnkelbsw1k" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/07/21/oj/uva/uva-11106/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/全局線段交/">全局線段交</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Given is n points with integer coordinates in the plane. Is it is possible to construct a simple, that is non-intersecting, rectilinear polygon with the given points as vertices? In a rectilinear polygon there are at least 4 vertices and every edge is either horizontal or vertical; each vertex is an endpoint of exactly one horizontal edge and one vertical edge. There are no holes in a polygon.</p>
<p>The first line of input is an integer giving the number of cases that follow. The input of each case starts with an integer 4 ≤ n ≤ 100000 giving the number of points for this test case. It is followed by n pairs of integers specifying the x and y coordinates of the points for this case.</p>
<p>The output should contain one line for each case on input. Each line should contain one integer number giving the length of the rectilinear polygon passing throught the given points when it exists; otherwise, it should contain -1.</p>
<h2 id="Sample-input"><a href="#Sample-input" class="headerlink" title="Sample input"></a>Sample input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">1</div><div class="line">8</div><div class="line">1 2</div><div class="line">1 0</div><div class="line">2 1</div><div class="line">2 2</div><div class="line">3 2</div><div class="line">3 1</div><div class="line">4 0</div><div class="line">4 2</div></pre></td></tr></table></figure>
<h2 id="Output-for-sample-input"><a href="#Output-for-sample-input" class="headerlink" title="Output for sample input"></a>Output for sample input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">12</div></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p><strong> 題目描述： </strong></p>
<p>給 N 個整數點座標，是否能構成一個直角的簡單多邊形，並請每個點都要在直角上。如果可以構成簡單多邊形，則輸出其多邊形周長為何。</p>
<p><strong> 題目解法： </strong></p>
<p>由於每個點都必須在直角上，所以先考慮對 <code>x = k</code> 這一條直線上有數個點，則為了要構成簡單多邊形，保證這數個點根據 y 值排序，一定會構成 (y1, y2) (y3, y4) … 的連線，不然弄不出每一個點都在直角上。同理對於 <code>y = k</code> 考慮連線情況。</p>
<p>當我們將所有連線情況都記錄下後，要確保所有線段之間不會相交 (端點不算在相交情況中)，同時經過遍歷走訪後，所有的點都在同一個 component 上。</p>
<p>對於 N 個線段，可以在 O(N log N) 時間內得到是否有相交情況。代碼修改於 <a href="http://www.csie.ntnu.edu.tw/~u91029/PointLinePlane2.html" target="_blank" rel="external">DJWS 演算法筆記</a></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt; </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> eps 1e-6</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Pt</span> &#123;</span></div><div class="line">    <span class="keyword">int</span> x, y, label;</div><div class="line">    Pt(<span class="keyword">int</span> a = <span class="number">0</span>, <span class="keyword">int</span> b = <span class="number">0</span>, <span class="keyword">int</span> c = <span class="number">0</span>):</div><div class="line">    	x(a), y(b), label(c) &#123;&#125;</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Pt &amp;a) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">if</span>(x != a.x)	<span class="keyword">return</span> x &lt; a.x;</div><div class="line">        <span class="keyword">return</span> y &lt; a.y;</div><div class="line">    &#125;</div><div class="line">    Pt <span class="keyword">operator</span>-(<span class="keyword">const</span> Pt &amp;a) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">return</span> Pt(x - a.x, y - a.y);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">dist</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> hypot(a.x - b.x, a.y - b.y);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">dot</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> a.x * b.x + a.y * b.y;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">cross2</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> a.x * b.y - a.y * b.x;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">cross</span><span class="params">(Pt o, Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> (a.x-o.x)*(b.y-o.y)-(a.y-o.y)*(b.x-o.x);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">between</span><span class="params">(Pt a, Pt b, Pt c)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> dot(c - a, b - a) &gt;= <span class="number">0</span> &amp;&amp; dot(c - b, a - b) &gt;= <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">onSeg</span><span class="params">(Pt a, Pt b, Pt c)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> between(a, b, c) &amp;&amp; <span class="built_in">fabs</span>(cross(a, b, c)) &lt; eps;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">intersection</span><span class="params">(Pt as, Pt at, Pt bs, Pt bt)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(cross(as, at, bs) * cross(as, at, bt) &lt; <span class="number">0</span> &amp;&amp;</div><div class="line">       cross(at, as, bs) * cross(at, as, bt) &lt; <span class="number">0</span> &amp;&amp;</div><div class="line">       cross(bs, bt, as) * cross(bs, bt, at) &lt; <span class="number">0</span> &amp;&amp;</div><div class="line">       cross(bt, bs, as) * cross(bt, bs, at) &lt; <span class="number">0</span>)</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmpX</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(a.x != b.x)	<span class="keyword">return</span> a.x &lt; b.x;</div><div class="line">    <span class="keyword">return</span> a.y &lt; b.y;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmpY</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(a.y != b.y)	<span class="keyword">return</span> a.y &lt; b.y;</div><div class="line">    <span class="keyword">return</span> a.x &lt; b.x;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; g[<span class="number">100005</span>];</div><div class="line"><span class="keyword">int</span> visited[<span class="number">100005</span>], dfsCnt;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> p)</span> </span>&#123;</div><div class="line">    visited[u] = <span class="number">1</span>, dfsCnt++;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = g[u].size()<span class="number">-1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</div><div class="line">        <span class="keyword">int</span> v = g[u][i];</div><div class="line">        <span class="keyword">if</span>(v == p || visited[v])	<span class="keyword">continue</span>;</div><div class="line">        dfs(v, u);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// http://www.csie.ntnu.edu.tw/~u91029/PointLinePlane2.html</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">seg</span> &#123;</span></div><div class="line">    Pt s, e;</div><div class="line">    seg(Pt a, Pt b):s(a), e(b) &#123;&#125;</div><div class="line">&#125;;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Endpoint</span> &#123;</span></div><div class="line">    <span class="keyword">int</span> x, s, i;</div><div class="line">    Endpoint(<span class="keyword">int</span> a = <span class="number">0</span>, <span class="keyword">int</span> b = <span class="number">0</span>, <span class="keyword">int</span> c = <span class="number">0</span>):</div><div class="line">        x(a), s(b), i(c) &#123;&#125;</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Endpoint &amp;a) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">return</span> x &lt; a.x || (x == a.x &amp;&amp; s &gt; a.s);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CMP</span> &#123;</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">int</span> x;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">double</span> <span class="title">interpolate</span><span class="params">(<span class="keyword">const</span> Pt&amp; p1, <span class="keyword">const</span> Pt&amp; p2, <span class="keyword">int</span>&amp; x)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (p1.x == p2.x) <span class="keyword">return</span> p1.y;</div><div class="line">        <span class="keyword">return</span> p1.y + (<span class="keyword">double</span>)(p2.y - p1.y) / (p2.x - p1.x) * (x - p1.x);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> seg &amp;i, <span class="keyword">const</span> seg &amp;j)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> interpolate(i.s, i.e, x) &lt; interpolate(j.s, j.e, x);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">int</span> CMP::x = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="built_in">set</span>&lt;seg, CMP&gt;::<span class="function">iterator <span class="title">prevNode</span><span class="params">(<span class="built_in">set</span>&lt;seg, CMP&gt;::iterator it, <span class="built_in">set</span>&lt;seg, CMP&gt;&amp; S)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> it == S.begin() ? it : --it;</div><div class="line">&#125;</div><div class="line"><span class="built_in">set</span>&lt;seg, CMP&gt;::<span class="function">iterator <span class="title">nextNode</span><span class="params">(<span class="built_in">set</span>&lt;seg, CMP&gt;::iterator it, <span class="built_in">set</span>&lt;seg, CMP&gt;&amp; S)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> it == S.end() ? it : ++it;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">segment_intersect</span><span class="params">(<span class="built_in">vector</span>&lt;seg&gt; segs)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; segs.size(); i++)</div><div class="line">        <span class="keyword">if</span>(segs[i].e &lt; segs[i].s)</div><div class="line">            swap(segs[i].s, segs[i].e);</div><div class="line">            </div><div class="line">    <span class="built_in">vector</span>&lt;Endpoint&gt; e;</div><div class="line">    <span class="built_in">set</span>&lt;seg, CMP&gt; S;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; segs.size(); i++) &#123;</div><div class="line">        e.push_back(Endpoint(segs[i].s.x, <span class="number">1</span>, i));</div><div class="line">        e.push_back(Endpoint(segs[i].e.x, <span class="number">-1</span>, i));</div><div class="line">    &#125;</div><div class="line">    sort(e.begin(), e.end());</div><div class="line">    </div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; e.size(); i++) &#123;</div><div class="line">        CMP::x = e[i].x;</div><div class="line">        <span class="keyword">if</span>(e[i].s == <span class="number">1</span>) &#123;</div><div class="line">            <span class="built_in">set</span>&lt;seg, CMP&gt;::iterator it, jt;</div><div class="line">            it = S.lower_bound(segs[e[i].i]);</div><div class="line">            jt = prevNode(it, S);</div><div class="line">            <span class="keyword">if</span>(it != S.end() &amp;&amp; intersection(segs[e[i].i].s, segs[e[i].i].e, it-&gt;s, it-&gt;e))</div><div class="line">                <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">            <span class="keyword">if</span>(jt != S.end() &amp;&amp; intersection(segs[e[i].i].s, segs[e[i].i].e, jt-&gt;s, jt-&gt;e))</div><div class="line">                <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">            S.insert(segs[e[i].i]);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="built_in">set</span>&lt;seg, CMP&gt;::iterator it, jt, kt;</div><div class="line">            it = S.lower_bound(segs[e[i].i]);</div><div class="line">            jt = prevNode(it, S);</div><div class="line">            kt = nextNode(it, S);</div><div class="line">            <span class="keyword">if</span>(jt != S.end() &amp;&amp; kt != S.end() &amp;&amp; intersection(kt-&gt;s, kt-&gt;e, jt-&gt;s, jt-&gt;e))</div><div class="line">                <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">            <span class="keyword">if</span>(it != S.end())</div><div class="line">                S.erase(it);</div><div class="line">        &#125;</div><div class="line">    &#125; </div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line">Pt D[<span class="number">100005</span>], P[<span class="number">100005</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="comment">//	freopen("in.txt", "r+t", stdin);</span></div><div class="line"><span class="comment">//	freopen("out.txt", "w+t", stdout); </span></div><div class="line">    </div><div class="line">    <span class="keyword">int</span> testcase, n;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;testcase);</div><div class="line">    <span class="keyword">while</span>(testcase--) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;P[i].x, &amp;P[i].y);</div><div class="line">            D[i] = P[i], D[i].label = i;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">int</span> eflag = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">            g[i].clear(), visited[i] = <span class="number">0</span>;</div><div class="line">        sort(D, D+n, cmpX);		</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n &amp;&amp; !eflag; i += <span class="number">2</span>) &#123;</div><div class="line">            <span class="keyword">if</span>(i+<span class="number">1</span> &lt; n &amp;&amp; D[i].x == D[i+<span class="number">1</span>].x) &#123;</div><div class="line">                g[D[i].label].push_back(D[i+<span class="number">1</span>].label);</div><div class="line">                g[D[i+<span class="number">1</span>].label].push_back(D[i].label);</div><div class="line">            &#125; <span class="keyword">else</span></div><div class="line">                eflag = <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        sort(D, D+n, cmpY);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n &amp;&amp; !eflag; i += <span class="number">2</span>) &#123;</div><div class="line">            <span class="keyword">if</span>(i+<span class="number">1</span> &lt; n &amp;&amp; D[i].y == D[i+<span class="number">1</span>].y) &#123;</div><div class="line">                g[D[i].label].push_back(D[i+<span class="number">1</span>].label);</div><div class="line">                g[D[i+<span class="number">1</span>].label].push_back(D[i].label);</div><div class="line">            &#125; <span class="keyword">else</span></div><div class="line">                eflag = <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span>(!eflag) &#123; <span class="comment">// only one component</span></div><div class="line">            dfsCnt = <span class="number">0</span>;</div><div class="line">            dfs(<span class="number">0</span>, <span class="number">-1</span>);</div><div class="line">            <span class="keyword">if</span>(dfsCnt != n)</div><div class="line">                eflag = <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span>(!eflag) &#123;</div><div class="line">            <span class="built_in">vector</span>&lt;seg&gt; segs;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = g[i].size()<span class="number">-1</span>; j &gt;= <span class="number">0</span>; j--) &#123;</div><div class="line">                    segs.push_back(seg(P[i], P[g[i][j]]));</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            eflag = segment_intersect(segs);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span>(eflag)</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"-1"</span>);</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">int</span> para = <span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = g[i].size()<span class="number">-1</span>; j &gt;= <span class="number">0</span>; j--) &#123;</div><div class="line">                    para += <span class="built_in">abs</span>(P[i].x - P[g[i][j]].x) + <span class="built_in">abs</span>(P[i].y - P[g[i][j]].y);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, para/<span class="number">2</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">5</span></div><div class="line"><span class="comment">6</span></div><div class="line"><span class="comment">68 81</span></div><div class="line"><span class="comment">65 33</span></div><div class="line"><span class="comment">32 94</span></div><div class="line"><span class="comment">52 80</span></div><div class="line"><span class="comment">63 44</span></div><div class="line"><span class="comment">11 41</span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-10877" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/21/oj/uva/uva-10877/" class="article-date">
  <time datetime="2014-07-21T08:59:59.000Z" itemprop="datePublished">2014-07-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/21/oj/uva/uva-10877/">UVa 10877 - Diceoids</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/07/21/oj/uva/uva-10877/" data-id="ckxv1wnib02p5a8vnwsu9it8l" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/07/21/oj/uva/uva-10877/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/最小表示法/">最小表示法</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/骰子/">骰子</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>The following picture shows four dice. Or are they all dice?</p>
<p>Artifacts (a) and (b) are dice; (c) and (d) are not dice, but they are the same—you can see that by a suitable rotation of (d). Thus, here we have two classes of dice-like artifacts (diceoids), classified by comparison under suitable rotations.</p>
<p>You are given a bag of diceoids, and your job is to classify them and report how many classes there are. (Your job is not to determine how many are dice.) To facilitate description of diceoids in a text medium, we label the faces of the cube:</p>
<p>then a diceoid is encoded as a sequence of six numbers dA , . . . , dF , meaning that face i bears di dots. Example: 5 3 6 2 1 4 means that face A has 5 dots, face B has 3 dots, face C has 6 dots, etc. It is  entirely possible that different faces have the same number of dots, e.g., 2 2 2 3 3 3, but every face has at least 1 dot and at most 6 dots.</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The input file contains several test cases. The description of each test case is given below:</p>
<p>Each test case begins with the number of diceoids n (n&lt;=1000), followed by the description of n dicecoids.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For each test case your program should output the number of classes. Follow the format specified in the output for sample input.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">7</div><div class="line">5 3 6 2 1 4</div><div class="line">4 1 5 3 2 6</div><div class="line">5 6 3 2 4 1</div><div class="line">4 5 1 3 6 2</div><div class="line">2 2 2 3 3 3</div><div class="line">2 3 2 3 3 2</div><div class="line">1 1 1 1 1 1</div><div class="line">0</div></pre></td></tr></table></figure>
<h2 id="Output-for-Sample-Input"><a href="#Output-for-Sample-Input" class="headerlink" title="Output for Sample Input"></a>Output for Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">4</div></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p><strong> 題目描述： </strong></p>
<p>骰子同構判斷，找到真正有多少不同的骰子架構。</p>
<p><strong> 題目解法： </strong></p>
<p>對於每一個骰子，找到所有展開方式，紀錄一個最小表示法，最後排序找不同的個數即可。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></div><div class="line">    <span class="keyword">int</span> dice[<span class="number">6</span>];</div><div class="line">&#125;DICE;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Right_turn</span><span class="params">(DICE *A)</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">int</span> t;</div><div class="line">    t = A-&gt;dice[<span class="number">0</span>], A-&gt;dice[<span class="number">0</span>] = A-&gt;dice[<span class="number">4</span>];</div><div class="line">    A-&gt;dice[<span class="number">4</span>] = A-&gt;dice[<span class="number">3</span>], A-&gt;dice[<span class="number">3</span>] = A-&gt;dice[<span class="number">1</span>], A-&gt;dice[<span class="number">1</span>] = t;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Up_turn</span><span class="params">(DICE *A)</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">int</span> t;</div><div class="line">    t = A-&gt;dice[<span class="number">0</span>], A-&gt;dice[<span class="number">0</span>] = A-&gt;dice[<span class="number">5</span>];</div><div class="line">    A-&gt;dice[<span class="number">5</span>] = A-&gt;dice[<span class="number">3</span>], A-&gt;dice[<span class="number">3</span>] = A-&gt;dice[<span class="number">2</span>], A-&gt;dice[<span class="number">2</span>] = t;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">clockwise</span><span class="params">(DICE *A)</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">int</span> t;</div><div class="line">    t = A-&gt;dice[<span class="number">2</span>], A-&gt;dice[<span class="number">2</span>] = A-&gt;dice[<span class="number">4</span>];</div><div class="line">    A-&gt;dice[<span class="number">4</span>] = A-&gt;dice[<span class="number">5</span>], A-&gt;dice[<span class="number">5</span>] = A-&gt;dice[<span class="number">1</span>], A-&gt;dice[<span class="number">1</span>] = t;</div><div class="line">&#125;</div><div class="line">DICE Data[<span class="number">2048</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span> *a, <span class="keyword">const</span> <span class="keyword">void</span> *b)</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> DICE *i, *j;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">int</span> k;</div><div class="line">    i = (DICE *)a, j = (DICE *)b;</div><div class="line">    <span class="keyword">for</span>(k = <span class="number">0</span>; k &lt; <span class="number">6</span>; k++)</div><div class="line">        <span class="keyword">if</span>(i-&gt;dice[k] != j-&gt;dice[k])</div><div class="line">            <span class="keyword">return</span> i-&gt;dice[k] - j-&gt;dice[k];</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(DICE A)</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">int</span> i;</div><div class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, A.dice[i]);</div><div class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Spin_dice</span><span class="params">(DICE A, <span class="keyword">int</span> store)</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">int</span> i, j;</div><div class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)</div><div class="line">        Data[store].dice[i] = A.dice[i];</div><div class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</div><div class="line">        <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</div><div class="line">            <span class="keyword">if</span>(cmp(&amp;Data[store], &amp;A) &gt; <span class="number">0</span>)</div><div class="line">                Data[store] = A;</div><div class="line">            clockwise(&amp;A);</div><div class="line">        &#125;        </div><div class="line">        Right_turn(&amp;A);</div><div class="line">    &#125;</div><div class="line">    Up_turn(&amp;A);</div><div class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</div><div class="line">        <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</div><div class="line">            <span class="keyword">if</span>(cmp(&amp;Data[store], &amp;A) &gt; <span class="number">0</span>)</div><div class="line">                Data[store] = A;</div><div class="line">            clockwise(&amp;A);</div><div class="line">        &#125;        </div><div class="line">        Up_turn(&amp;A), Up_turn(&amp;A);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">main() &#123;</div><div class="line">    <span class="keyword">int</span> n, i, j;</div><div class="line">    DICE A;<span class="comment">// 前右上後左下</span></div><div class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) == <span class="number">1</span> &amp;&amp; n) &#123;</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">        	<span class="built_in">scanf</span>(<span class="string">"%d %d %d %d %d %d"</span>, &amp;A.dice[<span class="number">0</span>], &amp;A.dice[<span class="number">1</span>], &amp;A.dice[<span class="number">2</span>], </div><div class="line">                        &amp;A.dice[<span class="number">3</span>], &amp;A.dice[<span class="number">5</span>], &amp;A.dice[<span class="number">4</span>]);</div><div class="line">            Spin_dice(A, i);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> Ans = <span class="number">1</span>;</div><div class="line">        qsort(Data, n, <span class="keyword">sizeof</span>(DICE), cmp);</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="keyword">if</span>(cmp(&amp;Data[i], &amp;Data[i<span class="number">-1</span>]))</div><div class="line">                Ans++;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, Ans);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125; </div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-10769" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/21/oj/uva/uva-10769/" class="article-date">
  <time datetime="2014-07-21T08:49:41.000Z" itemprop="datePublished">2014-07-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/21/oj/uva/uva-10769/">UVa 10769 - Pillars</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/07/21/oj/uva/uva-10769/" data-id="ckxv1wni802p1a8vnsv4mxyw4" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/07/21/oj/uva/uva-10769/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/窮舉/">窮舉</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>The world-famous architect Mr. Fruí from Reus plans to build a colossal pillar H units high. Mr. Fruí has n black pieces with heights b1,…, bn and m white pieces with heights w1,…, wm. According to his design the pillar must have four pieces: a black piece on its bottom, a white piece above it, another black piece above, and finally a white piece on the top of the pillar.</p>
<p>Mr. Fruí wishes to know which of the combinations of four pieces with total height H is the most stable. Given two combinations A = [a1, a2, a3, a4] and B = [b1, b2, b3, b4] (where a1 denotes the height of the bottom (black) piece of the pillar A, a2 denotes the height of the second (white) piece of A, and so on), A is more stable than B if a1 &gt; b1, or if a1 = b1 but a2 &gt; b2, etc. (In other words, A is more stable than B if and only if the sequence of heights of the pieces of A is lexicographically larger than the sequence of heights of the pieces of B.)</p>
<p>Write a program such that, given the desired height H of the pillar, the heights of the black pieces and the heights of the white pieces, computes which pillar (if any) of height exactly H would be the most stable.</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>Input consists of zero ore more test cases. Each test case has on the first line H, an integer between 1 and 4*108. The second and third lines of each test consist respectively of the sequence b1,…, bn and of the sequence w1,…, wm. A blank line separates two consecutive test cases. You can assume 2<span>$\le$</span><!-- Has MathJax -->n<span>$\le$</span><!-- Has MathJax -->100 and 2<span>$\le$</span><!-- Has MathJax -->m<span>$\le$</span><!-- Has MathJax -->100, and that no piece has a height larger than 108.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For every test case, print one line with the sequence of heights of the pieces of the most stable pillar. If no solution exists, print “no solution”.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">100</div><div class="line">20 20</div><div class="line">30 10 30 50</div><div class="line"> </div><div class="line">100</div><div class="line">20 10 4</div><div class="line">50 30 45</div></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">20 50 20 10</div><div class="line">no solution</div></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p><strong> 題目描述： </strong></p>
<p>這位世界著名的建築師，設計一個黑白相間的柱子，而這個柱子高度必須為 H，並且由四塊石塊來完成，分別是黑 (底部)、白、黑、白 (底部)。</p>
<p>每一種顏色的石塊都有自己的高度，請輸出恰好能組成高度 H 且字典順序最小的組合。</p>
<p><strong> 題目解法： </strong></p>
<p>依序窮舉組合。</p>
<p>當初想要偷吃步加快操作，反而吃了一些字典順序的閉門羹。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt; </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; getLineNumber(<span class="keyword">char</span> s[]) &#123;</div><div class="line">    <span class="function"><span class="built_in">stringstream</span> <span class="title">sin</span><span class="params">(s)</span></span>;</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ret;</div><div class="line">    <span class="keyword">int</span> x;</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">sin</span> &gt;&gt; x)</div><div class="line">        ret.push_back(x);</div><div class="line">    <span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">char</span> s[<span class="number">1024</span>];</div><div class="line">    <span class="keyword">int</span> H;</div><div class="line">    <span class="keyword">while</span>(gets(s)) &#123;</div><div class="line">        <span class="built_in">sscanf</span>(s, <span class="string">"%d"</span>, &amp;H);</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; B, W;</div><div class="line">        gets(s), B = getLineNumber(s);</div><div class="line">        gets(s), W = getLineNumber(s);</div><div class="line">        gets(s);</div><div class="line">        sort(B.begin(), B.end(), greater&lt;<span class="keyword">int</span>&gt;());</div><div class="line">        sort(W.begin(), W.end(), greater&lt;<span class="keyword">int</span>&gt;());</div><div class="line">        </div><div class="line">        <span class="keyword">int</span> f = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; B.size(); i++)</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W.size(); j++)</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> a = i+<span class="number">1</span>; a &lt; B.size(); a++)</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> b = j+<span class="number">1</span>; b &lt; W.size(); b++) &#123;</div><div class="line">            <span class="keyword">if</span>(B[i]+W[j]+B[a]+W[b] == H) &#123;</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"%d %d %d %d\n"</span>, B[i], W[j], B[a], W[b]);</div><div class="line">                i = a = B.size();</div><div class="line">                j = b = W.size();</div><div class="line">                f = <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(!f)</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"no solution"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-10744" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/18/oj/uva/uva-10744/" class="article-date">
  <time datetime="2014-07-17T23:57:06.000Z" itemprop="datePublished">2014-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/18/oj/uva/uva-10744/">UVa 10744 - The Optimal Super-Highway</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/07/18/oj/uva/uva-10744/" data-id="ckxv1wnhv02ona8vn3wchbhhi" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/07/18/oj/uva/uva-10744/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dp/">dp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/中位數/">中位數</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <p>In our real life when we look for help we find that only a few people are willing to help us but when we look for suggestions there are thousands waiting with their bag of suggestions. In the country named Culabura a similar situation is creating a lot of trouble. Culabura is a country containing around 20000 important places and infinite land area. The president of Culabura wants to build a super highway through his country. This super highway can be expressed by a straight line that fulfills the following two properties:<br>a)      It must be parallel to another road that connects the two most important cities (denoted by A and B) of the country.</p>
<p>b)      The summation of distances of all-important places from it must be minimum.</p>
<p>The advisers of the king of Culabura are giving random and meaningless suggestions to solve this problem (As always is the case with advisers). Now your job is to find the minimum summation of distance. For example in the above picture you will have to find the minimum possible value of (d1 + d2 + d3 + d4 + d5 + d6 + d7 + d8). In other words you will have to place the superhighway in such a place so that (d1 + d2 + d3 + d4 + d5 + d6 + d7 + d8) is minimum and you will have print this minimum value. In this problem we will call such minimum value sum_d_min. Your solution must be very efficient. /<em>Looking for an O(n) solution </em>/</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The input file contains a single set of input. First line of each input set contains two integers N (0&lt;N&lt;20001) and Q(0&lt;Q&lt;101). Here N is the number of important places and Q is the number of queries. Each of the next N lines contains a pair of integer xi and yi (|xi|, |yi|&lt;=100), where (xi, yi) is the coordinate of the i-th (0&lt;=i&lt;=N-1) important place. Each of the next Q lines contains four integers Ax, Ay, Bx, By, where (Ax, Ay) and (Bx, By) are the coordinates of A and B respectively and the optimal super highway must be parallel to street (or line) AB. You must not consider A and B as part of the N important places. Some important places may be present more than in the list to give them extra importance. You don’t need to worry about that and just consider them as two different places. Also remember that place A and B will always be two different places.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For each query produce one line of output. This line contains the serial of output followed by the value of sum_d_min for that particular query. All the output numbers should be rounded to nearest integer. Look at the output for sample input for details.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">6 2</div><div class="line">1 1</div><div class="line">1 10</div><div class="line">20 12</div><div class="line">2 4</div><div class="line">1 1</div><div class="line">2 4</div><div class="line">10 10 11 11</div><div class="line">2 3 3 4</div></pre></td></tr></table></figure>
<h2 id="Output-for-Sample-Input"><a href="#Output-for-Sample-Input" class="headerlink" title="Output for Sample Input"></a>Output for Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Case 1: 15</div><div class="line">Case 2: 15</div></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p><strong> 題目描述：</strong></p>
<p>給平面上 N 個點座標，接著詢問平行兩個點的線中，找到一條當作高速公路，使得每一個點到線上最短距離總和最小。</p>
<p><strong> 題目解法： </strong></p>
<p>套用點線距公式，可以發現其符合中位數性質，如果不用中位數的方式，也可以藉由排序後採用 DP 的方式找到一個距離最小的線分布 (線一定會經過其中一個點)。</p>
<p>為了加速，捨棄掉<span>$\frac{|ax + by + c|}{\sqrt{a^{2}+b^{2}}}$</span><!-- Has MathJax --> 的分母部分，留到最後再除即可。</p>
<p>如果只求中位數，可以針對 <a href="http://mypaper.pchome.com.tw/zerojudge/post/1325695799" target="_blank" rel="external">Selection Algorithm</a>，在 <code>O(n)</code> 時間內找到，速度快於排序的 <code>O(n log n)</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt; </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt; </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> eps 1e-6</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Pt</span> &#123;</span></div><div class="line">    <span class="keyword">int</span> x, y;</div><div class="line">    Pt(<span class="keyword">int</span> a = <span class="number">0</span>, <span class="keyword">int</span> b = <span class="number">0</span>):</div><div class="line">    	x(a), y(b) &#123;&#125;</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Pt &amp;a) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">fabs</span>(x-a.x) &gt; eps)</div><div class="line">            <span class="keyword">return</span> x &lt; a.x;</div><div class="line">        <span class="keyword">return</span> y &lt; a.y;</div><div class="line">    &#125;</div><div class="line">    Pt <span class="keyword">operator</span>-(<span class="keyword">const</span> Pt &amp;a) <span class="keyword">const</span> &#123;</div><div class="line">        Pt ret;</div><div class="line">        ret.x = x - a.x;</div><div class="line">        ret.y = y - a.y;</div><div class="line">        <span class="keyword">return</span> ret;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">dist</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> hypot(a.x - b.x, a.y - b.y);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">length</span><span class="params">(Pt a)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> hypot(a.x, a.y);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">dot</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> a.x * b.x + a.y * b.y;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">cross2</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> a.x * b.y - a.y * b.x;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">cross</span><span class="params">(Pt o, Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> (a.x-o.x)*(b.y-o.y) - (a.y-o.y)*(b.x-o.x);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">distProjection</span><span class="params">(Pt as, Pt at, Pt s, <span class="keyword">double</span> &amp;div)</span> </span>&#123;</div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> a, b, c;</div><div class="line">    a = at.y - as.y;</div><div class="line">    b = as.x - at.x;</div><div class="line">    c = - (a * as.x + b * as.y);</div><div class="line">    div = a * a + b * b;</div><div class="line">    <span class="keyword">return</span> (a * s.x + b * s.y + c) <span class="comment">/* / hypot(a, b) */</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> cases = <span class="number">0</span>, n, q;</div><div class="line">    Pt D[<span class="number">32767</span>], a, b;</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;n, &amp;q) == <span class="number">2</span>) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;D[i].x, &amp;D[i].y);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; q; i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;a.x, &amp;a.y);</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;b.x, &amp;b.y);</div><div class="line">            </div><div class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; dist;</div><div class="line">            <span class="keyword">double</span> div;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)</div><div class="line">                dist.push_back(distProjection(a, b, D[j], div));</div><div class="line">            sort(dist.begin(), dist.end());</div><div class="line">            </div><div class="line">            <span class="keyword">double</span> sum = <span class="number">0</span>, ret;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)</div><div class="line">                sum += dist[j] - dist[<span class="number">0</span>];</div><div class="line">            ret = sum;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; n; j++) &#123;</div><div class="line">                sum = sum - (dist[j] - dist[j<span class="number">-1</span>]) * (n - j) + (dist[j] - dist[j<span class="number">-1</span>]) * j;</div><div class="line">                ret = min(ret, sum);</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"Case %d: %.0lf\n"</span>, ++cases, ret / <span class="built_in">sqrt</span>(div));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"> </div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-10732" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/17/oj/uva/uva-10732/" class="article-date">
  <time datetime="2014-07-17T01:10:35.000Z" itemprop="datePublished">2014-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/17/oj/uva/uva-10732/">UVa 10732 - The Strange Research</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/07/17/oj/uva/uva-10732/" data-id="ckxv1wnhs02oka8vn7ixtmr35" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/07/17/oj/uva/uva-10732/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/二分/">二分</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <p>Professor A. Karim is working on a project of measuring the surface area of an unknown unearthly object. After a lot of calculation he finds that the surface area of that object is (a+b)<em>(1-a</em>b), where a and b are two parameters related to surface area of that object. With the help of some more advanced experiments he finds N floating-point numbers, which can be possible values of a and b. From the N numbers he can select two values for a and b in NC2 ways (Note that the selections a=2, b=3 and a=3, b=2 are considered same because (a+b)<em>(1-a</em>b) is equal to (b+a)<em>(1-b</em>a)). Karim needs to do some more expensive experiments to find out the real value of a and b, but before doing that he wants to keep only the obvious choices: the selections, which cause the surface of the object to be positive (Greater than zero). Your job is to help Prof. Karim to count how many of the NC2 selections (the value of a and b) causes (a+b)<em>(1-a</em>b) to be positive. Please note that your method must be efficient. (An O(N2) solution will not do)</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The input fine contains maximum 7 sets of inputs.</p>
<p>First line of each set contains an integer N (0&lt;N&lt;=10000). Each of the next N lines contains one floating-point number F (|F|&lt;30000.0). The meaning of N is given in the problem statement.</p>
<p>The Input can have the same number twice or even more times. In such cases two same numbers should be considered different.</p>
<p>Input is terminated by a case where the value of N is zero. This case should not be processed. </p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For each set of input produce one line of output. This line contains the serial no of output followed by an integer which indicates how many of the NC2 selections will cause the value of the expression (a+b)<em>(1-a</em>b) to be positive. Look at the output for sample input for details. You can consider any value greater than 10-15 is positive.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">5</div><div class="line">8197.4013</div><div class="line">-3622.8175</div><div class="line">-1495.5118</div><div class="line">-3958.2735</div><div class="line">-678.2750</div><div class="line">5</div><div class="line">-1208.8234</div><div class="line">1465.1943</div><div class="line">2699.873</div><div class="line">-6665.3587</div><div class="line">-4344.6286</div><div class="line">0</div></pre></td></tr></table></figure>
<h2 id="Output-for-Sample-Input"><a href="#Output-for-Sample-Input" class="headerlink" title="Output for Sample Input"></a>Output for Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Case 1: 10</div><div class="line">Case 2: 5</div></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p><strong> 題目描述： </strong></p>
<p>從一堆數字中，任挑兩個實數出來，計算 <code>(a + b) * (1 + a * b) &gt; 1e-15</code> 的對數有多少個。</p>
<p><strong> 題目解法： </strong></p>
<p>固定其中一個數字 a 後，可以找到 b 的一元二次方程式，找到區間解的個數即可。<br>將輸入的數字排序，二分根的位置即可，但是麻煩的地方在於 <code>&gt; 1e-15</code>，因此這部分做了些許的微調。</p>
<p>// 因為沒有考慮 1e-15 吞了不少 WA。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt; </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> eps 1e-8</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="comment">//	freopen("in.txt", "r+t", stdin);</span></div><div class="line"><span class="comment">//	freopen("out2.txt", "w+t", stdout); </span></div><div class="line">    <span class="keyword">int</span> n, cases = <span class="number">0</span>;</div><div class="line">    <span class="keyword">double</span> v[<span class="number">32767</span>];</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) == <span class="number">1</span> &amp;&amp; n) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%lf"</span>, &amp;v[i]);</div><div class="line">            </div><div class="line">        sort(v, v+n);</div><div class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>, pos = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">            <span class="keyword">if</span>(v[i] &gt; <span class="number">0</span>)</div><div class="line">                pos ++;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="keyword">double</span> a = -v[i], b = (<span class="number">1</span> - v[i]*v[i]), c = v[i];</div><div class="line">            <span class="keyword">double</span> r1, r2;</div><div class="line">            <span class="keyword">if</span>(b*b - <span class="number">4</span>*a*c &lt; <span class="number">0</span>)	<span class="keyword">continue</span>;</div><div class="line">            <span class="keyword">if</span>(<span class="built_in">fabs</span>(a) &lt; eps) &#123;</div><div class="line">                ret += pos;</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line">            r1 = (-b - <span class="built_in">sqrt</span>(b*b - <span class="number">4</span>*a*c))/<span class="number">2</span>/a;</div><div class="line">            r2 = (-b + <span class="built_in">sqrt</span>(b*b - <span class="number">4</span>*a*c))/<span class="number">2</span>/a;</div><div class="line">            <span class="keyword">if</span>(r1 &gt; r2)	swap(r1, r2);</div><div class="line">            </div><div class="line">            <span class="keyword">int</span> l = lower_bound(v, v + n, r1) - v;</div><div class="line">            <span class="keyword">int</span> r = upper_bound(v, v + n, r2) - v;</div><div class="line">            <span class="keyword">int</span> cnt = <span class="number">0</span>;</div><div class="line"><span class="comment">//			printf("%lf %lf %d %d\n", r1, r2, l, r);</span></div><div class="line">            <span class="keyword">if</span>(v[i] &gt; <span class="number">0</span>) &#123; <span class="comment">// [l, r)</span></div><div class="line">                <span class="keyword">while</span>(l &gt;= <span class="number">0</span> &amp;&amp; (v[l] + v[i])*(<span class="number">1</span> - v[l]*v[i]) &gt; <span class="number">1e-15</span>)</div><div class="line">                    l--;</div><div class="line">                l++;</div><div class="line">                <span class="keyword">while</span>(l &lt; n &amp;&amp; (v[l] + v[i])*(<span class="number">1</span> - v[l]*v[i]) &lt;= <span class="number">1e-15</span>)</div><div class="line">                    l++;</div><div class="line">                <span class="keyword">while</span>(r &lt; n &amp;&amp; (v[r] + v[i])*(<span class="number">1</span> - v[r]*v[i]) &gt; <span class="number">1e-15</span>)</div><div class="line">                    r++;</div><div class="line">                <span class="keyword">if</span>(l &lt;= i &amp;&amp; i &lt; r)</div><div class="line">                    cnt--;</div><div class="line">                cnt += r - l;</div><div class="line"><span class="comment">//				for(int j = 0; j &lt; n; j++) &#123;</span></div><div class="line"><span class="comment">//					if(j == i)	continue;</span></div><div class="line"><span class="comment">//					if(v[j] &gt; r1 &amp;&amp; v[j] &lt; r2)</span></div><div class="line"><span class="comment">//						ret++;</span></div><div class="line"><span class="comment">//				&#125;</span></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">while</span>(l &gt;= <span class="number">0</span> &amp;&amp; (v[l] + v[i])*(<span class="number">1</span> - v[l]*v[i]) &lt;= <span class="number">1e-15</span>)</div><div class="line">                    l--;</div><div class="line">                l++;</div><div class="line">                <span class="keyword">while</span>(l &lt; n &amp;&amp; (v[l] + v[i])*(<span class="number">1</span> - v[l]*v[i]) &gt; <span class="number">1e-15</span>)</div><div class="line">                    l++;</div><div class="line">                <span class="keyword">while</span>(r &lt; n &amp;&amp; (v[r] + v[i])*(<span class="number">1</span> - v[r]*v[i]) &lt;= <span class="number">1e-15</span>)</div><div class="line">                    r++;</div><div class="line">                <span class="keyword">if</span>(i &lt; l || i &gt;= r)</div><div class="line">                    cnt--;</div><div class="line">                cnt += l + (n - r);</div><div class="line"><span class="comment">//				for(int j = 0; j &lt; n; j++) &#123;</span></div><div class="line"><span class="comment">//					if(j == i) 	continue;</span></div><div class="line"><span class="comment">//					if(v[j] &lt; r1 || v[j] &gt; r2)</span></div><div class="line"><span class="comment">//						ret++;</span></div><div class="line"><span class="comment">//				&#125;</span></div><div class="line">            &#125;</div><div class="line"><span class="comment">//			int cnt2 = 0;</span></div><div class="line"><span class="comment">//			for(int j = 0; j &lt; n; j++) &#123;</span></div><div class="line"><span class="comment">//				if(i == j)	continue;</span></div><div class="line"><span class="comment">//				cnt2 += (v[i] + v[j]) * (1 - v[i]*v[j]) &gt; 1e-15;</span></div><div class="line"><span class="comment">//			&#125;</span></div><div class="line"><span class="comment">//			if(cnt != cnt2) &#123;</span></div><div class="line"><span class="comment">//				printf("%lf %d %d %lf %lf, %lf %lf\n", v[i], cnt, cnt2, r1, r2, v[l], v[r-1]);</span></div><div class="line"><span class="comment">//				return 0;</span></div><div class="line"><span class="comment">//			&#125;</span></div><div class="line">            ret += cnt;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case %d: %d\n"</span>, ++cases, ret/<span class="number">2</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">2</span></div><div class="line"><span class="comment">0</span></div><div class="line"><span class="comment">0</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-10713" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/17/oj/uva/uva-10713/" class="article-date">
  <time datetime="2014-07-17T01:02:23.000Z" itemprop="datePublished">2014-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/17/oj/uva/uva-10713/">UVa 10713 - Map</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/07/17/oj/uva/uva-10713/" data-id="ckxv1wnhm02oda8vn57yn13kb" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/07/17/oj/uva/uva-10713/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/數學/">數學</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>A pirate’s treasure map typically contains a series of instructions which, if followed, lead you from the landing place on a desert isle to the spot marked X where the treasure is buried. You are to construct such a series of instructions for a particular desert isle.</p>
<p>The island is a circle with radius r paces whose centre is at (0,0). Relative to the centre, the point (0,1) is north, (0,-1) is south, (1,0) is east, and (-1,0) is west. Also, (1,1) is northeast, (1,-1) is southeast, (-1,1) is northwest, and (-1,-1) is southwest.</p>
<p>The landing place, on the circumference, is specified by its coordinates. The spot marked X, on the surface of the island is also specified by its coordinates.</p>
<p>Each instruction in the sequence should have the form</p>
<p>   direction distance</p>
<p>where direction is one of { north, south, east, west, northeast, northwest, southeast, southwest } and distance is a non-negative real number indicating the number of paces to be travelled in the given direction. When executed as a sequence the instructions should lead from the landing place to the spot marked X without leaving the island. The total distance (that is, the sum of the distances in your sequence) should be minimized. From the possible sequences that minimize total distance, choose one with the minimum number of instructions.</p>
<p>Input will consist of a number of test cases, followed by a line containing -1. Each test case consists of a single line containing five real numbers: r, x, y, X, Y. r is the radius of the island; x,y are the coordinates of the landing place; X,Y are the coordinates of the spot marked X. The landing place and the spot marked X are distinct.</p>
<p>For each test case, output the sequence, one instruction per line. Distances should be accurate to ten places after the decimal, as shown. Output an empty line between test cases.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">100.0 0.0 100.0 25.0 50.0</div><div class="line">-1</div></pre></td></tr></table></figure>
<h2 id="Possible-Output-for-Sample-Input"><a href="#Possible-Output-for-Sample-Input" class="headerlink" title="Possible Output for Sample Input"></a>Possible Output for Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">south 25.0000000000</div><div class="line">southeast 35.3553390593</div></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p><strong> 題目描述： </strong></p>
<p>在一個圓心島嶼上，給定登陸的座標以及寶藏的位置，只能由 8 個方向的指令，在不跑出陸地的情況下，用最少指令抵達目的地。</p>
<p><strong> 題目解法： </strong></p>
<p>很明顯地，保證不超過兩步，但是問題在於要如何不跑出陸地上。</p>
<p>首先，畫一個三角形，保證能用 45 度 + 90 度的情況走到另外一個角，但是對於圓上兩點拉出來平行兩軸的矩形中，能拆分成兩個三角形，對於其中一個做就可以了。</p>
<p>考慮先走 45 度和 90 度其中一個，只會有兩種情況，模擬先走 45 度的情況，查閱是否超出邊界，否則倒序輸出步驟。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt; </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> eps 1e-8 </span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="comment">//	freopen("in.txt", "r+t", stdin);</span></div><div class="line"><span class="comment">//	freopen("out.txt", "w+t", stdout); </span></div><div class="line">    <span class="keyword">double</span> r, x1, x2, y1, y2;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">double</span> sq2 = <span class="built_in">sqrt</span>(<span class="number">2</span>);</div><div class="line">    <span class="keyword">int</span> cases = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%lf %lf %lf %lf %lf"</span>, &amp;r, &amp;x1, &amp;y1, &amp;x2, &amp;y2) == <span class="number">5</span>) &#123;</div><div class="line">        <span class="keyword">if</span>(cases++)	<span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">        <span class="keyword">double</span> dx = x2 - x1, dy = y2 - y1;</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">fabs</span>(dx) &lt; <span class="built_in">fabs</span>(dy)) &#123;</div><div class="line">            <span class="keyword">double</span> diff = <span class="built_in">fabs</span>(dy) - <span class="built_in">fabs</span>(dx);</div><div class="line">            <span class="keyword">if</span>(dy &lt; <span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">double</span> x = x1 + dx, y = y1 - <span class="built_in">fabs</span>(dx);</div><div class="line"><span class="comment">//				printf("%lf %lf\n", x, y);</span></div><div class="line">                <span class="keyword">if</span>(x*x + y*y &gt; r*r) &#123;</div><div class="line">                    <span class="keyword">if</span>(<span class="built_in">fabs</span>(diff) &gt; eps)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"south %.10lf\n"</span>, diff);</div><div class="line">                    <span class="keyword">if</span>(dx &gt; <span class="number">0</span>)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"southeast %.10lf\n"</span>, <span class="built_in">fabs</span>(dx) * sq2);</div><div class="line">                    <span class="keyword">if</span>(dx &lt; <span class="number">0</span>)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"southwest %.10lf\n"</span>, <span class="built_in">fabs</span>(dx) * sq2);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="keyword">if</span>(dx &gt; <span class="number">0</span>)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"southeast %.10lf\n"</span>, <span class="built_in">fabs</span>(dx) * sq2);</div><div class="line">                    <span class="keyword">if</span>(dx &lt; <span class="number">0</span>)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"southwest %.10lf\n"</span>, <span class="built_in">fabs</span>(dx) * sq2);</div><div class="line">                    <span class="keyword">if</span>(<span class="built_in">fabs</span>(diff) &gt; eps)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"south %.10lf\n"</span>, diff);</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">double</span> x = x1 + dx, y = y1 + <span class="built_in">fabs</span>(dx);</div><div class="line">                <span class="keyword">if</span>(x*x + y*y &gt; r*r + eps) &#123;</div><div class="line">                    <span class="keyword">if</span>(<span class="built_in">fabs</span>(diff) &gt; eps)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"north %.10lf\n"</span>, diff);</div><div class="line">                    <span class="keyword">if</span>(dx &gt; <span class="number">0</span>)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"northeast %.10lf\n"</span>, <span class="built_in">fabs</span>(dx) * sq2);</div><div class="line">                    <span class="keyword">if</span>(dx &lt; <span class="number">0</span>)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"northwest %.10lf\n"</span>, <span class="built_in">fabs</span>(dx) * sq2);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="keyword">if</span>(dx &gt; <span class="number">0</span>)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"northeast %.10lf\n"</span>, <span class="built_in">fabs</span>(dx) * sq2);</div><div class="line">                    <span class="keyword">if</span>(dx &lt; <span class="number">0</span>)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"northwest %.10lf\n"</span>, <span class="built_in">fabs</span>(dx) * sq2);</div><div class="line">                    <span class="keyword">if</span>(<span class="built_in">fabs</span>(diff) &gt; eps)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"north %.10lf\n"</span>, diff);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">double</span> diff = <span class="built_in">fabs</span>(dx) - <span class="built_in">fabs</span>(dy);</div><div class="line">            <span class="keyword">if</span>(dx &lt; <span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">double</span> x = x1 - <span class="built_in">fabs</span>(dy), y = y1 + dy;</div><div class="line">                <span class="keyword">if</span>(x*x + y*y &gt; r*r + eps) &#123;</div><div class="line">                    <span class="keyword">if</span>(<span class="built_in">fabs</span>(diff) &gt; eps)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"west %.10lf\n"</span>, diff);</div><div class="line">                    <span class="keyword">if</span>(dy &gt; <span class="number">0</span>)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"northwest %.10lf\n"</span>, <span class="built_in">fabs</span>(dy) * sq2);</div><div class="line">                    <span class="keyword">if</span>(dy &lt; <span class="number">0</span>)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"southwest %.10lf\n"</span>, <span class="built_in">fabs</span>(dy) * sq2);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="keyword">if</span>(dy &gt; <span class="number">0</span>)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"northwest %.10lf\n"</span>, <span class="built_in">fabs</span>(dy) * sq2);</div><div class="line">                    <span class="keyword">if</span>(dy &lt; <span class="number">0</span>)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"southwest %.10lf\n"</span>, <span class="built_in">fabs</span>(dy) * sq2);					</div><div class="line">                    <span class="keyword">if</span>(<span class="built_in">fabs</span>(diff) &gt; eps)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"west %.10lf\n"</span>, diff);</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">double</span> x = x1 + <span class="built_in">fabs</span>(dy), y = y1 + dy;</div><div class="line">                <span class="keyword">if</span>(x*x + y*y &gt; r*r + eps) &#123;</div><div class="line">                    <span class="keyword">if</span>(<span class="built_in">fabs</span>(diff) &gt; eps)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"east %.10lf\n"</span>, diff);</div><div class="line">                    <span class="keyword">if</span>(dy &gt; <span class="number">0</span>)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"northeast %.10lf\n"</span>, <span class="built_in">fabs</span>(dy) * sq2);</div><div class="line">                    <span class="keyword">if</span>(dy &lt; <span class="number">0</span>)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"southeast %.10lf\n"</span>, <span class="built_in">fabs</span>(dy) * sq2);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="keyword">if</span>(dy &gt; <span class="number">0</span>)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"northeast %.10lf\n"</span>, <span class="built_in">fabs</span>(dy) * sq2);</div><div class="line">                    <span class="keyword">if</span>(dy &lt; <span class="number">0</span>)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"southeast %.10lf\n"</span>, <span class="built_in">fabs</span>(dy) * sq2);					</div><div class="line">                    <span class="keyword">if</span>(<span class="built_in">fabs</span>(diff) &gt; eps)</div><div class="line">                        <span class="built_in">printf</span>(<span class="string">"east %.10lf\n"</span>, diff);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">    74.584 49.541 55.754 -43.557 -37.453</span></div><div class="line"><span class="comment">    74.584 49.541 55.754 23.560 -69.849</span></div><div class="line"><span class="comment">    74.584 -40.498 -62.632 0.540 6.183</span></div><div class="line"><span class="comment">    74.584 -40.498 -62.632 -14.154 0.389</span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-149" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/17/oj/uva/uva-149/" class="article-date">
  <time datetime="2014-07-17T00:49:28.000Z" itemprop="datePublished">2014-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/17/oj/uva/uva-149/">UVa 149 - Forests</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/07/17/oj/uva/uva-149/" data-id="ckxv1wo4g03foa8vn8be004xk" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/07/17/oj/uva/uva-149/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/幾何/">幾何</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>The saying <code>You can&#39;t see the wood for the trees</code> is not only a cliche, but is also incorrect. The real problem is that you can’t see the trees for the wood. If you stand in the middle of a <code>wood</code> (in NZ terms, a patch of bush), the trees tend to obscure each other and the number of distinct trees you can actually see is quite small. This is especially true if the trees are planted in rows and columns (as in a pine plantation), because they tend to line up. The purpose of this problem is to find how many distinct trees you can see from an arbitrary point in a pine plantation (assumed to stretch <code>for ever</code>).</p>
<p>picture23</p>
<p>You can only see a distinct tree if no part of its trunk is obscured by a nearer tree–that is if both sides of the trunk can be seen, with a discernible gap between them and the trunks of all trees closer to you. Also, you can’t see a tree if it is apparently <code>too small</code>. For definiteness, <code>not too small</code> and <code>discernible gap</code> will mean that the angle subtended at your eye is greater than 0.01 degrees (you are assumed to use one eye for observing). Thus the two trees marked picture169 obscure at least the trees marked picture175 from the given view point.</p>
<p>Write a program that will determine the number of trees visible under these assumptions, given the diameter of the trees, and the coordinates of a viewing position. Because the grid is infinite, the origin is unimportant, and the coordinates will be numbers between 0 and 1.</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>Input will consist of a series of lines, each line containing three real numbers of the form 0.nn. The first number will be the trunk diameter–all trees will be assumed to be cylinders of exactly this diameter, with their centres placed exactly on the points of a rectangular grid with a spacing of one unit. The next two numbers will be the x and y coordinates of the observer. To avoid potential problems, say by being too close to a tree, we will guarantee that tex2html_wrap_inline260 . To avoid problems with trees being too small you may assume that tex2html_wrap_inline262 . The file will be terminated by a line consisting of three zeroes.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>Output will consist of a series of lines, one for each line of the input. Each line will consist of the number of trees of the given size, visible from the given position.</p>
<h2 id="Sample-input"><a href="#Sample-input" class="headerlink" title="Sample input"></a>Sample input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">0.10 0.46 0.38</div><div class="line">0 0 0</div></pre></td></tr></table></figure>
<h2 id="Sample-output"><a href="#Sample-output" class="headerlink" title="Sample output"></a>Sample output</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">128</div></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p><strong> 題目描述： </strong></p>
<p>所有樹木的圓心都在整數座標上，給定每棵樹的直徑和當前所在位置，問能看見多少棵樹木。</p>
<p>能看見的定義為：看到樹兩側邊緣的張角必須大於 0.01 度，同時要跟之前的前方遮蔽的樹木之間保留 0.01 度之間的間隔。</p>
<p>(也就是說樹不能太細瘦，同時看過去的時候不考慮遠方樹木時，要與前方的樹木之間有小縫隙。)</p>
<p><strong> 題目解法： </strong></p>
<p>由於有限制張角在 0.01 以上，因此太遠的樹木不用考慮，因此窮舉一部分的樹木即可。</p>
<p>對於窮舉位置的樹木，由距離當前位置的數字由小排到大，開始考慮前方是否有樹木遮蔽，因此把每個樹木的張角 [l, r] 先算出來，接著對於一個樹木，查找是否有距離更近的樹木遮蔽。</p>
<p>對於計算張角的部分 (圓外一點)，有兩種做法</p>
<ul>
<li>算出兩切線的交點，來得到兩交點的所形成的角度，保證不超過 180 度。</li>
<li>從起點拉到圓心，算出角度之後，根據切線所形成的三角形，算出 <code>asin</code> 把角度疊加即可。</li>
</ul>
<p>後者比較簡單，前者雖為本次的計算方式，略為不滿意。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt; </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt; </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> eps 1e-6</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Pt</span> &#123;</span></div><div class="line">    <span class="keyword">double</span> x, y;</div><div class="line">    Pt(<span class="keyword">double</span> a = <span class="number">0</span>, <span class="keyword">double</span> b = <span class="number">0</span>):</div><div class="line">    	x(a), y(b) &#123;&#125;</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Pt &amp;a) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">fabs</span>(x-a.x) &gt; eps)</div><div class="line">            <span class="keyword">return</span> x &lt; a.x;</div><div class="line">        <span class="keyword">return</span> y &lt; a.y;</div><div class="line">    &#125;</div><div class="line">    Pt <span class="keyword">operator</span>+(<span class="keyword">const</span> Pt &amp;a) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">return</span> Pt(x + a.x, y + a.y);</div><div class="line">    &#125;</div><div class="line">    Pt <span class="keyword">operator</span>-(<span class="keyword">const</span> Pt &amp;a) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">return</span> Pt(x - a.x, y - a.y);</div><div class="line">    &#125;</div><div class="line">    Pt <span class="keyword">operator</span>/(<span class="keyword">const</span> <span class="keyword">double</span> a) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">return</span> Pt(x/a, y/a);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">dist</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> hypot(a.x - b.x, a.y - b.y);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">dist2</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> (a.x - b.x)*(a.x - b.x) + (a.y - b.y)*(a.y - b.y);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">length</span><span class="params">(Pt a)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> hypot(a.x, a.y);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">dot</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> a.x * b.x + a.y * b.y;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">cross2</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> a.x * b.y - a.y * b.x;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">cross</span><span class="params">(Pt o, Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> (a.x-o.x)*(b.y-o.y) - (a.y-o.y)*(b.x-o.x);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">angle</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">acos</span>(dot(a, b) / length(a) / length(b));</div><div class="line">&#125;</div><div class="line"><span class="function">Pt <span class="title">getLineIntersection</span><span class="params">(<span class="keyword">double</span> a1, <span class="keyword">double</span> b1, <span class="keyword">double</span> c1, <span class="keyword">double</span> a2, <span class="keyword">double</span> b2, <span class="keyword">double</span> c2)</span> </span>&#123;</div><div class="line">    <span class="comment">// a1 x + b1 y + c1 = 0, a2 x + b2 y + c2 = 0</span></div><div class="line">    c1 = -c1, c2 = -c2;</div><div class="line">    <span class="keyword">double</span> d, dx, dy;</div><div class="line">    d = a1 * b2 - a2 * b1;</div><div class="line">    dx = c1 * b2 - c2 * b1;</div><div class="line">    dy = a1 * c2 - a2 * c1;</div><div class="line">    <span class="keyword">return</span> Pt(dx/d, dy/d);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">getTangentIntersection</span><span class="params">(Pt co, <span class="keyword">double</span> r, Pt p, Pt &amp;pa, Pt &amp;pb)</span> </span>&#123;</div><div class="line">    <span class="keyword">double</span> a, b, c;</div><div class="line">    <span class="keyword">double</span> m1a, m1b, m1c, m2a, m2b, m2c, m1, m2;</div><div class="line">    a = r*r - (co.x - p.x) * (co.x - p.x);</div><div class="line">    b = <span class="number">2</span> * (co.x - p.x) * (co.y - p.y);</div><div class="line">    c = r*r - (co.y - p.y) * (co.y - p.y); <span class="comment">// am^2 + bm + c = 0</span></div><div class="line">    <span class="keyword">if</span>(<span class="built_in">fabs</span>(a) &lt; eps) &#123;</div><div class="line">        m2 = (-c)/b;</div><div class="line">        m1a = <span class="number">1</span>, m1b = <span class="number">0</span>, m1c = - (m1a * p.x + m1b * p.y);</div><div class="line">        m2a = m2, m2b = <span class="number">-1</span>, m2c = - (m2a * p.x + m2b * p.y);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        m1 = (-b + <span class="built_in">sqrt</span>(b*b - <span class="number">4</span>*a*c))/ (<span class="number">2</span>*a);</div><div class="line">        m2 = (-b - <span class="built_in">sqrt</span>(b*b - <span class="number">4</span>*a*c))/ (<span class="number">2</span>*a);</div><div class="line">        m1a = m1, m1b = <span class="number">-1</span>, m1c = - (m1a * p.x + m1b * p.y);</div><div class="line">        m2a = m2, m2b = <span class="number">-1</span>, m2c = - (m2a * p.x + m2b * p.y);</div><div class="line">    &#125;</div><div class="line">    pa = getLineIntersection(m1a, m1b, m1c, m1b, -m1a, -(m1b * co.x + (-m1a) * co.y));</div><div class="line">    pb = getLineIntersection(m2a, m2b, m2c, m2b, -m2a, -(m2b * co.x + (-m2a) * co.y));</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Interval</span> &#123;</span></div><div class="line">    Pt p;</div><div class="line">    <span class="keyword">double</span> dist, l, r;</div><div class="line">    Interval(<span class="keyword">double</span> a = <span class="number">0</span>, <span class="keyword">double</span> b = <span class="number">0</span>, <span class="keyword">double</span> c = <span class="number">0</span>, Pt d = Pt()):</div><div class="line">        dist(a), l(b), r(c), p(d) &#123;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Interval &amp;x) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">return</span> dist &lt; x.dist;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    Pt pa, pb, co(<span class="number">1</span>, <span class="number">1</span>), p(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">double</span> pi = <span class="built_in">acos</span>(<span class="number">-1</span>);</div><div class="line">    <span class="keyword">double</span> diameter, radius;</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%lf %lf %lf"</span>, &amp;diameter, &amp;p.x, &amp;p.y) == <span class="number">3</span>) &#123;</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">fabs</span>(diameter) &lt; eps)</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="built_in">vector</span>&lt;Interval&gt; interval;</div><div class="line">        radius = diameter/<span class="number">2</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">-20</span>; i &lt; <span class="number">20</span>; i++) &#123;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">-20</span>; j &lt; <span class="number">20</span>; j++) &#123;</div><div class="line">                getTangentIntersection(Pt(i, j), radius, p, pa, pb);</div><div class="line">                <span class="keyword">double</span> t1, t2;</div><div class="line">                t1 = <span class="built_in">atan2</span>(pa.y - p.y, pa.x - p.x);</div><div class="line">                t2 = <span class="built_in">atan2</span>(pb.y - p.y, pb.x - p.x);</div><div class="line">                <span class="keyword">if</span>(t1 &gt; t2)	swap(t1, t2);</div><div class="line">                <span class="keyword">if</span>(<span class="built_in">fabs</span>(t1 - t2)*<span class="number">180</span>/pi &lt; <span class="number">0.01f</span>)</div><div class="line">                    <span class="keyword">continue</span>;</div><div class="line">                interval.push_back(Interval(<span class="built_in">pow</span>(pa.x-p.x, <span class="number">2</span>)+<span class="built_in">pow</span>(pb.y-p.y, <span class="number">2</span>), t1, t2, Pt(i, j)));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        sort(interval.begin(), interval.end());</div><div class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; interval.size(); i++) &#123;</div><div class="line">            <span class="keyword">double</span> t1 = interval[i].l, t2 = interval[i].r;</div><div class="line">            <span class="keyword">if</span>(t2 - t1 &lt; pi) &#123;</div><div class="line">                <span class="keyword">int</span> f = <span class="number">1</span>;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</div><div class="line">                    <span class="keyword">double</span> l = max(t1, interval[j].l), r = min(t2, interval[j].r);</div><div class="line">                    <span class="keyword">if</span>(l &lt;= r + <span class="number">0.01f</span> * pi/<span class="number">180</span>)</div><div class="line">                        f = <span class="number">0</span>, j = i;</div><div class="line">                &#125;</div><div class="line">                ret += f;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;				</div><div class="line">                <span class="keyword">double</span> t3, t4;</div><div class="line">                t3 = t2, t4 = pi;</div><div class="line">                t2 = t1, t1 = -pi;</div><div class="line">                <span class="keyword">int</span> f = <span class="number">1</span>;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</div><div class="line">                    <span class="keyword">double</span> l = max(t1, interval[j].l), r = min(t2, interval[j].r);</div><div class="line">                    <span class="keyword">if</span>(l &lt;= r + <span class="number">0.01f</span> * pi/<span class="number">180</span>)</div><div class="line">                        f = <span class="number">0</span>, j = i;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span>(!f)</div><div class="line">                    <span class="keyword">continue</span>;</div><div class="line">                t1 = t3, t2 = t4;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</div><div class="line">                    <span class="keyword">double</span> l = max(t1, interval[j].l), r = min(t2, interval[j].r);</div><div class="line">                    <span class="keyword">if</span>(l &lt;= r + <span class="number">0.01f</span> * pi/<span class="number">180</span>)</div><div class="line">                        f = <span class="number">0</span>, j = i;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span>(!f)</div><div class="line">                    <span class="keyword">continue</span>;</div><div class="line">                ret += f;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ret);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">0.10 0.46 0.38</span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-12240" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/06/oj/uva/uva-12240/" class="article-date">
  <time datetime="2014-07-06T07:56:57.000Z" itemprop="datePublished">2014-07-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/06/oj/uva/uva-12240/">UVa 12240 - Cocircular Points</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/07/06/oj/uva/uva-12240/" data-id="ckxv1wns202yia8vnc8k7wx1s" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/07/06/oj/uva/uva-12240/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/外心/">外心</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/幾何/">幾何</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/窮舉/">窮舉</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>You probably know what a set of collinear points is: a set of points such that there exists a straight line that passes through all of them. A set of cocircular points is defined in the same fashion, but instead of a straight line, we ask that there is a circle such that every point of the set lies over its perimeter.</p>
<p>The International Collinear Points Centre (ICPC) has assigned you the following task: given a set of points, calculate the size of the larger subset of cocircular points.</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>Each test case is given using several lines. The first line contains an integer N representing the number of points in the set (1<span>$\le$</span><!-- Has MathJax -->N<span>$\le$</span><!-- Has MathJax -->100). Each of the next N lines contains two integers X and Y representing the coordinates of a point of the set (- 104<span>$\le$</span><!-- Has MathJax -->X, Y<span>$\le$</span><!-- Has MathJax -->104). Within each test case, no two points have the same location.</p>
<p>The last test case is followed by a line containing one zero.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>For each test case output a single line with a single integer representing the number of points in one of the largest subsets of the input that are cocircular.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">7 </div><div class="line">-10 0 </div><div class="line">0 -10 </div><div class="line">10 0 </div><div class="line">0 10 </div><div class="line">-20 10 </div><div class="line">-10 20 </div><div class="line">-2 4 </div><div class="line">4 </div><div class="line">-10000 10000 </div><div class="line">10000 10000 </div><div class="line">10000 -10000 </div><div class="line">-10000 -9999 </div><div class="line">3 </div><div class="line">-1 0 </div><div class="line">0 0 </div><div class="line">1 0 </div><div class="line">0</div></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">5 </div><div class="line">3 </div><div class="line">2</div></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p><strong> 題目描述： </strong></p>
<p>給平面上 n 個點，最多有多少個點共圓？</p>
<p><strong> 題目解法： </strong></p>
<p>窮舉三點拉外心，隨後找共圓的點，最慘會到 O(n^4)。</p>
<p>完全沒有剪枝，也就是說可以刻意將點保留標記，防止窮舉到相同組合，又或者是先按照 x 軸排序，直接在區間內搜索可能的共圓點之類的。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt; </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt; </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> eps 1e-6</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Pt</span> &#123;</span></div><div class="line">    <span class="keyword">double</span> x, y;</div><div class="line">    Pt(<span class="keyword">double</span> a = <span class="number">0</span>, <span class="keyword">double</span> b = <span class="number">0</span>):</div><div class="line">    	x(a), y(b) &#123;&#125;</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Pt &amp;a) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">fabs</span>(x-a.x) &gt; eps)</div><div class="line">            <span class="keyword">return</span> x &lt; a.x;</div><div class="line">        <span class="keyword">return</span> y &lt; a.y;</div><div class="line">    &#125;</div><div class="line">    Pt <span class="keyword">operator</span>+(<span class="keyword">const</span> Pt &amp;a) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">return</span> Pt(x + a.x, y + a.y);</div><div class="line">    &#125;</div><div class="line">    Pt <span class="keyword">operator</span>-(<span class="keyword">const</span> Pt &amp;a) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">return</span> Pt(x - a.x, y - a.y);</div><div class="line">    &#125;</div><div class="line">    Pt <span class="keyword">operator</span>/(<span class="keyword">const</span> <span class="keyword">double</span> a) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">return</span> Pt(x/a, y/a);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">dist</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> hypot(a.x - b.x, a.y - b.y);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">dist2</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> (a.x - b.x)*(a.x - b.x) + (a.y - b.y)*(a.y - b.y);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">length</span><span class="params">(Pt a)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> hypot(a.x, a.y);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">dot</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> a.x * b.x + a.y * b.y;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">cross2</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> a.x * b.y - a.y * b.x;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">cross</span><span class="params">(Pt o, Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> (a.x-o.x)*(b.y-o.y) - (a.y-o.y)*(b.x-o.x);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">angle</span><span class="params">(Pt a, Pt b)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">acos</span>(dot(a, b) / length(a) / length(b));</div><div class="line">&#125;</div><div class="line"><span class="function">Pt <span class="title">rotateRadian</span><span class="params">(Pt a, <span class="keyword">double</span> radian)</span> </span>&#123;</div><div class="line">    <span class="keyword">double</span> x, y;</div><div class="line">    x = a.x * <span class="built_in">cos</span>(radian) - a.y * <span class="built_in">sin</span>(radian);</div><div class="line">    y = a.x * <span class="built_in">sin</span>(radian) + a.y * <span class="built_in">cos</span>(radian);</div><div class="line">    <span class="keyword">return</span> Pt(x, y);</div><div class="line">&#125;</div><div class="line"><span class="function">Pt <span class="title">getIntersection</span><span class="params">(Pt p, Pt l1, Pt q, Pt l2)</span> </span>&#123;</div><div class="line">    <span class="keyword">double</span> a1, a2, b1, b2, c1, c2;</div><div class="line">    <span class="keyword">double</span> dx, dy, d;</div><div class="line">    a1 = l1.y, b1 = -l1.x, c1 = a1 * p.x + b1 * p.y;</div><div class="line">    a2 = l2.y, b2 = -l2.x, c2 = a2 * q.x + b2 * q.y;</div><div class="line">    d = a1 * b2 - a2 * b1;</div><div class="line">    dx = b2 * c1 - b1 * c2;</div><div class="line">    dy = a1 * c2 - a2 * c1;</div><div class="line">    <span class="keyword">return</span> Pt(dx / d, dy / d);</div><div class="line">&#125;</div><div class="line"><span class="function">Pt <span class="title">circle</span><span class="params">(Pt a, Pt b, Pt c)</span> </span>&#123;</div><div class="line">    Pt mab = (a + b)/<span class="number">2</span>;</div><div class="line">    Pt mbc = (b + c)/<span class="number">2</span>;</div><div class="line">    Pt lab = b - a, lbc = c - b;</div><div class="line">    swap(lab.x, lab.y);</div><div class="line">    swap(lbc.x, lbc.y);</div><div class="line">    lab.x = -lab.x;</div><div class="line">    lbc.x = -lbc.x;</div><div class="line">    <span class="keyword">return</span> getIntersection(mab, lab, mbc, lbc);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> n;</div><div class="line">    Pt D[<span class="number">128</span>];</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) == <span class="number">1</span> &amp;&amp; n) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%lf %lf"</span>, &amp;D[i].x, &amp;D[i].y);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> ret = min(<span class="number">2</span>, n);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; j++) &#123;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k = j + <span class="number">1</span>; k &lt; n; k++) &#123;</div><div class="line">                    <span class="keyword">if</span>(<span class="built_in">fabs</span>(cross(D[i], D[j], D[k])) &lt; eps)</div><div class="line">                        <span class="keyword">continue</span>;</div><div class="line">                    Pt o = circle(D[i], D[j], D[k]);</div><div class="line"><span class="comment">//					printf("%lf %lf %lf %lf %lf %lf\n", D[i].x, D[i].y, D[j].x, D[j].y, D[k].x, D[k].y);</span></div><div class="line"><span class="comment">//					printf("circle %lf %lf\n", o.x, o.y);</span></div><div class="line">                    <span class="keyword">double</span> d = dist2(o, D[i]);</div><div class="line">                    <span class="keyword">int</span> cnt = <span class="number">0</span>;</div><div class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> p = <span class="number">0</span>; p &lt; n; p++) &#123;</div><div class="line">                        <span class="keyword">if</span>(<span class="built_in">fabs</span>(d - dist2(D[p], o)) &lt; eps)</div><div class="line">                            cnt++;</div><div class="line">                    &#125;</div><div class="line">                    ret = max(ret, cnt);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ret);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-12206" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/06/oj/uva/uva-12206/" class="article-date">
  <time datetime="2014-07-06T07:51:25.000Z" itemprop="datePublished">2014-07-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/06/oj/uva/uva-12206/">UVa 12206 - Stammering Aliens</a>
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/07/06/oj/uva/uva-12206/" data-id="ckxv1wnry02yfa8vnjk25r5iz" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/07/06/oj/uva/uva-12206/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SA/">SA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Suffix-Array/">Suffix Array</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/二分/">二分</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/後綴數組/">後綴數組</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Dr. Ellie Arroway has established contact with an extraterrestrial civilization. However, all efforts to decode their messages have failed so far because, as luck would have it, they have stumbled upon a race of stuttering aliens! Her team has found out that, in every long enough message, the most important words appear repeated a certain number of times as a sequence of consecutive characters, even in the middle of other words. Furthermore, sometimes they use contractions in an obscure manner. For example, if they need to say bab twice, they might just send the message babab, which has been abbreviated because the second b of the first word can be reused as the first b of the second one.</p>
<p>Thus, the message contains possibly overlapping repetitions of the same words over and over again. As a result, Ellie turns to you, S.R. Hadden, for help in identifying the gist of the message.</p>
<p>Given an integer m, and a string s, representing the message, your task is to find the longest substring of s that appears at least m times. For example, in the message baaaababababbababbab, the length-5 word babab is contained 3 times, namely at positions 5, 7 and 12 (where indices start at zero). No substring appearing 3 or more times is longer (see the first example from the sample input). On the other hand, no substring appears 11 times or more (see example 2).</p>
<p>In case there are several solutions, the substring with the rightmost occurrence is preferred (see example 3).</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The input contains several test cases. Each test case consists of a line with an integer m (m<span>$\ge$</span><!-- Has MathJax -->1), the minimum number of repetitions, followed by a line containing a string s of length between m and 40 000, inclusive. All characters in s are lowercase characters from <code>a&#39;&#39; to</code>z’’. The last test case is denoted by m = 0 and must not be processed.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>Print one line of output for each test case. If there is no solution, output none; otherwise, print two integers in a line, separated by a space. The first integer denotes the maximum length of a substring appearing at least m times; the second integer gives the rightmost possible starting position of such a substring.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">3</div><div class="line">baaaababababbababbab</div><div class="line">11</div><div class="line">baaaababababbababbab</div><div class="line">3</div><div class="line">cccccc</div><div class="line">0</div></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">5 12</div><div class="line">none</div><div class="line">4 2</div></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p><strong> 題目描述： </strong></p>
<p>對於一個字串，找到一段最長子字串出現至少 m 次，若存有多個輸出最右邊位置的子字串。</p>
<p><strong> 題目解法： </strong></p>
<p>建造後綴數組，得到高度數組後，二分搜索長度，然後掃描高度數組找尋是否有連續大於等於 m 次的區間。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SuffixArray</span> &#123;</span></div><div class="line">    <span class="keyword">int</span> sa[<span class="number">40005</span>], h[<span class="number">40005</span>], n;</div><div class="line">    <span class="keyword">int</span> w[<span class="number">40005</span>], ta[<span class="number">40005</span>], tb[<span class="number">40005</span>];</div><div class="line">    <span class="keyword">char</span> str[<span class="number">40005</span>];</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span> *x, <span class="keyword">int</span> *y, <span class="keyword">int</span> m)</span> </span>&#123;</div><div class="line">        <span class="keyword">static</span> <span class="keyword">int</span> i;</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; m; i++)</div><div class="line">            w[i] = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">            w[x[y[i]]]++;</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; m; i++)</div><div class="line">            w[i] += w[i<span class="number">-1</span>];</div><div class="line">        <span class="keyword">for</span>(i = n<span class="number">-1</span>; i &gt;= <span class="number">0</span>; i--)</div><div class="line">            sa[--w[x[y[i]]]] = y[i];</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> *r, <span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> l)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>(r[a] == r[b]) &#123;</div><div class="line">            <span class="keyword">if</span>(a+l &gt;= n || b+l &gt;= n)</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">            <span class="keyword">return</span> r[a+l] == r[b+l];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">build_h</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> i, j, k;</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; i++)  ta[sa[i]] = i;</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="keyword">if</span>(ta[i] == <span class="number">0</span>) &#123;</div><div class="line">                h[ta[i]] = <span class="number">0</span>;</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(i == <span class="number">0</span> || h[ta[i<span class="number">-1</span>]] &lt;= <span class="number">1</span>)</div><div class="line">                k = <span class="number">0</span>;</div><div class="line">            <span class="keyword">else</span></div><div class="line">                k = h[ta[i<span class="number">-1</span>]]<span class="number">-1</span>;</div><div class="line">            <span class="keyword">while</span>(str[sa[ta[i]<span class="number">-1</span>]+k] == str[sa[ta[i]]+k])</div><div class="line">                k++;</div><div class="line">            h[ta[i]] = k;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span> </span>&#123;<span class="comment">// x: rank, y: second key</span></div><div class="line">        <span class="keyword">int</span> i, k, m = <span class="number">128</span>, p;</div><div class="line">        <span class="keyword">int</span> *x = ta, *y = tb, *z;</div><div class="line">        n = <span class="built_in">strlen</span>(str);</div><div class="line">        x[n] = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">            x[i] = str[i], y[i] = i;</div><div class="line">        sort(x, y, m);</div><div class="line">        <span class="keyword">for</span>(k = <span class="number">1</span>, p = <span class="number">1</span>; p &lt; n; k *= <span class="number">2</span>, m = p) &#123;</div><div class="line">            <span class="keyword">for</span>(p = <span class="number">0</span>, i = n-k; i &lt; n; i++)</div><div class="line">                y[p++] = i;</div><div class="line">            <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">                <span class="keyword">if</span>(sa[i] &gt;= k) &#123;</div><div class="line">                    y[p++] = sa[i]-k;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            sort(x, y, m);</div><div class="line">            z = x, x = y, y = z;</div><div class="line">            <span class="keyword">for</span>(i = <span class="number">1</span>, p = <span class="number">1</span>, x[sa[<span class="number">0</span>]] = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">                x[sa[i]] = cmp(y, sa[i<span class="number">-1</span>], sa[i], k) ? p<span class="number">-1</span> : p++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">SuffixArray in;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="comment">//	freopen("in.txt", "r+t", stdin);</span></div><div class="line"><span class="comment">//	freopen("out.txt", "w+t", stdout); </span></div><div class="line">    <span class="keyword">int</span> m;</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;m) == <span class="number">1</span> &amp;&amp; m) &#123;</div><div class="line">    	<span class="built_in">scanf</span>(<span class="string">"%s"</span>, in.str);</div><div class="line">        in.build();</div><div class="line">        in.build_h();</div><div class="line">        <span class="keyword">if</span>(m == <span class="number">1</span>) &#123;</div><div class="line">        	<span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, in.n, <span class="number">0</span>);</div><div class="line">        	<span class="keyword">continue</span>;</div><div class="line">    	&#125;</div><div class="line"><span class="comment">//        for(int i = 0; i &lt; in.n; i++)</span></div><div class="line"><span class="comment">//        	printf("%s %d\n", in.str + in.sa[i], in.h[i]);</span></div><div class="line">        <span class="keyword">int</span> l = <span class="number">1</span>, r = in.n, mid, ret = <span class="number">-1</span>, retpos;</div><div class="line">        <span class="keyword">while</span>(l &lt;= r) &#123;</div><div class="line">        	mid = (l + r)/<span class="number">2</span>;</div><div class="line">        	<span class="keyword">int</span> cnt = <span class="number">1</span>, mxtime = <span class="number">0</span>, mxpos = <span class="number">0</span>;</div><div class="line">        	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= in.n; i++) &#123;</div><div class="line">        		<span class="keyword">if</span>(i != in.n &amp;&amp; in.h[i] &gt;= mid)</div><div class="line">        			cnt++;</div><div class="line">        		<span class="keyword">else</span> &#123;</div><div class="line">        			<span class="keyword">if</span>(mxtime &lt; cnt)</div><div class="line">        				mxtime = cnt;</div><div class="line">        			<span class="keyword">if</span>(cnt &gt;= m) &#123;</div><div class="line">        				<span class="keyword">int</span> j = i;</div><div class="line">        				<span class="keyword">do</span> &#123;</div><div class="line">        					j--;</div><div class="line">        					mxpos = max(mxpos, in.sa[j]);</div><div class="line">        				&#125; <span class="keyword">while</span>(in.h[j] &gt;= mid &amp;&amp; j &gt;= <span class="number">0</span>);</div><div class="line">        			&#125;</div><div class="line">        			cnt = <span class="number">1</span>;</div><div class="line">        		&#125;</div><div class="line">        	&#125;</div><div class="line">        	<span class="keyword">if</span>(mxtime &gt;= m)</div><div class="line">        		l = mid + <span class="number">1</span>, ret = mid, retpos = mxpos;</div><div class="line">        	<span class="keyword">else</span></div><div class="line">        		r = mid - <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(ret == <span class="number">-1</span>)</div><div class="line">        	<span class="built_in">puts</span>(<span class="string">"none"</span>);</div><div class="line">        <span class="keyword">else</span></div><div class="line">        	<span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, ret, retpos);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">1</span></div><div class="line"><span class="comment">aaaaa</span></div><div class="line"><span class="comment">2</span></div><div class="line"><span class="comment">ufzyetzjulljnkbaohjsqpiucxjo</span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/categories/解題區/page/54/">&laquo; Prev</a><a class="page-number" href="/categories/解題區/">1</a><span class="space">&hellip;</span><a class="page-number" href="/categories/解題區/page/53/">53</a><a class="page-number" href="/categories/解題區/page/54/">54</a><span class="page-number current">55</span><a class="page-number" href="/categories/解題區/page/56/">56</a><a class="page-number" href="/categories/解題區/page/57/">57</a><span class="space">&hellip;</span><a class="page-number" href="/categories/解題區/page/64/">64</a><a class="extend next" rel="next" href="/categories/解題區/page/56/">Next &raquo;</a>
    </nav>
  
</section>
          
          
            <aside id="sidebar">
  <!-- <div id="ukagaka_panel"></div> -->
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/">學校課程</a><span class="category-list-count">115</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/介面設計/">介面設計</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/作業系統/">作業系統</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/即時系統/">即時系統</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/大學專題/">大學專題</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/巨量資料/">巨量資料</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/平行程式/">平行程式</a><span class="category-list-count">43</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/敏捷方法/">敏捷方法</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/數位影像生成/">數位影像生成</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/編譯器/">編譯器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/自然語言/">自然語言</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/虛擬實境/">虛擬實境</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算型智慧/">計算型智慧</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算幾何/">計算幾何</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算機圖學/">計算機圖學</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資料庫系統/">資料庫系統</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資訊安全/">資訊安全</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/通識課程/">通識課程</a><span class="category-list-count">14</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/">工作應用</a><span class="category-list-count">38</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/Java/">Java</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/Meme/">Meme</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/其他/">其他</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/可持久化/">可持久化</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作應用/鬼故事/">鬼故事</a><span class="category-list-count">14</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/手札日記/">手札日記</a><span class="category-list-count">55</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/">網頁設計</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/About-This-Blog/">About This Blog</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/HTML5/">HTML5</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/JQuery/">JQuery</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/Markdown/">Markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/NodeJs/">NodeJs</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/">解題區</a><span class="category-list-count">633</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/Latex/">Latex</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/出題解題/">出題解題</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-POJ/">解題區 - POJ</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a><span class="category-list-count">483</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a><span class="category-list-count">77</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-其他題目/">解題區 - 其他題目</a><span class="category-list-count">45</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-未解題目/">解題區 - 未解題目</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/雜言筆記/">雜言筆記</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a class="text" href="/2022/01/01/note/clove-letter/">
              
                <i class="icon-file-o"></i> 
              
            《獻上給某工程師的情書》</a>
          </li>
        
          <li>
            <a class="text" href="/2021/12/31/note/diary-20211231-encrypt/">
              
                <i class="icon-file-o"></i> 
              
            《批改娘串起得那段經歷·陸》</a>
          </li>
        
          <li>
            <a class="text" href="/2021/12/26/note/diary-20211226-encrypt/">
              
                <i class="icon-file-o"></i> 
              
            《批改娘串起得那段經歷·伍》</a>
          </li>
        
          <li>
            <a class="text" href="/2021/11/21/note/diary-20211121-encrypt/">
              
                <i class="icon-file-o"></i> 
              
            《批改娘串起得那段經歷·肆》</a>
          </li>
        
          <li>
            <a class="text" href="/2021/11/12/note/diary-20211112-encrypt/">
              
                <i class="icon-file-o"></i> 
              
            《批改娘串起得那段經歷·參》</a>
          </li>
        
          <li>
            <a class="text" href="/2021/10/31/note/diary-20211031-encrypt/">
              
                <i class="icon-file-o"></i> 
              
            《批改娘串起得那段經歷·貳》</a>
          </li>
        
          <li>
            <a class="text" href="/2021/10/28/note/diary-202110-encrypt/">
              
                <i class="icon-file-o"></i> 
              
            《批改娘串起得那段經歷·序》</a>
          </li>
        
          <li>
            <a class="text" href="/2021/10/28/note/diary-202110/">
              
                <i class="icon-file-o"></i> 
              
            好多個 28 在這個時刻</a>
          </li>
        
          <li>
            <a class="text" href="/2021/10/28/work/company-ghost-story-14/">
              
                <i class="icon-file-o"></i> 
              
            Company Ghost Story 公司鬼故事 14</a>
          </li>
        
          <li>
            <a class="text" href="/2021/09/12/work/appreciation-letter/">
              
                <i class="icon-file-o"></i> 
              
            Shiny People 感謝</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget-wrap">
    <h3 class="widget-title">Links</h3>
    <div class="widget">   
        <ul>
          <li><a href="http://mypaper.pchome.com.tw/zerojudge" target="_blank" title="Old Blog"><i class="icon-star"></i> Morris' Blog (pchome)</a></li>
        </ul>
    </div>
</div>

  
    
<script src="/js/jquery-ui.js"></script>
<script src="/js/ukagaka/jquery.morris.ukagaka.resource.js"></script>
<script src="/js/ukagaka/typed.js"></script>
  
  
</aside>
          
        
      </div>
      <footer id="footer">
  
  <div class="outer">    
    <div class="social-group">
      
      <a href="https://github.com/morris821028" target="_blank" title="github"><i class="icon-github"></i></a>
      
      
      <a href="https://www.facebook.com/Morris1028" target="_blank" title="facebook"><i class="icon-facebook-sign"></i></a>
      
      
      <a href="http://uhunt.felix-halim.net/id/46705" target="_blank" title="uhunt" ><span class="icon-uhunt">UVa<span></a>
      
    </div>
    <div id="footer-info" class="inner">
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and Theme by <a href="https://github.com/morris821028/hexo-theme-landscape" target="_blank" title="landscape">landscape</a> &copy; 2022 Shiang-Yun Yang 
    </div>
  </div>
</footer>


    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link"><i class=icon-home ></i>&nbsp&nbspHome</a>
  
    <a href="/about" class="mobile-nav-link"><i class=icon-user ></i>&nbsp&nbspAbout</a>
  
    <a href="/archives" class="mobile-nav-link"><i class=icon-archive ></i>&nbsp&nbspArchives</a>
  
    <a href="/tags" class="mobile-nav-link"><i class=icon-tags ></i>&nbsp&nbspTags</a>
  
    <a href="/picture" class="mobile-nav-link"><i class=icon-camera ></i>&nbsp&nbspPictures</a>
  
    <a href="/works" class="mobile-nav-link"><i class=icon-trophy ></i>&nbsp&nbspWorks</a>
  
</nav>
    
<script>
  var disqus_shortname = 'morris1028';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/jquery.lazyload.js"></script>
<script src="/js/jquery.als-1.6.js"></script>

<script src="/js/script.js"></script>

  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>