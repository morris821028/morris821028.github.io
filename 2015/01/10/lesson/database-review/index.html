<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>資料庫複習 Ch.12 | Morris&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Chapter 12E/R Model Entity-Relationship Model 實體關係模型  The E/R model allows us to sketch database schema designs.  協助描繪資料庫 schema 設計，藉由 E/R model 映射到資料庫的 Relation model。 名詞定義  Entity  = “thing” or obje">
<meta name="keywords" content="資料庫系統">
<meta property="og:type" content="article">
<meta property="og:title" content="資料庫複習 Ch.12">
<meta property="og:url" content="http://morris821028.github.io/2015/01/10/lesson/database-review/index.html">
<meta property="og:site_name" content="Morris&#39; Blog">
<meta property="og:description" content="Chapter 12E/R Model Entity-Relationship Model 實體關係模型  The E/R model allows us to sketch database schema designs.  協助描繪資料庫 schema 設計，藉由 E/R model 映射到資料庫的 Relation model。 名詞定義  Entity  = “thing” or obje">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2016-04-20T11:50:22.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="資料庫複習 Ch.12">
<meta name="twitter:description" content="Chapter 12E/R Model Entity-Relationship Model 實體關係模型  The E/R model allows us to sketch database schema designs.  協助描繪資料庫 schema 設計，藉由 E/R model 映射到資料庫的 Relation model。 名詞定義  Entity  = “thing” or obje">
<link rel="publisher" href="108158678174364350000">
  
    <link rel="alternative" href="/atom.xml" title="Morris&#39; Blog" type="application/atom+xml">
  
  
    <meta name="google-site-verification" content="5mRgj8NanEMpGZuNfHNJNmH90RgNlrnJXsFlTaKD6Gs" />
  
  
    <link rel="shortcut icon" href="/img/f.ico">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <script src="/js/jquery-2.1.0.min.js"></script>
  <link rel="stylesheet" href="/css/style.css">
  
  <link rel="stylesheet" href="http://cdn.oesmith.co.uk/morris-0.5.1.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="http://cdn.oesmith.co.uk/morris-0.5.1.min.js"></script>
  <!-- <link rel="import" href="/bower_components/app-layout/app-layout.html"> --><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"><div id="banner-right"></div></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Morris&#39; Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          
            <a class="main-nav-link" href="/"><i class=icon-home title='Home'></i></a>
          
        
          
            <a class="main-nav-link" href="/about"><i class=icon-user title='About'></i></a>
          
        
          
            <a class="main-nav-link" href="/archives"><i class=icon-archive title='Archives'></i></a>
          
        
          
            <a class="main-nav-link" href="/tags"><i class=icon-tags title='Tags'></i></a>
          
        
          
            <a class="main-nav-link" href="/picture"><i class=icon-camera title='Pictures'></i></a>
          
        
          
            <a class="main-nav-link" href="/works"><i class=icon-trophy title='Works'></i></a>
          
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://morris821028.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        
          
          <section id="main" style="width: 95%"><article id="post-lesson/database-review" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/01/10/lesson/database-review/" class="article-date">
  <time datetime="2015-01-10T01:08:30.000Z" itemprop="datePublished">2015-01-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/學校課程/">學校課程</a>/<a class="article-category-link" href="/categories/學校課程/資料庫系統/">資料庫系統</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      資料庫複習 Ch.12
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2015/01/10/lesson/database-review/" data-id="cl4l93ibw02bl6cvn1vtd4zgm" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2015/01/10/lesson/database-review/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/資料庫系統/">資料庫系統</a></li></ul>

    </footer>
    <div class="article-entry " itemprop="articleBody">
      
          
              <div id="toc" class="toc-article">
              <h2 class="toc-title"><span>contents</span></h2>
              
                  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Chapter-12"><span class="toc-number">1.</span> <span class="toc-text">Chapter 12</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#E-R-Model"><span class="toc-number">1.1.</span> <span class="toc-text">E/R Model</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#名詞定義"><span class="toc-number">1.2.</span> <span class="toc-text">名詞定義</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Design-Techniques"><span class="toc-number">1.3.</span> <span class="toc-text">Design Techniques</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#From-E-R-Diagrams-to-Relations"><span class="toc-number">1.4.</span> <span class="toc-text">From E/R Diagrams to Relations</span></a></li></ol></li></ol>
              
              </div>
          
        
          <h2 id="Chapter-12"><a href="#Chapter-12" class="headerlink" title="Chapter 12"></a>Chapter 12</h2><h3 id="E-R-Model"><a href="#E-R-Model" class="headerlink" title="E/R Model"></a>E/R Model</h3><blockquote>
<p>Entity-Relationship Model 實體關係模型</p>
</blockquote>
<p>The E/R model allows us to sketch database schema designs. </p>
<p>協助描繪資料庫 schema 設計，藉由 E/R model 映射到資料庫的 Relation model。</p>
<h3 id="名詞定義"><a href="#名詞定義" class="headerlink" title="名詞定義"></a>名詞定義</h3><ul>
<li><strong> Entity </strong> = “thing” or object.<br>實體，對應到現實生活中的名詞，例如蘋果 mac2013、微軟 win8、 … 等。單指一個、一件實體存在。</li>
<li><strong> Entity set </strong> = collection of similar entities.<br>很多類似的實體產生的集合，例如計算機、員工 … 等實體集合。<br>Similar to a class in object-oriented languages.</li>
<li><strong> Attribute </strong> = property of (the entities of) an entity set.<br>屬性，通常是一個數值的呈現，例如計算機的運算能力、員工薪資、 … 等。<br>Attributes are simple values, e.g. integers or character strings, not structs, sets, etc.</li>
</ul>
<p>繪製 E/R Diagrams 時，呈現方式</p>
<ul>
<li><strong> Entity set </strong> = rectangle.<br>實體集合使用矩形圖表示</li>
<li><strong> Attribute </strong> = oval,<br>屬性使用橢圓表示，並且連到實體集合，表示這些實體集合都具有這些屬性特徵。<br>with a line to the rectangle representing its entity set.</li>
<li><p><strong> Relationships </strong> = diamond.<br>用菱形連接兩個以上的實體集合，表示實體集合之間的關係。<br>A relationship connects two or more entity sets, with lines to each of the entity sets involved.</p>
</li>
<li><p><strong> Relationship Set </strong><br>The “value” of a relationship is a relationship set, a set of tuples with one component for each related entity set.<br>For the relationship <strong> Sells </strong>, we might have a relationship set like:  </p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Bar</th>
<th>Beer</th>
</tr>
</thead>
<tbody>
<tr>
<td>Joe’s Bar</td>
<td>Bud</td>
</tr>
<tr>
<td>Joe’s Bar</td>
<td>Miller</td>
</tr>
<tr>
<td>Sue’s Bar</td>
<td>Bud</td>
</tr>
<tr>
<td>Sue’s Bar</td>
<td>Pete’s Ale</td>
</tr>
<tr>
<td>Sue’s Bar</td>
<td>Bud Lite</td>
</tr>
</tbody>
</table>
<ul>
<li><strong> Multiway Relationships </strong><br>Our three binary relationships <strong> Likes </strong>, <strong> Sells </strong> , and <strong> Frequents </strong> do not allow us to make this distinction.   </li>
</ul>
<table>
<thead>
<tr>
<th>Bar</th>
<th>Drinker</th>
<th>Beer</th>
</tr>
</thead>
<tbody>
<tr>
<td>Joe’s Bar</td>
<td>Ann</td>
<td>Miller</td>
</tr>
<tr>
<td>Sue’s Bar</td>
<td>Ann</td>
<td>Bud</td>
</tr>
<tr>
<td>Sue’s Bar</td>
<td>Ann</td>
<td>Pete’s Ale</td>
</tr>
<tr>
<td>Joe’s Bar</td>
<td>Bob</td>
<td>Bud</td>
</tr>
<tr>
<td>Joe’s Bar</td>
<td>Bob</td>
<td>Miller</td>
</tr>
<tr>
<td>Joe’s Bar</td>
<td>Cal</td>
<td>Miller</td>
</tr>
<tr>
<td>Sue’s Bar</td>
<td>Cal</td>
<td>Bud Lite</td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong> Rounded arrow </strong> = “exactly one,”<br>實心箭頭表示確切對應一個關係，如果一個人會喜愛好幾種酒，其中最愛某一種。<br>i.e., each entity of the first set is related to exactly one entity of the target set.</p>
</li>
<li><p><strong> Roles </strong><br>Label the edges between the relationship and the entity set with names called roles.<br>例如丈夫、妻子之間的關係、夥伴之間的關係。</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Husband</th>
<th>Wife</th>
</tr>
</thead>
<tbody>
<tr>
<td>Bob</td>
<td>Ann</td>
</tr>
<tr>
<td>Joe</td>
<td>Sue</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Buddy1</th>
<th>Buddy2</th>
</tr>
</thead>
<tbody>
<tr>
<td>Bob</td>
<td>Ann</td>
</tr>
<tr>
<td>Joe</td>
<td>Sue</td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong> Subclass </strong> = special case = fewer entities = more properties.<br>從物件導向來說，一個繼承關係，得到的 Subclass 會繼承原本的 Class 的特徵、關係，有可能會具有額外的特徵。<br>Let us suppose that in addition to all the <strong> properties </strong> (attributes and relationships) of beers, ales also have the attribute <strong> color </strong>. Isa triangles (<strong> is a </strong> 的三角形) indicate the subclass relationship. Point to the superclass (指向父類別).</p>
<ul>
<li>比較 OO 和 E/R 對 subclass 的定義<br>  也就是說，OO 只會用 is a 描述一個 subclass 的繼承關係。但在 E/R model 中，isa 相當一個欄位，用來描述它是哪一個子類別，也就是說在紀錄時，如果它在某一個子類別時，那麼在父類別中也會記錄到它。<ul>
<li>In OO, objects are in one class only. Subclasses inherit from superclasses.</li>
<li>In contrast, E/R entities have representatives  in all subclasses to which they belong.<ul>
<li><strong> Rule </strong>: if entity e is represented in a subclass, then e is represented in the superclass (and recursively up the tree).</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong> Key </strong><br>Key 是一個 attribute 的集合構成，得到 <em> f(Key) = at most one entity </em>。繪製時，使用底線 (underline) 於作為 key attribute 表示。<br>is a set of attributes for one entity set such that no two entities in this set agree on all the attributes of the key.</p>
</li>
<li><p><strong> Weak Entity Sets </strong><br>為了去辨識某個實體，必須倚靠一對一、或者多對一的關係，來確切地找到某個實體。<br>Entity set <em> E </em>  is said to be <strong> weak </strong> if in order to identify entities of <em> E </em> uniquely, we need to follow one or more many-one relationships from <em> E </em> and include the key of the related entities from the connected entity sets.</p>
<ul>
<li>例如 Player(name, nubmer) - Plays_on -&gt; Team(name)。當知道 Team 是哪一個時，才能辨識出 Player，否則名稱跟號碼可能會在不同隊中出現重複的。因此 Player 就是一個 <strong> Weak Entity Sets </strong>。</li>
</ul>
</li>
<li><p><strong> Weak Entity-Set Rules </strong><br>A weak entity set has one or more many-one relationships to other (supporting) entity sets.<br>  並不是每一個 relationship 都是 weak entity set 需要的支持。然而被需要的 relationship 必然擁有一個 <strong> rounded arrow </strong>。<br>The key for a weak entity set is its own underlined attributes and the keys for the supporting entity sets.<br>  例如在之前的例子，可以使用 (player) number 和 (team) name 作為 Player 的 key。</p>
</li>
</ul>
<h3 id="Design-Techniques"><a href="#Design-Techniques" class="headerlink" title="Design Techniques"></a>Design Techniques</h3><ul>
<li>Design Techniques<ul>
<li>Avoid redundancy.<br>避免冗餘</li>
<li>Limit the use of weak entity sets.<br>限制 weak entity set 的使用</li>
<li>Don’t use an entity set when an attribute will do.<br>如果能使用一個 attribute 表示，則無需增加一個 entity set 單獨表示一個 attribute。</li>
</ul>
</li>
</ul>
<p>分別對應以下幾點。</p>
<ul>
<li><p><strong> Redundancy </strong>  = saying the same thing in two (or more) different ways<br>存在用好幾種方法說一件事情，或者提及某個屬性。</p>
</li>
<li><p><strong> Entity Sets Versus Attributes </strong><br>對應實體集合的屬性，要符合以下兩點，屬性應為很多實體共同擁有的名稱，並且擁有至少一個 nokey 屬性，或者屬於 many-one 或 many-many 關係中，many 那一方的 entity set。<br>An entity set should satisfy at least one of the following conditions:</p>
<ul>
<li>It is more than the name of something; it has at least one nonkey attribute. or</li>
<li>It is the “many” in a many-one or many-many relationship</li>
</ul>
</li>
<li><p>Weak Entity Sets 使用須知</p>
<ul>
<li>避免濫用，通常能夠創建一個 unique ID 來表示一個實體。</li>
<li>當真的找不到一個普遍性的 unique ID 時，才會逼不得已使用 Weak entity set.</li>
</ul>
</li>
</ul>
<h3 id="From-E-R-Diagrams-to-Relations"><a href="#From-E-R-Diagrams-to-Relations" class="headerlink" title="From E/R Diagrams to Relations"></a>From E/R Diagrams to Relations</h3><p>關於對應的名詞如下，轉換時找 attribute 時，E/R Diagrams 中的 relationships 也會成為一個 relation ，attribute 的找法，可以從關聯的 entity set 的 key 或者是關係的定義本身。</p>
<ul>
<li>Entity set -&gt; relation.</li>
<li>Attributes -&gt; attributes.</li>
<li><p>Relationships -&gt; relations whose attributes are only:</p>
<ul>
<li>The keys of the connected entity sets.<br>將相連的實體集合的 key 值都拿來作為 attribute。</li>
<li>Attributes of the relationship itself.</li>
</ul>
</li>
<li><p><strong> Combining Relations </strong><br>結合 Relation，減少 Relation 的個數，將多對一的 relationships 表單，而實體集合屬於 many 的那一方，則可以把 one 那一方結合在一起。切記一定要是多對一，如果是多對多則會造成冗餘發生。</p>
<ul>
<li>The relation for an entity-set <em> E </em></li>
<li>The relations for many-one relationships of which <em> E </em> is the “many.”</li>
<li>Example: Drinkers(name, addr) and Favorite(drinker, beer) combine to make Drinker1(name, addr, favBeer).</li>
</ul>
</li>
</ul>
<ul>
<li><p><strong> Handling Weak Entity Sets </strong><br>解決 weak entity set 轉化成 relation 時，必然要為它準備一個 complete key 來辨識不同實體於關連到不同的實體集合。如果一個 supporting relationship 不具有 attribute，而且屬於一個冗餘的紀錄，那麼把 relationship 另一方 “one” 的 entity set 的 key 值加入到 weak entity set 所創建的 relation。<br>從之前的例子，把球隊名稱 team(name) 加入到 Player(number, name) 中，變成 relation Player(number, team_name, name)，這是在之前的 Combining Relations 中，就已經得到的結果，因此就可以忽略。</p>
<ul>
<li>Relation for a weak entity set must include attributes for its complete key (including those belonging to other entity sets), as well as its own, nonkey attributes.</li>
<li>A supporting relationship is redundant and yields no relation (unless it  has attributes).</li>
</ul>
</li>
<li><p><strong> Subclasses: Three Approaches </strong></p>
<ul>
<li>Object-oriented : One relation per subset of subclasses, with all relevant attributes.<br>父類別和子類別分開，各自成為一個 relation。</li>
<li>Use nulls : One relation; entities have NULL in attributes that don’t belong to them.<br>把子類別的屬性上提，如果父類別不存在該屬性則填入 null。</li>
<li>E/R style : One relation for each subclass:<br>存在父類別和子類別的 relation，但是共同屬性都會在父類別中，子類別只保留 key 和新增加的屬性。<ul>
<li>Key attribute(s).</li>
<li>Attributes of that subclass.</li>
</ul>
</li>
</ul>
</li>
</ul>

        
      
    </div>

  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/01/10/lesson/database-review2/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          資料庫複習 Ch.13
        
      </div>
    </a>
  
  
    <a href="/2015/01/10/uva-11186/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">UVa 11186 - Circum Triangle</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
          
          
        
      </div>
      <footer id="footer">
  
  <div class="outer">    
    <div class="social-group">
      
      <a href="https://github.com/morris821028" target="_blank" title="github"><i class="icon-github"></i></a>
      
      
      <a href="https://www.facebook.com/Morris1028" target="_blank" title="facebook"><i class="icon-facebook-sign"></i></a>
      
      
      <a href="http://uhunt.felix-halim.net/id/46705" target="_blank" title="uhunt" ><span class="icon-uhunt">UVa<span></a>
      
    </div>
    <div id="footer-info" class="inner">
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and Theme by <a href="https://github.com/morris821028/hexo-theme-landscape" target="_blank" title="landscape">landscape</a> &copy; 2022 Shiang-Yun Yang 
    </div>
  </div>
</footer>


    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link"><i class=icon-home ></i>&nbsp&nbspHome</a>
  
    <a href="/about" class="mobile-nav-link"><i class=icon-user ></i>&nbsp&nbspAbout</a>
  
    <a href="/archives" class="mobile-nav-link"><i class=icon-archive ></i>&nbsp&nbspArchives</a>
  
    <a href="/tags" class="mobile-nav-link"><i class=icon-tags ></i>&nbsp&nbspTags</a>
  
    <a href="/picture" class="mobile-nav-link"><i class=icon-camera ></i>&nbsp&nbspPictures</a>
  
    <a href="/works" class="mobile-nav-link"><i class=icon-trophy ></i>&nbsp&nbspWorks</a>
  
</nav>
    
<script>
  var disqus_shortname = 'morris1028';
  
  var disqus_url = 'http://morris821028.github.io/2015/01/10/lesson/database-review/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/jquery.lazyload.js"></script>
<script src="/js/jquery.als-1.6.js"></script>

<script src="/js/script.js"></script>

  </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>