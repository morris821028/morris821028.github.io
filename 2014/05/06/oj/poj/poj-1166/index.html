<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>POJ 1166 - The Clocks | Morris&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Description1234567891011121314151617181920212223|-------|    |-------|    |-------||       |    |       |    |   |   ||---O   |    |---O   |    |   O   ||       |    |       |    |       ||-------|">
<meta name="keywords" content="bfs">
<meta property="og:type" content="article">
<meta property="og:title" content="POJ 1166 - The Clocks">
<meta property="og:url" content="http://morris821028.github.io/2014/05/06/oj/poj/poj-1166/index.html">
<meta property="og:site_name" content="Morris&#39; Blog">
<meta property="og:description" content="Description1234567891011121314151617181920212223|-------|    |-------|    |-------||       |    |       |    |   |   ||---O   |    |---O   |    |   O   ||       |    |       |    |       ||-------|">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2016-04-20T11:50:22.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="POJ 1166 - The Clocks">
<meta name="twitter:description" content="Description1234567891011121314151617181920212223|-------|    |-------|    |-------||       |    |       |    |   |   ||---O   |    |---O   |    |   O   ||       |    |       |    |       ||-------|">
<link rel="publisher" href="108158678174364350000">
  
    <link rel="alternative" href="/atom.xml" title="Morris&#39; Blog" type="application/atom+xml">
  
  
    <meta name="google-site-verification" content="5mRgj8NanEMpGZuNfHNJNmH90RgNlrnJXsFlTaKD6Gs" />
  
  
    <link rel="shortcut icon" href="/img/f.ico">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <script src="/js/jquery-2.1.0.min.js"></script>
  <link rel="stylesheet" href="/css/style.css">
  
  <link rel="stylesheet" href="http://cdn.oesmith.co.uk/morris-0.5.1.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="http://cdn.oesmith.co.uk/morris-0.5.1.min.js"></script>
  <link rel="import" href="/bower_components/app-layout/app-layout.html"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"><div id="banner-right"></div></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Morris&#39; Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          
            <a class="main-nav-link" href="/"><i class=icon-home title='Home'></i></a>
          
        
          
            <a class="main-nav-link" href="/about"><i class=icon-user title='About'></i></a>
          
        
          
            <a class="main-nav-link" href="/archives"><i class=icon-archive title='Archives'></i></a>
          
        
          
            <a class="main-nav-link" href="/tags"><i class=icon-tags title='Tags'></i></a>
          
        
          
            <a class="main-nav-link" href="/picture"><i class=icon-camera title='Pictures'></i></a>
          
        
          
            <a class="main-nav-link" href="/works"><i class=icon-trophy title='Works'></i></a>
          
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://morris821028.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        
          
          <section id="main" style="width: 95%"><article id="post-oj/poj/poj-1166" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/06/oj/poj/poj-1166/" class="article-date">
  <time datetime="2014-05-06T00:34:56.000Z" itemprop="datePublished">2014-05-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>/<a class="article-category-link" href="/categories/解題區/解題區-POJ/">解題區 - POJ</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      POJ 1166 - The Clocks
    </h1>
  

      </header>
    
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/06/oj/poj/poj-1166/" data-id="ckpaivcay00ecn8vnaaz738ri" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/06/oj/poj/poj-1166/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bfs/">bfs</a></li></ul>

    </footer>
    <div class="article-entry " itemprop="articleBody">
      
          
              <div id="toc" class="toc-article">
              <h2 class="toc-title"><span>contents</span></h2>
              
                  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Description"><span class="toc-number">1.</span> <span class="toc-text">Description</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Input"><span class="toc-number">2.</span> <span class="toc-text">Input</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Output"><span class="toc-number">3.</span> <span class="toc-text">Output</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sample-Input"><span class="toc-number">4.</span> <span class="toc-text">Sample Input</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sample-Output"><span class="toc-number">5.</span> <span class="toc-text">Sample Output</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Solution"><span class="toc-number">6.</span> <span class="toc-text">Solution</span></a></li></ol>
              
              </div>
          
        
          <h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">|-------|    |-------|    |-------|</span><br><span class="line">|       |    |       |    |   |   |</span><br><span class="line">|---O   |    |---O   |    |   O   |</span><br><span class="line">|       |    |       |    |       |</span><br><span class="line">|-------|    |-------|    |-------|</span><br><span class="line"></span><br><span class="line">    A            B            C    </span><br><span class="line"></span><br><span class="line">|-------|    |-------|    |-------|</span><br><span class="line">|       |    |       |    |       |</span><br><span class="line">|   O   |    |   O   |    |   O   |</span><br><span class="line">|   |   |    |   |   |    |   |   |</span><br><span class="line">|-------|    |-------|    |-------|</span><br><span class="line"></span><br><span class="line">    D            E            F    </span><br><span class="line"></span><br><span class="line">|-------|    |-------|    |-------|</span><br><span class="line">|       |    |       |    |       |</span><br><span class="line">|   O   |    |   O---|    |   O   |</span><br><span class="line">|   |   |    |       |    |   |   |</span><br><span class="line">|-------|    |-------|    |-------|</span><br><span class="line"></span><br><span class="line">    G            H            I    </span><br></pre></td></tr></table></figure>
<p>(Figure 1)</p>
<p>There are nine clocks in a 3*3 array (figure 1). The goal is to return all the dials to 12 o’clock with as few moves as possible. There are nine different allowed ways to turn the dials on the clocks. Each such way is called a move. Select for each move a number 1 to 9. That number will turn the dials 90’ (degrees) clockwise on those clocks which are affected according to figure 2 below.</p>
<table>
<thead>
<tr>
<th align="center">Move</th>
<th align="left">Affected clocks</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="left">ABDE</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left">ABC</td>
</tr>
<tr>
<td align="center">3</td>
<td align="left">BCEF</td>
</tr>
<tr>
<td align="center">4</td>
<td align="left">ADG</td>
</tr>
<tr>
<td align="center">5</td>
<td align="left">BDEFH</td>
</tr>
<tr>
<td align="center">6</td>
<td align="left">CFI</td>
</tr>
<tr>
<td align="center">7</td>
<td align="left">DEGH</td>
</tr>
<tr>
<td align="center">8</td>
<td align="left">GHI</td>
</tr>
<tr>
<td align="center">9</td>
<td align="left">EFHI</td>
</tr>
</tbody></table>
<p>   (Figure 2)</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>Your program is to read from standard input. Nine numbers give the start positions of the dials. 0=12 o’clock, 1=3 o’clock, 2=6 o’clock, 3=9 o’clock.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>Your program is to write to standard output. Output a shortest sorted sequence of moves (numbers), which returns all the dials to 12 o’clock. You are convinced that the answer is unique.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3 3 0</span><br><span class="line">2 2 2</span><br><span class="line">2 1 2</span><br></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4 5 8 9</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>原來之前寫過這一題，請參閱 <a href="http://zerojudge.tw/ShowProblem?problemid=d730">d730: 升旗典礼 ——加强版</a></p>
<p>用 BFS 從 <code>0 0 0 0 0 0 0 0 0</code> 開始倒推回去，在 mark 的部份，用 4 進制 bitmask。</p>
<p>這題在 POJ 似乎只有一組測資，在 Zerojudge 則有非常多筆測資。</p>
<p>而事實上網路上還有另外一個高斯消去法，先預求反矩陣，之後直接帶入計算即可。沒有仔細去研究，不過聽說那解法限定一定有合法解，如何判定不合法解又是另外一個問題。總之，用了 BFS 過了就沒仔細去探討其他解法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">char mark[1&lt;&lt;18] = &#123;&#125;, ans[1&lt;&lt;18], best[1&lt;&lt;18];</span><br><span class="line">char dirp[4] = &#123;-3, 1, 1, 1&#125;;</span><br><span class="line">int next[1&lt;&lt;18] = &#123;&#125;;</span><br><span class="line">int pow4[10] = &#123;1&#125;;</span><br><span class="line">int move[10][7] = &#123; &#123;&#125;,</span><br><span class="line">                 	&#123;1, 2, 4, 5, 0&#125;,</span><br><span class="line">                 	&#123;1, 2, 3, 0&#125;,</span><br><span class="line">                 	&#123;2, 3, 5, 6, 0&#125;,</span><br><span class="line">                 	&#123;1, 4, 7, 0&#125;,</span><br><span class="line">                 	&#123;2, 4, 5, 6, 8, 0&#125;,</span><br><span class="line">                 	&#123;3, 6, 9, 0&#125;,</span><br><span class="line">                 	&#123;4, 5, 7, 8, 0&#125;,</span><br><span class="line">                 	&#123;7, 8, 9, 0&#125;,</span><br><span class="line">                 	&#123;5, 6, 8, 9, 0&#125;</span><br><span class="line">                   &#125;;</span><br><span class="line">void trans(int N, char s[]) &#123;</span><br><span class="line">    int i = 0;</span><br><span class="line">    while(N) &#123;</span><br><span class="line">        s[i++] = N%4, N /= 4;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">void build() &#123;</span><br><span class="line">    int a, b, c, qt = 0, t, p;</span><br><span class="line">    queue&lt;int&gt; Q;</span><br><span class="line">    best[0] = 0, mark[0] = 1;</span><br><span class="line">    Q.push(0);</span><br><span class="line">    while(!Q.empty()) &#123;</span><br><span class="line">    	int state = Q.front();</span><br><span class="line">    	Q.pop();</span><br><span class="line">    	char buf[10] = &#123;&#125;;</span><br><span class="line">    	trans(state, buf);</span><br><span class="line">    	for(int i = 1; i &lt; 10; i++) &#123;</span><br><span class="line">    		int nstate = state;</span><br><span class="line">    		for(int j = 0; move[i][j]; j++)</span><br><span class="line">    			nstate -= pow4[move[i][j] - 1] * dirp[buf[move[i][j] - 1]];</span><br><span class="line">    		if(mark[nstate] == 0) &#123;</span><br><span class="line">    			mark[nstate] = 1;</span><br><span class="line">    			next[nstate] = state;</span><br><span class="line">                best[nstate] = best[state] + 1;</span><br><span class="line">                ans[nstate] = i + &#x27;0&#x27;;</span><br><span class="line">    			Q.push(nstate);</span><br><span class="line">    		&#125;</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">int print_f = 0;</span><br><span class="line">void Print(int state) &#123;</span><br><span class="line">    if(state) &#123;</span><br><span class="line">        Print(next[state]);</span><br><span class="line">        if(print_f)</span><br><span class="line">            putchar(&#x27; &#x27;);</span><br><span class="line">        print_f = 1;</span><br><span class="line">        putchar(ans[state]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">    for(int i = 1; i &lt; 10; i++)</span><br><span class="line">        pow4[i] = pow4[i-1] * 4;</span><br><span class="line">    build();</span><br><span class="line">    while(true) &#123;</span><br><span class="line">    	int state = 0, x;</span><br><span class="line">        for(int i = 0; i &lt; 9; i++) &#123;</span><br><span class="line">            if(scanf(&quot;%d&quot;, &amp;x) != 1)</span><br><span class="line">            	return 0;</span><br><span class="line">            state |= x * pow4[i];</span><br><span class="line">        &#125;</span><br><span class="line">        print_f = 0;</span><br><span class="line">        Print(state);</span><br><span class="line">        puts(&quot;&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
        
      
    </div>

  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/05/07/oj/uva/uva-1572/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          UVa 1572 - Self-Assembly
        
      </div>
    </a>
  
  
    <a href="/2014/05/06/oj/uva/uva-10040/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">UVa 10040 - Ouroboros Snake</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
          
          
        
      </div>
      <footer id="footer">
  
  <div class="outer">    
    <div class="social-group">
      
      <a href="https://github.com/morris821028" target="_blank" title="github"><i class="icon-github"></i></a>
      
      
      <a href="https://www.facebook.com/Morris1028" target="_blank" title="facebook"><i class="icon-facebook-sign"></i></a>
      
      
      <a href="http://uhunt.felix-halim.net/id/46705" target="_blank" title="uhunt" ><span class="icon-uhunt">UVa<span></a>
      
    </div>
    <div id="footer-info" class="inner">
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and Theme by <a href="https://github.com/morris821028/hexo-theme-landscape" target="_blank" title="landscape">landscape</a> &copy; 2021 Shiang-Yun Yang 
    </div>
  </div>
</footer>


    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link"><i class=icon-home ></i>&nbsp&nbspHome</a>
  
    <a href="/about" class="mobile-nav-link"><i class=icon-user ></i>&nbsp&nbspAbout</a>
  
    <a href="/archives" class="mobile-nav-link"><i class=icon-archive ></i>&nbsp&nbspArchives</a>
  
    <a href="/tags" class="mobile-nav-link"><i class=icon-tags ></i>&nbsp&nbspTags</a>
  
    <a href="/picture" class="mobile-nav-link"><i class=icon-camera ></i>&nbsp&nbspPictures</a>
  
    <a href="/works" class="mobile-nav-link"><i class=icon-trophy ></i>&nbsp&nbspWorks</a>
  
</nav>
    
<script>
  var disqus_shortname = 'morris1028';
  
  var disqus_url = 'http://morris821028.github.io/2014/05/06/oj/poj/poj-1166/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/jquery.lazyload.js"></script>
<script src="/js/jquery.als-1.6.js"></script>

<script src="/js/script.js"></script>

  </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>